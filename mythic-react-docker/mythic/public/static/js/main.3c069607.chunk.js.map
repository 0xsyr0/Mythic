{"version":3,"sources":["components/pages/Callbacks/CallbacksTabsTaskingFilterDialog.js","components/pages/Callbacks/CallbacksTabsTaskingInputTokenSelect.js","components/pages/Callbacks/CallbacksTabsTaskingInput.js","components/pages/Callbacks/CallbacksTabsTasking.js","components/MythicComponents/MythicDialog.js","components/pages/Callbacks/TaskFromUIButton.js","components/utilities/Clipboard.js","cache.js","components/MythicComponents/MythicTextField.js","themes/Themes.js","components/utilities/useSingleAndDoubleClick.js","components/MythicComponents/MythicResizableGrid/styles.js","components/MythicComponents/MythicResizableGrid/HeaderCell.js","components/MythicComponents/MythicResizableGrid/Cell.js","components/MythicComponents/MythicResizableGrid/DraggableHandles.js","components/MythicComponents/MythicResizableGrid/MythicResizableGrid.js","components/MythicComponents/MythicResizableGrid/index.js","components/pages/Search/CredentialTableNewCredentialDialog.js","components/MythicComponents/MythicStyledTooltip.js","components/MythicComponents/MythicDisplayTextDialog.js","components/pages/Callbacks/TaskDisplay.js","components/pages/Callbacks/TaskParametersDialogRow.js","components/MythicComponents/MythicFileUpload.js","components/pages/Callbacks/TaskParametersDialog.js","components/MythicComponents/MythicSelectFromListDialog.js","components/pages/Callbacks/ResponseDisplayScreenshotModal.js","components/pages/Callbacks/TaskTokenDialog.js","components/pages/Callbacks/ResponseDisplayPlaintext.js","components/utilities/Snackbar.js","components/pages/Callbacks/TaskDisplayContainer.js","components/pages/Callbacks/ResponseDisplay.js","components/pages/Callbacks/ResponseDisplayScreenshot.js","components/MythicComponents/MythicTabPanel.js","components/pages/Callbacks/ResponseDisplayDownload.js","components/pages/Callbacks/ResponseDisplaySearch.js","components/pages/Callbacks/TaskCommentDialog.js","components/pages/Callbacks/TaskTagDialog.js","components/pages/Callbacks/TaskOpsecDialog.js","components/pages/Callbacks/TaskViewParametersDialog.js","components/pages/Callbacks/TaskViewStdoutStderrDialog.js","components/pages/Callbacks/ResponseDisplayTableDialogTable.js","components/pages/Callbacks/ResponseDisplayTable.js","components/utilities/Time.js","components/MythicComponents/MythicConfirmDialog.js","../node_modules/yargs-parser sync","assets/mythic.svg","components/pages/Login/LoginForm.js","components/pages/Settings/SettingsOperatorAPIToken.js","components/pages/Settings/SettingsOperatorDialog.js","components/pages/Settings/SettingsOperatorDeleteDialog.js","components/pages/Settings/SettingsOperator.js","components/pages/Settings/SettingsOperatorTable.js","components/pages/Settings/Settings.js","components/pages/PayloadTypesC2Profiles/PayloadTypeBuildDialog.js","components/pages/PayloadTypesC2Profiles/PayloadTypeCard.js","components/pages/PayloadTypesC2Profiles/PayloadTypeContainerDisplay.js","components/pages/PayloadTypesC2Profiles/C2ProfileBuildDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileOutputDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileConfigDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileStartStopOutputDialog.js","components/pages/CreatePayload/CreatePayloadParameter.js","components/pages/CreatePayload/CreatePayloadC2ProfileParametersTable.js","components/pages/PayloadTypesC2Profiles/C2ProfileSavedInstancesDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfilesCard.js","components/pages/PayloadTypesC2Profiles/C2ProfileContainerDisplay.js","components/pages/PayloadTypesC2Profiles/TranslationContainerCard.js","components/pages/PayloadTypesC2Profiles/TranslationContainerDisplay.js","components/pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles.js","components/pages/CreatePayload/CreatePayloadNavigationButtons.js","components/pages/CreatePayload/Step1SelectOS.js","components/pages/CreatePayload/CreatePayloadBuildParametersTable.js","components/pages/CreatePayload/Step2SelectPayloadType.js","components/pages/CreatePayload/Step3SelectCommands.js","components/pages/CreatePayload/Step4C2Profiles.js","components/pages/CreatePayload/PayloadSubscriptionNotification.js","components/pages/CreatePayload/Step5Build.js","components/pages/CreatePayload/CreatePayload.js","components/pages/CreateWrapper/CreatePayloadNavigationButtons.js","components/pages/CreateWrapper/Step1SelectOS.js","components/pages/CreateWrapper/CreatePayloadParameter.js","components/pages/CreateWrapper/CreatePayloadBuildParametersTable.js","components/pages/CreateWrapper/Step2SelectPayloadType.js","components/pages/Payloads/DetailedPayloadTable.js","components/pages/CreateWrapper/Step3SelectPayload.js","components/pages/CreateWrapper/PayloadSubscriptionNotification.js","components/pages/CreateWrapper/Step5Build.js","components/pages/CreateWrapper/CreatePayload.js","components/pages/EventFeed/EventFeedTableEventsActions.js","components/pages/EventFeed/EventFeedTableEvents.js","components/pages/EventFeed/EventFeedTableInput.js","components/pages/EventFeed/EventFeedTable.js","components/pages/EventFeed/EventFeed.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialogRow.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialog.js","components/pages/Operations/OperationTableRowNotificationsDialog.js","components/pages/Operations/OperationTableRow.js","components/pages/Operations/OperationTable.js","components/pages/Operations/EditBlockListDialog.js","components/pages/Operations/CommandBlockListTable.js","components/pages/Operations/Operations.js","components/pages/BrowserScripts/EditScriptDialog.js","components/pages/BrowserScripts/BrowserScriptsTableRow.js","components/pages/BrowserScripts/BrowserScriptsTable.js","components/pages/BrowserScripts/BrowserScriptsOperationsTableRow.js","components/pages/BrowserScripts/BrowserScriptsOperationsTable.js","components/pages/BrowserScripts/BrowserScripts.js","components/pages/Payloads/PayloadDescriptionDialog.js","components/pages/Payloads/PayloadFilenameDialog.js","components/pages/Payloads/PayloadBuildMessageDialog.js","components/pages/Payloads/PayloadsTableRowC2Status.js","components/pages/Payloads/PayloadsTableRowBuildStatus.js","components/pages/Payloads/PayloadConfigCheckDialog.js","components/pages/Payloads/PayloadRedirectRulesDialog.js","components/pages/Payloads/PayloadsTableRow.js","components/pages/Payloads/ImportPayloadConfigDialog.js","components/pages/Payloads/PayloadsTable.js","components/pages/Payloads/Payloads.js","components/pages/Callbacks/D3ContextMenu.js","components/pages/Callbacks/C2PathDialog.js","components/pages/ExpandedCallback/ExpandedCallbackSideDetails.js","components/pages/ExpandedCallback/ExpandedCallback.js","components/pages/Home/QuickStartCard.js","components/pages/Home/AgentC2Overview.js","components/pages/Home/Home.js","components/utilities/LoggedInRoute.js","components/MythicComponents/MythicFileBrowserVirtualTree.js","components/pages/Callbacks/CallbacksTabsFileBrowserTree.js","components/pages/Callbacks/DownloadHistoryDialog.js","components/pages/Callbacks/TableFilterDialog.js","components/MythicComponents/MythicTransferList.js","components/pages/Callbacks/CallbacksTabsFileBrowserTable.js","components/pages/Callbacks/CallbacksTabsFileBrowser.js","components/MythicComponents/MythicProcessBrowserVirtualTree.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTree.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTable.js","components/pages/Callbacks/CallbacksTabsProcessBrowser.js","components/pages/Callbacks/CallbacksTabs.js","components/pages/Callbacks/HeightsDialog.js","components/pages/Callbacks/CallbackMutations.js","components/pages/Callbacks/DetailedCallbackTable.js","components/pages/Callbacks/CallbacksTabsTaskMultipleDialog.js","components/pages/Callbacks/CallbacksTabsHideMultipleDialog.js","components/pages/Callbacks/CallbacksTableRow.js","components/pages/Callbacks/CallbacksTable.js","components/pages/Callbacks/ManuallyAddEdgeDialog.js","components/pages/Callbacks/CallbacksGraph.js","components/pages/Callbacks/CallbacksTop.js","components/pages/Callbacks/Callbacks.js","components/pages/Search/SearchTabTasks.js","components/MythicComponents/MythicSnackDownload.js","components/pages/Search/FileMetaTable.js","components/pages/Search/FileBrowserTable.js","components/pages/Search/SearchTabFiles.js","components/pages/Search/CredentialTable.js","components/pages/Search/SearchTabCredentials.js","components/pages/Search/KeylogsTable.js","components/pages/Search/SearchTabKeylog.js","components/pages/Search/TokenDescriptionDialog.js","components/pages/Search/TokenTable.js","components/pages/Search/SearchTabTokens.js","components/pages/Search/CallbackSearchTable.js","components/pages/Search/SearchTabCallbacks.js","components/pages/Search/ArtifactTable.js","components/pages/Search/SearchTabArtifacts.js","components/pages/Search/SocksSearchTable.js","components/pages/Search/SearchTabSocks.js","components/pages/Search/Search.js","components/TopAppBarNotifications.js","components/EventFeedNotifications.js","components/mythic_red_small.svg","components/TopAppBar.js","components/utilities/useDarkMode.js","components/pages/SingleTaskView/TaskArtifactsTable.js","components/pages/SingleTaskView/TaskMITREATTACKTable.js","components/pages/SingleTaskView/TaskFilesTable.js","components/pages/SingleTaskView/TaskCredentialsTable.js","components/pages/SingleTaskView/MetadataTable.js","components/pages/SingleTaskView/IncludeMoreTasksDialog.js","components/pages/SingleTaskView/SingleTaskView.js","themes/GlobalStyles.js","components/pages/Reporting/ReportingTable.js","components/pages/Reporting/Reporting.js","components/pages/MITRE_ATTACK/MitreMapDisplayDialog.js","components/pages/MITRE_ATTACK/MitreGridRow.js","components/pages/MITRE_ATTACK/MitreGridColumn.js","components/pages/MITRE_ATTACK/SelectPayloadTypeDialog.js","components/pages/MITRE_ATTACK/MitreGrid.js","components/pages/MITRE_ATTACK/MitreAttack.js","components/App.js","index.js"],"names":["MenuProps","PaperProps","style","maxHeight","ITEM_HEIGHT","width","variant","getContentAnchorEl","useStyles","makeStyles","theme","formControl","margin","spacing","chips","display","flexWrap","chip","noLabel","marginTop","operatorQuery","gql","CallbacksTabsTaskingFilterDialog","props","me","useReactiveVar","meState","React","useState","onlyOperators","setOnlyOperators","operatorUsernames","setOperatorUsernames","onlyHasComments","setOnlyHasComments","onlyCommands","setOnlyCommands","everythingBut","setEverythingBut","onlyParameters","setOnlyParameters","commandOptions","setCommandOptions","classes","useQuery","variables","operation_id","user","current_operation_id","onCompleted","data","operation_by_pk","operators","map","op","username","useEffect","undefined","filterOptions","filterCommandOptions","commandOptionNames","c","cmd","Fragment","DialogTitle","id","DialogContent","dividers","overflow","FormControl","className","InputLabel","Select","labelId","multiple","value","onChange","event","target","input","Input","renderValue","selected","Chip","label","name","MenuItem","Checkbox","color","checked","indexOf","ListItemText","primary","Switch","inputProps","length","MythicTextField","error","DialogActions","Button","onClick","onClose","onSubmit","CallbacksTabsTaskingInputTokenSelect","options","setOptions","setSelected","inputRef","useRef","opts","changeSelectedToken","ref","User","tokenId","opt","token","TokenId","description","GetLoadedCommandsSubscription","subscriptionCallbackTokens","subscriptionTask","CallbacksTabsTaskingInputPreMemo","snackMessageStyles","anchorOrigin","vertical","horizontal","autoHideDuration","preventDuplicate","maxSnack","marginBottom","snackReverseSearchMessageStyles","message","setMessage","loadedOptions","setLoadedOptions","taskOptions","setTaskOptions","taskOptionsIndex","setTaskOptionsIndex","filteredTaskOptions","setFilteredTaskOptions","tabOptions","setTabOptions","tabOptionsIndex","setTabOptionsIndex","openFilterOptionsDialog","setOpenFilterOptionsDialog","tokenOptions","setTokenOptions","unmodifiedHistoryValue","setUnmodifiedHistoryValue","reverseSearching","setReverseSearching","reverseSearchString","setReverseSearchString","reverseSearchOptions","setReverseSearchOptions","reverseSearchIndex","setReverseSearchIndex","mountedRef","useSubscription","callback_id","fetchPolicy","shouldResubscribe","onSubscriptionData","subscriptionData","current","parentMountedRef","callbacktoken","task","filteredOptions","filter","applyFilteringToTasks","cmds","loadedcommands","cmdData","command","attributes","JSON","parse","push","commandparameters","supported_os","sort","a","b","display_params","includes","operator","comment","command_name","RegExp","test","parseCommandLine","command_line","stringArgs","booleanArgs","arrayArgs","numberArgs","i","parameter_type","cli_name","argv","str","res","sQuoted","dQuoted","notEmpty","buffer","split","forEach","v","s","slice","SyntaxError","parseToArgv","parser","string","boolean","number","array","configuration","snackActions","warning","determineCommandGroupName","parsed","cmdGroupOptions","reduce","prev","cur","parameter_group_name","Object","keys","key","paramGroups","intersection","onSubmitCommandLine","evt","force_parsed_popup","preventDefault","stopPropagation","splitMessage","find","l","cmdGroupName","parsedWithPositionalParameters","params","join","groupNames","parsedCopy","shift","usedGroupName","groupParameters","ui_position","unSatisfiedArguments","fillOutPositionalArguments","console","log","Boolean","TextField","placeholder","onKeyDown","newIndex","original_params","lowerCaseTextSearch","toLowerCase","filteredMatches","x","size","autoFocus","fullWidth","InputProps","type","startAdornment","Typography","ctrlKey","newMessage","pieces","lastFlag","startsWith","cmdGroupNames","paramOptions","toLocaleLowerCase","newMsg","entries","endsWith","trim","info","callback_os","shiftKey","tasking_location","disabled","endAdornment","IconButton","MythicDialog","maxWidth","open","innerDialog","onSubmitFilter","CallbacksTabsTaskingInput","memo","CallbacksTabsTaskingLabel","tabInfo","payloadDescription","callbackDescription","callbackID","setDescription","openEditDescriptionDialog","setOpenEditDescriptionDialog","customDescription","onContextMenu","title","onEditTabDescription","taskingDataFragment","createTaskingMutation","getTaskingQuery","getNextBatchTaskingQuery","CallbacksTabsTaskingPanel","index","onCloseTab","taskLimit","setTaskLimit","openParametersDialog","setOpenParametersDialog","commandInfo","setCommandInfo","taskingData","setTaskingData","taskingDataRef","Date","toISOString","fromNow","selectedToken","setSelectedToken","setFilterOptions","canScroll","setCanScroll","fetched","setFetched","fetchedAllTasks","setFetchedAllTasks","messagesEndRef","useMutation","update","cache","createTask","status","success","onError","subscriptionDataCallback","useCallback","oldLength","mergedData","findIndex","element","oldArray","newArray","commentOperator","completed","timestamp","opsec_pre_blocked","opsec_pre_bypassed","opsec_post_blocked","opsec_post_bypassed","tasks","equalTaskTrees","limit","scrollToBottom","scrollIntoView","behavior","useLayoutEffect","useLazyQuery","foundNew","callback","getInfiniteScrollTasking","loadingMore","loading","offset","fetchLimit","onCreateTask","files","token_id","MythicTabPanel","MythicStyledTooltip","marginLeft","LinearProgress","thickness","paddingTop","overflowY","flexGrow","TaskDisplay","command_id","newFilter","previousTaskingLocation","newTaskingLocation","fileParamExists","param","missingRequiredPrams","missingParams","required","groupName","stringify","os","TaskParametersDialog","payloadtype_id","parameters","selectedParameterGroup","descriptionElementRef","descriptionElement","focus","scroll","MythicModifyStringDialog","setComment","onCommitSubmit","onEnter","MythicViewJSONAsTableDialog","tableType","setTableType","headers","setHeaders","permissions","permissionDict","constructor","Array","isArray","leftColumn","rightColumn","elevation","position","component","Paper","header","hover","wordBreak","whiteSpace","row","MythicViewObjectPropertiesAsTableDialog","getLoadedCommandsQuery","TaskFromUIButton","ui_feature","onTasked","getConfirmation","openDialog","fileBrowserCommands","setFileBrowserCommands","openSelectCommandDialog","setOpenSelectCommandDialog","selectedCommand","setSelectedCommand","callbackTokenOptions","setCallbackTokenOptions","selectedCallbackToken","setSelectedCallbackToken","openCallbackTokenSelectDialog","setOpenCallbackTokenSelectDialog","taskingVariables","setTaskingVariables","openConfirmDialog","setOpenConfirmDialog","savedFinalVariables","tasked","callbackData","callback_by_pk","active","availableCommands","availableTokens","callbacktokens","onSubmitTasking","taskingLocation","action","identifier","payload","payloadtype","dontCloseOnSubmit","copyStringToClipboard","el","document","createElement","setAttribute","left","body","appendChild","select","execCommand","removeChild","toString","makeVar","loggedIn","access_token","refresh_token","menuOpen","successfulLogin","localStorage","setItem","successfulRefresh","getItem","FailedRefresh","removeItem","ValidationTextField","withStyles","root","borderColor","borderWidth","borderLeftWidth","padding","validate","checkError","onKeyPress","this","requiredValue","InputLabelProps","inputLabelProps","multiline","helperText","errorText","Component","muiTheme","createMuiTheme","palette","main","secondary","useSingleAndDoubleClick","onSingleClick","onDoubleClick","delay","click","setClick","timer","setTimeout","clearTimeout","headerCellRow","flexDirection","top","right","zIndex","headerCell","alignItems","boxSizing","justifyContent","userSelect","backgroundColor","background","paper","borderTop","tableHover","borderRight","borderBottom","borderLeft","cursor","hoveredRow","cell","fontFamily","cellInner","overflowX","textOverflow","draggableHandlesContainer","draggableHandlesClickArea","pointerEvents","draggableHandlesIndicator","backgroundImage","HeaderCell","contextMenuOptions","sortIndicatorIndex","sortDirection","headerNameKey","VariableSizeGridProps","rowIndex","columnIndex","dropdownAnchorRef","useTheme","item","items","isFiltered","filtered","handleClick","e","handleDoubleClick","openContextMenu","setOpenContextMenu","handleContextClick","disableFilterMenu","handleClose","contains","handleClicks","Box","toUpperCase","icon","faFilter","Popper","anchorEl","role","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","dark","light","ClickAwayListener","onClickAway","MenuList","option","handleMenuItemClick","CellPreMemo","rowClassName","gridUUID","onDoubleClickRow","cellStyle","cellData","rowStyle","rowData","onMouseEnter","cells","getElementsByClassName","classList","add","onMouseLeave","remove","Cell","DraggableHandles","forwardRef","height","rowHeight","minColumnWidth","columnWidths","onStop","isDragging","setIsDragging","_","leftOffset","axis","bounds","Number","POSITIVE_INFINITY","bottom","y","onStart","MIN_COLUMN_WIDTH","CellRenderer","ResizableGridWrapper","columns","onClickHeader","widthMeasureKey","AutoSizerProps","scrollbarWidth","useScrollbarSize","column","setColumnWidths","gridRef","dragHandlesRef","getColumnWidth","useMemo","Math","random","substring","getRowHeight","totalWidth","updatedColumnWidths","totalWidthDiff","updatedWidthIndexs","resetAfterColumnIndex","itemsWithHeader","innerElementType","children","rest","disableAutosize","longestElementInColumn","max","itemRow","String","updatedWidths","columnWidth","floor","autosizeColumn","columnCount","rowCount","itemData","overscanRowCount","onScroll","scrollLeft","scrollTo","MythicResizableGrid","CredentialTableNewCredentialDialog","credentialType","setCredentialType","account","setAccount","realm","setRealm","credential","setCredential","tooltip","contrast","text","boxShadow","shadows","fontSize","arrow","other","MythicDisplayTextDialog","taskDataFragment","getSubTaskingQuery","marginRight","heading","typography","pxToRem","secondaryHeading","taskAndTimeDisplay","secondaryHeadingExpanded","verticalAlign","details","accordionUseStyles","content","expandIcon","expanded","MinusSquare","d","PlusSquare","StyledTreeItem","paddingRight","iconContainer","opacity","group","paddingLeft","fade","TaskDisplayPreMemo","nodesSelected","setNodesSelected","toggleTaskTree","task_id","newSelection","TaskRow","toggleSelection","TaskStatusDisplay","ColoredTaskDisplay","themeColor","setThemeColor","minHeight","dropdownOpen","setDropdownOpen","isFetchingSubtasks","setIsFetchingSubtasks","shouldDisplay","setShouldDisplay","notifyOnNetworkStatusChange","stopPolling","startPolling","getSubTasking","getSubTasks","toggleTaskDropdown","nodeId","onIconClick","TaskLabel","tsk","displayComment","setDisplayComment","alertBadges","setAlertBadges","accordionClasses","prevResponseMaxId","scrollContent","currentData","responses","node","isAppearing","getElementById","block","inline","unmountOnExit","onEntered","defaultExpanded","toLocalTime","view_utc_time","badgeContent","getDynamicQueryParams","credentialFragment","createCredentialMutation","TaskParametersDialogRow","setValue","ChoiceOptions","setChoiceOptions","boolValue","setBoolValue","arrayValue","setArrayValue","choiceMultipleValue","setChoiceMultipleValue","agentConnectNewHost","setAgentConnectNewHost","agentConnectHostOptions","setAgentConnectHostOptions","agentConnectNewPayload","setAgentConnectNewPayload","agentConnectHost","setAgentConnectHost","agentConnectPayloadOptions","setAgentConnectPayloadOptions","agentConnectPayload","setAgentConnectPayload","agentConnectC2ProfileOptions","setAgentConnectC2ProfileOptions","agentConnectC2Profile","setAgentConnectC2Profile","openAdditionalPayloadOnHostMenu","setOpenAdditionalPayloadOnHostmenu","createCredentialDialogOpen","setCreateCredentialDialogOpen","fileValue","setFileValue","backdropOpen","setBackdropOpen","usingDynamicParamChoices","dynamic_query_function","choices","getDynamicParams","addedCredential","newLength","insert_credential_one","credential_text","createCredential","parameter_name","payload_type","ptype","hostNum","payloadNum","parseInt","default_value","onChangeAgentConnect","host_index","payload_index","c2_index","c2profileparameters","agentConnectValue","host","agent_uuid","uuid","c2_profile","onChangeValue","onChangeCredentialJSONValue","onChangeChoiceMultiple","onChangeText","onChangeNumber","onSwitchChange","onFileChange","onChangeAgentConnectHost","onChangeAgentConnectPayload","onChangeAgentConnectC2Profile","onChangeAgentConnectNewHost","onChangeAgentConnectNewPayload","onAgentConnectAddNewPayloadOnHost","payload_choices","onAgentConnectRemovePayloadOnHost","payloadOnHostID","testParameterValues","curVal","verifier_regex","addNewArrayValue","onCreateCredential","TableRow","TableCell","display_name","Backdrop","invisible","CircularProgress","native","TableContainer","Table","tableLayout","TableBody","removed","splice","removeArrayValue","n","values","onChangeArrayText","hidden","choice","c2_profile_id","c2profileparameter","crypto_type","enc_key","dec_key","callback_uuid","agent_callback_id","onChangeLinkInfo","TableHead","getParameterObject","UploadTaskFile","file","formData","FormData","append","fetch","method","upload_response","upload_result","json","then","agent_file_id","catch","statusText","GetLoadedCommandsQuery","getAllCommandsQuery","getAllEdgesQuery","getAllPayloadsQuery","getAllPayloadsOnHostsQuery","addPayloadOnHostMutation","removePayloadOnHostMutation","getCommandQuery","getCredentialsQuery","parameterGroups","setParameterGroups","setSelectedParameterGroup","setParameters","rawParameters","setRawParameters","all","loaded","edges","credentials","requiredPieces","setRequiredPieces","getAllCommands","allCommandsLoading","getLoadedCommands","loadedCommandsLoading","getAllEdges","loadedAllEdgesLoading","getAllPayloads","loadedAllPayloadsLoading","getAllPayloadsOnHosts","loadedAllPayloadsOnHostsLoading","getAllCredentials","loadedCredentialsLoading","addPayloadOnHost","RemovePayloadOnHost","requiredPiecesInitial","command_by_pk","choices_are_all_commands","choices_are_loaded_commands","payload_type_id","intersect","setB","Set","has","getLinkInfoFromAgentConnect","getLinkInfoValue","enc_key_base64","dec_key_base64","sorted","parsedParameters","defaultV","choice_filter_by_command_attributes","prevn","match","cmd_attributes","agentConnectNewPayloads","foundP2P","profiles","payloadc2profiles","profile","c2profile","is_p2p","filemetum","filename_text","tag","callbacksOrganized","entry","found","updates","c2info","c2profileparametersinstances","val","c2array","payloadInfo","registered_payload","payloads","organized","payloadonhost","duplicated_payload","p","allOrganized","hostIndex","o","supported_agents","build_requirements","supported_agent_build_parameters","matched","buildparameterinstances","build_param","buildparameter","parameter","edge_choices","callbackgraphedge","edge","source","destination","direction","end_timestamp","newFileUUIDs","collapsedParameters","newUUID","payload_id","Divider","needs_admin","MythicSelectFromListDialog","ResponseDisplayScreenshotModal","images","startIndex","zoom","setZoom","activeStep","setActiveStep","maxSteps","src","steps","nextButton","prevActiveStep","backButton","allTokenDataFragment","getTokenInfo","TaskTokenDialog","tokenData","setTokenData","logonsessionData","setLogonSessionData","authenticationData","setAuthenticationData","tokenKeys","logonsessionKeys","authenticationpackageKeys","token_by_pk","reducedTokenData","logonsession","reducedLogonSessionData","authenticationpackages","reducedAuthenticationData","pkg","pageHeader","pageHeaderText","textAlign","pageHeaderColor","authpkg","ResponseDisplayPlaintext","plaintext","plaintextView","setPlaintextView","newPlaintext","mode","showGutter","highlightActiveLine","minLines","maxLines","showLineNumbers","tabSize","useWorker","useSnackbarRef","SnackbarUtilsConfigurator","useSnackbar","msg","toast","dismiss","closeSnackbar","enqueueSnackbar","ReissueTaskMutationGQL","ReissueTaskHandlerMutationGQL","getAllResponsesLazyQuery","transform","speedDial","TaskDisplayContainer","viewBrowserScript","setViewBrowserScript","commandID","setCommandID","searchOutput","setSearchOutput","selectAllOutput","setSelectAllOutput","toggleViewBrowserScript","toggleSelectAllOutput","toggleOpenSearch","container","SpeedDialDisplay","taskData","viewAllOutput","xs","tooltipPlacement","setTask","openSpeedDial","setOpenSpeedDial","openTaskTagDialog","setOpenTaskTagDialog","openCommentDialog","setOpenCommentDialog","openTokenDialog","setOpenTokenDialog","openStdoutStderrDialog","setOpenStdoutStderrDialog","openOpsecDialog","setOpenOpsecDialog","output","response","Buffer","from","dataBlob","Blob","ele","href","URL","createObjectURL","download","downloadResponses","reissue_task","reissueTask","reissue_task_handler","reissueTaskHandler","ariaLabel","FabProps","TooltipClasses","tooltipTitle","faExpandArrowsAlt","faExternalLinkAlt","window","faBook","subResponsesQuery","getResponsesLazyQuery","getMaxCountQuery","taskScript","ResponseDisplay","setOutput","rawResponses","setRawResponses","highestFetched","search","setSearch","totalCount","setTotalCount","oldSelectAllOutput","openBackdrop","setOpenBackdrop","maxID","responseArray","r","response_aggregate","aggregate","count","fetchMoreResponses","fetchAllResponses","newerResponses","outputResponses","rawResponseArray","highestFetchedId","totalFetchedSoFar","onSubmitSearch","newSearch","disableShrink","SearchBar","ResponseDisplayComponent","PaginationBar","onSubmitPageChange","currentPage","localTotalCount","setTotalcount","maxCount","setMaxCount","setCurrentPage","subscriptionMaxCountCallback","paddingBottom","ceil","page","boundaryCount","onSubmitLocalSearch","localViewBrowserScript","browserScriptData","setBrowserScriptData","script","filterOutput","scriptData","copied","tableUpdates","table","t","filteredRows","rows","foundMatch","browserscriptoperation","unb64script","fun","Function","browserscript","fetchScripts","operator_id","user_id","screenshot","scr","dl","ResponseDisplayScreenshot","openScreenshot","setOpenScreenshot","toUTCString","hoverText","getCallbackData","queryParams","changeSearchParam","a11yProps","MythicTabLabel","selectionFollowsFocus","textColor","indicator","tabID","MythicSearchTabLabel","iconComponent","ResponseDisplayDownload","dowload","startIcon","ResponseDisplaySearch","location","origin","updateCommentMutation","getCommentQuery","TaskCommentDialog","task_by_pk","updateComment","addTaskTagMutation","removeTaskTagMutation","getTaskTagsQuery","button","divider","border","not","TaskTagDialog","newTag","setNewTag","currentTags","tasktag","allTags","setLeft","setRight","setOriginalTags","addTaskTag","removeTaskTag","setChecked","originalTags","leftChecked","rightChecked","handleToggle","currentIndex","newChecked","customList","cardHeader","dense","tabIndex","disableRipple","justify","concat","tasktag_id","updateOpsecRequestMutation","getOpsecQuery","TaskOpsecDialog","opsecMessage","setOpsecMessage","opsecData","setOpsecData","opsec_pre_bypass_user","opsec_pre_message","opsec_post_bypass_user","opsec_post_message","requestOpsecBypass","updateOpsecRequest","getParametersQuery","TaskViewParametersDialog","workingComment","TaskViewStdoutStderrDialog","stdout","stderr","ResponseDisplayTableDialogTable","onCopyToClipboard","getIconName","iconName","faFolderOpen","faFolder","faFileArchive","faBoxOpen","faCog","faFileWord","faFileExcel","faFilePowerpoint","faFilePdf","faDatabase","faKey","faFileCode","faDownload","faUpload","faFileImage","faList","faTrashAlt","faSyringe","faSkullCrossbones","faCamera","faFileAlt","doubleClickRow","ResponseDisplayTableStringCell","copyIcon","faCopy","startIconHoverText","startIconColor","plaintextHoverText","replaceAll","endIcon","endIconHoverText","endIconColor","ResponseDisplayTableNumberCell","getStringSize","bytes","parseFloat","pow","toFixed","ResponseDisplayTableSizeCell","ResponseDisplayTableActionCell","openButton","setOpenButton","openTaskingButton","setOpenTaskingButton","openDictionaryButton","setOpenDictionaryButton","openStringButton","setOpenStringButton","openTableButton","setOpenTableButton","openDropdownButton","setOpenDropdownButton","finishedTasking","finishedViewingData","leftColumnTitle","rightColumnTitle","getButtonObject","ResponseDisplayTable","dataHeight","setDataHeight","maxElements","allData","setAllData","sortKey","sortType","sortData","setSortData","sortedData","tmpData","reverse","gridData","sortColumn","disableSort","date","init_date","toDateString","toTimeString","getTimeDifference","checkin_time","now","getTime","getTimezoneOffset","millisec","abs","seconds","trunc","minutes","hours","days","useInterval","savedCallback","setInterval","clearInterval","MythicConfirmDialog","dialogText","cancelText","acceptText","webpackEmptyContext","req","Error","code","resolve","module","exports","LoginForm","setUsername","password","setPassword","isJWTValid","submit","requestOptions","restartWebsockets","to","locationState","state","pathname","redirectPath","logo","alt","APITokenRow","onDeleteAPIToken","token_value","SettingsOperatorDialog","passwordOld","setPasswordOld","passwordNew","setPasswordNew","DialogContentText","onAccept","SettingsOperatorDeleteDialog","SettingsOperator","setOpen","openUpdate","setOpenUpdateDialog","openDelete","setOpenDeleteDialog","onDeleteOperator","onUsernameChanged","onPasswordChanged","old_password","new_password","onViewUTCChanged","onActiveChanged","last_login","creation_time","admin","onAdminChanged","colSpan","Collapse","in","timeout","gutterBottom","onCreateAPIToken","float","apitokens","SettingsOperatorTable","openNew","setOpenNewDialog","onNewOperator","GET_Operator","operatorsUpdateViewUTCTime","operatorsUpdateAdmin","operatorsUpdateActive","operatorsDelete","operatorsUpdateUsername","newOperatorMutation","operatorsUpdatePassword","createAPITokenMutation","deleteAPITokenMutation","Settings","setOperators","result","update_operator_by_pk","updatedOperators","err","updateUTC","deleteOperator","updateAdmin","updateActive","createAPIToken","delete_apitokens_by_pk","api","deleteAPIToken","createOperator","newOperator","updateUsername","updatePassword","GET_Payload_Details","PayloadTypeBuildDialog","buildParams","setBuildParams","payload_name","buildparameters","defaultParameter","expand","transitions","create","duration","shortest","expandOpen","running","notrunning","StyledAvatar","badge","borderRadius","animation","Badge","PayloadTypeCard","wrappedPayloads","setWrappedPayloads","openBuildingDialog","setOpenBuildingDialog","supportedOS","setSupportedOS","last_heartbeat","wrap_these_payload_types","wrapped","Card","overlap","CardMedia","media","objectFit","CardContent","author","note","alignContent","wrapper","SUB_Payload_Types","PayloadTypeContainerDisplay","payloadTypes","setPayloadTypes","pt","GET_C2_Details","C2ProfileBuildDialog","randomize","format_string","getProfileOutputQuery","C2ProfileOutputDialog","profile_id","getProfileOutput","getProfileConfigQuery","C2ProfileConfigDialog","config","setConfig","filename","downloadContainerFile","atob","onConfigSubmit","btoa","C2ProfileStartStopOutputDialog","CreatePayloadParameter","passedValue","returnAllDictValues","dictValue","setDictValue","dictOptions","setDictOptions","dictSelectOptions","setDictSelectOptions","dictSelectOptionsChoice","setDictSelectOptionsChoice","chooseOptions","setChooseOptions","dateValue","setDateValue","submitDictChange","list","condensed","custom","tmpDate","setDate","getDate","onChangeDate","initial","default_show","dictSelectOptionsInitial","preCount","addDictValEntry","newDictValue","toggleSwitchValue","newVal","utils","DateFnsUtils","Grid","disableToolbar","format","KeyboardButtonProps","newValues","removeDictEntry","updated","onChangeDictKey","onChangeDictVal","selectOpt","CreatePayloadC2ProfileParametersTable","paramName","getProfileInstaceQuery","deleteInstanceMutation","createInstanceMutation","C2ProfileSavedInstancesDialog","instanceName","setInstanceName","selectedInstance","setSelectedInstance","createdInstances","setCreatedInstances","baseParameters","setBaseParameters","currentParameters","setCurrentParameters","c2profile_by_pk","RandExp","gen","localeCompare","c2profileparametersinstance","inst","original","fixedArray","originalPiece","final","getInstanceValues","updatedInstances","instance_name","deleteInstance","create_c2_instance","createInstance","c2Name","parameterName","c2params","c2profile_id","c2_instance","successButton","errorButton","startStopProfileMutation","setProfileConfigMutation","C2ProfilesCard","handleDropdownToggle","prevOpen","handleDropdownClose","startStopProfile","setOpenProfileStartStopDialog","onStartStopProfile","openProfileDialog","setOpenProfileDialog","openProfileConfigDialog","setOpenProfileConfigDialog","openProfileStartStopDialog","openProfileSavedInstancesDialog","setOpenProfileSavedInstancesDialog","uploadContainerFile","configSubmit","faLink","payloadtypec2profiles","container_running","ButtonGroup","file_path","SUB_C2_Profiles","C2ProfileContainerDisplay","setC2profile","TranslationContainerCard","faLanguage","payloadtypes","SUB_Translation_Containers","TranslationContainerDisplay","translationContainers","setTranslationContainers","translationContainersWithPayloads","setTranslationContainersWithPayloads","unassigned","translationcontainer","tr","assigned","PayloadTypesC2Profiles","CreatePayloadNavigationButtons","first","canceled","finished","last","startOver","Link","GET_Payload_Types","Step1SelectOS","setOS","osOptions","setOSOptions","sortedOptions","currentOptions","adds","prevData","align","FormHelperText","CreatePayloadBuildParametersTable","buildParameters","Step2SelectPayloadType","selectedPayloadType","setSelectedPayloadType","fileExtension","setFileExtension","supportsDynamicLoading","setSupportsDynamicLoading","payloadTypeParameters","setSelectedPayloadTypeParameters","buildOptions","file_extension","supports_dynamic_loading","payloadtypedata","newParams","finishedParams","Step3SelectCommands","commands","setCommands","payloadType","allCommands","reason","include_command","build_option_that_sets_include_to_false","selectedCommands","CommandTransferSelect","foundExit","cmdNames","hoveredCommand","setHoveredCommnad","itemKey","initialLeft","initialRight","setHoveredData","innerText","CardHeader","List","valueObj","ListItem","ListItemIcon","Step4C2Profiles","c2Profiles","setC2Profiles","c2","updateC2Parameter","updatedc2","curC2","curc2","FormControlLabel","control","toggleC2Selection","labelPlacement","onChangeCreatedInstanceName","allValid","includedC2","adjustedC2","subscribe_payloads","breakpoints","up","minWidth","fontWeight","actionRoot","icons","collapse","checkIcon","textTransform","SnackMessage","setExpanded","CardActions","clsx","file_id","SnackMessageError","PayloadSubscriptionNotification","build_phase","build_message","persist","build_stderr","create_payload","Step5Build","setFilename","createPayload","createPayloadMutation","final_values","finishedPayload","CreatePayload","setPayload","handleStepData","stepData","handleNext","cancelStep","handleBack","Stepper","alternativeLabel","Step","StepLabel","step","getStepContent","disableNext","selectedPayloadTypeID","setSelectedPayloadTypeID","DetailedPayloadTable","DetailedPayloadInnerTable","setBuildParameters","commandState","payloadcommands","mythic","version","buildParametersState","c2ProfilesState","sha1","md5","j","wrapped_payload_id","Step3SelectPayload","payloadOptions","setPayloadOptions","payloadtype_by_pk","PayloadSelect","selectedPayload","stickyHeader","PayloadsTableRow","onSelected","openDetailedView","setOpenDetailedView","build_error","CreatePayloadWrapper","EventFeedTableEventsActions","setAnchorEl","onUpdateResolution","resolved","currentTarget","ListItemSecondaryAction","Menu","level","onUpdateLevel","getSurroundingEvents","onUpdateDeleted","EventFeedTableEvents","ListItemAvatar","Avatar","disableTypography","textBackgroundColorSuccess","textBackgroundColor","textBackgroundColorMythic","textBackgroundColorError","EventFeedTableInput","onSubmitMessage","Row","EventList","operationeventlog","listRef","createRef","getItemSize","eventlogWithFunctions","oplog","resetAfterIndex","itemCount","itemSize","overscanCount","EventFeedTable","dropDownOptions","loadMore","loadNextError","resolveViewableErrors","resolveAllErrors","GET_Event_Feed","SUB_Event_Feed","GET_Surrounding_Events","Create_Operational_Event_Log","GET_Event_Feed_Next_Error","Update_Deleted","Update_Resolution","Update_Level","Update_ResolveViewableErrors","Update_ResolveAllErrors","EventFeed","setOperationEventLog","setOffset","eventQuerySize","newEvents","indx","updatingPrev","getMoreTasking","getSurroundingEventQuery","getNextError","newOperationEventLog","removedMessage","update_operationeventlog","returning","newMessages","updateDeleted","updatedMessage","update_operationeventlog_by_pk","updatedMessages","updateResolution","updateLevel","updated_ids","updateResolveViewable","updateResolveAllErrors","lower_id","upper_id","resolveIds","ids","OperationTableRowUpdateOperatorsDialogRow","viewMode","setViewMode","blockListName","setBlockListName","view_mode","disabledcommandsprofile","updateOperator","blockListItemIndex","commandBlockLists","cbl","GET_Operations","Update_Lead","Update_OperatorViewMode","Remove_OperatorFromOperation","Add_OperatorsToOperation","OperationTableRowUpdateOperatorsDialog","setAdmin","originalOperators","setOriginalOperators","setCommandBlockLists","allOperators","operatoroperations","updateAssignments","operatoroperation_id","blockListNames","updateOperationLead","addOperators","removeOperatorsMutation","updateOperatorViewMode","newAdmin","admin_id","newOperators","removeOperators","oldMatch","oop","operatoroperation_ids","GET_OperationData","OperationTableRowNotificationsDialog","setName","channel","setChannel","displayName","setDisplayName","iconEmoji","setIconEmoji","iconURL","setIconURL","webhook","setWebhook","webhookMessage","setWebhookMessage","complete","setComplete","webhook_message","icon_emoji","icon_url","onTextChange","onUpdateOperation","updateCurrentOpertionMutation","OperationTableRow","openUpdateNotifications","setOpenUpdateNotifications","openUpdateOperators","setOpenUpdateOperators","updateCurrentOperation","current_operation","Update_Operation","newOperationMutation","OperationTable","openNewOperator","setOpenNewOperatorDialog","update_operation_by_pk","updateOperation","createOperation","onNewOperation","operation","newOperation","operations","PayloadTypeBlockListPreMemo","leftTitle","setLeftTitle","rightTitle","setRightTitle","PayloadTypeBlockList","getPayloadTypesAndCommandsQuery","EditBlockListDialog","dialogTitle","propBlockListName","currentSelected","editable","setSelectedCommands","updatedPayloadTypes","toAdd","toRemove","newBlockListEntry","deleteBlockListMutation","deleteBlockListEntriesMutation","CommandBlockListTable","blockLists","setBlockLists","newBlockList","insert_disabledcommandsprofile","currentBlockLists","newBlockLists","newEntries","newBlockListEntries","deleteBlockList","filteredBlockLists","deleteBlockListEntry","filteredValues","deleted_ids","deleteBlockListEntries","onSubmitEdits","removeEntryIDs","onAcceptDelete","CommandBlockListTableRow","blockedCommandDisplay","setBlockedCommandDisplay","updatedEntries","setUpdatedEntries","newDisplay","commandNames","GET_BlockLists","Operations","setOperations","arrayForm","updatedOperations","getCommandsAndPayloadTypesQuery","EditScriptDialog","setScript","payloadTypeCmdOptions","setPayloadTypeCmdOptions","setAuthor","inputPTRef","inputCMDRef","onSubmitEdit","new","onRevert","BrowserScriptsTableRow","openEdit","setOpenEdit","isApplied","setIsApplied","openDeleteDialog","browserscriptoperations","onDelete","browserscript_id","onToggleActive","user_modified","onSubmitRemoveFromOperation","onSubmitApplyToOperation","container_version","BrowserScriptsTable","openNewScriptDialog","setOpenNewScriptDialog","onSubmitNew","browserscripts","onToggleOperation","BrowserScriptsOperationsTableRow","openViewScript","setOpenViewScript","readOnly","BrowserScriptsOperationsTable","SUB_BrowserScripts","SUB_OperationBrowserScripts","updateBrowserScriptActive","updateBrowserScriptScript","updateBrowserScriptRevert","addBrowserScript","deleteBrowserScriptMutation","BrowserScripts","browserScripts","setBrowserScripts","operationBrowserScripts","setOperationBrowserScripts","scripts","toggleActive","updateScript","revertScript","createBrowserScript","deleteBrowserScript","updateDescriptionMutation","getDescriptionQuery","PayloadDescriptionDialog","payload_by_pk","updateDescription","getFilenameQuery","PayloadFilenameDialog","fileId","setFileId","PayloadBuildMessageDialog","payloadData","setPayloadData","viewError","setViewError","build_stdout","PayloadsTableRowC2Status","PayloadsTableRowBuildStatus","checkPayloadConfigurationQuery","PayloadConfigCheckDialog","config_check","generateRedirectRulesMutation","PayloadRedirectRulesDialog","redirect_rules","rebuildPayloadMutation","exportPayloadConfigQuery","openDescription","setOpenDescriptionDialog","openFilename","setOpenFilenameDialog","openBuildMessage","setOpenBuildMessageDialog","openConfigCheckDialog","setOpenConfigCheckDialog","openRedirectRulesDialog","setOpenRedirectRulesDialog","triggerRebuild","export_payload_config","exportConfig","callback_alert","onAlertChanged","deleted","auto_generated","showDeleted","showAutoGenerated","onRestorePayload","onDeletePayload","ImportPayloadConfigDialog","reader","FileReader","onload","contents","readAsBinaryString","PayloadsTable","onUpdateCallbackAlert","setShowDeleted","setShowAutoGenerated","openPayloadImport","setOpenPayloadImport","history","useHistory","payloadFragment","SUB_Payloads","Get_Payloads","payloadsDelete","payloadsCallbackAlert","restorePayloadMutation","Payloads","setPayloads","deleteFile","payload_ids","deletePayload","update_payload_by_pk","restorePayload","callbackAlert","createContextMenu","g","menuItems","svgId","d3","attr","selectAll","enter","on","menuFactory","pageX","pageY","C2PathDialog","dagreRef","reZoom","setReZoom","drawC2PathElements","callbackgraphedges","rankDir","label_components","packet_flow_view","include_disconnected","show_all_nodes","parent","view_config","node_events","svgGroup","disconnected","disconnectedArrow","connected","connectedArrow","nodeColor","nodeLabelStyle","edgeLabelStyle","add_edge_to_mythic","add_node","setEdge","edge_id","labelStyle","arrowheadStyle","setNode","getLabel","shape","isParent","clusterLabelPos","graphGroup","setParent","add_edge_p2p","createEdge","adjusted_direction","dagreD3","graphlib","Graph","compound","multigraph","directed","setGraph","rankdir","setDefaultEdgeLabel","svg","_groups","call","hasEdge","render","getBoundingClientRect","shapes","circle","bbox","shapeSvg","insert","point","square","candidates","longest","outEdges","graphWidth","graph","graphHeight","zoomScale","min","translateX","translateY","translate","scale","SUB_Edges","ExpandedCallbackSideDetails","ExpandedCallbackSideDetailsTable","displayTime","setDisplayTime","activeEgress","setActiveEgress","activeEgressBool","setActiveEgressBool","openC2Dialog","setOpenC2Dialog","setCallbackgraphedges","callbackgraphedgesAll","setCallbackgraphedgesAll","hasEgressRoute","setHasEgressRoute","callbackEdges","setCallbackEdges","curTime","last_checkin","routes","getEdges","activeOnly","myEdges","foundMore","newEdges","myActiveEdges","locked","locked_operator","integrity_level","ip","external_ip","domain","architecture","pid","sleep_info","process_name","extra_info","SUB_Callbacks","ExpandedCallback","callbackId","useParams","setCallbacks","setTabInfo","tabType","CallbacksTabsTasking","avatar","red","QuickStartCard","subheader","styl","underline","GetC2ProfilesAndPayloadTypes","AgentC2Overview","payloadTypeRows","setPayloadTypeRows","wrappers","setWrappers","c2Headers","payloadRows","payloadc2","wrapperRows","w","Tooltip","wr","Home","LoggedInRoute","rowContainer","depth","rowButtonWrapper","textDecoration","rowButton","rowLabel","visuallyHidden","clip","VirtualTreeRow","onSelectNode","onExpandNode","onCollapseNode","ListProps","handleOnClickButton","isOpen","parent_id","is_file","folderColor","filebrowserobjs_aggregate","name_text","FileBrowserVirtualTree","nodes","openNodes","flattenNode","isLeaf","flat","flattenedNodes","CallbacksTabsFileBrowserTree","treeRoot","fetchFolderData","setTableData","setOpenNodes","nodeData","DownloadHistoryDialog","setHistory","hist","chunks_received","total_chunks","TableFilterDialog","selectedColumn","MythicTransferListDialog","getPermissionsDataQuery","getFileDownloadHistory","updateFileComment","CallbacksTabsFileBrowserTable","setSelectedColumn","columnVisibility","setColumnVisibility","openAdjustColumnsDialog","setOpenAdjustColumnsDialog","fillWidth","visible","tempData","filterRow","onTaskRowAction","FileBrowserTableRowSizeCell","FileBrowserTableRowDateCell","modify_time","FileBrowserTableRowStringCell","showDeletedFiles","selectedFolder","filteredData","f","onRowDoubleClick","newFilterOptions","FileBrowserTableRowNameCell","filemeta","dateData","FileBrowserTableRowActionCell","fileCommentDialogOpen","setFileCommentDialogOpen","viewPermissionsDialogOpen","setViewPermissionsDialogOpen","fileHistoryDialogOpen","setFileHistoryDialogOpen","permissionData","setPermissionData","downloadHistory","setDownloadHistory","filebrowserobj_by_pk","getPermissions","getHistory","whichOption","optionsA","optionsB","filebrowserobj_id","full_path_text","path","parent_path_text","uifeature","fileDataFragment","rootFileQuery","folderQuery","fileDataSubscription","getDeltaFilesQuery","CallbacksTabsFileBrowserLabel","CallbacksTabsFileBrowserPanel","fileBrowserRoots","fileBrowserRootsState","setFileBrowserRootsState","setSelectedFolder","selectedFolderDataRef","selectedFolderData","setSelectedFolderData","currentCallbackIDSetInTable","lastFetchedTime","setShowDeletedFiles","roots","filebrowserobj","subscribeToMore","updatingData","obj","foundHost","rootEntry","mergeData","getFileDeltas","newRoots","workingSet","getFolderData","all_objects","onSetTableData","subscribeToMoreCallback","lastTime","onListFilesButton","fullPath","hostname","onUploadFileButton","onChangeCallbackID","toggleShowDeletedFiles","showStatus","initialCallbackID","subscribeToNewFileBrowserObjs","updateQuery","FileBrowserTableTop","setHostname","setFullPath","setCallbackID","setLocalShowDeletedFiles","manuallySetCallbackID","setManuallySetCallbackID","onLocalListFilesButton","process_id","ProcessBrowserVirtualTree","CallbacksTabsProcessBrowserTree","recursiveCall","getDetailedData","getProcessTokenData","CallbacksTabsProcessBrowserTable","parent_process_id","bin_path","process_by_pk","tokens","getTokens","dataFragment","taskFragment","getNextProcessQuery","getPrevProcessQuery","getLatestTaskForHost","CallbacksTabsProcessBrowserLabel","CallbacksTabsProcessBrowserPanel","taskInfo","setTaskInfo","currentOS","setCurrentOS","makeTree","process","dataTree","processes","getNextProcessDataByHostAndTask","getPreviousProcessDataByHostAndTask","process_aggregate","onNextButton","onPreviousButton","onDiffButton","ProcessBrowserTableTop","taskID","setTaskID","CallbacksTabs","openTabs","clickedTabId","onCloseTabLocal","AppBar","Tabs","newValue","indicatorColor","scrollButtons","tab","HeightsDialog","heights","setHeights","newHeights","hideCallbackMutation","toggleHideCallbackMutations","removeEdgeMutation","addEdgeMutation","unlockCallbackMutation","lockCallbackMutation","updateDescriptionCallbackMutation","updateSleepInfoCallbackMutation","DetailedCallbackTable","commandsWithScriptOnly","callbacksAndFeaturesQuery","CallbacksTabsTaskMultipleDialog","featureOptions","setFeatureOptions","selectedFeature","setSelectedFeature","leftToTask","startTasking","finalTaskedParameters","features","featureList","supported_ui_features","runningSet","feature","allFeatures","issueNextTasking","CallbacksTabsHideMultipleDialog","updatedCallbacksSuccess","updatedCallbacks","updateCallback","hideCallback","CallbacksTableIDCell","onOpenTab","toggleLock","openMetaDialog","setOpenMetaDialog","openTaskMultipleDialog","setOpenTaskMultipleDialog","openHideMultipleDialog","setOpenHideMultipleDialog","localOnOpenTab","CallbacksTableStringCell","CallbacksTableLastCheckinCell","lastCheckin","setLastCheckin","CallbacksTablePayloadTypeCell","CallbacksTableC2Cell","initialCallbackGraphEdges","onOpenC2Dialog","CallbacksTableOSCell","openOSDialog","setOpenOSDialog","getOSIcon","faWindows","displayOSInfo","faLinux","faApple","faChrome","faQuestion","CallbacksTableSleepCell","updateSleepInfo","openSleepDialog","setOpenSleepDialog","sleep","CallbacksTablePreMemo","lockCallback","unlockCallback","updateSleep","updateDescriptionSubmit","callbacks","CallbacksTable","getP2PProfilesAndCallbacks","selectEmpty","ManuallyAddEdgeDialog","callbackOptions","setCallbackOptions","profileOptions","setProfileOptions","selectedDestination","setSelectedDestination","selectedProfile","setSelectedProfile","inputRefDestination","filteredProfileOptions","callbackc2profiles","source_profile","cbopts","cb","loadedLinkCommandsQuery","CallbacksGraph","linkCommands","setLinkCommands","openSelectLinkCommandDialog","setOpenSelectLinkCommandDialog","selectedLinkCommand","setSelectedLinkCommand","selectedCallback","setSelectedCallback","manuallyRemoveEdgeDialogOpen","setManuallyRemoveEdgeDialogOpen","manuallyAddEdgeDialogOpen","setManuallyAddEdgeDialogOpen","edgeOptions","setEdgeOptions","addEdgeSource","setAddEdgeSource","getLinkCommands","viewConfig","setViewConfig","manuallyRemoveEdge","manuallyAddEdge","elm","nodeEdges","getNodeEdges","fulledg","view","saveSvgAsPng","allEdges","getConfigString","source_id","destination_id","CallbacksTop","onOpenTabLocal","tabData","topDisplay","topHeight","Callbacks","setTopDisplay","setOpenTabs","setClickedTabId","openTabRef","oldTabs","tabs","lastClickedTab","oldHeights","tabSet","onSubmitHeights","SpeedDialWrapper","flexBasis","tabHeight","SpeedDialWrapperPreMemo","openHeightsDialog","setOpenHeightsDialog","actions","SpeedDial","SpeedDialIcon","onOpen","SpeedDialAction","responseSearch","parameterSearch","commentSearch","SearchTabTasksLabel","SearchTabTasksSearchPanel","searchField","setSearchField","searchFieldOptions","filterTaskStatus","setFilterTaskStatus","submitSearch","querySearch","querySearchField","queryTaskStatus","adjustedSearchField","adjustedSearch","adjustedTaskStatus","onOutputSearch","taskStatus","onParameterSearch","onCommentSearch","URLSearchParams","get","onChangeSearchField","onChangeTaskStatus","FormLabel","SearchTabTasksPanel","setTaskStatus","handleCallbackSearchSuccess","task_aggregate","handleCallbackSearchFailure","getOutputSearch","getParameterSearch","getCommentSearch","new_search","newTaskStatus","field","Pagination","siblingCount","showFirstButton","showLastButton","MythicSnackDownload","downloadLink","downloadBulkQuery","updateFileDeleted","FileMetaDownloadTable","setFiles","onToggleSelection","initialSelected","download_bulk","downloadBulk","file_ids","onEditComment","fileIds","FileMetaDownloadTableRow","setOpenDelete","openDetails","setOpenDetails","editCommentDialogOpen","setEditCommentDialogOpen","update_filemeta_by_pk","full_remote_path_text","FileMetaUploadTable","FileMetaUploadTableRow","FileMetaScreenshotTable","imageRefs","FileMetaScreenshotTableRow","FileBrowserTable","FileBrowserTableRow","update_filebrowserobj_by_pk","fileMetaFragment","fileBrowserFragment","filenameFileMetaUploadSearch","filenameFileMetaDownloadSearch","filenameFileBrowserSearch","hashFileMetaUploadSearch","hashFileMetaDownloadSearch","commentFileMetaUploadSearch","commentFileMetaDownloadSearch","commentFileBrowserSearch","filenameFileMetaScreenshotSearch","hashFileMetaScreenshotSearch","commentFileMetaScreenshotSearch","SearchTabFilesLabel","SearchTabFilesSearchPanel","searchHost","setSearchHost","searchLocation","setSearchLocation","searchLocationOptions","parsedSearch","setParsedSearch","querySearchHost","querySearchLocation","adjustedSearchHost","adjustedSearchLocation","onFilenameSearch","onHashSearch","onChangeSearchLocation","xhr","XMLHttpRequest","fd","setRequestHeader","onreadystatechange","readyState","responseText","send","uploadFile","SearchTabFilesPanel","fileMetaData","setFileMetaData","fileBrowserData","setFileBrowserData","handleFileMetaSearchResults","filemeta_aggregate","handleFileBrowserSearchResults","filebrowserobj_aggregate","getfilenameFileMetaUploadSearch","getfilenameFileMetaDownloadSearch","getfilenameFileBrowserSearch","getfilenameFileMetaScreenshotSearch","gethashFileMetaUploadSearch","gethashFileMetaDownloadSearch","gethashFileMetaScreenshotSearch","getcommentFileMetaUploadSearch","getcommentFileMetaDownloadSearch","getcommentFileBrowserSearch","getcommentFileMetaScreenshotSearch","hash","updateCredentialComment","updateCredentialAccount","updateCredentialRealm","updateCredentialCredential","updateCredentialDeleted","CredentialTable","setCredentials","cred","onEditAccount","onEditRealm","onEditCredential","onEditDeleted","CredentialTableRow","editAccountDialogOpen","setEditAccountDialogOpen","editRealmDialogOpen","setEditRealmDialogOpen","editCredentialDialogOpen","setEditCredentialDialogOpen","displayCred","update_credential_by_pk","updateAccount","updateRealm","updateCredential","credential_id","accountSearch","realmSearch","credentialSearch","SearchTabCredentialsLabel","SearchTabCredentialsSearchPanel","onAccountSearch","onRealmSearch","onCredentialSearch","OnTypeSearch","SearchTabCredentialsPanel","credentialaData","setCredentialData","handleCredentialSearchResults","credential_aggregate","getAccountSearch","getRealmSearch","getCredentialSearch","KeylogsTable","keylogs","setKeylogs","newArrayData","newSecondLevel","key2","value2","newThirdLevel","key3","value3","k0","k1","k1i","k2","k2i","k3","k3i","keystrokes_text","keylogFragment","keylogSearch","userUniqueSearch","userSearch","programSearch","programUniqueSearch","hostSearch","SearchTabKeylogsLabel","SearchTabKeylogsSearchPanel","onKeylogSearch","onUserSearch","onProgramSearch","onHostSearch","SearchTabKeylogsPanel","keylogData","setKeylogData","handleKeylogSearchResults","keylog_aggregate","keylog","getKeylogSearch","getUserSearch","getUserUniqueSearch","getProgramSearch","getProgramUniqueSearch","getHostSearch","program","TokenDescriptionDialog","updateCallbacksOfDeletedToken","TokenTable","setTokens","TokenTableRow","viewTokenDialog","setViewTokenDialog","editDescriptionDialog","setEditDescriptionDialog","updateCallbackTokensDeleted","update_token_by_pk","Groups","LogonId","LogonType","cbt","tokenFragment","userGroupSearch","SIDSearch","logonTypeSearch","SearchTabTokensLabel","SearchTabTokensSearchPanel","onUserGroupSearch","onSIDSearch","onLogonTypeSearch","SearchTabTokensPanel","handleTokenSearchResults","token_aggregate","getUserGroupSearch","getSIDSearch","getLogonTypeSearch","logontype","sid","CallbackSearchTable","CallbackSearchTableRow","init_callback","callbackFragment","domainSearch","descriptionSearch","ipSearch","SearchTabCallbacksLabel","SearchTabCallbacksSearchPanel","onDomainSearch","onDescriptionSearch","onIPSearch","SearchTabCallbacksPanel","setCallbackData","handleCallbackSearchResults","callback_aggregate","getDomainSearch","getDescriptionSearch","getIPSearch","ArtifactTable","artifacts","setArtifacts","ArtifactTableRow","artifact","artifact_instance_text","artifactFragment","artifactSearch","commandSearch","typeSearch","taskSearch","callbackSearch","SearchTabArtifactsLabel","SearchTabArtifactsSearchPanel","onArtifactSearch","onCommandSearch","onTypeSearch","onTaskSearch","onCallbackSearch","SearchTabArtifactsPanel","artifactData","setArtifactData","taskartifact_aggregate","taskartifact","getArtifactSearch","getCommandSearch","getTypeSearch","getTaskSearch","getCallbackSearch","stopSocks","SocksSearchTable","port","SearchTabSocksLabel","faSocks","SearchTabSocksPanel","onSocksSearch","Search","tabTypes","valueString","valueIndex","set","newRelativePathQuery","SUB_Event_Logs","TopAppBarNotifications","operationeventlog_aggregate","EventFeedNotifications","errorData","_image","_extends","assign","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMythicRedSmall","_ref","svgRef","titleId","xmlns","xmlnsXlink","viewBox","enableBackground","xmlSpace","ForwardRef","drawerWidth","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","appBar","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","nested","mythicElement","TopAppBar","settingsRef","documentationRef","documentationAnchorEl","setDocumentationAnchorEl","openGlobal","setOpenGlobal","openCreate","setOpenCreate","openOperations","setOpenOperations","openData","setOpenData","handleDrawerClose","handleDocumentationClose","Toolbar","menuButton","faBiohazard","faFlagCheckered","nodeRef","MenuListProps","Drawer","anchor","onEscapeKeyDown","mythicVersion","ListSubheader","disablePadding","toggleTheme","mythicUIVersion","TaskArtifactsTable","taskartifacts","TaskMITREATTACKTable","attacks","setAttacks","newAdds","attacktasks","old","attck","attack","t_num","TaskFilesTable","is_screenshot","is_payload","is_download_from_agent","TaskCredentialsTable","MetadataQuery","TaskMetadataTable","setTasks","getMetadata","task_range","taskIDs","IncludeMoreTasksDialog","taskSelected","setTaskSelected","beforeCount","setBeforeCount","afterCount","setAfterCount","searchTerm","setSearchTerm","setOperator","submitFetchTasks","taskInfoFragment","tasksQuery","getTasksAcrossAllCallbacksQuery","getTasksAcrossACallbackQuery","getTasksAcrossAllCallbacksByOperatorQuery","SingleTaskView","taskId","setTaskIDs","removing","setRemoving","openIncludeMoreTasksDialog","setOpenIncludeMoreTasksDialog","allNewParents","parent_task_id","recent_callback","allParents","allTaskIds","subIds","completedData","before","after","getTasksAcrossAllCallbacks","getTasksAcrossACallback","getTasksAcrossAllCallbacksByOperator","getTasks","toggleTaskToRemove","range","numbers","ranges","expand_range","all_nums","rstart","rend","collapse_range","remainingTasks","remainingTaskIDs","setTaskSearchInfo","baseTask","GlobalStyles","createGlobalStyle","generateReportMutation","generatedReportSubscription","ReportingTable","selectedOutputFormat","setSelectedOutputFormat","includeMITREPerTask","setIncludeMITREPerTask","includeMITREOverview","setIncludeMITREOverview","includeOutput","setIncludeOutput","excludedCallbackHost","setExcludedCallbackHost","excludedCallbackUser","setExcludedCallbackUser","excludedCallbackID","setExcludedCallbackID","generateReport","dataUUID","pop","outputFormat","includeMITREOverall","excludedUsers","excludedHosts","excludedIDs","Reporting","MitreMapDisplayDialog","showCountGrouping","groupedCommands","groupedTasks","replace","DetailedCommandMappingTables","DetailedTaskMappingTables","MitreGridRow","buttonColor","setButtonColor","openDisplay","setOpenDisplay","MitreGridColumn","groupCounts","setGroupCounts","techniqueCounts","setTechniqueCounts","updatedTechniqueCountsForCommands","updatedTechniqueCounts","tactic","getPayloadTypes","SelectPayloadTypeDialog","payloadtypeOptions","setPayloadtypeOptions","MitreGrid","onGetCommands","onGetTasks","onGetCommandsFiltered","onGetTasksFiltered","setShowCountGrouping","openLicense","setOpenLicense","openFilterTasks","setOpenFilterTasks","openFilterCommands","setOpenFilterCommands","exportAttackNavigator","baseNavigator","techniques","Get_MITREATTACK","Get_TaskAttacks","Get_TaskAttacksFiltered","Get_CommandAttacks","Get_CommandAttacksFiltered","MitreAttack","mitreAttack","setMitreAttack","attackCommands","attackcommand","updatingMitre","column_total","attack_id","getCommands","getCommandsFiltered","attackTasks","attacktask","getTasksFiltered","mitre","App","setTheme","mountedComponent","setMountedComponent","setMode","localTheme","useDarkMode","themeMode","themeToggler","default","tableHeader","tableBorder","ThemeProvider","CssBaseline","Snackbar","exact","fetchingNewToken","InMemoryCache","typePolicies","Query","fields","retryLink","RetryLink","jitter","attempts","retryIf","_operation","httpLink","HttpLink","uri","reconnect","connectionParams","Authorization","decoded_token","jwt_decode","exp","authLink","setContext","Promise","diff","GetNewToken","errorLink","graphQLErrors","networkError","extensions","websocketClient","SubscriptionClient","protocol","reconnectionAttempts","wsLink","WebSocketLink","splitLink","query","definition","getMainDefinition","kind","apolloClient","ApolloClient","link","close","connect","sendMessage","MessageTypes","GQL_START","ReactDOM","StrictMode","ApolloProvider","client"],"mappings":"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,KACA,EAAgDp+B,mBAAS,IAAzD,mBAAOq+B,EAAP,KAAyBC,EAAzB,KACA,EAAoDt+B,mBAAS,IAA7D,mBAAOu+B,EAAP,KAA2BC,EAA3B,KACMC,EAAY,CACd,UACA,eACA,qBACA,kBACA,QACA,mBACA,2BACA,kBACA,cACA,sBACA,qBACA,iBACA,eACA,eACA,cACA,iBACA,wBACA,eACA,WACA,gBACA,gBACA,iBACA,WACA,QACA,WACA,gBACA,uBACA,oBACA,aACA,SACA,SACA,uBACA,kBACA,qBACA,UACA,iBACA,oBACA,WACA,cACA,gBACA,eACA,YACA,WACA,2BACA,kBACA,aACA,OACA,iBACA,SACA,SACA,aACA,SACA,QACA,kBACA,kBACA,cACA,wBACA,eACA,mBACA,aACA,yBACA,mBACA,aACA,kCACA,yBACA,iBACA,sBACA,gCACA,eACA,OACA,qBACA,qBACA,YACA,SACA,WACA,UACA,YACA,aACA,WACA,OACA,sBACA,wBACA,wBACA,kBACA,WAEEC,EAAmB,CACvB,UACA,WACA,cACA,YACA,YACA,MACA,YACA,cACA,gBACA,MACA,YACA,sBACA,kBACA,6CACA,cACA,cACA,gBACA,qBACA,aACA,cACA,kBACA,oBACA,qBACA,WAEIC,EAA4B,CAChC,OACA,WAiDJ,OA/CE39B,YAASi9B,EAAc,CACnBh9B,UAAW,CAACgV,SAAUtW,EAAMsW,UAC5B5U,YAAa,SAAAC,GACT,GAAwB,OAArBA,EAAKs9B,YAAqB,CACzBR,EAAa98B,EAAKs9B,aAClB,IAAMC,EAAmBJ,EAAUlyB,QAAQ,SAACC,EAAMK,GAChD,YAA6BhL,IAA1BP,EAAKs9B,YAAY/xB,IAAgD,OAA1BvL,EAAKs9B,YAAY/xB,IAA2C,KAA1BvL,EAAKs9B,YAAY/xB,GACrF,GAAN,mBAAWL,GAAX,CAAiB,CAAC,KAAQK,EAAK,MAASvL,EAAKs9B,YAAY/xB,MAGlD,YAAIL,KAEZ,IAEH,GADA4xB,EAAaS,GACwB,OAAlCv9B,EAAKs9B,YAAYE,aAAsB,CACxC,IAAMC,EAA0BL,EAAiBnyB,QAAQ,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","file":"static/js/main.3c069607.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport Chip from '@material-ui/core/Chip';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {useQuery, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\nconst operatorQuery = gql`\nquery operatorQuery($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    operators {\n      username\n      id\n    }\n  }\n}`;\nexport function CallbacksTabsTaskingFilterDialog(props) {\n  const me = useReactiveVar(meState);\n  const [onlyOperators, setOnlyOperators] = React.useState([]);\n  const [operatorUsernames, setOperatorUsernames] = React.useState([]);\n  const [onlyHasComments, setOnlyHasComments] = React.useState(false);\n  const [onlyCommands, setOnlyCommands] = React.useState([]);\n  const [everythingBut, setEverythingBut] = React.useState([]);\n  const [onlyParameters, setOnlyParameters] = React.useState(\"\");\n  const [commandOptions, setCommandOptions] = React.useState([]);\n  const classes = useStyles();\n  useQuery(operatorQuery, {variables: {operation_id: me.user.current_operation_id},\n    onCompleted: (data) => {\n      setOperatorUsernames(data.operation_by_pk.operators.map( (op) => op.username));\n    }\n  });\n  useEffect( () => {\n    if(props.filterOptions[\"operatorsList\"] !== undefined){\n      setOnlyOperators(props.filterOptions[\"operatorsList\"]);\n    }\n    if(props.filterOptions[\"commentsFlag\"] !== undefined){\n      setOnlyHasComments(props.filterOptions[\"commentsFlag\"]);\n    }\n    if(props.filterOptions[\"commandsList\"] !== undefined){\n      setOnlyCommands(props.filterOptions[\"commandsList\"]);\n    }\n    if(props.filterOptions[\"parameterString\"] !== undefined){\n      setOnlyParameters(props.filterOptions[\"parameterString\"]);\n    }\n    if(props.filterOptions[\"everythingButList\"] !== undefined){\n      setEverythingBut(props.filterOptions[\"everythingButList\"]);\n    }\n    if(props.filterCommandOptions){\n      const commandOptionNames = props.filterCommandOptions.map(c => c.cmd);\n      setCommandOptions(commandOptionNames);\n    }\n  }, [props.filterOptions]);\n  const onSubmit = () => {\n    props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    });\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    setOnlyParameters(value);\n  }\n  const handleCommentsChange = (event) => {\n    setOnlyHasComments(event.target.checked);\n  }\n  const handleOperatorChange = (event) => {\n    setOnlyOperators(event.target.value);\n  }\n  const handleOnlyCommandsChange = (event) => {\n    setOnlyCommands(event.target.value);\n    if(event.target.value.length > 0){\n      setEverythingBut([]);\n    }\n  }\n  const handleEverythingButChange = (event) => {\n    setEverythingBut(event.target.value);\n    if(event.target.value.length > 0){\n      setOnlyCommands([]);\n    }\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Filter Which Tasks Are Visible</DialogTitle>\n        <DialogContent dividers={true} style={{overflow: \"hidden\"}}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Only Show Tasks by the Following Operators</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  multiple\n                  id=\"operator-chip\"\n                  value={onlyOperators}\n                  onChange={handleOperatorChange}\n                  input={<Input />}\n                  renderValue={(selected) => (\n                    <div className={classes.chips}>\n                      {selected.map((value) => (\n                        <Chip key={value} label={value} className={classes.chip} />\n                      ))}\n                    </div>\n                  )}\n                  MenuProps={MenuProps}\n                >\n                  {operatorUsernames.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <Checkbox color=\"primary\" checked={onlyOperators.indexOf(name) > -1} />\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n                Only Show Tasks with Comments: <Switch checked={onlyHasComments} onChange={handleCommentsChange} color=\"primary\" name=\"Only Comments\" inputProps={{'aria-label': 'primary checkbox'}}/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"include-chip-label\">Only Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"include-chip-label\"\n                    multiple\n                    id=\"include-chip\"\n                    value={onlyCommands}\n                    onChange={handleOnlyCommandsChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={onlyCommands.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"exclude-chip-label\">Do Not Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"exclude-chip-label\"\n                    multiple\n                    id=\"exclude-chip\"\n                    value={everythingBut}\n                    onChange={handleEverythingButChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={everythingBut.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <MythicTextField value={onlyParameters} onChange={onChange} name=\"Only Show Tasks with the Following Parameter Regex\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect} from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function CallbacksTabsTaskingInputTokenSelect(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const handleChange = (event) => {\n        setSelected(event.target.value);\n        props.changeSelectedToken(event.target.value);\n      };\n    useEffect( () => {\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }else{\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }\n    }, [props.options]);\n    const renderValue = (value) => {\n      if(value === \"Default Token\"){\n        return \"Default Token\";\n      }\n      if(value.User === null){\n        return value.tokenId;\n      }else{\n        return value.User;\n      }\n    }\n  return (\n      <FormControl style={{width: \"20%\"}}>\n        <InputLabel ref={inputRef}>Tokens</InputLabel>\n        <Select\n          labelId=\"demo-dialog-select-label\"\n          id=\"demo-dialog-select\"\n          value={selected}\n          onChange={handleChange}\n          variant=\"filled\"\n          renderValue={renderValue}\n          input={<Input style={{width: \"100%\"}}/>}\n        >\n          <MenuItem value={\"Default Token\"} key={0}>Default Token</MenuItem>\n          {options.map( (opt) => (\n              <MenuItem value={opt.token} key={opt.token.id}>{opt.token.User === null ? opt.token.TokenId + \" - \" + opt.token.description : opt.token.User + \" - \" + opt.token.description}</MenuItem>\n          ) )}\n        </Select>\n      </FormControl>\n  );\n}\n\n","import { IconButton, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport React from 'react';\nimport {TextField} from '@material-ui/core';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CallbacksTabsTaskingFilterDialog} from './CallbacksTabsTaskingFilterDialog';\nimport {CallbacksTabsTaskingInputTokenSelect} from './CallbacksTabsTaskingInputTokenSelect';\nimport { gql, useSubscription } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport parser from 'yargs-parser';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst GetLoadedCommandsSubscription = gql`\nsubscription GetLoadedCommandsSubscription($callback_id: Int!){\n    loadedcommands(where: {callback_id: {_eq: $callback_id}}){\n        id\n        command {\n            cmd\n            id\n            attributes\n            commandparameters {\n                id\n                parameter_type: type \n                required\n                name\n                ui_position\n                parameter_group_name\n                cli_name\n                display_name\n            }\n        }\n    }\n    \n}\n`;\nconst subscriptionCallbackTokens = gql`\nsubscription subscriptionCallbackTokens ($callback_id: Int!){\n  callbacktoken(where: {deleted: {_eq: false}, callback_id: {_eq: $callback_id}}) {\n    token {\n      TokenId\n      id\n      User\n      description\n    }\n    id\n  }\n}\n`;\nconst subscriptionTask = gql`\nsubscription tasksSubscription($callback_id: Int!){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}}, order_by: {id: desc}){\n        id\n        original_params\n        display_params\n        command_name\n        comment\n        tasking_location\n        parameter_group_name\n        status\n        operator{\n            username\n        }\n        command {\n            commandparameters {\n                id\n                type\n                name\n            }\n        }\n    }\n}\n`;\n\nexport function CallbacksTabsTaskingInputPreMemo(props){\n    const snackMessageStyles = {anchorOrigin:{vertical: \"bottom\", horizontal: \"left\"}, autoHideDuration: 2000, preventDuplicate: true, maxSnack: 1, style:{marginBottom: \"50px\"}};\n    const snackReverseSearchMessageStyles = {anchorOrigin:{vertical: \"bottom\", horizontal: \"left\"}, autoHideDuration: 1000, preventDuplicate: true, maxSnack: 1, style:{marginBottom: \"100px\"}};\n    const [message, setMessage] = React.useState(\"\");\n    const [loadedOptions, setLoadedOptions] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [taskOptionsIndex, setTaskOptionsIndex] = React.useState(-1);\n    const [filteredTaskOptions, setFilteredTaskOptions] = React.useState([]);\n\n    const [tabOptions, setTabOptions] = React.useState([]);\n    const [tabOptionsIndex, setTabOptionsIndex] = React.useState(-1);\n\n    const [openFilterOptionsDialog, setOpenFilterOptionsDialog] = React.useState(false);\n    const [tokenOptions, setTokenOptions] = React.useState([]);\n\n    const [unmodifiedHistoryValue, setUnmodifiedHistoryValue] = React.useState(\"parsed_cli\");\n    const [reverseSearching, setReverseSearching] = React.useState(false);\n    const [reverseSearchString, setReverseSearchString] = React.useState('');\n    const [reverseSearchOptions, setReverseSearchOptions] = React.useState([]);\n    const [reverseSearchIndex, setReverseSearchIndex] = React.useState(-1);\n    const mountedRef = React.useRef(true);\n    const me = useReactiveVar(meState);\n\n    useSubscription(subscriptionCallbackTokens, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            if(!mountedRef.current || !props.parentMountedRef.current){\n                return;\n            }\n            setTokenOptions(subscriptionData.data.callbacktoken);\n        }\n      });\n    useSubscription(subscriptionTask, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            if(!mountedRef.current || !props.parentMountedRef.current){\n                return;\n            }\n            setTaskOptions(subscriptionData.data.task);\n            const filteredOptions = subscriptionData.data.task.filter( c => applyFilteringToTasks(c));\n            setFilteredTaskOptions(filteredOptions);\n        }\n    });\n    useSubscription(GetLoadedCommandsSubscription, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            if(!mountedRef.current || !props.parentMountedRef.current){\n                return;\n            }\n            const cmds = subscriptionData.data.loadedcommands.map( c => {\n                let cmdData = {...c.command};\n                cmdData.attributes = JSON.parse(cmdData.attributes);\n                return cmdData;\n            })\n            cmds.push({cmd: \"help\", description: \"Get help for a command or info about loaded commands\", commandparameters: [], attributes: {supported_os: []}});\n            cmds.push({cmd: \"clear\", description: \"Clear 'submitted' jobs from being pulled down by an agent\", commandparameters: [], attributes: {supported_os: []}});\n            cmds.sort((a,b) => a.cmd > b.cmd ? 1 : -1);\n            setLoadedOptions(cmds);\n        }\n    });\n    React.useEffect( () => {\n        //console.log(\"filter updated\")\n        const filteredOptions = taskOptions.filter( c => applyFilteringToTasks(c));\n        setFilteredTaskOptions(filteredOptions);\n    }, [props.filterOptions])\n    React.useEffect( () => {\n        return() => {\n            mountedRef.current = false;\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    const applyFilteringToTasks = (task) => {\n        if(task.display_params.includes(\"help\") && task.operator.username !== me.user.username){\n            return false;\n          }\n          if(props.filterOptions === undefined){\n            return true;\n          }\n          if(props.filterOptions[\"operatorsList\"].length > 0){\n            if(!props.filterOptions[\"operatorsList\"].includes(task.operator.username)){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"commentsFlag\"]){\n            if(task.comment === \"\"){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"commandsList\"].length > 0){\n            // only show these commands\n            if(!props.filterOptions[\"commandsList\"].includes(task.command_name)){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"everythingButList\"].length > 0){\n            if(task.command !== null){\n              if(props.filterOptions[\"everythingButList\"].includes(task.command_name)){\n                return false;\n              }\n            }\n          }\n          if(props.filterOptions[\"parameterString\"] !== \"\"){\n            let regex = new RegExp(props.filterOptions[\"parameterString\"]);\n            if(!regex.test(task.display_params)){\n              return false;\n            }\n          }\n          return true;\n    }\n    const handleInputChange = (event) => {\n        setTabOptions([]);\n        setTabOptionsIndex(0);\n        setMessage(event.target.value);\n        if(event.target.value.length === 0){\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n        }\n    }\n    const onKeyDown = (event) => {\n        if(event.key === \"r\" && event.ctrlKey){\n            //this means they typed ctrl+r, so they're wanting to do a reverse search for a command\n            setReverseSearching(true);\n            setMessage(\"\");\n            setReverseSearchString(\"\");\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n        }\n        if(event.key === \"Tab\"){\n            // if we're still typing the command, we want this to cycle through possible matching commands\n            // if we have a command, this should cycle through parameter names that are required\n            event.stopPropagation();\n            event.preventDefault();\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n            if(message.includes(\" \")){\n                // this means we're not trying to help with the initial command since there's already a space in what the user typed\n                // first find the command in question\n                let cmd = loadedOptions.find( l => l.cmd === message.split(\" \")[0]);\n                if(cmd.commandparameters.length > 0){\n                    if(message[message.length -1] === \" \"){\n                        // somebody hit tab after a parameter name or after a parameter value\n                        const parsed = parseCommandLine(message, cmd);\n                        const cmdGroupNames = determineCommandGroupName(cmd, parsed);\n                        if(cmdGroupNames === undefined){\n                            snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n                            return;\n                        }\n                        console.log(\"cmdGroupNames in tab\", cmdGroupNames);\n                        // look for required arguments that aren't present in our parsed dictionary\n                        for(const [key, value] of Object.entries(parsed)){\n                            if(key !== \"_\"){\n                                if(value !== value || value === undefined){\n                                    snackActions.warning(key + \" needs a valid value\",snackMessageStyles);\n                                    return;\n                                }\n                                if(value === undefined){\n                                    // this means we parsed something and it's undefined, so we need a value\n                                    if(message.endsWith(\" -\" + key)){\n                                        //this value is undefined and it's the last one in the list, so we can potentially swap it out with another parameter\n                                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                                            if(cmd.commandparameters[i][\"required\"] && \n                                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) && \n                                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                                const newMsg = message.trim().slice(0, -1 * key.length) + cmd.commandparameters[i][\"cli_name\"];\n                                                setMessage(newMsg);\n                                                return;\n                                            }\n                                        }\n                                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                                            if(!cmd.commandparameters[i][\"required\"] && \n                                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                                const newMsg = message.trim().slice(0, -1 * key.length) + cmd.commandparameters[i][\"cli_name\"];\n                                                setMessage(newMsg);\n                                                return;\n                                            }\n                                        }\n                                    }\n                                    snackActions.warning(key + \" needs a value\", snackMessageStyles);\n                                    return;\n                                }\n                            }\n                        }\n                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                            if(cmd.commandparameters[i][\"required\"] && \n                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                const newMsg = message.trim() + \" -\" + cmd.commandparameters[i][\"cli_name\"];\n                                setMessage(newMsg);\n                                return;\n                            }\n                        }\n                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                            if(!cmd.commandparameters[i][\"required\"] && \n                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                const newMsg = message.trim() + \" -\" + cmd.commandparameters[i][\"cli_name\"];\n                                setMessage(newMsg);\n                                return;\n                            }\n                        }\n                    }else{\n                        // somebody hit tab when looking at something like `shell dj` or `shell -command`\n                        // so, we should check if the last word is a -CommandParameterName and if so, determine other parameters to replace it\n                        // if we're looking at the first option, do nothing until they hit space\n                        if(tabOptions.length > 0){\n                            const newIndex = (tabOptionsIndex + 1) % tabOptions.length;\n                            setTabOptionsIndex(newIndex);\n                            let newMessage = message.split(\" \").slice(0, -1).join(\" \") + \" -\" + tabOptions[newIndex];\n                            setMessage(newMessage);\n                            return;\n                        }\n                        const pieces = message.split(\" \");\n                        const lastFlag = pieces.slice(-1)[0];\n                        // determine if this last thing we see is a flag or not\n                        if(lastFlag.startsWith(\"-\")){\n                            // the last thing we see starts with - and doesn't have a space at the end, so treat this like a tab-completable command parameter\n                            // so we need to remove it and see what group we're dealing with so far\n                            const parsed = parseCommandLine(pieces.slice(0, -1).join(\" \"), cmd);\n                            const cmdGroupNames = determineCommandGroupName(cmd, parsed);\n                            if(cmdGroupNames === undefined){\n                                snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n                                return;\n                            }\n                            // determine if we're looking at a valid flag name in lastFlag or if it's simply the start of a flag\n                            //console.log(\"swapping parameter name, group options: \", cmdGroupNames);\n                            let exactMatch = cmd.commandparameters.find(cur => \n                                cmdGroupNames.includes(cur.parameter_group_name) && \n                                cur.cli_name === lastFlag.slice(1) &&\n                                !(cur.cli_name in parsed)\n                            );\n                            let paramOptions = [];\n                            if(exactMatch){\n                                // what the user typed or what we filled out is an exact match to a parameter name\n                                // the options should be all parameters in that group except for the ones already supplied in parsed\n                                paramOptions = cmd.commandparameters.reduce( (prev, cur) => {\n                                    if(cmdGroupNames.includes(cur.parameter_group_name) && \n                                        cur.cli_name !== lastFlag.slice(1) &&\n                                        !(cur.cli_name in parsed)){\n                                        return [...prev, cur.cli_name];\n                                    }else{\n                                        return [...prev];\n                                    }\n                                }, []);\n                                paramOptions.push(lastFlag.slice(1));\n                            }else{\n                                // what the user typed isn't an exact match, so find things that start with what they're trying to type\n                                paramOptions = cmd.commandparameters.reduce( (prev, cur) => {\n                                    if(cmdGroupNames.includes(cur.parameter_group_name) && \n                                        cur.cli_name.toLowerCase().startsWith(lastFlag.slice(1).toLocaleLowerCase()) &&\n                                        !(cur.cli_name in parsed)){\n                                        return [...prev, cur.cli_name];\n                                    }else{\n                                        return [...prev];\n                                    }\n                                }, []);\n                            }\n                            if(paramOptions.length > 0){\n                                if(paramOptions.length === 1){\n                                    setTabOptions([]);\n                                    setTabOptionsIndex(0);\n                                    let newMsg = pieces.slice(0,-1).join(\" \") + \" -\" + paramOptions[0];\n                                    setMessage(newMsg);\n                                }else{\n                                    setTabOptions(paramOptions);\n                                    setTabOptionsIndex(0);\n                                    let newMsg = pieces.slice(0,-1).join(\" \") + \" -\" + paramOptions[0];\n                                    setMessage(newMsg);\n                                }\n                                return;\n                            }else{\n                                snackActions.warning(\"Unknown Parameter Name\", snackMessageStyles);\n                                return;\n                            }\n                        }else{\n                            // the last thing doesn't start with -, so we're just looking at text, do nothing for now\n                            return;\n                        }\n                        \n                    }\n                    \n                    snackActions.info(\"No more arguments for command\", snackMessageStyles);\n                }else{\n                    snackActions.info(\"No arguments for command\", snackMessageStyles);\n                }\n                \n            }else{\n                // somebody hit tab with either a blank message or a partial word\n                if(tabOptions.length === 0){\n                    let opts = loadedOptions.filter( l => l.cmd.toLowerCase().startsWith(message.toLocaleLowerCase()) && (l.attributes.supported_os.length === 0 || l.attributes.supported_os.includes(props.callback_os)));\n                    setTabOptions(opts);\n                    setTabOptionsIndex(0);\n                    if(opts.length > 0){\n                        setMessage(opts[0].cmd);\n                    }\n                }else{\n                    setTabOptionsIndex( (tabOptionsIndex + 1) % tabOptions.length );\n                    setMessage(tabOptions[(tabOptionsIndex + 1) % tabOptions.length].cmd)\n                }\n            }\n        }else if(event.key === \"Enter\"){\n            if(event.shiftKey){\n                onSubmitCommandLine(event, true);\n            }else{\n                onSubmitCommandLine(event, false);\n            }\n            \n        }else if(event.key === \"ArrowUp\"){\n            if(filteredTaskOptions.length === 0){\n                snackActions.warning(\"No previous tasks\", snackMessageStyles);\n                return;\n            }else{\n                \n                let newIndex = (taskOptionsIndex + 1);\n                if(newIndex > filteredTaskOptions.length -1){\n                    newIndex = filteredTaskOptions.length -1;\n                }\n                setTaskOptionsIndex(newIndex);\n                setMessage(filteredTaskOptions[newIndex].command_name + \" \" + filteredTaskOptions[newIndex].original_params);\n                setUnmodifiedHistoryValue(filteredTaskOptions[newIndex].tasking_location);\n                //setMessage(taskOptions[newIndex].command_name + \" \" + taskOptions[newIndex].display_params);\n            }\n        }else if(event.key === \"ArrowDown\"){\n            if(filteredTaskOptions.length === 0){\n                snackActions.warning(\"No previous tasks\", snackMessageStyles);\n                return;\n            }else{\n                let newIndex = (taskOptionsIndex - 1);\n                if(newIndex < 0){\n                    newIndex = 0;\n                }\n                setTaskOptionsIndex(newIndex);\n                setMessage(filteredTaskOptions[newIndex].command_name + \" \" + filteredTaskOptions[newIndex].original_params);\n                setUnmodifiedHistoryValue(filteredTaskOptions[newIndex].tasking_location);\n                //setMessage(taskOptions[newIndex].command_name + \" \" + taskOptions[newIndex].display_params);\n            }\n        }else{\n            setTabOptions([]);\n            setTabOptionsIndex(0);\n            if(taskOptionsIndex !== -1){\n                setTaskOptionsIndex(-1);\n            }\n        }\n    }\n    const parseToArgv = (str) => {\n        const res = [];\n\n        if(!str || typeof str !== 'string') return res;\n\n        let sQuoted = false;\n        let dQuoted = false;\n        let backSlash = false;\n        let notEmpty = false;\n        let buffer = '';\n\n        str.split('').forEach((v, i, s) => {\n            if(sQuoted && v === `'`){\n                sQuoted = false;\n                if(buffer.length > 0 ){\n                    buffer += v;\n                }else{\n                    buffer += v + v;\n                }\n                return;\n            }\n            if(dQuoted && v === `\"`){\n                dQuoted = false;\n                if(buffer.length > 0){\n                    buffer += v;\n                }else{\n                    buffer += v + v;\n                }\n                return;\n            }\n            if(!sQuoted && !dQuoted){\n                //console.log(\"not sQuoted and not dQuoted and not backslash\");\n                if(v === `'`){\n                    sQuoted = true;\n                    if(buffer.length > 0 ){\n                        buffer += v;\n                        return;\n                    }\n                    \n                    return;\n                }\n                if(v === '\"'){\n                    dQuoted = true;\n                    //console.log(\"double quoted now, skipping char: \", v);\n                    if(buffer.length > 0 ){\n                        buffer += v;\n                        return;\n                    }\n                    \n                    return;\n                }\n                if(['\\t', ' '].includes(v)){\n                    if(buffer.length > 0){\n                        if([`'`, `\"`].includes(buffer[buffer.length-1])){\n                            res.push(buffer.slice(0, -1))\n                        }else{\n                            res.push(buffer);\n                        }\n                        \n                        //console.log(\"pushed buffer:\", buffer);\n                        notEmpty = false;\n                    }\n                    buffer = '';\n                    return;\n                }\n            }\n            if(!sQuoted && dQuoted && v === '\"'){\n                //console.log(\"not sQuoted, yes dQuoted, not backSlash, found matching \\\", skipping: \", v);\n                dQuoted = false;\n                if(buffer.length > 0 ){\n                    buffer += v;\n                }\n                return;\n            }\n\n            //console.log(\"adding to buffer: \", v);\n            buffer += v;\n        });\n\n        if(buffer.length > 0 || notEmpty){\n            //console.log(\"pushed end buffer: \", buffer);\n            if([`'`, `\"`].includes(buffer[buffer.length-1])){\n                res.push(buffer.slice(0, -1))\n            }else{\n                res.push(buffer);\n            }\n            notEmpty = false;\n        }\n        if(dQuoted) throw new SyntaxError('unexpected end of string while looking for matching double quote');\n        if(sQuoted) throw new SyntaxError('unexpected end of string while looking for matching single quote');\n\n        return res;\n    }\n    const parseCommandLine = (command_line, cmd) => {\n        // given a command line and the associated command\n        let stringArgs = [];\n        let booleanArgs = [];\n        let arrayArgs = [];\n        let numberArgs = [];\n        for(let i = 0; i < cmd.commandparameters.length; i++){\n            switch(cmd.commandparameters[i].parameter_type){\n                case \"Choice\":\n                case \"String\":\n                    stringArgs.push(cmd.commandparameters[i].cli_name);\n                case \"Number\":\n                    numberArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                case \"Boolean\":\n                    booleanArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                case \"Array\":\n                case \"ChoiceMultiple\":\n                    arrayArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                default:\n                    stringArgs.push(cmd.commandparameters[i].cli_name);\n            }\n        }\n        try{\n            let new_command_line = command_line;//.replaceAll(\"\\\\\", \"\\\\\\\\\");\n            //console.log(\"new_command_line\", new_command_line);\n            const argv = parseToArgv(new_command_line);\n            //console.log(\"argv\", argv);\n            //console.log(\"arrayArgs\", arrayArgs);\n            const yargs_parsed = parser(argv, {\n                string: stringArgs,\n                boolean: booleanArgs,\n                number: numberArgs,\n                array: arrayArgs,\n                configuration: {\n                    \"short-option-groups\": false,\n                    \"camel-case-expansion\": false,\n                    \"dot-notation\": false,\n                    \"unknown-options-as-args\": false,\n                    \"greedy-arrays\": true\n                }\n            });\n            //console.log(yargs_parsed, cmd.commandparameters);\n            return yargs_parsed;\n        }catch(error){\n            snackActions.warning(\"Failed to parse command line: \" + error, snackMessageStyles);\n            return undefined;\n        }\n    }\n    const determineCommandGroupName = (cmd, parsed) => {\n        if(cmd.commandparameters.length === 0){\n            return [];\n        }\n        let cmdGroupOptions = cmd.commandparameters.reduce( (prev, cur) => {\n            if(prev.includes(cur.parameter_group_name)){\n                return [...prev];\n            }\n            return [...prev, cur.parameter_group_name];\n        }, []);\n        for(const key of Object.keys(parsed)){\n            // for all of the things we've parsed out so far, determin their parameter groups\n            if( key !== \"_\"){\n                // we don't care about positional arguments at the moment\n                let paramGroups = [];\n                for(let i = 0; i < cmd.commandparameters.length; i++){\n                    if(cmd.commandparameters[i][\"cli_name\"] === key){\n                        paramGroups.push(cmd.commandparameters[i][\"parameter_group_name\"])\n                    }\n                }\n                // now paramGroups has all of the group names associated with `key`\n                // we have some set of possible options, so we need to find the intersection with paramGroups and cmdGroupOptions\n                let intersection = cmdGroupOptions.reduce( (prev, cur) => {\n                    if(paramGroups.includes(cur)){\n                        return [...prev, cur];\n                    }\n                    return [...prev];\n                }, [])\n                if(intersection.length === 0){\n                    // this is a bad thing, we did an intersection and there's no similar paramter groups, but parameters have been supplied\n                    return [];\n                }\n                cmdGroupOptions = [...intersection];\n            }\n        }\n        // now cmdGroupOptions is a list of all the matching parameter_group_names for the commandline arguments we've specified\n        return cmdGroupOptions;\n    }\n    const fillOutPositionalArguments = (cmd, parsed, groupNames) => {\n        let parsedCopy = {...parsed};\n        parsedCopy[\"_\"].shift(); // get rid of the command name from this list of arguments.\n        if(cmd.commandparameters.length === 0){\n            return parsedCopy;\n        }\n        if(groupNames.length === 0){\n            return parsedCopy;\n        }\n        let usedGroupName = groupNames[0];\n        if(groupNames.includes(\"Default\")){\n            usedGroupName = \"Default\";\n        }\n        // figure out how to deal with positional parameters\n        const groupParameters = cmd.commandparameters.filter(c => c.parameter_group_name === usedGroupName);\n        groupParameters.sort((a,b) => a.ui_position < b.ui_position ? -1 : 1);\n        // now we have all of the parameters and they're sorted by `ui_position`\n        \n        let unSatisfiedArguments = [];\n        for(let i = 0; i < groupParameters.length; i++){\n            if( !(groupParameters[i][\"cli_name\"] in parsedCopy)){\n                // this parameter hasn't been supplied yet, track it\n                unSatisfiedArguments.push(groupParameters[i]); \n            }\n        }\n        // now iterate over the unsatisfied arguments and add in the positional paramters\n        for(let i = 0; i < unSatisfiedArguments.length -1; i++){\n            // we cut this short by one so that the last unSatisifedArgument can do a greedy matching for the rest of what was supplied\n            // this parameter hasn't been supplied yet, check if we have any positional parameters in parsedCopy[\"_\"]\n            if(parsedCopy[\"_\"].length > 0){\n                parsedCopy[groupParameters[i][\"cli_name\"]] = parsedCopy[\"_\"].shift();\n            }\n        }\n        \n        if(unSatisfiedArguments.length > 0 && parsedCopy[\"_\"].length > 0){\n            parsedCopy[\"_\"] = parsedCopy[\"_\"].map( c => typeof(c) === \"string\" && c.includes(\" \") ? \"\\\"\" + c + \"\\\"\" : c);\n            parsedCopy[unSatisfiedArguments[unSatisfiedArguments.length -1][\"cli_name\"]] = parsedCopy[\"_\"].join(\" \");\n            parsedCopy[\"_\"] = [];\n        }\n        \n        return parsedCopy;\n\n    }\n    const onSubmitCommandLine = (evt, force_parsed_popup) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        //console.log(\"onSubmitCommandLine\", evt, message);\n        let splitMessage = message.split(\" \");\n        let cmd = loadedOptions.find( l => l.cmd === splitMessage[0]);\n        if(cmd === undefined){\n            snackActions.warning(\"Unknown command\", snackMessageStyles);\n            return;\n        }\n        let cmdGroupName = [\"Default\"];\n        let parsedWithPositionalParameters = {};\n        if(unmodifiedHistoryValue.includes(\"modal\") || unmodifiedHistoryValue.includes(\"browserscript\")){\n            // these are the two kinds that'll introduce dictionary values as original_params\n            try{\n                let params = splitMessage.slice(1).join(\" \");\n                parsedWithPositionalParameters = JSON.parse(params);\n                cmdGroupName = determineCommandGroupName(cmd, parsedWithPositionalParameters);\n                cmdGroupName.sort()\n            }catch(error){\n                snackActions.warning(\"Failed to parse modified JSON value\", snackMessageStyles);\n                return;\n            }   \n        }else{\n            let parsed = parseCommandLine(message, cmd);\n            if(!parsed){\n                return;\n            }\n            //console.log(message, parsed);\n            cmdGroupName = determineCommandGroupName(cmd, parsed);\n            cmdGroupName.sort();\n            if(cmd.commandparameters.length > 0){\n                parsedWithPositionalParameters = fillOutPositionalArguments(cmd, parsed, cmdGroupName);\n                console.log(parsedWithPositionalParameters);\n                if(parsedWithPositionalParameters[\"_\"].length > 0){\n                    snackActions.warning(\"Too many positional arguments given. Did you mean to quote some of them?\", snackMessageStyles);\n                    return;\n                }\n            }else{\n                parsedWithPositionalParameters = parsed;\n            }\n        }\n        if(cmdGroupName === undefined){\n            snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n            return;\n        }else if(cmdGroupName.length > 1){\n            if(Boolean(force_parsed_popup)){\n                props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), cmdGroupName, unmodifiedHistoryValue);\n            }else{\n                if(cmdGroupName.includes(\"Default\")){\n                    props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), [\"Default\"], unmodifiedHistoryValue);\n                }else{\n                    snackActions.warning(\"Passed arguments are ambiguous, use shift+enter for modal or provide more parameters\", snackMessageStyles);\n                    return;\n                }\n            }\n            setMessage(\"\");\n            setTaskOptionsIndex(-1);\n            setReverseSearchIndex(-1);\n            setReverseSearching(false);\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n            return;\n        }\n        //console.log(\"positional args added in:\", parsedWithPositionalParameters);\n        props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), cmdGroupName, unmodifiedHistoryValue);\n        setMessage(\"\");\n        setTaskOptionsIndex(-1);\n        setReverseSearchIndex(-1);\n        setReverseSearching(false);\n        setUnmodifiedHistoryValue(\"parsed_cli\");\n    }\n    const onClickFilter = () => {\n        setOpenFilterOptionsDialog(true);\n    }\n    const handleReverseSearchInputChange = (event) => {\n        setReverseSearchString(event.target.value);\n        if(event.target.value.length === 0){\n            setMessage(\"\");\n            setReverseSearchOptions([]);\n            setReverseSearchIndex(0);\n            return;\n        }\n        // need to do a reverse i search through taskOptions\n        const lowerCaseTextSearch = event.target.value.toLowerCase();\n        const matchingOptions = taskOptions.filter( x => (x.command_name + \" \" + x.original_params).toLowerCase().includes(lowerCaseTextSearch));\n        const filteredMatches = matchingOptions.filter( x => applyFilteringToTasks(x))\n        setReverseSearchOptions(filteredMatches);\n        if(filteredMatches.length > 0){\n            setMessage(filteredMatches[0].command_name + \" \" + filteredMatches[0].original_params);\n        }\n    }\n    const onReverseSearchKeyDown = (event) => {\n        if(event.key === \"Escape\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n        }else if(event.key === \"Tab\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n        }else if(event.key === \"Enter\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n            onSubmitCommandLine(event);\n        }else if(event.key === \"ArrowUp\"){\n            // go up through the reverseSearchOptions by incrementing reverseSearchIndex\n            // setMessage to teh value\n            if(reverseSearchOptions.length === 0){\n                snackActions.warning(\"No matching options\", snackReverseSearchMessageStyles);\n                return;\n            }else{\n                const newIndex = (reverseSearchIndex + 1) % reverseSearchOptions.length;\n                setReverseSearchIndex(newIndex);\n                setMessage(reverseSearchOptions[newIndex].command_name + \" \" + reverseSearchOptions[newIndex].original_params);\n            }\n        }else if(event.key === \"ArrowDown\"){\n            // go down through the reverseSearchOptions by decrementing reverseSearchIndex\n            // setMessage to the value\n            if(reverseSearchOptions.length === 0){\n                snackActions.warning(\"No matching options\", snackReverseSearchMessageStyles);\n                return;\n            }else{\n                let newIndex = (reverseSearchIndex - 1) % reverseSearchOptions.length;\n                if(newIndex < 0){\n                    newIndex = reverseSearchOptions.length - 1;\n                }\n                setReverseSearchIndex(newIndex);\n                setMessage(reverseSearchOptions[newIndex].command_name + \" \" + reverseSearchOptions[newIndex].original_params);\n            }\n        }\n    }\n    return (\n        <React.Fragment>\n            {reverseSearching &&\n                <TextField\n                    placeholder={\"Search previous commands\"}\n                    onKeyDown={onReverseSearchKeyDown}    \n                    onChange={handleReverseSearchInputChange}                     \n                    size=\"small\"\n                    autoFocus={true}\n                    variant=\"outlined\"\n                    value={reverseSearchString}\n                    fullWidth={true}\n                    InputProps={{ type: 'search',\n                        startAdornment: <React.Fragment><Typography style={{width: \"10%\"}}>reverse-i-search:</Typography></React.Fragment>\n                    \n                    }}\n                />\n            }\n            <TextField\n                placeholder={\"Task an agent...\"}\n                onKeyDown={onKeyDown}    \n                onChange={handleInputChange}                     \n                size=\"small\"\n                variant=\"outlined\"\n                disabled={reverseSearching}\n                value={message}\n                autoFocus={true}\n                fullWidth={true}\n                style={{marginBottom: \"10px\"}}\n                InputProps={{ type: 'search',\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitCommandLine}><SendIcon/></IconButton>\n                    <IconButton color=\"secondary\" variant=\"contained\" onClick={onClickFilter}><TuneIcon/></IconButton>\n                    </React.Fragment>,\n                    startAdornment: <React.Fragment>\n                        {tokenOptions.length > 0 ? (\n                            <CallbacksTabsTaskingInputTokenSelect options={tokenOptions} changeSelectedToken={props.changeSelectedToken}/>\n                        ) : (null)}\n                        \n                    </React.Fragment>\n                \n                }}\n                />\n              {openFilterOptionsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilterOptionsDialog} \n                    onClose={()=>{setOpenFilterOptionsDialog(false);}} \n                    innerDialog={<CallbacksTabsTaskingFilterDialog filterCommandOptions={loadedOptions} onSubmit={props.onSubmitFilter} filterOptions={props.filterOptions} onClose={()=>{setOpenFilterOptionsDialog(false);}} />}\n                />\n              }\n        </React.Fragment>\n    )\n}\nexport const CallbacksTabsTaskingInput = React.memo(CallbacksTabsTaskingInputPreMemo);\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect, useRef, useCallback, useLayoutEffect} from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { TaskDisplay } from './TaskDisplay';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsTaskingInput} from './CallbacksTabsTaskingInput';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { IconButton} from '@material-ui/core';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\n\nexport function CallbacksTabsTaskingLabel(props){\n    const [description, setDescription] = React.useState(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription ? props.tabInfo.callbackDescription : \"Callback: \" + props.tabInfo.callbackID)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else if(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription){\n            setDescription(props.tabInfo.callbackDescription);\n        }else{\n            setDescription(\"Callback: \" + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const taskingDataFragment = gql`\n    fragment taskData on task {\n        comment\n        callback_id\n        commentOperator{\n            username\n        }\n        completed\n        id\n        operator{\n            username\n        }\n        original_params\n        display_params\n        status\n        timestamp\n        command {\n          cmd\n          id\n        }\n        command_name\n        responses(limit: 1, order_by: {id: desc}){\n            id\n            timestamp\n        }\n        opsec_pre_blocked\n        opsec_pre_bypassed\n        opsec_post_blocked\n        opsec_post_bypassed\n        tasks {\n            id\n        }\n        token {\n            id\n        }\n    }\n`;\nexport const createTaskingMutation = gql`\nmutation createTasking($callback_id: Int!, $command: String!, $params: String!, $files: [String], $token_id: Int, $tasking_location: String, $original_params: String, $parameter_group_name: String) {\n  createTask(callback_id: $callback_id, command: $command, params: $params, files: $files, token: $token_id, tasking_location: $tasking_location, original_params: $original_params, parameter_group_name: $parameter_group_name) {\n    status\n    id\n    error\n  }\n}\n`;\n// this is to listen for the latest taskings\nconst fetchLimit = 10;\nconst getTaskingQuery = gql`\n${taskingDataFragment}\nsubscription getTasking($callback_id: Int!, $fromNow: timestamp!, $limit: Int){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}, timestamp: {_gt: $fromNow}}, order_by: {id: desc}, limit: $limit) {\n        ...taskData\n    }\n}\n `;\nconst getNextBatchTaskingQuery = gql`\n${taskingDataFragment}\nquery getBatchTasking($callback_id: Int!, $offset: Int!, $fetchLimit: Int!){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}}, order_by: {id: desc}, limit: $fetchLimit, offset: $offset) {\n        ...taskData\n    }\n    callback(where: {id: {_eq: $callback_id}}){\n        id\n    }\n}\n`;\nexport const CallbacksTabsTaskingPanel = ({tabInfo, index, value, onCloseTab, parentMountedRef}) =>{\n    const [taskLimit, setTaskLimit] = React.useState(10);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [commandInfo, setCommandInfo] = React.useState({});\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const taskingDataRef = React.useRef({task: []});\n    const [fromNow, setFromNow] = React.useState((new Date()).toISOString());\n    const [selectedToken, setSelectedToken] = React.useState({});\n    const [filterOptions, setFilterOptions] = React.useState({\n        \"operatorsList\": [],\n        \"commentsFlag\": false,\n        \"commandsList\": [],\n        \"parameterString\": \"\",\n        \"everythingButList\": []\n    });\n    const [canScroll, setCanScroll] = React.useState(true);\n    const mountedRef = React.useRef(true);\n    useEffect( () => {\n        taskingDataRef.current = taskingData;\n    }, [taskingData]);\n    const [fetched, setFetched] = React.useState(false);\n    const [fetchedAllTasks, setFetchedAllTasks] = React.useState(false);\n    const messagesEndRef = useRef(null);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Task created\", {autoHideDuration: 1000});\n            }\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const equalTaskTrees = (oldArray, newArray) => {\n        if(oldArray.length !== newArray.length){\n            return false;\n        }\n        for(let i = 0; i < oldArray.length; i++){\n            if(oldArray[i].comment !== newArray[i].comment){\n                return false;\n            }\n            if(oldArray[i].commentOperator !== newArray[i].commentOperator){\n                return false;\n            }\n            if(oldArray[i].completed !== newArray[i].completed){\n                return false;\n            }\n            if(oldArray[i].display_params !== newArray[i].display_params){\n                return false;\n            }\n            if(oldArray[i].original_params !== newArray[i].original_params){\n                return false;\n            }\n            if(oldArray[i].status !== newArray[i].status){\n                return false;\n            }\n            if(oldArray[i].timestamp !== newArray[i].timestamp){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_blocked !== newArray[i].opsec_pre_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_bypassed !== newArray[i].opsec_pre_bypassed){\n                return false;\n            }\n            if(oldArray[i].opsec_post_blocked !== newArray[i].opsec_post_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_post_bypassed !== newArray[i].opsec_post_bypassed){\n                return false;\n            }\n            if(oldArray[i].tasks.length !== newArray[i].tasks.length){\n                return false;\n            }\n        }\n        return true;\n    }\n    const subscriptionDataCallback = useCallback( ({subscriptionData}) => {\n        if((mountedRef && !mountedRef.current) || (parentMountedRef && !parentMountedRef.current)){\n            return null;\n        }\n        if(!fetched){\n            setFetched(true);\n        }\n        //console.log(subscriptionData);\n        const oldLength = taskingDataRef.current.task.length;\n        const mergedData = subscriptionData.data.task.reduce( (prev, cur) => {\n            const index = prev.findIndex(element => element.id === cur.id);\n            if(index > -1){\n                // need to update an element\n                const updated = prev.map( (element) => {\n                    if(element.id === cur.id){\n                        return cur;\n                    }else{\n                        return element;\n                    }\n                });\n                return updated;\n            }else{\n                return [...prev, cur];\n            }\n        }, [...taskingDataRef.current.task]);\n        mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n        if(!equalTaskTrees(taskingDataRef.current.task, mergedData)){\n            setTaskingData({task: mergedData});\n        }\n        if(mergedData.length > oldLength){\n            setCanScroll(true);\n        }     \n        if(mergedData.length > taskLimit){\n            setTaskLimit(mergedData.length);\n        }\n    }, [fetched, setFetched, setCanScroll, taskLimit])\n    useSubscription(getTaskingQuery, {\n        variables: {callback_id: tabInfo.callbackID, fromNow:fromNow, limit: taskLimit},\n        shouldResubscribe: true,\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"no-cache\",\n        onSubscriptionData: subscriptionDataCallback});\n    const scrollToBottom = useCallback( () => {\n        if(taskingData && messagesEndRef.current){\n            messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n        }\n      }, [taskingData, messagesEndRef]);\n    useLayoutEffect( () => {\n        if(canScroll){\n            scrollToBottom();\n            setCanScroll(false);\n        }\n    }, [canScroll, scrollToBottom]);\n    const [getInfiniteScrollTasking, {loading: loadingMore}] = useLazyQuery(getNextBatchTaskingQuery, {\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: (data) => {\n            let foundNew = false;\n            if(data.callback.length === 0){\n                onCloseTab(tabInfo);\n                return;\n            }\n            const mergedData = data.task.reduce( (prev, cur) => {\n                const index = prev.findIndex(element => element.id === cur.id);\n                if(index > -1){\n                    // need to update an element\n                    const updated = prev.map( (element) => {\n                        if(element.id === cur.id){\n                            return cur;\n                        }else{\n                            return element;\n                        }\n                    });\n                    return updated;\n                }else{\n                    foundNew = true;\n                    return [...prev, cur];\n                }\n            }, [...taskingData.task]);\n            mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n            setTaskingData({task: mergedData});    \n            if(!foundNew){\n                setFetchedAllTasks(true);\n            }else{\n                if(data.task.length < fetchLimit){\n                    setFetchedAllTasks(true);\n                }else{\n                    setFetchedAllTasks(false);\n                }\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    useEffect( () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n        setCanScroll(true);\n        return() => {\n            mountedRef.current = false;\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    const loadMoreTasks = () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n    }\n    const onSubmitCommandLine = (message, cmd, parsed, force_parsed_popup, cmdGroupNames, previousTaskingLocation) => {\n        //console.log(message, cmd, parsed);\n        let params = message.split(\" \");\n        delete params[0];\n        params = params.join(\" \").trim();\n        let newTaskingLocation = \"parsed_cli\";\n        if(previousTaskingLocation.includes(\"modal\")){\n            newTaskingLocation = \"modal_modified\"\n        }else if(previousTaskingLocation.includes(\"browserscript\")){\n            newTaskingLocation = \"browserscript_modified\";\n        }\n        if(cmd.commandparameters.length === 0){\n            // if there are no parameters, just send whatever the user types along\n            onCreateTask({callback_id: tabInfo.callbackID, command: cmd.cmd, params: params, parameter_group_name: \"Default\"});\n        }else{\n            // check if there's a \"file\" component that needs to be displayed\n            const fileParamExists = cmd.commandparameters.find(param => param.parameter_type === \"File\" && cmdGroupNames.includes(param.parameter_group_name));\n            //console.log(\"missing File for group? \", fileParamExists, cmdGroupNames);\n            let missingRequiredPrams = false;\n            if(cmdGroupNames.length === 1){\n                const missingParams = cmd.commandparameters.filter(param => param.required && param.parameter_group_name === cmdGroupNames[0] && !(param.cli_name in parsed));\n                if(missingParams.length > 0){\n                    missingRequiredPrams = true;\n                    console.log(\"missing required params\", missingParams,parsed);\n                }\n            }else if(cmdGroupNames > 1 && !force_parsed_popup){\n                // need to force a popup because the tasking is ambiguous\n                console.log(\"command is ambiguous\");\n                force_parsed_popup = true;\n            }\n            if(fileParamExists || force_parsed_popup || missingRequiredPrams){\n                //need to do a popup\n                if(cmdGroupNames.length > 0){\n                    setCommandInfo({...cmd, \"parsedParameters\": parsed, groupName: cmdGroupNames[0]});\n                }else{\n                    setCommandInfo({...cmd, \"parsedParameters\": parsed});\n                }\n                setOpenParametersDialog(true);\n                return;\n            }else{\n                delete parsed[\"_\"];\n                onCreateTask({callback_id: tabInfo.callbackID, \n                    command: cmd.cmd, \n                    params: JSON.stringify(parsed), \n                    tasking_location: newTaskingLocation, \n                    original_params: params, \n                    parameter_group_name: cmdGroupNames[0]});\n            }            \n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files, selectedParameterGroup) => {\n        setOpenParametersDialog(false);\n        onCreateTask({callback_id: tabInfo.callbackID, command: cmd, params: parameters, files: files, tasking_location: \"modal\", parameter_group_name: selectedParameterGroup});\n    }\n    const onCreateTask = ({callback_id, command, params, files, tasking_location, original_params, parameter_group_name}) => {\n        if(selectedToken.id !== undefined){\n            createTask({variables: {callback_id, command, params, files, token_id: selectedToken.TokenId, tasking_location, original_params, parameter_group_name}});\n        }else{\n            createTask({variables: {callback_id, command, params, files, tasking_location, original_params, parameter_group_name}});\n        }\n    }\n    const onSubmitFilter = (newFilter) => {\n        setFilterOptions(newFilter);\n    }\n    const changeSelectedToken = (token) => {\n        if(token === \"Default Token\"){\n            setSelectedToken(\"Default Token\");\n            return;\n        }\n        if(token.TokenId !== selectedToken.TokenId){\n            setSelectedToken(token);\n        }\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            {!fetchedAllTasks && \n                <MythicStyledTooltip title=\"Fetch Older Tasks\"> \n                    <IconButton onClick={loadMoreTasks} variant=\"contained\" color=\"primary\" style={{marginLeft: \"50%\"}} ><AutorenewIcon /></IconButton>\n                </MythicStyledTooltip>}\n            {!fetched && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n            {loadingMore && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n            {\n                taskingData.task.map( (task) => (\n                    <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} \n                        filterOptions={filterOptions}/>\n                ))\n            }\n            </div>\n            <div ref={messagesEndRef} />\n        <CallbacksTabsTaskingInput onSubmitFilter={onSubmitFilter} onSubmitCommandLine={onSubmitCommandLine} changeSelectedToken={changeSelectedToken}\n            filterOptions={filterOptions} callback_id={tabInfo.callbackID} callback_os={tabInfo.os} parentMountedRef={mountedRef} />\n        {openParametersDialog && \n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                onClose={()=>{setOpenParametersDialog(false);}} \n                innerDialog={<TaskParametersDialog command={commandInfo} callback_id={tabInfo.callbackID} \n                    payloadtype_id={tabInfo.payloadtype_id} operation_id={tabInfo.operation_id} \n                    onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} \n                    />}\n            />\n        }\n            \n    </MythicTabPanel>\n    )\n}","import React, {useEffect} from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from './MythicTextField';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function MythicDialog(props) {\n  const descriptionElementRef = React.useRef(null);\n  React.useEffect(() => {\n    if (props.open) {\n      const { current: descriptionElement } = descriptionElementRef;\n      if (descriptionElement !== null) {\n        descriptionElement.focus();\n      }\n    }\n  }, [props.open]);\n\n  return (\n      <Dialog\n        open={props.open}\n        onClose={props.onClose}\n        scroll=\"paper\"\n        maxWidth={props.maxWidth}\n        fullWidth={props.fullWidth}\n        aria-labelledby=\"scroll-dialog-title\"\n        aria-describedby=\"scroll-dialog-description\"\n      >\n        {props.innerDialog}\n      </Dialog>\n  );\n}\n\nexport function MythicModifyStringDialog(props) {\n  const [comment, setComment] = React.useState(\"\");\n    const onCommitSubmit = () => {\n        props.onSubmit(comment);\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n    useEffect( () => {\n      setComment(props.value);\n    }, [props.value]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewJSONAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n  const [tableType, setTableType] = React.useState(\"dictionary\");\n  const [headers, setHeaders] = React.useState([]);\n    useEffect( () => {\n      let permissions = [];\n      try{\n        let permissionDict;\n        if(props.value.constructor === Object){\n          permissionDict = props.value;\n        }else{\n          permissionDict = JSON.parse(props.value);\n        } \n        \n        if(permissionDict.constructor === Object){\n          for(let key in permissionDict){\n            if(permissionDict[key].constructor === Object || Array.isArray(permissionDict[key])){\n              permissions.push({\"name\": key, \"value\": JSON.stringify(permissionDict[key], null, 2)});\n            }else{\n              permissions.push({\"name\": key, \"value\": permissionDict[key]});\n            }\n            \n            setHeaders([props.leftColumn, props.rightColumn]);\n          }\n        }else{\n          setTableType(\"array\");\n          if(permissionDict.length > 0){\n            setHeaders(Object.keys(permissionDict[0]));\n            permissions = permissionDict;\n          }else{\n            setHeaders([]);\n          }\n        }\n      }catch(error){\n        console.log(error);\n      }\n      setComment(permissions);\n    }, [props.value, props.leftColumn, props.rightColumn]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          {headers.map( (header, index) => (\n                            <TableCell key={'header' + index}>{header}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {tableType === \"dictionary\" ? (\n                      comment.map( (element, index) => (\n                        <TableRow key={'row' + index} hover>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell style={{wordBreak: \"break-all\", whiteSpace: \"pre-wrap\"}}>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))\n                    ) : (\n                      comment.map( (row, index) => (\n                        <TableRow key={'row' + index} hover>\n                            {Object.keys(row).map( (key) => (\n                              <TableCell key={\"row\" + index + \"cell\" + key}>{row[key]}</TableCell>\n                            ))}\n                        </TableRow>\n                      ))\n                    ) }\n                    \n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewObjectPropertiesAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n    useEffect( () => {\n        const permissions = props.keys.reduce( (prev, key) => {\n          if(props.value[key] !== undefined && props.value[key] !== null && props.value[key] !== \"\"){\n            return [...prev, {\"name\": key, \"value\": props.value[key]}]\n          }\n          else{\n            return [...prev];\n          }\n        }, []);\n\n      setComment(permissions);\n    }, [props.value, props.keys]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell>{props.leftColumn}</TableCell>\n                          <TableCell>{props.rightColumn}</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {comment.map( (element, index) => (\n                      <TableRow key={'row' + index}>\n                        <TableCell>{element.name}</TableCell>\n                        <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}","import React, { useEffect } from 'react';\nimport {gql, useMutation, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\n\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $ui_feature: String!) {\n    callback_by_pk(id: $callback_id){\n        operation_id\n        active\n        payload {\n            payloadtype {\n                id\n            }\n        }\n        loadedcommands(where: {command: {supported_ui_features: {_ilike: $ui_feature}}}) {\n            id\n            command {\n              cmd\n              help_cmd\n              description\n              id\n              needs_admin\n              payload_type_id\n              attributes\n              commandparameters {\n                id\n                type \n              }\n              supported_ui_features\n            }\n        }\n        callbacktokens(where: {deleted: {_eq: false}}) {\n            token {\n              TokenId\n              id\n              User\n              description\n            }\n            id\n        }\n    }\n}\n`;\n\nexport const TaskFromUIButton = ({callback_id, ui_feature, parameters, onTasked, tasking_location, getConfirmation, openDialog}) =>{\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState([]);\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [callbackTokenOptions, setCallbackTokenOptions] = React.useState([]);\n    const [selectedCallbackToken, setSelectedCallbackToken] = React.useState({});\n    const [openCallbackTokenSelectDialog, setOpenCallbackTokenSelectDialog] = React.useState(false);\n    const [taskingVariables, setTaskingVariables] = React.useState({});\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const savedFinalVariables = React.useRef({});\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n                onTasked({tasked: false});\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + callback_id);\n                onTasked({tasked: true, variables: savedFinalVariables.current});\n            }\n        },\n        onError: data => {\n            console.error(data);\n            onTasked({tasked: false});\n        }\n    });\n    const {data: callbackData} = useQuery(getLoadedCommandsQuery, {\n        variables: {callback_id: callback_id, ui_feature: \"%\" + ui_feature + \"%\"},\n        onCompleted: (data) => {\n            if(data.callback_by_pk === null){\n                snackActions.warning(\"Unknown callback\");\n                onTasked({tasked: false});\n                return;\n            }else if(!data.callback_by_pk.active){\n                snackActions.warning(\"Callback isn't active\");\n                onTasked({tasked: false});\n                return;\n            }\n            const availableCommands = data.callback_by_pk.loadedcommands.reduce( (prev, cur) => {\n                if(typeof(parameters) === \"string\"){\n                    return [...prev, {...cur.command, \"parsedParameters\": {}}];\n                }else{\n                    console.log(\"adding in parsed parameters\", parameters);\n                    return [...prev, {...cur.command, \"parsedParameters\": parameters}];\n                }\n                \n            }, []);\n            const availableTokens = data.callback_by_pk.callbacktokens.reduce( (prev, cur) => {\n                return [...prev, {...cur.token, \"display\": cur.token.User === null ? cur.token.TokenId + \" - \" + cur.token.description : cur.token.User + \" - \" + cur.token.description}]\n            }, []);\n            setCallbackTokenOptions(availableTokens);\n            setFileBrowserCommands(availableCommands);\n            if(availableCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support the \" + ui_feature + \" feature\");\n            }else if(availableCommands.length === 1){\n                setSelectedCommand({...availableCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const onSubmitTasking = ({variables}) => {\n        if(getConfirmation){\n            setTaskingVariables(variables);\n            setOpenConfirmDialog(true);\n            return;\n        }\n\n        if(callbackTokenOptions.length > 0){\n            setOpenCallbackTokenSelectDialog(true);\n            setTaskingVariables(variables);\n        }else {\n            createTask({variables})\n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        savedFinalVariables.current = parameters;\n        onSubmitTasking({variables: {callback_id: callback_id, command: cmd, params: parameters, files, tasking_location: \"modal\"}});\n    }\n    const onSubmitSelectedToken = (token) => {\n        setSelectedCallbackToken(token);\n    }\n    const onSubmitConfirm = () => {\n        if(callbackTokenOptions.length > 0){\n            setOpenCallbackTokenSelectDialog(true);\n        }else {\n            createTask({variables: taskingVariables})\n        }\n    }\n    const onCancelConfirm = () => {\n        setOpenConfirmDialog(false);\n        onTasked({tasked: false});\n    }\n    useEffect( () => {\n        if(selectedCallbackToken === \"\"){\n            // we selected the default token to use\n            createTask({variables: taskingVariables});\n        }\n        if(selectedCallbackToken.TokenId){\n            createTask({variables: {...taskingVariables, token_id: selectedCallbackToken.TokenId}});\n        }else{\n            return;\n        }\n        \n    }, [selectedCallbackToken])\n    useEffect( () => {\n        if(selectedCommand.commandparameters === undefined){\n            return;\n        }\n        if(openDialog && selectedCommand.commandparameters.length > 0){\n            setOpenParametersDialog(true);\n            return;\n        }\n        let taskingLocation = tasking_location ? tasking_location : \"browserscript\";\n        if(selectedCommand.commandparameters.length > 0){\n            if(parameters === undefined || parameters === null){\n                setOpenParametersDialog(true);\n            }else{\n                savedFinalVariables.current = parameters;\n                if(typeof(parameters) === \"string\"){\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters, tasking_location: \"command_line\"}});\n                }else{\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: JSON.stringify(parameters), tasking_location: taskingLocation}});\n                }\n                \n            }\n        }else{\n            if(parameters === undefined || parameters === null){\n                savedFinalVariables.current = \"\";\n                onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: \"\"}});\n            }else{\n                savedFinalVariables.current = parameters;\n                if(typeof(parameters) === \"string\"){\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters, tasking_location: \"command_line\"}});\n                }else{\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: JSON.stringify(parameters), tasking_location: taskingLocation}});\n                }\n            }\n            \n        }\n    }, [selectedCommand])\n    return (\n        <div>\n            {openSelectCommandDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                        onClose={()=>{setOpenSelectCommandDialog(false);onTasked({tasked: false});}} \n                        innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                            onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                            action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                    />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);onTasked({tasked: false});}} \n                    innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={callback_id} payloadtype_id={callbackData.callback_by_pk.payload.payloadtype.id}\n                        operation_id={callbackData.callback_by_pk.operation_id} \n                        onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            {openCallbackTokenSelectDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openCallbackTokenSelectDialog}\n                    onClose={()=>{setOpenCallbackTokenSelectDialog(false);onTasked({tasked: false});}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenCallbackTokenSelectDialog(false);onTasked({tasked: false});}}\n                                        onSubmit={onSubmitSelectedToken} dontCloseOnSubmit={true} options={callbackTokenOptions} title={\"Select Token\"} \n                                        action={\"select\"} identifier={\"id\"} display={\"display\"}/>}\n                />\n            }\n            {openConfirmDialog && \n                <MythicConfirmDialog onClose={onCancelConfirm} onSubmit={onSubmitConfirm} open={openConfirmDialog}/>\n            }\n        </div>\n    )\n}\n","export function copyStringToClipboard(str) {\n    try {\n        // Create new element\n        let el = document.createElement('textarea');\n        // Set value (string to be copied)\n        el.value = str;\n        if(el.value === \"\"){\n            el.value = \" \";\n        }\n        // Set non-editable to avoid focus and move outside of view\n        el.setAttribute('readonly', '');\n        el.style = {position: 'absolute', left: '-9999px'};\n        document.body.appendChild(el);\n        // Select text inside element\n        el.select();\n        // Copy text to clipboard\n        document.execCommand('copy');\n        // Remove temporary element\n        document.body.removeChild(el);\n        return true;\n    } catch (error) {\n        console.log(\"warning\", \"Failed to copy to clipboard: \" + error.toString());\n        return false;\n    }\n}\n","import { makeVar } from '@apollo/client';\n\nexport const meState = makeVar({loggedIn:false, user: null, access_token: null, refresh_token: null});\nexport const menuOpen = makeVar(false);\n\n\nexport const successfulLogin = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    localStorage.setItem(\"refresh_token\", data.refresh_token);\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\n    meState({\n        loggedIn: true,\n        ...data\n    });\n}\nexport const successfulRefresh = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    meState({\n        loggedIn: true,\n        access_token: localStorage.getItem(\"access_token\"),\n        ...meState()\n    });\n}\nexport const FailedRefresh = () =>{\n    console.log(\"failed refresh\");\n    localStorage.removeItem(\"access_token\");\n    localStorage.removeItem(\"refresh_token\");\n    localStorage.removeItem(\"user\");\n    meState({\n        loggedIn: false,\n        access_token: null,\n        refresh_token: null,\n        user: null\n    });\n}\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {TextField} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nconst ValidationTextField = withStyles({\n      root: {\n        '& input:valid + fieldset': {\n          borderColor: 'grey',\n          borderWidth: 1,\n        },\n        '& input:invalid + fieldset': {\n          borderColor: 'red',\n          borderWidth: 2,\n        },\n        '& input:valid:focus + fieldset': {\n          borderLeftWidth: 6,\n          padding: '4px !important', // override inline-style\n        },\n      },\n    })(TextField);\n\nclass MythicTextField extends React.Component {\n    \n    static propTypes = {\n        placeholder: PropTypes.string,\n        name: PropTypes.string,\n        validate: PropTypes.func,\n        width: PropTypes.number,\n        onChange: PropTypes.func.isRequired,\n        requiredValue: PropTypes.bool,\n        type: PropTypes.string,\n        onEnter: PropTypes.func,\n        autoFocus: PropTypes.bool\n    }\n    onChange = evt => {\n        const name = this.props.name;\n        const value = evt.target.value;\n        const error = this.props.validate ? this.props.validate(value) : false;\n        this.props.onChange(name, value, error);\n    }\n    checkError = () => {\n        return this.props.validate ? this.props.validate(this.props.value) : false\n    }\n    onKeyPress = (event) => {\n      if(event.key === \"Enter\"){\n        if(this.props.onEnter !== undefined){\n          this.props.onEnter();\n        }\n      }else{\n        this.onChange(event);\n      }\n    }\n    render(){\n        return (\n            <div style={{width:  this.props.width ? this.props.width + \"rem\" : \"100%\"}}>\n                <ValidationTextField \n                    fullWidth={true} \n                    placeholder={this.props.placeholder} \n                    value={this.props.value} \n                    onChange={this.onChange}\n                    onKeyPress={this.onKeyPress} \n                    label={this.props.name} \n                    autoFocus={this.props.autoFocus ? true : false}\n                    variant=\"outlined\" \n                    disabled={this.props.disabled === undefined ? false : this.props.disabled}\n                    required={this.props.requiredValue ? this.props.requiredValue : false} \n                    InputLabelProps={this.props.inputLabelProps}\n                    multiline={this.props.multiline ? this.props.multiline : false}\n                    error={this.checkError()} \n                    type={this.props.type === undefined ? \"text\" : this.props.type}\n                    InputProps={this.props.InputProps}\n                    helperText={this.checkError() ? this.props.errorText : this.props.helperText}\n                    style={{\n                        padding:0,\n                        marginBottom: this.props.marginBottom ? this.props.marginBottom : \"10px\"\n                    }}/>\n            </div>\n        )\n    }\n}\nexport default MythicTextField;\n","import { createMuiTheme } from '@material-ui/core/styles';\nexport const lightTheme = {\n    body: '#FFF',\n    text: '#363537',\n    textLighter: '#B8B8B8',\n    textDarker: '#B8B8B8',\n    toggleBorder: '#FFF',\n    background: '#363537',\n    tableHeader: '#F5F5F5',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#BEDCFE',\n    callbackTitleColor: '',\n    listItemBackground: '#F5F5F5',\n    menuItemBackground: \"#FBFBFB\",\n    topAppBar: \"\",\n    taskAccordian: \"\",\n    taskAccordianResponse: \"#FAFAFA\",\n    taskAccordianBottom: \"#F5F5F5\",\n    secondaryTextColor: \"\",\n    tabHeaderBackground: \"\",\n    tabHeaderText: \"\",\n    tableLineColor:\"\",\n    eventMessageBackgroundColor: \"\",\n}\nexport const darkTheme = {\n    body: '#212121',\n    text: 'white',\n    textLighter: '#989898',\n    textDarker: '#989898',\n    toggleBorder: '#6B8096',\n    background: '#999',\n    tableHeader: '#484848',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#023064',\n    callbackTitleColor: 'white',\n    listItemBackground: '#303030',\n    primaryButtonTextOnly: \"#7e75ea\",\n    secondaryButtonTextOnly: \"#ea7575\",\n    menuItemBackground: \"#363537\",\n    topAppBar: \"\",\n    taskAccordian: \"#424242\",\n    taskAccordianResponse: \"#616161\",\n    taskAccordianBottom: \"#424242\",\n    secondaryTextColor: \"#E0E0E0\",\n    tabHeaderBackground: \"#363537\",\n    tabHeaderText: \"white\",\n    tableLineColor: \"grey\",\n    eventMessageBackgroundColor: \"#303030\",\n}\nexport const muiTheme = createMuiTheme({\n  palette: {\n    primary: {\n            main: \"#1976d2\"\n        },\n    secondary: {\n            main: \"#dc004e\"\n        },\n    error: {\n            main: \"#f44336\"\n        },\n    warning: {\n            main: \"#ff9800\"\n        },\n    info: {\n            main: \"#2196f3\"\n        },\n    disabled: {\n            main: \"rgba(0, 0, 0, 0.38)\"\n        },\n    },\n    \n});\n\n\n","import { useState, useEffect } from 'react';\n\nconst useSingleAndDoubleClick = (onSingleClick, onDoubleClick, delay = 250) => {\n    const [click, setClick] = useState(0);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            // simple click\n            if (click === 1) onSingleClick();\n            setClick(0);\n        }, delay);\n\n        // the duration between this click and the previous one\n        // is less than the value of delay = double-click\n        if (click === 2) onDoubleClick();\n\n        return () => clearTimeout(timer);\n    }, [delay, onSingleClick, onDoubleClick, click]);\n\n    return () => setClick((prev) => prev + 1);\n};\n\nexport default useSingleAndDoubleClick;\n","import { makeStyles } from '@material-ui/core';\n\nexport default makeStyles((theme) => ({\n    headerCellRow: {\n        display: 'flex',\n        flexDirection: 'row',\n        position: 'sticky',\n        top: '0',\n        left: '0',\n        right: '0',\n        zIndex: 1,\n    },\n    headerCell: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 0.25em',\n        boxSizing: 'border-box',\n        justifyContent: 'space-between',\n        userSelect: 'none',\n        backgroundColor: theme.palette.background.paper,\n        borderTop: '1px solid ' + theme.tableHover,\n        borderRight: '1px solid ' + theme.tableHover,\n        borderBottom: '1px solid  ' + theme.tableHover,\n        '&:first-child': {\n            borderLeft: '1px solid ' + theme.tableHover,\n        },\n        '&:hover': {\n            backgroundColor: theme.tableHover,\n            cursor: 'pointer',\n        },\n    },\n    hoveredRow: {\n        backgroundColor: theme.tableHover,\n    },\n    cell: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 0.5em',\n        boxSizing: 'border-box',\n        fontFamily: 'monospace',\n        borderBottom: '1px solid ' + theme.tableHover,\n        cursor: \"default !important\",\n    },\n    cellInner: {\n        width: '100%',\n        whiteSpace: 'nowrap',\n        overflowX: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    draggableHandlesContainer: {\n        position: 'absolute',\n        top: 0,\n        overflowX: 'hidden',\n    },\n    draggableHandlesClickArea: {\n        position: 'absolute',\n        top: 0,\n        width: '16px',\n        cursor: 'col-resize',\n        pointerEvents: 'initial',\n    },\n    draggableHandlesIndicator: {\n        position: 'absolute',\n        top: 0,\n        left: 8,\n        width: '1px',\n        backgroundImage: 'linear-gradient(#7f93c0, #00000000)',\n    },\n}));\n","import { Box, Typography } from '@material-ui/core';\nimport { useCallback } from 'react';\nimport useSingleAndDoubleClick from '../../utilities/useSingleAndDoubleClick';\nimport useStyles from './styles';\nimport React from 'react';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faFilter} from '@fortawesome/free-solid-svg-icons';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst HeaderCell = ({\n    onClick = () => {},\n    onDoubleClick = () => {},\n    contextMenuOptions = [],\n    sortIndicatorIndex,\n    sortDirection,\n    headerNameKey = \"name\",\n    VariableSizeGridProps: { style, rowIndex, columnIndex, data, ...other },\n}) => {\n    const classes = useStyles();\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const item = data.items[rowIndex][columnIndex];\n    const isFiltered = item?.filtered || false;\n    const handleClick = useCallback(\n        (e) => {\n            onClick(e, columnIndex);\n        },\n        [onClick, columnIndex]\n    );\n\n    const handleDoubleClick = useCallback(\n        (e) => {\n            onDoubleClick(e, columnIndex);\n        },\n        [onDoubleClick, columnIndex]\n    );\n    const [openContextMenu, setOpenContextMenu] = React.useState(false);\n    const handleContextClick = useCallback(\n        (event) => {\n            event.preventDefault();\n            if(item.disableFilterMenu){\n                return;\n            }\n            if(contextMenuOptions && contextMenuOptions.length > 0){\n                \n                setOpenContextMenu(true);\n            }\n        },\n        [contextMenuOptions, columnIndex] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    const handleMenuItemClick = (event, index) => {\n        contextMenuOptions[index].click({event, columnIndex});\n        setOpenContextMenu(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setOpenContextMenu(false);\n      };\n    const handleClicks = useSingleAndDoubleClick(handleClick, handleDoubleClick);\n\n    \n\n    return (\n        <div style={style} className={classes.headerCell} onClick={handleClicks} onContextMenu={handleContextClick} ref={dropdownAnchorRef}>\n            <Box display='flex' alignItems='center' justifyContent='space-between' width='100%'>\n                <Typography className={classes.cellInner} variant='body1'>\n                    {item[headerNameKey].toUpperCase()}\n                </Typography>\n                {isFiltered ? (\n                    <FontAwesomeIcon icon={faFilter} />\n                ) : (null)}\n                {sortIndicatorIndex === columnIndex && (sortDirection === 'ASC' ? <div>↑</div> : <div>↓</div>)}\n                <Popper open={openContextMenu} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {contextMenuOptions.map((option, index) => (\n                              <MenuItem\n                                key={option.name + index}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n            </Box>\n        </div>\n    );\n};\n\nexport default HeaderCell;\n","import React, { useCallback } from 'react';\nimport useStyles from './styles';\n\nconst CellPreMemo = ({ VariableSizeGridProps: { style, rowIndex, columnIndex, data } }) => {\n    const rowClassName = data.gridUUID + \"row\" + rowIndex;\n    const classes = useStyles();\n    const handleDoubleClick = useCallback(\n        (e) => {\n            data.onDoubleClickRow(e, rowIndex - 1); // minus 1 to account for header row\n        },\n        [data, rowIndex]\n    );\n\n    const item = data.items[rowIndex][columnIndex];\n    const cellStyle = item?.props?.cellData?.cellStyle || {};\n    const rowStyle = data.items[rowIndex][columnIndex]?.props?.rowData?.rowStyle || {};\n    const onMouseEnter = () => {\n        const cells = document.getElementsByClassName(rowClassName);\n        if(cells.length > 0){\n            for(const cell of cells){\n                cell.classList.add(classes.hoveredRow);\n            }\n        }\n    }\n    const onMouseLeave = () => {\n        const cells = document.getElementsByClassName(rowClassName);\n        if(cells.length > 0){\n            for(const cell of cells){\n                cell.classList.remove(classes.hoveredRow);\n            }\n        }\n    }\n    return (\n        <div style={{...style, ...cellStyle, ...rowStyle}} \n            className={`${classes.cell} ${rowClassName}`} \n            onDoubleClick={handleDoubleClick}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}>\n            <div className={classes.cellInner}>{item}</div>\n        </div>\n    );\n};\nconst Cell = React.memo(CellPreMemo);\nexport default Cell;\n\n","import React, { useState } from 'react';\nimport useStyles from './styles';\nimport Draggable from 'react-draggable';\n\nconst DraggableHandles = React.forwardRef(({ height, rowHeight, width, minColumnWidth, columnWidths, onStop }, ref) => {\n    const classes = useStyles();\n    const [isDragging, setIsDragging] = useState(false);\n    return (\n        <div\n            ref={ref}\n            className={classes.draggableHandlesContainer}\n            style={{\n                height: height,\n                width: width,\n                pointerEvents: isDragging ? 'initial' : 'none',\n            }}>\n            {columnWidths.map((_, i) => {\n                const leftOffset = columnWidths.slice(0, i).reduce((a, b) => a + b, 0);\n                return (\n                    <Draggable\n                        key={i}\n                        axis='x'\n                        bounds={{\n                            left: minColumnWidth - columnWidths[i],\n                            right: Number.POSITIVE_INFINITY,\n                            top: 0,\n                            bottom: 0,\n                        }}\n                        position={isDragging ? null : { x: 0, y: 0 }}\n                        onStart={() => {\n                            setIsDragging(i);\n                        }}\n                        onStop={(e, data) => {\n                            setIsDragging(false);\n                            onStop(data.x, i);\n                        }}>\n                        <div\n                            className={classes.draggableHandlesClickArea}\n                            style={{\n                                left: leftOffset + columnWidths[i] - 1 - 8,\n                                height: rowHeight,\n                            }}>\n                            <div\n                                className={classes.draggableHandlesIndicator}\n                                style={{\n                                    display: isDragging === i ? 'block' : 'none',\n                                    height: height / 2,\n                                }}\n                            />\n                        </div>\n                    </Draggable>\n                );\n            })}\n        </div>\n    );\n});\n\nexport default DraggableHandles;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport useScrollbarSize from 'react-scrollbar-size';\nimport { VariableSizeGrid } from 'react-window';\nimport HeaderCell from './HeaderCell';\nimport Cell from './Cell';\nimport DraggableHandles from './DraggableHandles';\nimport useStyles from './styles';\n\nconst MIN_COLUMN_WIDTH = 100;\n\nconst CellRenderer = (VariableSizeGridProps) => {\n    return VariableSizeGridProps.rowIndex === 0 ? null : <Cell VariableSizeGridProps={VariableSizeGridProps} />;\n};\n\nconst ResizableGridWrapper = ({\n    columns,\n    sortIndicatorIndex,\n    sortDirection,\n    items,\n    headerNameKey,\n    onClickHeader,\n    onDoubleClickRow,\n    contextMenuOptions,\n    rowHeight,\n    widthMeasureKey,\n    ...AutoSizerProps\n}) => {\n    /* Hooks */\n    const { width: scrollbarWidth } = useScrollbarSize();\n\n    const [columnWidths, setColumnWidths] = useState(columns.map((column) => column.width || MIN_COLUMN_WIDTH));\n\n    const gridRef = useRef(null);\n\n    const dragHandlesRef = useRef(null);\n\n    const getColumnWidth = useCallback(\n        (index) => {\n            return columnWidths[index] || MIN_COLUMN_WIDTH;\n        },\n        [columnWidths]\n    );\n    const getShortRandomString = () => {\n        return (Math.random() + 1).toString(36).substring(2);\n    }\n    const gridUUID = React.useMemo( () => getShortRandomString(), []);\n    const getRowHeight = useCallback(\n        (index) => {\n            return rowHeight;\n        },\n        [rowHeight]\n    );\n\n    useEffect(() => {\n        const totalWidth = AutoSizerProps.width - scrollbarWidth;\n        const updatedColumnWidths = columns.map((column) => column.width || MIN_COLUMN_WIDTH);\n        const totalWidthDiff = totalWidth - updatedColumnWidths.reduce((a, b) => a + b, 0);\n        if (totalWidthDiff > 0) {\n            let updatedWidthIndexs = [];\n            for(let i = 0; i < columns.length; i++){\n                // check if any of the columns have the `fillWidth` property to true\n                if(columns[i][\"fillWidth\"]){\n                    updatedWidthIndexs.push(i);\n                }\n            }\n            if(updatedWidthIndexs.length === 0){\n                updatedWidthIndexs.push(columns.length - 1);\n            }\n            for(let i = 0; i < updatedWidthIndexs.length; i++){\n                updatedColumnWidths[updatedWidthIndexs[i]] += totalWidthDiff / updatedWidthIndexs.length;\n            }\n            //updatedColumnWidths[updatedWidthIndex] += totalWidthDiff;\n        }\n        setColumnWidths(updatedColumnWidths);\n    }, [scrollbarWidth, columns]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        gridRef.current.resetAfterColumnIndex(0, true);\n    }, [columnWidths]);\n\n    /* Event Handlers */\n\n    const resizeColumn = (x, columnIndex) => {\n        const updatedWidths = columnWidths.map((columnWidth, index) => {\n            if (columnIndex === index) {\n                return Math.floor(Math.max(columnWidth + x, MIN_COLUMN_WIDTH));\n            }\n            return Math.floor(columnWidth);\n        });\n        setColumnWidths(updatedWidths);\n    };\n\n    const autosizeColumn = (columnIndex) => {\n        const longestElementInColumn = Math.max(...items.map((itemRow) => {\n            if(typeof(itemRow[columnIndex]) === \"string\"){\n                return itemRow[columnIndex].length;\n            }else if(widthMeasureKey){\n                return String(itemRow[columnIndex]?.props?.cellData?.[widthMeasureKey]).length || -1;\n            }else{\n                return itemRow[columnIndex]?.props?.cellData?.length || -1;\n            }\n            \n        }));\n        const updatedWidths = columnWidths.map((columnWidth, index) => {\n            if (columnIndex === index) {\n                return Math.floor(Math.max(longestElementInColumn * 8 + 32, MIN_COLUMN_WIDTH));\n            }\n            return Math.floor(columnWidth);\n        });\n        setColumnWidths(updatedWidths);\n    };\n\n    const itemsWithHeader = [columns, ...items];\n\n    const innerElementType = React.forwardRef(({ children, ...rest }, ref) => {\n        const classes = useStyles();\n        return (\n            <div ref={ref} {...rest}>\n                {/* always render header cells */}\n                <div\n                    className={classes.headerCellRow}\n                    style={{\n                        height: getRowHeight(0),\n                    }}>\n                    {columns.map((column, i) => {\n                        const leftOffset = columnWidths.slice(0, i).reduce((a, b) => a + b, 0);\n                        return (\n                            <HeaderCell\n                                key={i}\n                                headerNameKey={headerNameKey}\n                                onClick={onClickHeader}\n                                onDoubleClick={(e, columnIndex) => {\n                                    if (column.disableAutosize) return;\n                                    autosizeColumn(columnIndex);\n                                }}\n                                contextMenuOptions={contextMenuOptions}\n                                sortIndicatorIndex={sortIndicatorIndex}\n                                sortDirection={sortDirection}\n                                VariableSizeGridProps={{\n                                    style: {\n                                        position: 'absolute',\n                                        top: 0,\n                                        left: leftOffset,\n                                        height: getRowHeight(0),\n                                        width: getColumnWidth(i),\n                                    },\n                                    rowIndex: 0,\n                                    columnIndex: i,\n                                    data: { items: itemsWithHeader },\n                                }}\n                            />\n                        );\n                    })}\n                </div>\n                {/* render other cells as usual */}\n                {children}\n            </div>\n        );\n    });\n\n    return (\n        <>\n            <VariableSizeGrid\n                height={AutoSizerProps.height}\n                width={AutoSizerProps.width}\n                columnCount={columns.length}\n                columnWidth={getColumnWidth}\n                headerNameKey={headerNameKey}\n                rowCount={itemsWithHeader.length}\n                rowHeight={getRowHeight}\n                itemData={{ items: itemsWithHeader, onDoubleClickRow, gridUUID }}\n                innerElementType={innerElementType}\n                overscanRowCount={0}\n                onScroll={({ scrollLeft }) => {\n                    if (dragHandlesRef.current) {\n                        dragHandlesRef.current.scrollTo({ left: scrollLeft });\n                    }\n                }}\n                ref={gridRef}>\n                {CellRenderer}\n            </VariableSizeGrid>\n            <DraggableHandles\n                height={AutoSizerProps.height}\n                rowHeight={getRowHeight(0)}\n                width={AutoSizerProps.width}\n                minColumnWidth={MIN_COLUMN_WIDTH}\n                columnWidths={columnWidths}\n                onStop={resizeColumn}\n                ref={dragHandlesRef}\n            />\n        </>\n    );\n};\n\nconst MythicResizableGrid = ({\n    columns,\n    sortIndicatorIndex,\n    sortDirection,\n    items,\n    onClickHeader,\n    headerNameKey,\n    onDoubleClickRow,\n    contextMenuOptions,\n    widthMeasureKey,\n    rowHeight = 32,\n}) => {\n    return (\n        <AutoSizer>\n            {(AutoSizerProps) => (\n                <ResizableGridWrapper\n                    columns={columns}\n                    headerNameKey={headerNameKey}\n                    sortIndicatorIndex={sortIndicatorIndex}\n                    sortDirection={sortDirection}\n                    items={items}\n                    widthMeasureKey={widthMeasureKey}\n                    rowHeight={rowHeight}\n                    onClickHeader={onClickHeader}\n                    onDoubleClickRow={onDoubleClickRow}\n                    contextMenuOptions={contextMenuOptions}\n                    {...AutoSizerProps}\n                />\n            )}\n        </AutoSizer>\n    );\n};\n\nMythicResizableGrid.propTypes = {\n    columns: PropTypes.arrayOf(\n        PropTypes.shape({\n            name: PropTypes.string,\n            width: PropTypes.number,\n            disableAutosize: PropTypes.bool,\n            disableSort: PropTypes.bool\n        })\n    ).isRequired,\n    sortIndicatorIndex: PropTypes.number,\n    sortDirection: PropTypes.oneOf(['ASC', 'DESC']),\n    items: PropTypes.arrayOf(PropTypes.array).isRequired,\n    onClickHeader: PropTypes.func,\n    onDoubleClickRow: PropTypes.func,\n    contextMenuOptions: PropTypes.array,\n    rowHeight: PropTypes.number,\n    headerNameKey: PropTypes.string,\n    widthMeasureKey: PropTypes.string\n};\n\nexport default MythicResizableGrid;\n","import MythicResizableGrid from './MythicResizableGrid';\n\nexport default MythicResizableGrid;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nexport function CredentialTableNewCredentialDialog(props) {\n  const [credentialType, setCredentialType] = React.useState(\"plaintext\");\n  const credentialOptions = [\n    \"plaintext\", \"ticket\", \"hash\", \"certificate\", \"key\", \"hex\"\n  ];\n  const [account, setAccount] = React.useState(\"\");\n  const [realm, setRealm] = React.useState(\"\");\n  const [credential, setCredential] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const classes = useStyles();\n\n  const onSubmit = () => {\n    props.onSubmit({\n      realm,\n      account,\n      comment,\n      credential,\n      \"type\": credentialType\n    });\n    props.onClose();\n  }\n  const onAccountChange = (name, value, error) => {\n    setAccount(value);\n  }\n  const onCommentChange = (name, value, error) => {\n    setComment(value);\n  }\n  const onRealmChange = (name, value, error) => {\n    setRealm(value);\n  }\n  const onCredentialChange = (name, value, error) => {\n    setCredential(value);\n  }\n  const handleCredentialTypeChange = (event) => {\n    setCredentialType(event.target.value);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Register New Credential</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Which Type of Credential</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  id=\"operator-chip\"\n                  value={credentialType}\n                  onChange={handleCredentialTypeChange}\n                  input={<Input />}\n                  MenuProps={MenuProps}\n                >\n                  {credentialOptions.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <MythicTextField value={realm} onChange={onRealmChange} name=\"Realm or Domain\"/>\n              <MythicTextField value={account} onChange={onAccountChange} name=\"Account Name\"/>\n              <MythicTextField multiline value={credential} onChange={onCredentialChange} name=\"Credential\"/>\n              <MythicTextField value={comment} onChange={onCommentChange} name=\"Comment\"/>\n              \n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Create\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Tooltip } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    tooltip: {\n      backgroundColor: theme.palette.background.contrast,\n      color: theme.palette.text.contrast,\n      boxShadow: theme.shadows[1],\n      fontSize: 13\n    },\n    arrow: {\n      color: theme.palette.background.contrast,\n    }\n  }));\n\nexport function MythicStyledTooltip(props){\n    const { children, title, ...other} = props;\n    const classes = useStyles();\n    return (\n        <Tooltip title={title} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}} {...other}>\n            {<span style={{display: \"inline-block\"}}>{children}</span>}\n        </Tooltip>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport MythicTextField from './MythicTextField';\n\nexport function MythicDisplayTextDialog(props) {\n  return (\n    <MythicDialog fullWidth={props.fullWidth === null ? false : props.fullWidth} maxWidth={props.maxWidth === null ? \"sm\" : props.maxWidth} open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n            <DialogContent dividers={true}>\n                <MythicTextField multiline={true} value={props.value} onChange={()=>{}} />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                Close\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import React, {useEffect, useLayoutEffect, useRef} from 'react';\nimport {IconButton} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles, fade, withStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChatOutlinedIcon from '@material-ui/icons/ChatOutlined';\nimport Badge from '@material-ui/core/Badge';\nimport {useTheme} from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {TaskDisplayContainer} from './TaskDisplayContainer';\n\nconst taskDataFragment = gql`\n    fragment taskData on task {\n        comment\n        callback_id\n        commentOperator{\n            username\n        }\n        completed\n        id\n        operator{\n            username\n        }\n        original_params\n        display_params\n        status\n        timestamp\n        command {\n          cmd\n          id\n        }\n        command_name\n        responses(limit: 1, order_by: {id: desc}){\n            id\n            timestamp\n        }\n        opsec_pre_blocked\n        opsec_pre_bypassed\n        opsec_post_blocked\n        opsec_post_bypassed\n        tasks {\n            id\n        }\n        token {\n            id\n        }\n    }\n`;\n\nconst getSubTaskingQuery = gql`\n${taskDataFragment}\nquery getSubTasking($task_id: Int!){\n    task(where: {parent_task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n        ...taskData\n  }\n}\n `;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"3px\",\n    marginLeft: \"3px\",\n    marginRight: \"0px\",\n    height: \"auto\",\n    width: \"99%\",\n    \n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    display: \"inline\",\n    cursor: \"default\"\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    overflow: \"auto\", \n    display: \"block\", \n    textOverflow: \"ellipsis\", \n    wordBreak: \"break-all\",\n    maxWidth: \"100%\", \n  },\n  taskAndTimeDisplay: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n    overflow: \"hidden\", \n    textOverflow: \"ellipsis\", \n    maxWidth: \"100%\", \n    width: \"100%\",\n    whiteSpace: \"nowrap\",\n    display: \"inline-block\"\n  },\n  secondaryHeadingExpanded: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    display: \"block\", \n    overflow: \"auto\",\n    maxWidth: \"100%\", \n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  icon: {\n    verticalAlign: 'middle',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n    marginRight: 0\n  },\n  column: {\n    padding: \"0 5px 0 0\",\n    display: \"inline-block\",\n    margin: 0,\n    height: \"auto\"\n  },\n}));\nconst accordionUseStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: 0,\n    height: \"auto\",\n    width: \"100%\",\n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  content: {\n    margin: 0,\n    height: \"100%\",\n    padding: 0,\n  },\n  expandIcon: {\n    margin: 0,\n  },\n  expanded: {\n    marginRight: 0\n  }\n}));\nfunction MinusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z\" />\n    </SvgIcon>\n  );\n}\nfunction PlusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z\" />\n    </SvgIcon>\n  );\n}\n\nconst StyledTreeItem = withStyles((theme) => ({\n  root: {\n    marginRight: 0,\n    paddingRight: 0,\n    width: \"100%\",\n    '&:hover': {\n      backgroundColor: \"none\"\n    }\n  },\n  iconContainer: {\n    '& .close': {\n      opacity: 0.3,\n    },\n  },\n  group: {\n    marginLeft: 7,\n    paddingLeft: 18,\n    borderLeft: `1px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n  },\n}))((props) => <TreeItem {...props}  />); \n\nfunction TaskDisplayPreMemo({task, filterOptions}){\n    \n    const classes = useStyles();\n    const [nodesSelected, setNodesSelected] = React.useState([]);\n\n    const toggleTaskTree = React.useCallback((task_id, selected) => {\n    \tif(selected){\n    \t\t// we want to add our treenode to the list if it's not there already\n    \t\tif(nodesSelected.includes(\"treenode:\" + task_id)){\n    \t\t\treturn;\n    \t\t}\n    \t\tsetNodesSelected([...nodesSelected, \"treenode:\" + task_id]);\n    \t}else{\n    \t\t// we want to remove our treenode from the list if it's there\n    \t\tconst newSelection = nodesSelected.reduce( (prev, cur) => {\n\t\t\t\tif(cur === \"treenode:\" + task_id){\n\t\t\t\t\treturn [...prev];\n\t\t\t\t}\n\t\t\t\treturn [...prev, cur];\n    \t\t}, [])\n    \t\tsetNodesSelected(newSelection);\n    \t}\n    }, [nodesSelected]);\n  return (\n  \t<TreeView className={classes.root}\n  \t\texpanded={nodesSelected}\n    >\n      <TaskRow task={task} filterOptions={filterOptions} nodesSelected={nodesSelected} toggleSelection={toggleTaskTree} />\n    </TreeView>\n  );\n};\nexport const TaskDisplay = React.memo(TaskDisplayPreMemo);\n\nconst TaskStatusDisplay = ({task, theme}) => {\n  if(task.status.toLowerCase().includes(\"error\")){\n    return (<Typography size=\"small\" component=\"span\" style={{padding: \"0\", color: theme.palette.error.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.status === \"cleared\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>cleared</Typography>)\n  }else if(task.status === \"completed\"){\n    return (null)//return (<Typography size=\"small\" style={{padding: \"0\", color: theme.palette.success.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>completed</Typography>)\n  }else if(task.status === \"submitted\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.info.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.status === \"processing\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>OPSEC BLOCKED (PRE)</Typography>)\n  }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>OPSEC BLOCKED (POST)</Typography>)\n  }else{\n      return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.info.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }\n}\nconst ColoredTaskDisplay = ({task, theme, children}) => {\n  const [themeColor, setThemeColor] = React.useState(theme.palette.info.main);\n  useEffect( () => {\n    if(task.status.toLowerCase().includes(\"error\")){\n      setThemeColor(theme.palette.error.main);\n    }else if(task.status.toLowerCase() === \"cleared\"){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.status === \"submitted\"){\n      setThemeColor(theme.palette.info.main);\n    }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.status.toLowerCase() === \"processing\"){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.status === \"completed\"){\n        setThemeColor(theme.palette.success.main);\n    }else{\n      setThemeColor(theme.palette.info.main);\n    }\n  }, [task.status, task.completed])\n    return(\n      <span style={{display: \"flex\", margin: 0, borderWidth: 0, padding: 0, minHeight: \"48px\", alignItems: \"center\", height: \"100%\", borderLeft: \"6px solid \" + themeColor, paddingLeft: \"5px\", width: \"100%\"}}>\n        {children}\n      </span>\n    )\n}\nconst TaskRow = ({task, filterOptions, nodesSelected, toggleSelection}) => {\n\t  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [isFetchingSubtasks, setIsFetchingSubtasks] = React.useState(false);\n    const [shouldDisplay, setShouldDisplay] = React.useState(true);\n    const me = useReactiveVar(meState);\n    const [getSubTasking, { startPolling, stopPolling }] = useLazyQuery(getSubTaskingQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n        \tif(nodesSelected.includes(\"treenode:\" + task.id)){\n        \t\tstartPolling(2000);\n        \t}else{\n        \t\tstopPolling();\n        \t\tsetIsFetchingSubtasks(false);\n        \t\treturn;\n        \t}\n        \tsetTaskingData(data);\n        }\n    });\n    const getSubTasks = React.useCallback( (event) => {\n    \tif(!isFetchingSubtasks){\n        \ttoggleSelection(task.id, true);\n        \tsetIsFetchingSubtasks(true);\n    \t\tgetSubTasking({variables: {task_id: task.id} });\n    \t\treturn;\n      }\n      //// we're already fetching subtasks, but just clicked the minus sign, so stop\n      toggleSelection(task.id, false);\n    }, [isFetchingSubtasks]);\n    useEffect( () => {\n      /*props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    }); */\n      if(task.display_params.includes(\"help\") && task.operator.username !== me.user.username){\n        setShouldDisplay(false);\n        return;\n      }\n      if(filterOptions === undefined){\n        if(!shouldDisplay){\n          setShouldDisplay(true);\n        }\n        return;\n      }\n      if(filterOptions[\"operatorsList\"].length > 0){\n        if(!filterOptions[\"operatorsList\"].includes(task.operator.username)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commentsFlag\"]){\n        if(task.comment === \"\"){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commandsList\"].length > 0){\n        // only show these commands\n        if(!filterOptions[\"commandsList\"].includes(task.command_name)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"everythingButList\"].length > 0){\n          if(filterOptions[\"everythingButList\"].includes(task.command_name)){\n            if(shouldDisplay){\n              setShouldDisplay(false);\n            }\n            return;\n          }\n      }\n      if(filterOptions[\"parameterString\"] !== \"\"){\n        let regex = new RegExp(filterOptions[\"parameterString\"]);\n        if(!regex.test(task.display_params)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(!shouldDisplay){\n        setShouldDisplay(true);\n      }\n    }, [filterOptions, task.comment, task.command, task.display_params, task.operator.username]);\n    const toggleTaskDropdown = React.useCallback( (event, expanded) => {\n      setDropdownOpen(!dropdownOpen);\n    }, [dropdownOpen]);\n    \n    useEffect( () => {\n      if(!isFetchingSubtasks && task.tasks.length > 0){\n        getSubTasks();\n      }\n    }, [task.tasks])\n    return (\n      shouldDisplay ? (\n        <StyledTreeItem nodeId={\"treenode:\" + task.id}\n          onIconClick={getSubTasks}\n          icon={\n            nodesSelected.includes(\"treenode:\" + task.id) ? (<MinusSquare />) : (task.tasks.length > 0 ? (<PlusSquare />) : (null) )\n          }\n          label={\n            <TaskLabel task={task} dropdownOpen={dropdownOpen} toggleTaskDropdown={toggleTaskDropdown}/>\n          }>\n          {\n            taskingData.task.map( (tsk) => (\n              <TaskRow key={\"taskrow: \" + tsk.id} task={tsk} nodesSelected={nodesSelected} filterOptions={filterOptions} toggleSelection={toggleSelection}/>\n            ))\n          }\n      </StyledTreeItem>\n      ) : (null)\n    )\n}\nconst TaskLabel = ({task, dropdownOpen, toggleTaskDropdown}) => {\n  const [fromNow, setFromNow] = React.useState( (new Date()) );\n  const me = useReactiveVar(meState);\n  const theme = useTheme();\n  const [displayComment, setDisplayComment] = React.useState(false);\n  const [alertBadges, setAlertBadges] = React.useState(0);\n  const classes = useStyles();\n  const accordionClasses = accordionUseStyles();\n  const toggleDisplayComment = (evt) => {\n    evt.stopPropagation();\n    setDisplayComment(!displayComment);\n  }\n  const prevResponseMaxId = useRef(0);\n  useLayoutEffect( () => {\n    scrollContent();\n  }, [])\n  useEffect( () => {\n    //console.log(\"in use effect\", prevResponseCount.current, props.task.responses);\n    let currentData = task?.responses?.length > 0 ? task.responses[0] : {id: 0, timestamp: 0};\n    if(!dropdownOpen){\n      if((new Date(currentData.timestamp + \"Z\")) > fromNow){\n        if(prevResponseMaxId.current === 0){\n          toggleTaskDropdown();\n        }else if(currentData.id > prevResponseMaxId.current){\n          setAlertBadges(1);\n        }\n      }\n        \n    }else{\n      prevResponseMaxId.current = currentData.id;\n      setAlertBadges(0);\n    }\n  }, [task.responses, dropdownOpen]);\n  const scrollContent = (node, isAppearing) => {\n    document.getElementById(`scrolltotask${task.id}`).scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"start\"\n      })\n  }\n\n  return(\n    <Paper className={classes.root} elevation={5} style={{marginRight: 0}} id={`taskHeader-${task.id}`}>\n      <Accordion TransitionProps={{ unmountOnExit: true, onEntered: scrollContent }} defaultExpanded={false} onChange={toggleTaskDropdown} expanded={dropdownOpen} >\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel1c-content-task-${task.id}`}\n          id={`panel1c-header-${task.id}`}\n          classes={accordionClasses}\n        >  \n          <ColoredTaskDisplay task={task} theme={theme}>\n              <div id={'scrolltotask' + task.id} style={{width: \"100%\"}}>\n                {displayComment ? (\n                    <React.Fragment>\n                        <Typography className={classes.secondaryHeading}>{task.commentOperator.username}</Typography>\n                        <Typography className={classes.heading}>{task.comment}</Typography>\n                    </React.Fragment>\n                  ) : (null)}\n                    <Typography className={classes.taskAndTimeDisplay}>[{toLocalTime(task.timestamp, me.user.view_utc_time)}] / {task.id} / {task.operator.username}\n                      <TaskStatusDisplay task={task} theme={theme}/>\n                    </Typography>\n                  <div>\n                  {task.comment !== \"\" ? (\n                        <div className={classes.column}>\n                            <IconButton size=\"small\" style={{padding: \"0\"}} color=\"primary\" onClick={toggleDisplayComment}><ChatOutlinedIcon/></IconButton>\n                          </div>\n                      ) : (null)}\n                    <div className={classes.column}>\n                        <Badge badgeContent={alertBadges} color=\"secondary\" anchorOrigin={{vertical: 'top', horizontal: 'left'}}>\n                          <Typography className={classes.heading} onClick={(e) => {e.stopPropagation();}} >\n                            {task.command_name + \" \" + task.display_params}\n                          </Typography>\n                        </Badge>\n                      </div>\n                </div>\n            </div>\n          </ColoredTaskDisplay>          \n        </AccordionSummary>\n        <AccordionDetails style={{cursor: \"default\"}}>\n          <TaskDisplayContainer task={task}/>\n        </AccordionDetails>\n      </Accordion>\n  </Paper>\n  )\n}","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport Input from '@material-ui/core/Input';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Paper from '@material-ui/core/Paper';\nimport TableHead from '@material-ui/core/TableHead';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {useTheme} from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport {Typography} from '@material-ui/core';\nimport {useMutation, gql } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {CredentialTableNewCredentialDialog} from '../Search/CredentialTableNewCredentialDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\nimport { Backdrop } from '@material-ui/core';\nimport {CircularProgress} from '@material-ui/core';\n\nconst getDynamicQueryParams = gql`\nmutation getDynamicParamsMutation($callback: Int!, $command: String!, $payload_type: String!, $parameter_name: String!){\n    dynamic_query_function(callback: $callback, command: $command, payload_type: $payload_type, parameter_name: $parameter_name){\n        status\n        error\n        choices\n    }\n}\n`;\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      ...credentialData\n    }\n  }\n`;\n\nexport function TaskParametersDialogRow(props){\n    const [value, setValue] = React.useState('');\n    const theme = useTheme();\n    const [ChoiceOptions, setChoiceOptions] = React.useState([]);\n    const [boolValue, setBoolValue] = React.useState(false);\n    const [arrayValue, setArrayValue] = React.useState([\"\"]);\n    const [choiceMultipleValue, setChoiceMultipleValue] = React.useState([]);\n    const [agentConnectNewHost, setAgentConnectNewHost] = React.useState(\"\");\n    const [agentConnectHostOptions, setAgentConnectHostOptions] = React.useState([]);\n    const [agentConnectNewPayload, setAgentConnectNewPayload] = React.useState(0);\n    const [agentConnectHost, setAgentConnectHost] = React.useState(0);\n    const [agentConnectPayloadOptions, setAgentConnectPayloadOptions] = React.useState([]);\n    const [agentConnectPayload, setAgentConnectPayload] = React.useState(0);\n    const [agentConnectC2ProfileOptions, setAgentConnectC2ProfileOptions] = React.useState([]);\n    const [agentConnectC2Profile, setAgentConnectC2Profile] = React.useState(0);\n    const [openAdditionalPayloadOnHostMenu, setOpenAdditionalPayloadOnHostmenu] = React.useState(false);\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const [fileValue, setFileValue] = React.useState({name: \"\"});\n    const [backdropOpen, setBackdropOpen] = React.useState(false);\n    const usingDynamicParamChoices = React.useRef(false);\n    const [getDynamicParams] = useMutation(getDynamicQueryParams, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if(data.dynamic_query_function.status === \"success\"){\n                try{\n                    setChoiceOptions([...data.dynamic_query_function.choices]);\n                    usingDynamicParamChoices.current = true;\n                    if(props.type === \"Choice\"){\n                        if(data.dynamic_query_function.choices.length > 0){\n                            setValue(data.dynamic_query_function.choices[0]);\n                            props.onChange(props.name, data.dynamic_query_function.choices[0], false);\n                        }\n                    }\n                }catch(error){\n                    setBackdropOpen(false);\n                    snackActions.warning(\"Failed to parse dynamic parameter results\");\n                    setChoiceOptions([]);\n                }\n                \n            }else{\n                snackActions.warning(data.dynamic_query_function.error);\n            }\n            setBackdropOpen(false);\n        },\n        onError: (data) => {\n            snackActions.warning(\"Failed to perform dynamic parameter query\");\n            console.log(data);\n        }\n    })\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n            props.addedCredential();\n            let newLength = ChoiceOptions.length;\n            setChoiceOptions([...ChoiceOptions, {...data.insert_credential_one}]);\n            switch(props.type){\n                case \"Credential-JSON\":\n                    setValue(newLength);\n                    props.onChange(props.name, {...data.insert_credential_one}, false);\n                    break;\n                case \"Credential-Account\":\n                    setValue(data.insert_credential_one.account);\n                    props.onChange(props.name, data.insert_credential_one.account, false);\n                    break;\n                case \"Credential-Realm\":\n                    setValue(data.insert_credential_one.realm);\n                    props.onChange(props.name, data.insert_credential_one.realm, false);\n                    break;\n                case \"Credential-Type\":\n                    setValue(data.insert_credential_one.type);\n                    props.onChange(props.name, data.insert_credential_one.type, false);\n                    break;\n                case \"Credential-Credential\":\n                    setValue(data.insert_credential_one.credential_text);\n                    props.onChange(props.name, data.insert_credential_one.credential_text, false);\n                    break;\n                default:\n                    break;\n            }\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    useEffect( () => {\n        if(props.dynamic_query_function !== null){\n            if(ChoiceOptions.length === 0){\n                setBackdropOpen(true);\n                getDynamicParams({variables:{\n                    callback: props.callback_id,\n                    parameter_name: props.name,\n                    command: props.commandInfo.cmd,\n                    payload_type: props.commandInfo.payloadtype.ptype\n                }})\n            }\n        }\n       if(props.type === \"Boolean\"){\n            if(value === \"\"){\n                setBoolValue(props.value);\n                setValue(props.value);\n            }\n       }else if(props.type === \"Array\"){\n            if(arrayValue.length === 0 && props.value.length > 0){\n                setArrayValue(props.value);\n            }\n       }else if(props.type === \"ChoiceMultiple\" && props.dynamic_query_function === null){\n           if(value === \"\"){\n               //console.log(props.value);\n                setChoiceMultipleValue(props.value);\n                setValue(props.value);\n                setChoiceOptions(props.choices);\n           }\n       }\n       else if(props.type === \"AgentConnect\"){\n            if(props.choices.length > 0){\n                //setAgentConnectHost(0);\n                let hostNum = 0;\n                if(agentConnectHost < props.choices.length){\n                    hostNum = agentConnectHost;\n                }else{\n                    setAgentConnectHost(0);\n                }\n                setAgentConnectHostOptions(props.choices);\n                let payloadNum = 0;\n                if(agentConnectPayload < props.choices[hostNum][\"payloads\"].length){\n                    payloadNum = agentConnectPayload;\n                }else{\n                    setAgentConnectPayload(0);\n                }\n                setAgentConnectPayloadOptions(props.choices[hostNum][\"payloads\"]);\n                if(props.choices[hostNum][\"payloads\"].length > 0){\n                    //setAgentConnectPayload(0);  \n                    if(props.choices[hostNum][\"payloads\"][payloadNum][\"c2info\"].length > 0){\n                        setAgentConnectC2ProfileOptions(props.choices[hostNum][\"payloads\"][payloadNum][\"c2info\"]);\n                        //setAgentConnectC2Profile(0);\n                    }\n                }else{\n                    snackActions.warning(\"Mythic knows of no host with a P2P payload. Please add one.\");\n                }\n            }else{\n                setAgentConnectHostOptions([]);\n                setAgentConnectC2ProfileOptions([]);\n                snackActions.warning(\"Mythic knows of no host with a P2P payload. Please add one.\")\n            }\n       }else{\n           if(value === \"\"){\n               if(props.type === \"Number\"){\n                   if(props.value === \"\"){\n                       setValue(0);\n                   }else{\n                        setValue(parseInt(props.value));\n                   }\n               }else{\n                    setValue(props.value);\n               }\n           }\n           if(props.dynamic_query_function === null && value===\"\"){\n                setChoiceOptions([...props.choices]);\n                setValue(props.value);\n           }else if(props.choices.length != ChoiceOptions.length){\n               if(!usingDynamicParamChoices.current){\n                    setChoiceOptions([...props.choices]);\n               }    \n               \n           }\n           \n       }\n       \n    }, [props.choices, props.default_value, props.type, props.value, setBoolValue, value]);\n    const onChangeAgentConnect = (host_index, payload_index, c2_index) => {\n        const c2profileparameters = props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].parameters.reduce( (prev, opt) => {\n            return {...prev, [opt.name]: opt.value}\n        }, {});\n        let agentConnectValue = {host: props.choices[host_index][\"host\"], agent_uuid: props.choices[host_index][\"payloads\"][payload_index].uuid,\n        c2_profile: {name: props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].name, parameters: c2profileparameters}};\n        if(props.choices[host_index][\"payloads\"][payload_index].type === \"callback\"){\n            agentConnectValue[\"callback_uuid\"] = props.choices[host_index][\"payloads\"][payload_index][\"agent_callback_id\"];\n        }else{\n            agentConnectValue[\"callback_uuid\"] = \"\";\n        }\n        props.onChange(props.name, agentConnectValue, false);\n    }\n    const onChangeLinkInfo = (index) => {\n        let choice;\n        if(props.choices[index][\"source\"][\"id\"] === props.callback_id){\n            choice = props.choices[index][\"destination\"];\n        }else{\n            choice = props.choices[index][\"source\"];\n        }\n        const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n            if(opt.c2_profile_id === props.choices[index][\"c2profile\"][\"id\"]){\n                return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key, dec_key: opt.dec_key} }\n            }else{\n                return {...prev};\n            }\n        }, {});\n        let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: props.choices[index][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n        props.onChange(props.name, agentConnectValue, false);\n        setValue(index);\n    }\n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, evt.target.value, false);\n    }\n    const onChangeCredentialJSONValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, ChoiceOptions[evt.target.value], false);\n    }\n    const onChangeChoiceMultiple = (event) => {\n        const { options } = event.target;\n        const value = [];\n        for (let i = 0, l = options.length; i < l; i += 1) {\n          if (options[i].selected) {\n            value.push(options[i].value);\n          }\n        }\n        setChoiceMultipleValue(value);\n        setValue(value);\n        props.onChange(props.name, value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        props.onChange(props.name, value, error);\n    }\n    const onChangeNumber = (name, value, error) => {\n        setValue(parseInt(value));\n        props.onChange(props.name, parseInt(value), error);\n    }\n    const onSwitchChange = (event) => {\n        setBoolValue(event.target.checked);\n        setValue(event.target.checked);\n        props.onChange(props.name, event.target.checked);\n    }\n    const onFileChange = (evt) => {\n       setFileValue({name: evt.target.files[0].name});\n       props.onChange(props.name, evt.target.files[0]);\n        \n    }\n    const onChangeAgentConnectHost = (event) => {\n        setAgentConnectHost(event.target.value); \n        setAgentConnectPayloadOptions(props.choices[event.target.value][\"payloads\"]);\n        if(props.choices[event.target.value][\"payloads\"].length > 0){\n            setAgentConnectPayload(0);  \n            if(props.choices[event.target.value][\"payloads\"][0][\"c2info\"].length > 0){\n                setAgentConnectC2ProfileOptions(props.choices[0][\"payloads\"][0][\"c2info\"]);\n                setAgentConnectC2Profile(0);\n                onChangeAgentConnect(event.target.value, 0, 0);\n            }else{\n                setAgentConnectC2ProfileOptions([]);\n                setAgentConnectC2Profile(null);\n            }\n        }else{\n            setAgentConnectPayloadOptions([]);\n            setAgentConnectPayload(null);\n            setAgentConnectC2ProfileOptions([]);\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectPayload = (event) => {\n        setAgentConnectPayload(event.target.value);\n        setAgentConnectC2ProfileOptions(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"]);\n        if(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"].length > 0){\n            setAgentConnectC2Profile(0);\n            onChangeAgentConnect(agentConnectHost, event.target.value, 0);\n        }else{\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectC2Profile = (event) => {\n        setAgentConnectC2Profile(event.target.value);\n        onChangeAgentConnect(agentConnectHost, agentConnectPayload, event.target.value);\n    }\n    const onChangeAgentConnectNewHost = (name, value, error) => {\n        setAgentConnectNewHost(value);\n    }\n    const onChangeAgentConnectNewPayload = (event) => {\n        setAgentConnectNewPayload(event.target.value);\n    }\n    const onAgentConnectAddNewPayloadOnHost = () => {\n        if(agentConnectNewHost === \"\"){\n            snackActions.error(\"Must set a hostname\");\n            return;\n        }\n        props.onAgentConnectAddNewPayloadOnHost(agentConnectNewHost.toUpperCase(), props.payload_choices[agentConnectNewPayload].id);\n        setOpenAdditionalPayloadOnHostmenu(false);\n    }\n    const onAgentConnectRemovePayloadOnHost = () => {\n        if(props.choices[agentConnectHost][\"payloads\"][agentConnectPayload].payloadOnHostID){\n            props.onAgentConnectRemovePayloadOnHost(props.choices[agentConnectHost][\"payloads\"][agentConnectPayload].payloadOnHostID);\n        }else{\n            snackActions.warning(\"Can't remove a callback\");\n        }\n        \n    }\n    const testParameterValues = (curVal) => {\n        if( props.required && props.verifier_regex !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else if(props.verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const addNewArrayValue = () => {\n        const newArray = [...arrayValue, \"\"];\n        setArrayValue(newArray);\n        props.onChange(props.name, newArray, false);\n    }\n    const removeArrayValue = (index) => {\n        let removed = [...arrayValue];\n        removed.splice(index, 1);\n        setArrayValue(removed);\n        props.onChange(props.name, removed, false);\n    }\n    const onChangeArrayText = (value, error, index) => {\n        let values = [...arrayValue];\n        values[index] = value;\n        setArrayValue(values);\n        props.onChange(props.name, values, false);\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    const getParameterObject = () => {\n        switch(props.type){\n            case \"Choice\":\n            case \"ChoiceMultiple\":\n                return (\n                    <React.Fragment>\n                        <Backdrop open={backdropOpen} style={{zIndex: 2, position: \"absolute\"}} invisible={false}>\n                            <CircularProgress color=\"inherit\" />\n                        </Backdrop>\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                            native\n                            autoFocus={props.autoFocus}\n                            multiple={props.type === \"ChoiceMultiple\"}\n                            value={props.type === \"ChoiceMultiple\" ? choiceMultipleValue : value}\n                            onChange={props.type === \"ChoiceMultiple\" ? onChangeChoiceMultiple : onChangeValue}\n                            input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt}>{opt}</option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                    </React.Fragment>\n                    \n                )\n            case \"Array\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\">\n                        <Table size=\"small\" style={{tableLayout: \"fixed\", maxWidth: \"100%\", \"overflow\": \"auto\"}}>\n                            <TableBody>\n                                {arrayValue.map( (a, i) => (\n                                    <TableRow key={'array' + props.name + i} hover>\n                                        <TableCell style={{width: \"5rem\"}}>\n                                            <Button onClick={() => removeArrayValue(i)} style={{backgroundColor: theme.palette.error.main,}} size=\"small\" variant=\"contained\">x</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                            <MythicTextField required={props.required} fullWidth={true} placeholder={\"\"} value={a} multiline={false} autoFocus={props.autoFocus && i === 0}\n                                                onChange={(n,v,e) => onChangeArrayText(v, e, i)} display=\"inline-block\" onEnter={addNewArrayValue}\n                                                validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                                            />\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                                <TableRow hover>\n                                    <TableCell style={{width: \"5rem\"}}>\n                                        <Button onClick={addNewArrayValue} size=\"small\" variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>+</Button>\n                                    </TableCell>\n                                    <TableCell></TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false}\n                        onChange={onChangeText} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Number\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false} type=\"number\"\n                        onChange={onChangeNumber} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                    <Switch checked={boolValue} onChange={onSwitchChange} />\n                )\n            case \"File\":\n                return (\n                    <Button variant=\"contained\" component=\"label\"> \n                        { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n                    <input onChange={onFileChange} type=\"file\" hidden /> </Button>\n                )\n            case \"LinkInfo\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={(evt) => {onChangeLinkInfo(evt.target.value)}}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={i}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"PayloadList\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={opt.uuid}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"AgentConnect\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\"> \n                        <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                            <TableBody>\n                                {openAdditionalPayloadOnHostMenu ? (\n                                <React.Fragment>\n                                    <TableRow>\n                                        <TableCell style={{width: \"6em\"}}>Hostname</TableCell>\n                                        <TableCell>\n                                            <MythicTextField required={true} placeholder={\"hostname\"} value={agentConnectNewHost} multiline={false} autoFocus={props.autoFocus}\n                                                onChange={onChangeAgentConnectNewHost} display=\"inline-block\"/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Payload on that host</TableCell>\n                                        <TableCell>\n                                            <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectNewPayload}\n                                                  onChange={onChangeAgentConnectNewPayload}\n                                                  input={<Input />}\n                                                >\n                                                {props.payload_choices ? (\n                                                    props.payload_choices.map((opt, i) => (\n                                                        <option key={props.name + \"newpayload\" + i} value={i}>{opt.display}</option>\n                                                    ))\n                                                ) : ( <option key={props.name + \"nooptionnewpayload\"} value=\"-1\">No Payloads</option> )}\n                                                </Select>\n                                            </FormControl>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>\n                                            <Button component=\"span\"  style={{color: theme.palette.success.main, padding: 0}} onClick={onAgentConnectAddNewPayloadOnHost}><AddCircleIcon />Add</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                            <Button component=\"span\" style={{color: theme.palette.warning.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(false)}}><CancelIcon />Cancel</Button>\n                                        </TableCell>\n                                    </TableRow>\n                                </React.Fragment>\n                                ) : (null) }\n                                <TableRow>\n                                    <TableCell style={{width: \"6em\"}}>\n                                        Host \n                                    </TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectHost}\n                                              onChange={onChangeAgentConnectHost}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectHostOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connecthost\" + i} value={i}>{opt.host}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell>Payload</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectPayload}\n                                              onChange={onChangeAgentConnectPayload}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectPayloadOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connectagent\" + i} value={i}>{opt.display}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                        \n                                    </TableCell>\n                                </TableRow>\n                                {!openAdditionalPayloadOnHostMenu &&\n                                            <TableRow>\n                                                <TableCell>\n                                                <Button component=\"span\" style={{color: theme.palette.success.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(true)}}><AddCircleIcon />Add</Button>\n                                                </TableCell>\n                                                <TableCell>\n                                                <Button component=\"span\" style={{color: theme.palette.error.main, padding: 0}} onClick={onAgentConnectRemovePayloadOnHost}><DeleteIcon />Remove</Button>\n                                                </TableCell>\n                                            </TableRow>\n                                        }\n                                <TableRow>\n                                    <TableCell>C2 Profile</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectC2Profile}\n                                                  onChange={onChangeAgentConnectC2Profile}\n                                                  input={<Input />}\n                                                >\n                                                {\n                                                    agentConnectC2ProfileOptions.map((opt, i) => (\n                                                        <option key={props.name + \"connectprofile\" + i} value={i}>{opt.name}</option>\n                                                    ))\n                                                }\n                                                </Select>\n                                            </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                        {agentConnectC2ProfileOptions.length > 0 ? (\n                            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                                <TableHead>\n                                        <TableRow>\n                                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                            <TableCell>Value</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                <TableBody>\n                                    \n                                    {agentConnectC2ProfileOptions[agentConnectC2Profile][\"parameters\"].map( (opt, i) => (\n                                        <TableRow key={\"agentconnectparameters\" + props.name + i}>\n                                            <TableCell>{opt.name}</TableCell>\n                                            <TableCell><pre>{JSON.stringify(opt.value, null, 2)}</pre></TableCell>\n                                        </TableRow>\n                                    ) ) }\n                                </TableBody>\n                            </Table>\n                        ): (null)}\n                    </TableContainer>\n                )\n            case \"Credential-JSON\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeCredentialJSONValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={i}>\n                                        {opt.account + \"@\" + opt.realm + \" - \" + opt.credential_text.substring(0, 10) + \" - \" + opt.comment}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                    \n                )\n            case \"Credential-Account\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.account} >\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.account + \" )\" : opt.account}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Realm\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.realm}>\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.realm + \" )\" : opt.realm}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Type\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.type}>{opt.type}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Credential\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.credential_text} style={{textOverflow: \"ellipsis\"}}>\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.credential_text + \" )\" : opt.credential_text}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n           default:\n            return null\n        }\n    }\n    return (\n            <TableRow key={\"buildparam\" + props.id}>\n                <TableCell >\n                    <MythicStyledTooltip title={props.description.length > 0 ? props.description : \"No Description\"}>\n                        {props.display_name}\n                    </MythicStyledTooltip>\n                    {props.required ? (\n                        <Typography component=\"div\" style={{color: theme.palette.warning.main}}>Required</Typography>\n                    ) : (null) }\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import { snackActions } from '../utilities/Snackbar';\n\nexport const UploadTaskFile = async (file) => {\n  let formData = new FormData();\n  formData.append(\"file\", file);\n  snackActions.info(\"Uploading \" + file.name + \" to Mythic...\", {autoHideDuration: 2000});\n  const upload_response = await fetch('/api/v1.4/task_upload_file_webhook', {\n    method: 'POST',\n    body: formData,\n    headers: {\n      \"Authorization\": `Bearer ${localStorage.getItem(\"acess_token\")}`\n    }\n  })\n  const upload_result = upload_response.json().then(data => {\n          console.log(data);\n          return data?.agent_file_id || data?.error || null;\n      }).catch(error => {\n          console.log(upload_response);\n          snackActions.warning(\"Error: \" + upload_response.statusText + \"\\nError Code: \" + upload_response.status);\n          console.log(\"Error trying to get json response\", error.toString());\n          return null;\n      });\n  \n  return upload_result;\n}","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {TaskParametersDialogRow} from './TaskParametersDialogRow';\nimport {useQuery, gql, useLazyQuery, useMutation } from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Input from '@material-ui/core/Input';\nimport {UploadTaskFile} from '../../MythicComponents/MythicFileUpload';\nimport { Backdrop } from '@material-ui/core';\nimport {CircularProgress} from '@material-ui/core';\nimport Divider from '@material-ui/core/Divider';\nimport {useTheme} from '@material-ui/core/styles';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\n//if we need to get all the loaded commands for the callback and filter, use this\nconst GetLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}}) {\n    id\n    command {\n      cmd\n      attributes\n      id\n    }\n  }\n}\n`;\n//if we need to get all the possible commands for a payload type and filter, use this\nconst getAllCommandsQuery = gql`\nquery getAllCommandsQuery($payload_type_id: Int!){\n    command(where: {payload_type_id: {_eq: $payload_type_id}, deleted: {_eq: false}}) {\n        attributes\n        cmd\n        id\n    }\n}\n`;\n//if we need to get all the possible edges for the callback, use this\nconst getAllEdgesQuery = gql`\nquery getAllEdgesQuery($callback_id: Int!){\n    callbackgraphedge(where: {_or: [{source_id:{_eq: $callback_id}}, {destination_id: {_eq: $callback_id}}]}) {\n        id\n        c2profile {\n          id\n          name\n        }\n        direction\n        destination{\n            agent_callback_id\n            host\n            id\n            payload {\n              id\n              uuid\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              value\n              id\n              c2_profile_id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        source{\n            agent_callback_id\n            host\n            id\n            payload {\n              uuid\n              id\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              c2_profile_id\n              value\n              id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        end_timestamp\n      }\n    }\n`;\n// get all payloads query\nconst getAllPayloadsQuery = gql`\nquery getAllPayloadsQuery($operation_id: Int!){\n    payload(where: {deleted: {_eq: false}, build_phase: {_eq: \"success\"}, operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    uuid\n    payloadc2profiles {\n      id\n      c2profile {\n        name\n        id\n        is_p2p\n      }\n    }\n    payloadtype{\n        id\n        ptype\n    }\n    filemetum {\n        id\n        filename_text\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        name\n        id\n      }\n    }\n  }\n}\n`;\n// get all payloads on hosts\nconst getAllPayloadsOnHostsQuery = gql`\nquery getAllPayloadsOnHostsQuery($operation_id: Int!){\n    payloadonhost(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, payload: {c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}}) {\n        host\n        id\n        payload {\n            auto_generated\n            id\n            tag\n            filemetum {\n                filename_text\n                id\n            }\n            uuid\n            c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n                c2profile {\n                    name\n                    id\n                }\n                c2profileparameter {\n                    crypto_type\n                    name\n                    id\n                }\n                value\n                enc_key_base64\n                dec_key_base64\n                id\n            }\n        }\n    }\n    callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}, c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}){\n        agent_callback_id\n        host\n        id\n        description\n        crypto_type\n        payload {\n            auto_generated\n            id\n            tag\n            filemetum {\n                filename_text\n                id\n            }\n            uuid\n        }\n        c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n            c2profile {\n                name\n                id\n            }\n            c2profileparameter {\n                crypto_type\n                name\n                id\n            }\n            value\n            enc_key_base64\n            dec_key_base64\n            id\n        }\n    }\n}\n`;\n// use this to add a payload on a host\nconst addPayloadOnHostMutation = gql`\n    mutation addPayloadOnHostMutation($host: String!, $payload_id: Int!){\n        insert_payloadonhost(objects: {host: $host, payload_id: $payload_id}) {\n            affected_rows\n          }\n    }\n`;\n// use this to remove a payload on a host\nconst removePayloadOnHostMutation = gql`\n    mutation removePayloadOnHostMutation($payloadOnHostID: Int!){\n        delete_payloadonhost_by_pk(id: $payloadOnHostID) {\n            id\n          }\n    }\n`;\n// use this to get all of the parameters and information for the command we're trying to execute\nconst getCommandQuery = gql`\nquery getCommandQuery($id: Int!){\n  command_by_pk(id: $id) {\n    attributes\n    author\n    cmd\n    description\n    help_cmd\n    id\n    needs_admin\n    version\n    payloadtype{\n        ptype\n    }\n    commandparameters {\n      choice_filter_by_command_attributes\n      choices\n      choices_are_all_commands\n      choices_are_loaded_commands\n      default_value\n      description\n      id\n      name\n      required\n      supported_agent_build_parameters\n      supported_agents\n      type\n      dynamic_query_function\n      ui_position\n      parameter_group_name\n      display_name\n      cli_name\n    }\n    commandopsec {\n      authentication\n      id\n      injection_method\n      process_creation\n    }\n  }\n}\n`;\n// use this to get all of the credentials for the command we're trying to execute\nconst getCredentialsQuery = gql`\nquery getCredentialsQuery($operation_id: Int!){\n    credential(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}}){\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n    }\n}\n`;\nexport function TaskParametersDialog(props) {\n    const theme = useTheme();\n    const [backdropOpen, setBackdropOpen] = React.useState(false);\n    const [commandInfo, setCommandInfo] = useState({});\n    const [parameterGroups, setParameterGroups] = useState([]);\n    const [selectedParameterGroup, setSelectedParameterGroup] = useState('Default');\n    const [parameters, setParameters] = useState([]);\n    const [rawParameters, setRawParameters] = useState(false);\n    const [requiredPieces, setRequiredPieces] = useState({all: false, loaded: false, edges: false, credentials: false});\n    //get all the data about our command that we can\n    const [getAllCommands, { data: allCommandsLoading}] = useLazyQuery(getAllCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getLoadedCommands, { data: loadedCommandsLoading}] = useLazyQuery(GetLoadedCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllEdges, { data: loadedAllEdgesLoading}] = useLazyQuery(getAllEdgesQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloads, { data: loadedAllPayloadsLoading}] = useLazyQuery(getAllPayloadsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloadsOnHosts, { data: loadedAllPayloadsOnHostsLoading}] = useLazyQuery(getAllPayloadsOnHostsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllCredentials, { data: loadedCredentialsLoading}] = useLazyQuery(getCredentialsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [addPayloadOnHost] = useMutation(addPayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    });\n    const [RemovePayloadOnHost] = useMutation(removePayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    })\n    useQuery(getCommandQuery, {\n        variables: {id: props.command.id},\n        fetchPolicy: \"no-cache\",\n        onCompleted: data => {\n            // do an initial pass to see what other quries we need to make\n            let requiredPiecesInitial = {all: false, loaded: false, edges: false, credentials: false};\n            let groupNames = [];\n            data.command_by_pk.commandparameters.forEach( (cmd) => {\n                if(!groupNames.includes(cmd.parameter_group_name)){\n                    groupNames.push(cmd.parameter_group_name);\n                }\n                if(cmd.type === \"LinkInfo\"){\n                    requiredPiecesInitial[\"edges\"] = true;\n                }else if(cmd.choices_are_all_commands){\n                    requiredPiecesInitial[\"all\"] = true;\n                }else if(cmd.choices_are_loaded_commands){\n                    requiredPiecesInitial[\"loaded\"] = true;\n                }else if(cmd.type === \"AgentConnect\"){\n                    requiredPiecesInitial[\"connect\"] = true;\n                    //need payloads as well in case the user wants to add a payload to a host\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type === \"PayloadList\"){\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type.includes(\"Credential\")){\n                    requiredPiecesInitial[\"credentials\"] = true;\n                }\n            });\n            groupNames.sort();\n            setParameterGroups(groupNames);\n            if(props.command.groupName && groupNames.includes(props.command.groupName)){\n                setSelectedParameterGroup(props.command.groupName);\n            } else if(!groupNames.includes(\"Default\")){\n                setSelectedParameterGroup(groupNames[0]);\n            }\n            setCommandInfo({...data.command_by_pk});\n            if(requiredPiecesInitial[\"edges\"]){getAllEdges({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"all\"]){getAllCommands({variables: {payload_type_id: props.payloadtype_id}});}\n            if(requiredPiecesInitial[\"loaded\"]){getLoadedCommands({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"payloads\"]){getAllPayloads({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"connect\"]){getAllPayloadsOnHosts({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"credentials\"]){getAllCredentials({variables: {operation_id: props.operation_id}});}\n            setRequiredPieces(requiredPiecesInitial);\n            setRawParameters({...data});\n        }\n    });\n    const addedCredential = () => {\n        getAllCredentials({variables: {operation_id: props.operation_id}});\n    }\n    const intersect = (a, b) => {\n      let setB = new Set(b);\n      return [...new Set(a)].filter(x => setB.has(x));\n    }\n    \n    useEffect( () => {\n        const getLinkInfoFromAgentConnect = (choices) => {\n            if(choices.length > 0){\n                const c2profileparameters = choices[0][\"payloads\"][0][\"c2info\"][0].parameters.reduce( (prev, opt) => {\n                    return {...prev, [opt.name]: opt.value}\n                }, {});\n                let agentConnectValue = {host: choices[0][\"host\"], agent_uuid: choices[0][\"payloads\"][0].uuid,\n                c2_profile: {name: choices[0][\"payloads\"][0][\"c2info\"][0].name, parameters: c2profileparameters}};\n                if(choices[0][\"payloads\"][0].type === \"callback\"){\n                    agentConnectValue[\"callback_uuid\"] = props.choices[0][\"payloads\"][0][\"agent_callback_id\"];\n                }\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        };\n        const getLinkInfoValue = (choices) => {\n            let choice;\n            if(choices.length > 0){\n                if(choices[0][\"source\"][\"id\"] === props.callback_id){\n                    choice = choices[0][\"destination\"];\n                }else{\n                    choice = choices[0][\"source\"];\n                }\n                const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n                    if(opt.c2_profile_id === choices[0][\"c2profile\"][\"id\"]){\n                        return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key_base64, dec_key: opt.dec_key_base64} }\n                    }else{\n                        return {...prev};\n                    }\n                }, {});\n                let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: choices[0][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        }\n        if(rawParameters && (!requiredPieces[\"loaded\"] || loadedCommandsLoading) &&\n                       (!requiredPieces[\"all\"] || allCommandsLoading) &&\n                       (!requiredPieces[\"edges\"] || loadedAllEdgesLoading) &&\n                       (!requiredPieces[\"payloads\"] || loadedAllPayloadsLoading) && \n                       (!requiredPieces[\"connect\"] || loadedAllPayloadsOnHostsLoading) &&\n                       (!requiredPieces[\"credentials\"] || loadedCredentialsLoading) ){\n            //only process the parameter once we have fetched all of the required pieces\n            const params = rawParameters.command_by_pk.commandparameters.reduce( (prev, cmd) => {\n                if(cmd.parameter_group_name !== selectedParameterGroup){\n                    return [...prev];\n                }\n                switch(cmd.type){\n                    case \"Boolean\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }\n                        else if(cmd.default_value){\n                            return [...prev, {...cmd, value: cmd.default_value.toLowerCase() === \"true\"}];\n                        }else{\n                            return [...prev, {...cmd, value: false}];\n                        }\n                    case \"String\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, value: cmd.default_value}];\n                        }                      \n                    case \"Number\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, value: cmd.default_value === \"\" ? 0 : parseInt(cmd.default_value)}];\n                        }\n                    case \"Array\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else if(cmd.default_value.length > 0){\n                            return [...prev, {...cmd, value: JSON.parse(cmd.default_value)}];\n                        }else{\n                            return [...prev, {...cmd, value: []}];\n                        }\n                    case \"Choice\":\n                    case \"ChoiceMultiple\":\n                        let choices = cmd.choices.split(\"\\n\");\n                        let defaultV = cmd.default_value;\n                        if(cmd.type === \"ChoiceMultiple\"){\n                            if(cmd.default_value !== \"\"){\n                                defaultV = JSON.parse(cmd.default_value);\n                            }else{\n                                defaultV = [];\n                            }\n                        }else{\n                            if(choices.length > 0){\n                                defaultV = cmd.default_value === \"\" ? choices[0] : cmd.default_value;\n                            }\n                        }\n                        let filter = JSON.parse(cmd.choice_filter_by_command_attributes);\n                        if(cmd.choices_are_all_commands){\n                            //get all of the latest commands\n                            choices = [...allCommandsLoading.command];\n                            choices = choices.reduce( (prevn, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prevn, c.cmd];\n                                }else{\n                                    return [...prevn];\n                                }\n                            }, []);\n                            choices.sort();\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }else if(cmd.choices_are_loaded_commands){\n                            //get all of the loaded commands\n                            choices = [...loadedCommandsLoading.loadedcommands];\n                            choices = choices.reduce( (prevn, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.command.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prevn, c.command.cmd];\n                                }else{\n                                    return [...prevn];\n                                }\n                            }, []);\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, choices: choices, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, choices: choices, default_value: defaultV, value: defaultV}];\n                        }\n                    case \"File\":\n                        return [...prev, {...cmd, value: {} }];                   \n                    case \"Credential-JSON\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: {}, choices: []}];\n                        }\n                    case \"Credential-Account\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"account\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Realm\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"realm\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Type\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"type\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Credential\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"credential_text\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"AgentConnect\":\n                        const agentConnectNewPayloads = loadedAllPayloadsLoading.payload.reduce( (prevn, payload) => {\n                            let foundP2P = false;\n                            const profiles = payload.payloadc2profiles.reduce( (prevn, profile) => {\n                                if(profile.c2profile.is_p2p){foundP2P = true;}\n                                return [...prevn, profile.c2profile.name];\n                            }, []).join(\",\");\n                            if(foundP2P){\n                                return [...prevn, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}];\n                            }else{\n                                return [...prevn];\n                            }\n                            \n                        }, []);\n                        const callbacksOrganized = loadedAllPayloadsOnHostsLoading.callback.reduce( (prevn, entry) => {\n                            let found = false;\n                            const updates = prevn.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    const c2info = entry.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prevn){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.registered_payload, c2info: c2array, display: \"Callback \" + entry.id + \" - \" + entry.description, ...entry, type: \"callback\", payloadOnHostID:null};\n                                    return {...host, payloads: [...host.payloads, payloadInfo]}\n                                }else{\n                                    return host;\n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prevn){\n                                        //we just want to add a new entry to the c2profile.name list\n                                            \n                                        return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.registered_payload, c2info: c2array, display: \"Callback \" + entry.id + \" - \" + entry.description, ...entry, type: \"callback\", payloadOnHostID:null};\n                                return [...prevn, {host: entry.host, payloads: [payloadInfo] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        const organized = loadedAllPayloadsOnHostsLoading.payloadonhost.reduce( (prevn, entry) => {\n                            let found = false;\n                            const updates = prevn.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    //now we need to merge this entry with our current payloads/callbacks for the host\n                                    let duplicated_payload = false;\n                                    host.payloads.forEach( (p) => {\n                                        if(p.id === entry.payload.id){duplicated_payload = true}\n                                    });\n                                    if(duplicated_payload){return host}\n                                    const c2info = entry.payload.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prevn){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\", payloadOnHostID:entry.id};\n                                    return {...host, payloads: [...host.payloads, payloadInfo]}\n                                }else{\n                                    //this doesn't match our host, so don't modify\n                                    return host; \n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.payload.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prevn){\n                                        //we just want to add a new entry to the c2profile.name list\n                                        \n                                        return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\", payloadOnHostID:entry.id};\n                                return [...prevn, {host: entry.host, payloads: [payloadInfo] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        // callbacksOrganized has all the information for active callbacks to link to\n                        // organized has all of the information for payloads on hosts to link to\n                        // need to merge the two\n                        const allOrganized = callbacksOrganized.reduce( (prevn, cur) => {\n                            let hostIndex = prevn.findIndex(o => o.host === cur.host);\n                            if(hostIndex > -1){\n                                // need to add cur.payloads to the prev[hostIndex].payloads list\n                                prevn[hostIndex].payloads = [...prevn[hostIndex].payloads, ...cur.payloads];\n                                return [...prevn];\n                            }else{\n                                return [...prevn, {...cur}];\n                            }\n                        }, [...organized]);\n                        console.log(\"updating choices and payload choices\", allOrganized, agentConnectNewPayloads)\n                        return [...prev, {...cmd, choices: allOrganized, payload_choices: agentConnectNewPayloads, value: getLinkInfoFromAgentConnect(organized)}];\n                    case \"PayloadList\":\n                        let supported_agents = cmd.supported_agents.split(\",\");\n                        if(supported_agents.indexOf(\"\") !== -1){supported_agents.splice(supported_agents.indexOf(\"\"))}\n                        const build_requirements = JSON.parse(cmd.supported_agent_build_parameters);\n                        const payloads = loadedAllPayloadsLoading.payload.reduce( (prevn, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prevn, profile) => {\n                                return [...prevn, profile.c2profile.name];\n                            }, []).join(\",\");\n                            if(supported_agents.length > 0 && !supported_agents.includes(payload.payloadtype.ptype)){return prevn};\n                            let matched = true;\n                            if(payload.payloadtype.ptype in build_requirements){\n                                //this means we have a filtering condition on our payload\n                                for(const [key, value] of Object.entries(build_requirements[payload.payloadtype.ptype])){\n                                    payload.buildparameterinstances.forEach( (build_param) => {\n                                        if(build_param.buildparameter.name === key){\n                                            if(build_param.parameter !== value){matched = false}\n                                        }\n                                    });\n                                }\n                            }\n                            if(matched){\n                                return [...prevn, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                            }else{\n                                return prevn;\n                            }\n                            \n                        }, []);\n                        //now filter the payloads based on supported_agents and supported_agent_build_parameters\n                        if(payloads.length > 0){\n                            return [...prev, {...cmd, choices: payloads, default_value: payloads[0].uuid, value: payloads[0].uuid}];\n                        }else{\n                            return [...prev, {...cmd, choices: payloads, value: null}];\n                        }\n                    case \"LinkInfo\":\n                        const edge_choices = loadedAllEdgesLoading.callbackgraphedge.reduce( (prevn, edge) => {\n                            if(edge.source.id === edge.destination.id) {return prevn}\n                            if(edge.direction === 1){\n                                return [...prevn, {...edge, display: \"Callback \" + edge.source.id + \" --\" + edge.c2profile.name + \"--> Callback \" + edge.destination.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            }else if(edge.direction === 2){\n                                return [...prevn, {...edge, display: \"Callback \" + edge.destination.id + \"-> \" + edge.c2profile.name + \"--> Callback \" + edge.source.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            } else{\n                                return prevn;\n                            }\n                        }, []);\n                        if(edge_choices.length > 0){\n                            return [...prev, {...cmd, choices: edge_choices, value: getLinkInfoValue(edge_choices)}];\n                        }else{\n                            return [...prev, {...cmd, choices: edge_choices, value: {}}];\n                        }\n                    default:\n                        return [...prev, {...cmd}];\n                }\n            }, [] );\n            const sorted = params.sort((a, b) => (a.ui_position > b.ui_position) ? 1 : -1)\n            if(sorted.length > 0){\n                sorted[0][\"autoFocus\"] = true;\n            }\n            setParameters(sorted);\n        }\n    }, [selectedParameterGroup, rawParameters, loadedCommandsLoading, allCommandsLoading, loadedAllEdgesLoading, requiredPieces, loadedAllPayloadsLoading, loadedCredentialsLoading, loadedAllPayloadsOnHostsLoading, props.callback_id, props.choices]);\n    const onSubmit = async () => {\n        let newFileUUIDs = [];\n        let collapsedParameters = {};\n        for(const param of parameters){\n            switch(param.type){\n                case \"String\":\n                case \"Boolean\":\n                case \"Number\":\n                case \"Choice\":\n                case \"ChoiceMultiple\":\n                case \"Credential-Account\":\n                case \"Credential-Realm\":\n                case \"Credential-Type\":\n                case \"Credential-Credential\":\n                case \"AgentConnect\":\n                case \"PayloadList\":\n                case \"Array\":\n                case \"LinkInfo\":\n                    collapsedParameters[param.name] = param.value;\n                    break;\n                case \"File\":\n                    setBackdropOpen(true);\n                    const newUUID = await UploadTaskFile(param.value);\n                    if(newUUID){\n                        newFileUUIDs.push(newUUID);\n                        collapsedParameters[param.name] = newUUID;\n                    }else{\n                        setBackdropOpen(false);\n                        return;\n                    }\n                    break;\n                case \"Credential-JSON\":\n                    collapsedParameters[param.name] = {\n                        account: param.value[\"account\"],\n                        comment: param.value[\"comment\"],\n                        credential: param.value[\"credential_text\"],\n                        realm: param.value[\"realm\"],\n                        type: param.value[\"type\"]\n                    };\n                    break;\n                default:\n                    console.log(\"Unknown parameter type\");\n            }\n        }\n        setBackdropOpen(false);\n        props.onSubmit(props.command.cmd, JSON.stringify(collapsedParameters), newFileUUIDs, selectedParameterGroup);\n        \n    }\n    const onAgentConnectAddNewPayloadOnHost = (host, payload) => {\n        addPayloadOnHost({variables: {host: host, payload_id: payload} })\n    }\n    const onAgentConnectRemovePayloadOnHost = (payloadOnHostID) => {\n        RemovePayloadOnHost({variables: {payloadOnHostID: payloadOnHostID}})\n    }\n    const onChange = (name, value, error) => {\n        const params = parameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value: value};\n            }else{\n                return {...param};\n            }\n        });\n        setParameters(params);\n    }\n    const onChangeParameterGroup = (event) => {\n        setSelectedParameterGroup(event.target.value);\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{commandInfo.cmd}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <Backdrop open={backdropOpen} style={{zIndex: 2, position: \"absolute\"}}>\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n            <Typography component=\"div\" >\n                <b>Description</b> <pre style={{margin:0, wordBreak: \"break-all\", overflow: \"word-wrap\", whiteSpace: \"pre-wrap\"}}>{commandInfo.description}</pre><br/>\n                <Divider />\n                <b>Requires Admin?</b><pre style={{margin:0}}>{commandInfo.needs_admin ? \"True\": \"False\"}</pre><br/>\n                <Divider />\n                {parameterGroups.length > 1 &&\n                    <FormControl style={{width: \"100%\"}} >\n                        <TextField\n                            select\n                            label=\"Parameter Group\"\n                            value={selectedParameterGroup}\n                            onChange={onChangeParameterGroup}\n                            \n                            input={<Input />}\n                        >\n                        {\n                            parameterGroups.map((opt, i) => (\n                                <MenuItem key={\"paramgroup\" + i} value={opt} >{opt}</MenuItem>\n                            ))\n                        }\n                        </TextField>\n                    </FormControl>\n                    \n                }\n            </Typography>\n            <TableContainer component={Paper} elevation={5} className=\"mythicElement\" style={{backgroundColor: theme.tableHover, marginTop: \"10px\"}}> \n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                            <TableCell>Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {parameters.map( (op) => (\n                            <TaskParametersDialogRow onSubmit={onSubmit} key={\"taskparameterrow\" + op.id} onChange={onChange} commandInfo={commandInfo} {...op} \n                                callback_id={props.callback_id} onAgentConnectAddNewPayloadOnHost={onAgentConnectAddNewPayloadOnHost}\n                                onAgentConnectRemovePayloadOnHost={onAgentConnectRemovePayloadOnHost} addedCredential={addedCredential}\n                                />\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicSelectFromListDialog(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const theme = useTheme();\n    const handleChange = (event) => {\n        setSelected(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(selected);\n        if(props.dontCloseOnSubmit){\n          return;\n        }\n        props.onClose();\n    }\n    useEffect( () => {\n        //expects options to be an array of dictionaries with a \"display\" field for what gets presented to the user\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(opts[0]);\n        }else{\n            setSelected(\"\");\n        }\n    }, [props.options]);\n  return (\n    <React.Fragment>\n        <DialogTitle >{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl style={{width: \"100%\"}}>\n                  <InputLabel ref={inputRef}>Options</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={selected}\n                    onChange={handleChange}\n                    input={<Input style={{width: \"100%\"}}/>}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {options.map( (opt) => (\n                        <MenuItem value={opt} key={opt[props.identifier]}>{opt[props.display]}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n            {props.action}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport { MobileStepper } from '@material-ui/core';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function ResponseDisplayScreenshotModal({onClose, images, startIndex}) {\n    const [zoom, setZoom] = React.useState(false);\n    const theme = useTheme();\n    const [activeStep, setActiveStep] = React.useState(startIndex ? startIndex : 0);\n    const maxSteps = images?.length || 1;\n    const toggleZoom = () => {\n      setZoom(!zoom);\n    }\n    const handleNext = () => {\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    };\n  \n    const handleBack = () => {\n      setActiveStep((prevActiveStep) => prevActiveStep - 1);\n    };\n  return (\n    <React.Fragment>\n        <DialogContent dividers={true} style={{padding: 0}}>\n          <div style={{height: \"calc(80vh)\", display: zoom ? \"\" : \"flex\", alignItems: zoom ? \"\" : \"center\" , background: theme.palette.type === \"dark\" ? \"rgb(44, 52, 60)\" : \"grey\"}}>\n            <img onClick={toggleZoom} src={\"/api/v1.4/files/screencaptures/\" + images[activeStep]} style={{width: zoom ? \"\" : \"100%\", cursor: zoom ? \"zoom-out\" : \"zoom-in\", overflow: \"auto\"}} />\n          </div>\n        </DialogContent>\n        <MobileStepper\n          variant=\"text\"\n          steps={maxSteps}\n          position=\"static\"\n          activeStep={activeStep}\n          nextButton={\n            <Button\n              size=\"small\"\n              onClick={handleNext}\n              disabled={activeStep === maxSteps - 1}\n            >\n              Next\n              {<KeyboardArrowRight />}\n            </Button>\n          }\n          backButton={\n            <Button size=\"small\" onClick={handleBack} disabled={activeStep === 0}>\n              {<KeyboardArrowLeft />}\n              Back\n            </Button>\n          }\n        />\n        <DialogActions>\n          <Button variant=\"contained\" onClick={onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Typography } from '@material-ui/core';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const allTokenDataFragment = gql`\nfragment allTokenData on token {\n    id\n    Address\n    AppContainer\n    AppContainerNumber\n    AppContainerSid\n    AppId\n    AppModelPolicies\n    AppModelPolicyDictionary\n    AttributesFlags\n    AuditPolicy\n    AuthenticationId_id\n    BnoIsolationPrefix\n    CanSynchronize\n    Capabilities\n    CreationTime\n    DefaultDacl\n    DenyOnlyGroups\n    DeviceClaimAttributes\n    DeviceGroups\n    Elevated\n    ElevationType\n    EnabledGroups\n    ExpirationTime\n    Filtered\n    Flags\n    FullPath\n    GrantedAccess\n    GrantedAccessGeneric\n    GrantedAccessMask\n    GroupCount\n    Groups\n    Handle\n    HandleReferenceCount\n    HasRestrictions\n    ImpersonationLevel\n    Inherit\n    IntegrityLevel\n    IntegrityLevelSid\n    IsClosed\n    IsContainer\n    IsPseudoToken\n    IsRestricted\n    IsSandbox\n    LogonSid\n    LowPrivilegeAppContainer\n    MandatoryPolicy\n    ModifiedId\n    Name\n    NoChildProcess\n    NotLow\n    NtType\n    NtTypeName\n    Origin\n    Owner\n    PackageFullName\n    PackageIdentity\n    PackageName\n    PointerReferenceCount\n    PrimaryGroup\n    PrivateNamespace\n    Privileges\n    ProcessUniqueAttribute\n    ProtectFromClose\n    Restricted\n    RestrictedDeviceClaimAttributes\n    RestrictedDeviceGroups\n    RestrictedSids\n    RestrictedSidsCount\n    RestrictedUserClaimAttributes\n    SandboxInert\n    Sddl\n    SecurityAttributes\n    SecurityDescriptor\n    SessionId\n    Source\n    ThreadID\n    TokenId\n    TokenType\n    TrustLevel\n    UIAccess\n    User\n    UserClaimAttributes\n    VirtualizationAllowed\n    VirtualizationEnabled\n    WriteRestricted\n    task_id\n    logonsession {\n      id\n      LogonId\n      UserName\n      LogonDomain\n      LogonType\n      SessionId\n      Sid\n      LogonTime\n      LogonServer\n      DnsDomainName\n      Upn\n      UserFlags\n      LastSuccessfulLogon\n      LastFailedLogon\n      FailedAttemptCountSinceLastSuccessfulLogon\n      LogonScript\n      ProfilePath\n      HomeDirectory\n      HomeDirectoryDrive\n      LogoffTime\n      KickOffTime\n      PasswordLastSet\n      PasswordCanChange\n      PasswordMustChange\n      task_id\n      authenticationpackages {\n        id\n        Name\n        task_id\n      }\n    }\n}\n`;\nconst getTokenInfo = gql`\n${allTokenDataFragment}\nquery getTokenInfo ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    ...allTokenData\n  }\n}\n`;\n\nexport function TaskTokenDialog(props) {\n    const theme = useTheme();\n    const [tokenData, setTokenData] = useState([]);\n    const [logonsessionData, setLogonSessionData] = useState([]);\n    const [authenticationData, setAuthenticationData] = useState([]);\n    const tokenKeys = [\n        \"Address\",\n        \"AppContainer\",\n        \"AppContainerNumber\",\n        \"AppContainerSid\",\n        \"AppId\",\n        \"AppModelPolicies\",\n        \"AppModelPolicyDictionary\",\n        \"AttributesFlags\",\n        \"AuditPolicy\",\n        \"AuthenticationId_id\",\n        \"BnoIsolationPrefix\",\n        \"CanSynchronize\",\n        \"Capabilities\",\n        \"CreationTime\",\n        \"DefaultDacl\",\n        \"DenyOnlyGroups\",\n        \"DeviceClaimAttributes\",\n        \"DeviceGroups\",\n        \"Elevated\",\n        \"ElevationType\",\n        \"EnabledGroups\",\n        \"ExpirationTime\",\n        \"Filtered\",\n        \"Flags\",\n        \"FullPath\",\n        \"GrantedAccess\",\n        \"GrantedAccessGeneric\",\n        \"GrantedAccessMask\",\n        \"GroupCount\",\n        \"Groups\",\n        \"Handle\",\n        \"HandleReferenceCount\",\n        \"HasRestrictions\",\n        \"ImpersonationLevel\",\n        \"Inherit\",\n        \"IntegrityLevel\",\n        \"IntegrityLevelSid\",\n        \"IsClosed\",\n        \"IsContainer\",\n        \"IsPseudoToken\",\n        \"IsRestricted\",\n        \"IsSandbox\",\n        \"LogonSid\",\n        \"LowPrivilegeAppContainer\",\n        \"MandatoryPolicy\",\n        \"ModifiedId\",\n        \"Name\",\n        \"NoChildProcess\",\n        \"NotLow\",\n        \"NtType\",\n        \"NtTypeName\",\n        \"Origin\",\n        \"Owner\",\n        \"PackageFullName\",\n        \"PackageIdentity\",\n        \"PackageName\",\n        \"PointerReferenceCount\",\n        \"PrimaryGroup\",\n        \"PrivateNamespace\",\n        \"Privileges\",\n        \"ProcessUniqueAttribute\",\n        \"ProtectFromClose\",\n        \"Restricted\",\n        \"RestrictedDeviceClaimAttributes\",\n        \"RestrictedDeviceGroups\",\n        \"RestrictedSids\",\n        \"RestrictedSidsCount\",\n        \"RestrictedUserClaimAttributes\",\n        \"SandboxInert\",\n        \"Sddl\",\n        \"SecurityAttributes\",\n        \"SecurityDescriptor\",\n        \"SessionId\",\n        \"Source\",\n        \"ThreadID\",\n        \"TokenId\",\n        \"TokenType\",\n        \"TrustLevel\",\n        \"UIAccess\",\n        \"User\",\n        \"UserClaimAttributes\",\n        \"VirtualizationAllowed\",\n        \"VirtualizationEnabled\",\n        \"WriteRestricted\",\n        \"task_id\"\n    ]\n    const logonsessionKeys = [\n      \"LogonId\",\n      \"UserName\",\n      \"LogonDomain\",\n      \"LogonType\",\n      \"SessionId\",\n      \"Sid\",\n      \"LogonTime\",\n      \"LogonServer\",\n      \"DnsDomainName\",\n      \"Upn\",\n      \"UserFlags\",\n      \"LastSuccessfulLogon\",\n      \"LastFailedLogon\",\n      \"FailedAttemptCountSinceLastSuccessfulLogon\",\n      \"LogonScript\",\n      \"ProfilePath\",\n      \"HomeDirectory\",\n      \"HomeDirectoryDrive\",\n      \"LogoffTime\",\n      \"KickOffTime\",\n      \"PasswordLastSet\",\n      \"PasswordCanChange\",\n      \"PasswordMustChange\",\n      \"task_id\"\n    ]\n    const authenticationpackageKeys = [\n      \"Name\",\n      \"task_id\"\n    ]\n    useQuery(getTokenInfo, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            if(data.token_by_pk !== null){\n                setTokenData(data.token_by_pk);\n                const reducedTokenData = tokenKeys.reduce( (prev, key) => {\n                  if(data.token_by_pk[key] !== undefined && data.token_by_pk[key] !== null && data.token_by_pk[key] !== \"\"){\n                    return [...prev, {\"name\": key, \"value\": data.token_by_pk[key]}]\n                  }\n                  else{\n                    return [...prev];\n                  }\n                }, []);\n                setTokenData(reducedTokenData);\n                if(data.token_by_pk.logonsession !== null){\n                  const reducedLogonSessionData = logonsessionKeys.reduce( (prev, key) => {\n                    if(data.token_by_pk.logonsession[key] !== undefined && data.token_by_pk.logonsession[key] !== null && data.token_by_pk.logonsession[key] !== \"\"){\n                      return [...prev, {\"name\": key, \"value\": data.token_by_pk.logonsession[key]}]\n                    }\n                    else{\n                      return [...prev];\n                    }\n                  }, []);\n                  setLogonSessionData(reducedLogonSessionData);\n                  if (data.token_by_pk.logonsession.authenticationpackages.length > 0){\n                    const reducedAuthenticationData = data.token_by_pk.logonsession.authenticationpackages.map( (pkg) => {\n                      const packageData = authenticationpackageKeys.reduce( (prev, key) => {\n                        if(pkg[key] !== undefined && pkg[key] !== null && pkg[key] !== \"\"){\n                          return [...prev, {\"name\": key, \"value\": pkg[key]}];\n                        }else{\n                          return [...prev];\n                        }\n                      }, []);\n                      return packageData;\n                    })\n                    \n                    setAuthenticationData(reducedAuthenticationData);\n                  }\n                }\n                \n            }\n        },\n        onError: data => {\n            snackActions.error(data)\n        },\n        fetchPolicy: \"network-only\"\n    });\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Token Information</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Token Data\n              </Typography>\n            </Paper>\n          <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n            <TableContainer component={Paper} className=\"mythicElement\">\n              <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>Token Property</TableCell>\n                            <TableCell>Token Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {tokenData.map( (element, index) => (\n                        <TableRow key={'row' + index}>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                </Table>\n              </TableContainer>\n          </Paper>\n        \n        {logonsessionData.length > 0 &&\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Associated Logon Session Data\n              </Typography>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n              <TableContainer component={Paper} className=\"mythicElement\">\n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                      <TableHead>\n                          <TableRow>\n                              <TableCell>Logon Session Property</TableCell>\n                              <TableCell>Logon Session Value</TableCell>\n                          </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {logonsessionData.map( (element, index) => (\n                          <TableRow key={'logondatarow' + index}>\n                            <TableCell>{element.name}</TableCell>\n                            <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                  </Table>\n                </TableContainer>\n            </Paper>\n          </React.Fragment>\n        }\n        {authenticationData.map( authpkg => (\n            <React.Fragment key={\"authpkg\" + authpkg.id}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Associated Authentication Package\n                </Typography>\n              </Paper>\n              \n              <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n                <TableContainer component={Paper} className=\"mythicElement\">\n                  <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>Authentication Package Property</TableCell>\n                                <TableCell>Authentication Package Value</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {authpkg.map( (element, index) => (\n                            <TableRow key={'authpackage' + authpkg.id + \"row\" + index}>\n                              <TableCell>{element.name}</TableCell>\n                              <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                            </TableRow>\n                          ))}\n                        </TableBody>\n                    </Table>\n                  </TableContainer>\n              </Paper>\n            </React.Fragment>\n        ))\n        }\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const ResponseDisplayPlaintext = (props) =>{\n  const theme = useTheme();\n  const [plaintextView, setPlaintextView] = React.useState(String(props.plaintext));\n  useEffect( () => {\n    try{\n      const newPlaintext = JSON.stringify(JSON.parse(String(props.plaintext)), null, 4);\n      setPlaintextView(newPlaintext);\n    }catch(error){\n      //console.log(\"trying to JSONify plaintext error\", error);\n      setPlaintextView(String(props.plaintext));\n    }\n  }, [props.plaintext])\n  return (\n    <AceEditor \n        mode=\"json\"\n        theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n        fontSize={14}\n        showGutter={true}\n        height={\"100px\"}\n        highlightActiveLine={true}\n        value={plaintextView}\n        width={\"100%\"}\n        minLines={2}\n        maxLines={50}\n        setOptions={{\n          showLineNumbers: true,\n          tabSize: 4,\n          useWorker: false\n        }}/>\n  )\n      \n}","import { useSnackbar } from 'notistack'\n\nlet useSnackbarRef = null;\n\nexport const SnackbarUtilsConfigurator = () => {\n  useSnackbarRef = useSnackbar();\n\n  return null;\n};\n\nexport const snackActions = {\n  success(msg, options) {\n    this.toast(msg, 'success', options)\n  },\n  warning(msg, options) {\n    this.toast(msg, 'warning', options)\n  },\n  info(msg, options) {\n    this.toast(msg, 'info', options)\n  },\n  error(msg, options) {\n    this.toast(msg, 'error', options)\n  },\n  dismiss(){\n    useSnackbarRef.closeSnackbar();\n  },\n  toast(msg, variant = 'default', options) {\n    useSnackbarRef.enqueueSnackbar(msg, { variant, ...options })\n  }\n}\n","import React, {useEffect} from 'react';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport {ResponseDisplay} from './ResponseDisplay';\nimport RateReviewOutlinedIcon from '@material-ui/icons/RateReviewOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskCommentDialog} from './TaskCommentDialog';\nimport {TaskTagDialog} from './TaskTagDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport {TaskOpsecDialog} from './TaskOpsecDialog';\nimport {TaskViewParametersDialog} from './TaskViewParametersDialog';\nimport {TaskViewStdoutStderrDialog} from './TaskViewStdoutStderrDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport LocalOfferOutlinedIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CodeIcon from '@material-ui/icons/Code';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport {TaskTokenDialog} from './TaskTokenDialog';\nimport Grid from '@material-ui/core/Grid';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport {gql, useMutation, useLazyQuery } from '@apollo/client';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBook} from '@fortawesome/free-solid-svg-icons';\nimport { faExternalLinkAlt, faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Backdrop } from '@material-ui/core';\n\nconst ReissueTaskMutationGQL = gql`\nmutation reissueTaskMutation($task_id: Int!){\n  reissue_task(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst ReissueTaskHandlerMutationGQL = gql`\nmutation reissueTaskHandlerMutation($task_id: Int!){\n  reissue_task_handler(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n}`;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    transform: 'translateZ(0px)',\n    flexGrow: 1,\n  },\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n      top: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n    '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n      bottom: theme.spacing(1),\n      left: theme.spacing(2),\n    },\n    zIndex: 3\n  },\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const TaskDisplayContainer = ({task}) => {\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [commandID, setCommandID] = React.useState(0);\n    const [searchOutput, setSearchOutput] = React.useState(false);\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    useEffect( () => {\n        setCommandID(task.command === null ? 0 : task.command.id);\n    }, [task.command]);\n    const toggleViewBrowserScript = React.useCallback( () => {\n      setViewBrowserScript(!viewBrowserScript);\n    }, [viewBrowserScript]);\n    const toggleSelectAllOutput = React.useCallback( () => {\n      setSelectAllOutput(!selectAllOutput);\n    }, [selectAllOutput]);\n    const toggleOpenSearch = React.useCallback( () => {\n      setSearchOutput(!searchOutput);\n    }, [searchOutput]);\n    \n    return (\n      <React.Fragment>\n        <Grid container spacing={0} style={{maxWidth: \"100%\"}}>\n            <SpeedDialDisplay toggleViewBrowserScript={toggleViewBrowserScript} \n              toggleSelectAllOutput={toggleSelectAllOutput} \n              toggleOpenSearch={toggleOpenSearch} \n              taskData={task} \n              viewAllOutput={selectAllOutput}/>\n            <Grid item xs={12}>\n              <ResponseDisplay \n                task={task} \n                command_id={commandID} \n                viewBrowserScript={viewBrowserScript} \n                searchOutput={searchOutput} \n                selectAllOutput={selectAllOutput}/>\n            </Grid>\n        </Grid>\n      </React.Fragment>\n\t\t\t\t          \n    )\n}\n\n\n\nconst SpeedDialDisplay = ({toggleViewBrowserScript, toggleSelectAllOutput, toggleOpenSearch, taskData, viewAllOutput}) => {\n  const tooltipPlacement = \"top\";\n  const theme = useTheme();\n  const classes = useStyles();\n  const [task, setTask] = React.useState(taskData || {});\n  const [openSpeedDial, setOpenSpeedDial] = React.useState(false);\n  const [openTaskTagDialog, setOpenTaskTagDialog] = React.useState(false);\n  const [openCommentDialog, setOpenCommentDialog] = React.useState(false);\n  const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n  const [openTokenDialog, setOpenTokenDialog] = React.useState(false);\n  const [openStdoutStderrDialog, setOpenStdoutStderrDialog] = React.useState(false);\n  const [openOpsecDialog, setOpenOpsecDialog] = React.useState(false);\n  const [downloadResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const output = data.response.reduce( (prev, cur) => {\n          return prev + Buffer.from(cur.response, \"base64\");\n        }, \"\");\n        const dataBlob = new Blob([output], {type: 'application/octet-stream'});\n        const ele = document.getElementById(\"download_config\");\n        if(ele !== null){\n          ele.href = URL.createObjectURL(dataBlob);\n          ele.download = \"task_\" + task.id + \".txt\";\n          ele.click();\n        }else{\n          const element = document.createElement(\"a\");\n          element.id = \"download_config\";\n          element.href = URL.createObjectURL(dataBlob);\n          element.download = \"task_\" + task.id + \".txt\";\n          document.body.appendChild(element);\n          element.click();\n        }\n    },\n    onError: (data) => {\n\n    }\n  });\n  React.useEffect( () => {\n    setTask(taskData);\n  }, [taskData.id, taskData.token, taskData.original_params, taskData.opsec_pre_blocked, taskData.opsec_pre_bypassed, taskData.opsec_post_blocked, taskData.opsec_post_bypassed])\n  const onDownloadResponses = () => {\n    downloadResponses({variables: {task_id: task.id}});\n    setOpenSpeedDial(false);\n  };\n  const copyToClipboard = () => {\n    let result = copyStringToClipboard(task.original_params);\n    if(result){\n      snackActions.success(\"Copied text!\");\n    }else{\n      snackActions.error(\"Failed to copy text\");\n    }\n    setOpenSpeedDial(false);\n  };\n  const [reissueTask] = useMutation(ReissueTaskMutationGQL, {\n    onCompleted: data => {\n      if(data.reissue_task.status === \"success\"){\n        snackActions.success(\"Successfully re-issued task to Mythic\");\n      }else{\n        snackActions.error(\"Failed to re-issue task to Mythic: \" + data.reissue_task.error);\n      }\n    },  \n    onError: data => {\n      console.log(data);\n      snackActions.error(\"Failed to re-issue task: \" + data);\n    }\n  });\n  const [reissueTaskHandler] = useMutation(ReissueTaskHandlerMutationGQL, {\n    onCompleted: data => {\n      if(data.reissue_task_handler.status === \"success\"){\n        snackActions.success(\"Successfully resubmitted task for handling\");\n      }else{\n        snackActions.warning(\"Failed to resubmit task for handling: \" + data.reissue_task_handler.error);\n      }\n      \n    },\n    onError: data => {\n      console.log(data);\n      snackActions.error(\"Error resubmitting task for handling: \" + data);\n    }\n  });\n  \n  const onReissueTask = () => {\n    reissueTask({variables: {task_id: task.id}});\n  }\n  const onReissueTaskHandler = () => {\n    reissueTaskHandler({variables: {task_id: task.id}});\n  }\n  return (\n    <React.Fragment>\n      <Backdrop open={openSpeedDial} onClick={()=>{setOpenSpeedDial(false);}} style={{zIndex: 2, position: \"absolute\"}}/>\n      {openTaskTagDialog ?\n        (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTaskTagDialog} \n          onClose={()=>{setOpenTaskTagDialog(false);}} \n          innerDialog={<TaskTagDialog task_id={task.id} onClose={()=>{setOpenTaskTagDialog(false);}} />}\n      />) : (null)}\n      {openCommentDialog ?\n        (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openCommentDialog} \n          onClose={()=>{setOpenCommentDialog(false);}} \n          innerDialog={<TaskCommentDialog task_id={task.id} onClose={()=>{setOpenCommentDialog(false);}} />}\n      />) : (null)\n      }\n      {openParametersDialog ? \n        (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n          onClose={()=>{setOpenParametersDialog(false);}} \n          innerDialog={<TaskViewParametersDialog task_id={task.id} onClose={()=>{setOpenParametersDialog(false);}} />}\n      />) : (null)\n      }\n      {openTokenDialog ? \n        (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTokenDialog} \n          onClose={()=>{setOpenTokenDialog(false);}} \n          innerDialog={<TaskTokenDialog token_id={task.token === undefined ? 0 : task.token.id} onClose={()=>{setOpenTokenDialog(false);}} />}\n      />) : (null)\n      }\n      {openOpsecDialog ?\n        (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openOpsecDialog} \n          onClose={()=>{setOpenOpsecDialog(false);}} \n          innerDialog={<TaskOpsecDialog task_id={task.id} onClose={()=>{setOpenOpsecDialog(false);}} />}\n      />) : (null)\n      }\n      \n      {openStdoutStderrDialog ? \n        (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openStdoutStderrDialog} \n          onClose={()=>{setOpenStdoutStderrDialog(false);}} \n          innerDialog={<TaskViewStdoutStderrDialog task_id={task.id} onClose={()=>{setOpenStdoutStderrDialog(false);}} />}\n      />) : (null)\n      }\n      <SpeedDial\n        ariaLabel=\"Task Speeddial\"\n        className={classes.speedDial}\n        icon={<SpeedDialIcon />}\n        onClick={()=>{setOpenSpeedDial(!openSpeedDial)}}\n        FabProps={{ color: \"primary\", size: \"small\" }}\n        open={openSpeedDial}\n        direction=\"right\"\n      >\n        <SpeedDialAction\n          icon={<CodeIcon/>}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Toggle BrowserScript\"}\n          onClick={() => {toggleViewBrowserScript();setOpenSpeedDial(false);}}\n        />\n        <SpeedDialAction\n          icon={<FontAwesomeIcon icon={faExpandArrowsAlt} size=\"lg\" />}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={viewAllOutput ? \"View Paginated Output\" : \"View All Output\"}\n          onClick={() => {toggleSelectAllOutput();setOpenSpeedDial(false);}}\n        />\n        <SpeedDialAction\n          icon={<SearchIcon />}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Search Output\"}\n          onClick={() => {toggleOpenSearch();setOpenSpeedDial(false);}}\n        />\n        <SpeedDialAction\n          icon={<GetAppIcon/>}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Download output\"}\n          onClick={onDownloadResponses}\n        />\n        <SpeedDialAction\n          icon={<LocalOfferOutlinedIcon/>}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Edit Tags\"}\n          onClick={()=>{setOpenTaskTagDialog(true);setOpenSpeedDial(false);}}\n        />\n        <SpeedDialAction\n          icon={<FontAwesomeIcon icon={faExternalLinkAlt} size=\"lg\" />}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Open Task in New Window\"}\n          onClick={()=> {window.open('/new/task/' + task.id, \"_blank\")}}\n        />\n        <SpeedDialAction\n          icon={<FileCopyOutlinedIcon/>}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Copy original params to clipboard\"}\n          onClick={copyToClipboard}\n        />\n        <SpeedDialAction\n          icon={<RateReviewOutlinedIcon/>}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"Edit Comment\"}\n          onClick={()=>{setOpenCommentDialog(true);setOpenSpeedDial(false);}}\n        />\n        <SpeedDialAction\n          icon={<KeyboardIcon/>}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"View All Parameters\"}\n          onClick={()=>{setOpenParametersDialog(true);setOpenSpeedDial(false);}}\n        />\n        <SpeedDialAction\n          icon={<FontAwesomeIcon icon={faBook} size=\"lg\" />}\n          arrow\n          TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n          tooltipPlacement={tooltipPlacement}\n          tooltipTitle={\"View Stdout/Stderr of Task\"}\n          onClick={()=>{setOpenStdoutStderrDialog(true);setOpenSpeedDial(false);}}\n        />\n        {task.opsec_pre_blocked === null ? (\n          null\n        ) : (  task.opsec_pre_bypassed === false ? (\n                <SpeedDialAction\n                  icon={<LockIcon style={{color: theme.palette.error.main}}/>}\n                  arrow\n                  TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                  tooltipPlacement={tooltipPlacement}\n                  tooltipTitle={\"Submit OPSEC PreCheck Bypass Request\"}\n                  onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                />\n                ): (\n                  <SpeedDialAction\n                  icon={<LockOpenIcon style={{color: theme.palette.success.main}}/>}\n                  arrow\n                  TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                  tooltipPlacement={tooltipPlacement}\n                  tooltipTitle={\"View OPSEC PreCheck Data\"}\n                  onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                />\n                )             \n          ) \n        }\n        {task.opsec_post_blocked === null ? (\n          null\n        ) : (  task.opsec_post_bypassed === false ? (\n                <SpeedDialAction\n                  icon={<LockIcon style={{color: theme.palette.error.main}}/>}\n                  arrow\n                  TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                  tooltipPlacement={tooltipPlacement}\n                  tooltipTitle={\"Submit OPSEC PostCheck Bypass Request\"}\n                  onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                />\n                ): (\n                  <SpeedDialAction\n                    icon={<LockOpenIcon style={{color: theme.palette.success.main}}/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View OPSEC PostCheck Data\"}\n                    onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                  />\n                )             \n          ) \n        }\n        {task.token === null ? (\n          null\n        ) : (\n            <SpeedDialAction\n              icon={<ConfirmationNumberIcon />}\n              arrow\n              TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n              tooltipPlacement={tooltipPlacement}\n              tooltipTitle={\"View Token Information\"}\n              onClick={()=>{setOpenTokenDialog(true);setOpenSpeedDial(false);}}\n            />\n        )}\n        {task.status.toLowerCase().includes(\"error: container\") ? (\n          <SpeedDialAction\n            icon={<ReplayIcon style={{color: theme.palette.warning.main}}/>}\n            arrow\n            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n            tooltipPlacement={tooltipPlacement}\n            tooltipTitle={\"Resubmit Tasking\"}\n            onClick={onReissueTask}\n          />\n        ) : (null)}\n        {task.status.toLowerCase().includes(\"error: task\") ? (\n          <SpeedDialAction\n            icon={<ReplayIcon style={{color: theme.palette.warning.main}}/>}\n            arrow\n            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n            tooltipPlacement={tooltipPlacement}\n            tooltipTitle={\"Resubmit Task Handler\"}\n            onClick={onReissueTaskHandler}\n          />\n        ):(null)}\n        \n    </SpeedDial>\n    </React.Fragment>\n    \n  )\n}","import React, {useEffect} from 'react';\nimport {useSubscription, gql, useLazyQuery } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {ResponseDisplayScreenshot} from './ResponseDisplayScreenshot';\nimport {ResponseDisplayPlaintext} from './ResponseDisplayPlaintext';\nimport {ResponseDisplayTable} from './ResponseDisplayTable';\nimport {ResponseDisplayDownload} from './ResponseDisplayDownload';\nimport {ResponseDisplaySearch} from './ResponseDisplaySearch';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTheme} from '@material-ui/core/styles';\nimport { IconButton } from '@material-ui/core';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport { Backdrop } from '@material-ui/core';\nimport { CircularProgress } from '@material-ui/core';\n\n\nconst subResponsesQuery = gql`\nsubscription subResponsesQuery($task_id: Int!, $fetchLimit: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, limit: $fetchLimit, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n}`;\nconst getResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $fetchLimit: Int!, $offset: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_escape: {_ilike: $search}}, limit: $fetchLimit, offset: $offset, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_escape: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst getMaxCountQuery = gql`\nsubscription responseTotalCountSubscription($task_id: Int!){\n  response_aggregate(where: {task_id: {_eq: $task_id}}){\n    aggregate{\n      count\n    }\n  }\n}\n`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_escape: {_ilike: $search}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_escape: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst taskScript = gql`\nquery getBrowserScriptsQuery($command_id: Int!, $operator_id: Int!, $operation_id: Int!){\n  browserscript(where: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}, operator_id: {_eq: $operator_id}}) {\n    script\n    id\n  }\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}}}) {\n    browserscript {\n      script\n      id\n    }\n  }\n}\n\n`;\nconst fetchLimit = 10;\n\nexport const ResponseDisplay = (props) =>{\n    const [output, setOutput] = React.useState(\"\");\n    const [rawResponses, setRawResponses] = React.useState([]);\n    const highestFetched = React.useRef(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [totalCount, setTotalCount] = React.useState(0);\n    const oldSelectAllOutput = React.useRef(props.selectAllOutput);\n    const [openBackdrop, setOpenBackdrop] = React.useState(true);\n    const mountedRef = React.useRef(true);\n    const [fetchMoreResponses] = useLazyQuery(getResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + Buffer.from(cur.response, \"base64\");\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched.current);\n        highestFetched.current = maxID;\n        setOutput(responses);\n        const responseArray = data.response.map( r => String(Buffer.from(r.response, \"base64\")));\n        setRawResponses(responseArray);\n        if(!props.selectAllOutput){\n          setTotalCount(data.response_aggregate.aggregate.count);\n        }\n        setOpenBackdrop(false);\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch more responses: \" + data)\n      }\n    });\n    const [fetchAllResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + Buffer.from(cur.response, \"base64\");\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched.current);\n        highestFetched.current = maxID;\n        setOutput(responses);\n        const responseArray = data.response.map( r => String(Buffer.from(r.response, \"base64\")));\n        setRawResponses(responseArray);\n        setTotalCount(1);\n        setOpenBackdrop(false);\n      },\n      onError: (data) => {\n\n      }\n    });\n    React.useEffect( () => {\n      return() => {\n        mountedRef.current = false;\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    React.useEffect( () => {\n      if(props.selectAllOutput !== oldSelectAllOutput.current){\n        if(props.selectAllOutput){\n          setOpenBackdrop(true);\n          if(search === \"\"){\n            fetchAllResponses({variables: {task_id: props.task.id, search: \"%%\"}})\n          }else{\n            fetchAllResponses({variables: {task_id: props.task.id, search: \"%\" + search + \"%\"}})\n          }\n        }\n      }\n    }, [props.selectAllOutput, oldSelectAllOutput])\n    const subscriptionDataCallback = React.useCallback( ({subscriptionData}) => {\n      console.log(\"fetchLimit\", fetchLimit, \"totalCount\", totalCount);\n      if(!mountedRef.current){\n        return null; // we're unmounted, so just exit\n      }\n      if(totalCount >= fetchLimit){\n        // we won't display it   \n        console.log(\"got more than we can see currently\", totalCount);\n        return;\n      }\n      // we still have some room to view more, but only room for fetchLimit - totalFetched.current\n      setOpenBackdrop(false);\n      if(subscriptionData.data.response.length > 0){\n        const newResponses = subscriptionData.data.response.filter( r => r.id > highestFetched.current);\n        const newerResponses = newResponses.map( (r) => { return {...r, response: String(Buffer.from(r.response,\"base64\"))}});\n        newerResponses.sort( (a,b) => a.id > b.id ? 1 : -1);\n        let outputResponses = output;\n        let rawResponseArray = [...rawResponses];\n        let highestFetchedId = highestFetched.current;\n        let totalFetchedSoFar = totalCount;\n        for(let i = 0; i < newerResponses.length; i++){\n          if(totalFetchedSoFar < fetchLimit){\n            outputResponses += newerResponses[i][\"response\"];\n            rawResponseArray.push(newerResponses[i][\"response\"]);\n            highestFetchedId = newerResponses[i][\"id\"];\n            totalFetchedSoFar += 1;\n          }else{\n            break;\n          }\n        }\n        setOutput(outputResponses);\n        setRawResponses(rawResponseArray);\n        highestFetched.current = highestFetchedId;\n      } \n    }, [setOutput, output, setRawResponses, highestFetched.current, rawResponses, totalCount]);\n    \n    useSubscription(subResponsesQuery, {variables: {task_id: props.task.id, fetchLimit: fetchLimit}, fetchPolicy: \"network_only\",\n      onSubscriptionData: subscriptionDataCallback\n    });\n    \n    const onSubmitPageChange = (currentPage) => {\n      if(!props.selectAllOutput){\n        setOpenBackdrop(true);\n        if(search === undefined || search === \"\"){\n          fetchMoreResponses({variables: {task_id: props.task.id, \n            fetchLimit: fetchLimit, \n            offset: fetchLimit * (currentPage - 1),\n            search: \"%_%\"\n          }})\n        }else{  \n          fetchMoreResponses({variables: {task_id: props.task.id, \n            fetchLimit: fetchLimit, \n            offset: fetchLimit * (currentPage - 1),\n            search: \"%\" +  search + \"%\"\n          }})\n        }  \n      }\n      \n    }\n    const onSubmitSearch = React.useCallback( (newSearch) => {\n      setSearch(newSearch);\n      setOpenBackdrop(true);\n      if(newSearch === undefined || newSearch === \"\"){\n        if(props.selectAllOutput){\n          fetchAllResponses({variables: {task_id: props.task.id, search: \"%%\"}})\n        }else{\n          fetchMoreResponses({variables: {task_id: props.task.id, \n            fetchLimit: fetchLimit, \n            offset: 0,\n            search: \"%_%\"\n          }})\n        }\n        \n      }else{  \n        if(props.selectAllOutput){\n          fetchAllResponses({variables: {task_id: props.task.id, search: \"%\" + newSearch + \"%\"}})\n        }else{\n          fetchMoreResponses({variables: {task_id: props.task.id, \n            fetchLimit: fetchLimit, \n            offset: 0,\n            search: \"%\" + newSearch + \"%\"\n          }})\n        }\n        \n      }\n    }, []);\n    \n  return (\n    <React.Fragment>\n      <Backdrop open={openBackdrop} onClick={()=>{setOpenBackdrop(false);}} style={{zIndex: 2, position: \"absolute\"}}>\n        <CircularProgress color=\"inherit\" disableShrink  />\n      </Backdrop>\n      {props.searchOutput &&\n       <SearchBar onSubmitSearch={onSubmitSearch} />\n      }\n      <div style={{overflow: \"auto\", maxWidth: \"100%\", width: \"100%\"}}>\n        <ResponseDisplayComponent rawResponses={rawResponses} viewBrowserScript={props.viewBrowserScript} output={output} command_id={props.command_id} task={props.task} search={search}/>\n      </div>\n      <PaginationBar selectAllOutput={props.selectAllOutput} totalCount={totalCount} onSubmitPageChange={onSubmitPageChange} task={props.task} search={search} parentMountedRef={mountedRef} />\n  </React.Fragment>\n  )\n      \n}\n\nconst PaginationBar = ({selectAllOutput, totalCount, onSubmitPageChange, task, search, parentMountedRef}) => {\n  const [localTotalCount, setTotalcount] = React.useState(0);\n  const [maxCount, setMaxCount] = React.useState(0);\n  const [currentPage, setCurrentPage] = React.useState(1);\n  const mountedRef = React.useRef(true);\n  const subscriptionMaxCountCallback = React.useCallback( ({subscriptionData}) => {\n    if(!mountedRef.current || !parentMountedRef.current){\n      return;\n    }\n    setMaxCount(subscriptionData.data.response_aggregate.aggregate.count);\n  }, [maxCount]);\n  useSubscription(getMaxCountQuery, {variables: {task_id: task.id},\n    onSubscriptionData: subscriptionMaxCountCallback\n  })\n  const onChangePage =  (event, value) => {\n    if(!mountedRef.current){\n      return;\n    }\n    setCurrentPage(value);\n    onSubmitPageChange(value);\n  };\n  React.useEffect( () => {\n    return() => {\n      mountedRef.current = false;\n    }\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[])\n  React.useEffect( () => {\n    if(!mountedRef.current || !parentMountedRef.current){\n      return;\n    }\n    if(selectAllOutput){\n      setTotalcount(1);\n      setCurrentPage(1);\n    }else if(search === \"\"){\n      setTotalcount(maxCount);\n    }else{\n      setTotalcount(totalCount);\n    }\n  }, [totalCount, maxCount, search, selectAllOutput]);\n  \n  return (\n    <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingBottom: \"10px\"}} >\n      <Pagination count={Math.ceil(localTotalCount / fetchLimit)} page={currentPage} variant=\"outlined\" color=\"primary\" boundaryCount={2} onChange={onChangePage} style={{margin: \"10px\"}}/>\n      <Typography style={{paddingLeft: \"10px\"}}>Total Results: {localTotalCount}</Typography>\n    </div>\n  )\n}\n\nconst SearchBar = ({onSubmitSearch}) => {\n  const theme = useTheme();\n  const [search, setSearch] = React.useState(\"\");\n  const onSubmitLocalSearch = () => {\n    onSubmitSearch(search);\n  }\n  return (\n    <div style={{marginTop: \"5px\"}}>\n      <MythicTextField value={search} autoFocus onEnter={onSubmitLocalSearch} onChange={(n,v,e) => setSearch(v)} placeholder=\"Search Output of This Task\" name=\"Search...\"\n        InputProps={{\n          endAdornment: \n          <React.Fragment>\n              <MythicStyledTooltip title=\"Search\">\n                  <IconButton onClick={onSubmitLocalSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n              </MythicStyledTooltip>\n          </React.Fragment>,\n          style: {padding: 0}\n      }}\n      ></MythicTextField>\n    </div>\n    \n  )\n}\n\nconst ResponseDisplayComponent = ({rawResponses, viewBrowserScript, output, command_id, task, search}) => {\n  const [localViewBrowserScript, setViewBrowserScript] = React.useState(true);\n  const [browserScriptData, setBrowserScriptData] = React.useState({});\n  const script = React.useRef();\n  const me = useReactiveVar(meState);\n  useEffect( () => {\n    if(script.current !== undefined){\n      try{\n        let res = script.current(task, rawResponses);\n        setBrowserScriptData(filterOutput(res));\n      }catch(error){\n        setViewBrowserScript(false);\n        console.log(error);\n      }\n      \n    }\n  }, [rawResponses]);\n  const filterOutput = (scriptData) => {\n    let copied = {...scriptData};\n    if(search === \"\"){\n      return scriptData;\n    }\n    if(scriptData[\"plaintext\"] !== undefined){\n      if(!scriptData[\"plaintext\"].includes(search)){\n        copied[\"plaintext\"] = \"\";\n      }\n    }\n    if(scriptData[\"table\"] !== undefined){\n      if(scriptData[\"table\"].length > 0){\n        const tableUpdates = scriptData.table.map( t => {\n          const filteredRows = t.rows.filter( r => {\n            let foundMatch = false;\n            for (const entry of Object.values(r)) {\n              if(entry[\"plaintext\"] !== undefined){\n                if(String(entry[\"plaintext\"]).includes(search)){foundMatch = true;}\n              }\n              if(entry[\"button\"] !== undefined && entry[\"button\"][\"value\"] !== undefined){\n                if(JSON.stringify(entry[\"button\"][\"value\"]).includes(search)){foundMatch = true;}\n              }\n            }\n            return foundMatch;\n          });\n          return {...t, rows: filteredRows};\n        });\n        copied[\"table\"] = tableUpdates;\n      }\n    }\n    return copied;\n  }\n  useEffect( () => {\n    if(script.current === undefined){\n      setViewBrowserScript(false);\n    }else{\n      setViewBrowserScript(viewBrowserScript);\n      if(viewBrowserScript && script.current !== undefined){\n        try{\n          let res = script.current(task, rawResponses);\n          setBrowserScriptData(filterOutput(res));\n        }catch(error){\n          setViewBrowserScript(false);\n        }\n          \n      }\n    }\n  }, [viewBrowserScript]);\n  const [fetchScripts] = useLazyQuery(taskScript, {\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      if(data.browserscriptoperation.length > 0){\n        try{\n          let unb64script = Buffer.from(data.browserscriptoperation[0][\"script\"], \"base64\");\n          let fun = Function('\"use strict\";return(' + unb64script + ')')();\n          script.current = fun;\n          setViewBrowserScript(true);\n          let res = script.current(task, rawResponses);\n          setBrowserScriptData(filterOutput(res));\n        }catch(error){\n          snackActions.error(error.toString());\n          console.log(error);\n          setViewBrowserScript(false);\n        }\n        \n      }else if(data.browserscript.length > 0){\n        try{\n          let unb64script = Buffer.from(data.browserscript[0][\"script\"], \"base64\");\n          let fun = Function('\"use strict\";return(' + unb64script + ')')();\n          script.current = fun;\n          setViewBrowserScript(true);\n          //console.log(rawResponses);\n          let res = script.current(task, rawResponses);\n          setBrowserScriptData(filterOutput(res));\n        }catch(error){\n          snackActions.error(error.toString());\n          console.log(error);\n          setViewBrowserScript(false);\n        }\n      }else{\n        setViewBrowserScript(false);\n      }\n    },\n    onError: (data) => {\n      console.log(data);\n    }\n  });\n  useEffect( () => {\n    if(command_id !== undefined){\n      fetchScripts({variables: {command_id: command_id, operator_id: me.user.user_id, operation_id: me.user.current_operation_id}});\n    }\n  }, [command_id]);\n  return (\n    localViewBrowserScript && browserScriptData ? (\n      <React.Fragment>\n          {browserScriptData?.screenshot?.map( (scr, index) => (\n              <ResponseDisplayScreenshot key={\"screenshot\" + index + 'fortask' + task.id} {...scr} />\n            )) || null\n          }\n          {browserScriptData?.plaintext &&\n            <ResponseDisplayPlaintext plaintext={browserScriptData[\"plaintext\"]} />\n          }\n          {browserScriptData?.table?.map( (table, index) => (\n              <ResponseDisplayTable callback_id={task.callback_id} table={table} key={\"tablefortask\" + task.id + \"table\" + index} />\n            )) || null\n          }\n          {browserScriptData?.download?.map( (dl, index) => (\n              <ResponseDisplayDownload download={dl} key={\"download\" + index + \"fortask\" + task.id} />\n            )) || null\n          }\n          {browserScriptData?.search?.map( (s, index) => (\n              <ResponseDisplaySearch search={s} key={\"searchlink\" + index + \"fortask\" + task.id} />\n          )) || null\n          }\n      </React.Fragment>\n    ) : (\n      <ResponseDisplayPlaintext plaintext={output} />\n    )\n  )\n}","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport {ResponseDisplayScreenshotModal} from './ResponseDisplayScreenshotModal';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplayScreenshot = (props) =>{\n  const [openScreenshot, setOpenScreenshot] = React.useState(false);\n  const classes = useStyles();\n  const now = (new Date()).toUTCString();\n  const clickOpenScreenshot = () => {\n    setOpenScreenshot(true);\n  }\n\n  return (\n    <React.Fragment>\n      {openScreenshot &&\n      <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n          onClose={()=>{setOpenScreenshot(false);}} \n          innerDialog={<ResponseDisplayScreenshotModal images={props.agent_file_id} onClose={()=>{setOpenScreenshot(false);}} />}\n      />\n      }\n      <pre style={{display: \"inline-block\"}}>\n        {props?.plaintext || \"\"}\n      </pre>\n      <Tooltip title={props?.hoverText || \"View Screenshot\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Button color=\"primary\" variant={props.variant ? props.variant : \"contained\"} onClick={clickOpenScreenshot} style={{marginBottom: \"10px\"}}>{props.name}</Button>\n      </Tooltip>\n    </React.Fragment>\n  )   \n}","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Tab from '@material-ui/core/Tab';\nimport React from 'react';\n\nexport function MythicTabPanel(props) {\n    const { children, value, index, maxHeight, tabInfo, getCallbackData, queryParams, changeSearchParam, ...other } =\n        props;\n    const style =\n        props.style === undefined\n            ? {\n                  display: value === index ? 'flex' : 'none',\n                  flexDirection: 'column',\n                  flexGrow: 1,\n                  width: '100%',\n                  maxWidth: '100%',\n                  overflowY: \"auto\",\n              }\n            : props.style;\n    return (\n        <div\n            role='tabpanel'\n            hidden={value !== index}\n            id={`scrollable-auto-tabpanel-${index}`}\n            aria-labelledby={`scrollable-auto-tab-${index}`}\n            style={style}\n            {...other}>\n            {<React.Fragment>{children}</React.Fragment>}\n        </div>\n    );\n}\nfunction a11yProps(index) {\n    return {\n        id: `scrollable-auto-tab-${index}`,\n        'aria-controls': `scrollable-auto-tabpanel-${index}`,\n    };\n}\nexport function MythicTabLabel(props) {\n    const {\n        label,\n        index,\n        fullWidth,\n        maxHeight,\n        onContextMenu,\n        onCloseTab,\n        selectionFollowsFocus,\n        textColor,\n        indicator,\n        tabInfo,\n        onEditTabDescription,\n        getCallbackData,\n        ...other\n    } = props;\n    const onClick = (e) => {\n        e.stopPropagation();\n        onCloseTab({ tabID: tabInfo.tabID, index: index });\n    };\n    return (\n        <Tab\n            label={\n                <span onContextMenu={onContextMenu} style={{ display: 'inline-block', zIndex: 1 }}>\n                    {label}\n                    <IconButton component='div' size='small' onClick={onClick} {...other}>\n                        <CloseIcon />\n                    </IconButton>\n                </span>\n            }\n            {...a11yProps(index)}\n            {...other}\n        />\n    );\n}\nexport function MythicSearchTabLabel(props) {\n    const { label, index, fullWidth, maxHeight, selectionFollowsFocus, textColor, indicator, iconComponent, ...other } =\n        props;\n    return (\n        <Tab\n            label={\n                <span>\n                    {label}\n                    <br />\n                    {iconComponent}\n                </span>\n            }\n            {...a11yProps(index)}\n            {...other}\n        />\n    );\n}\n","import React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplayDownload = (props) =>{\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <pre style={{display: \"inline-block\"}}>\n        {props.download?.plaintext || \"\"}\n      </pre>\n      \n      <Tooltip title={props?.dowload?.hoverText || \"Download payload\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Button variant={props.download?.variant || \"contained\"} component=\"a\" target=\"_blank\" color=\"primary\" href={\"/api/v1.4/files/download/\" + props.download.agent_file_id} download\n          startIcon={<GetAppIcon />}>\n            {props.download?.name || \"\"}\n        </Button>\n      </Tooltip><br/>\n    </React.Fragment>\n  )   \n}","import React from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {  Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplaySearch = (props) =>{\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\"}}>\n        {props.search?.plaintext || \"\"}\n      </pre>\n      \n      <Tooltip title={props.search?.hoverText || \"View on Search Page\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Link component=\"a\" target=\"_blank\" href={window.location.origin + \"/new/search/?\" + props.search.search}>\n            {props.search?.name || \"\"}\n        </Link>\n      </Tooltip><br/>\n    </React.Fragment>\n  )   \n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($task_id: Int!, $comment: String) {\n  update_task_by_pk(pk_columns: {id: $task_id}, _set: {comment: $comment}) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\n\nexport function TaskCommentDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getCommentQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(data.task_by_pk.comment)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateComment({variables: {task_id: props.task_id, comment: comment}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Comment</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useReactiveVar, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { meState } from '../../../cache';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport NoteAddIcon from '@material-ui/icons/NoteAdd';\nimport { IconButton } from '@material-ui/core';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst addTaskTagMutation = gql`\nmutation addTaskTag ($task_id: Int!, $tag: String!) {\n  insert_tasktag_one(object: {task_id: $task_id, tag: $tag}){\n    id\n  }\n}\n`;\nconst removeTaskTagMutation = gql`\nmutation removeTaskTag($tasktag_id: Int!){\n  delete_tasktag_by_pk(id: $tasktag_id){\n    id\n  }\n}\n`;\nconst getTaskTagsQuery = gql`\nquery getTaskTags ($operation_id: Int!) {\n  tasktag(where: {operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    task_id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\n  \nexport function TaskTagDialog(props) {\n    const [newTag, setNewTag] = useState(\"\");\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getTaskTagsQuery, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n          const currentTags = data.tasktag.reduce( (prev, cur) => {\n            if(cur.task_id === props.task_id){\n              return [...prev, cur];\n            }else{\n              return [...prev];\n            }\n          }, []);\n          const allTags = data.tasktag.reduce( (prev, cur) => {\n            if(prev.find( element => element.tag === cur.tag) || currentTags.find( element => element.tag === cur.tag)){\n              return [...prev];\n            }else{\n              return [...prev, cur];\n            }\n          }, []);\n          \n          setLeft(allTags);\n          setRight(currentTags);\n          setOriginalTags([...currentTags]);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [addTaskTag] = useMutation(addTaskTagMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [removeTaskTag] = useMutation(removeTaskTagMutation, {\n      update: (cache, {data}) => {\n          //console.log(data);\n      }\n  });\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [originalTags, setOriginalTags] = React.useState([]);\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n\n    const handleToggle = (value) => () => {\n      const currentIndex = checked.indexOf(value);\n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((value) => {\n              const labelId = `transfer-list-item-${value.id}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value.id} role=\"listitem\" button onClick={handleToggle(value)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={checked.indexOf(value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value.tag} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onChange = (name, value, error) => {\n        setNewTag(value);\n    }\n    const addNewTag = () => {\n      if(!right.find(element => element.tag === newTag) && !left.find(element => element.tag === newTag)){\n        if(newTag !== \"\"){\n          setRight([...right, {tag: newTag, id: 0, task_id: 0}]);\n        }\n      }\n      setNewTag(\"\");\n    }\n    const setFinalTags = () => {\n\n      originalTags.forEach( (tag) => {\n        // go through the original tags and see if they exist in the right, if so, move on\n        // if the tag doesn't exist, we delete it\n        if(!right.find(element => element.id === tag.id)){\n          removeTaskTag({variables: {tasktag_id: tag.id}});\n        }\n      });\n      right.forEach( (tag) => {\n        // go through the right tags and see if they existed in the original, if so, move on\n        // if the tag doesn't exist, we add it\n        if(!originalTags.find(element => element.id === tag.id)){\n          addTaskTag({variables: {task_id: props.task_id, tag: tag.tag}});\n        }\n      });\n      if(newTag !== \"\"){\n        addTaskTag({variables: {task_id: props.task_id, tag: newTag}});\n      }\n      snackActions.success(\"Updated tags\");\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Tags</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(\"Unused Tags In Operation\", left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                ≫\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                ≪\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(\"Applied Tags To Task\", right)}</Grid>\n        </Grid>\n        <MythicTextField autoFocus multiline={false} name=\"Add New Tag...\" onChange={onChange} value={newTag} style={{display:\"inline-block\"}} \n          InputProps={{\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton style={{color: muiTheme.palette.success.main}} variant=\"contained\" onClick={addNewTag}><NoteAddIcon/></IconButton>\n                    </React.Fragment>\n                }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { useSnackbar } from 'notistack';\n\nconst updateOpsecRequestMutation = gql`\nmutation requestOpsecBypass ($task_id: Int!) {\n    requestOpsecBypass(task_id: $task_id){\n        status\n        error\n    }\n}\n`;\nconst getOpsecQuery = gql`\nquery getOPSECQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    opsec_pre_blocked\n    opsec_pre_message\n    opsec_pre_bypassed\n    opsec_pre_bypass_user{\n        username\n        id\n    }\n    opsec_post_blocked\n    opsec_pre_bypass_role\n    opsec_post_message\n    opsec_post_bypassed\n    opsec_post_bypass_role\n    opsec_post_bypass_user{\n        username\n        id\n    }\n    id\n  }\n}\n`;\n\nexport function TaskOpsecDialog(props) {\n    const [opsecMessage, setOpsecMessage] = useState(\"\");\n    const [opsecData, setOpsecData] = useState({});\n    const { enqueueSnackbar } = useSnackbar();\n    const { loading, error } = useQuery(getOpsecQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let message = \"OPSEC PreCheck Message\";\n            console.log(data);\n            if(data.task_by_pk.opsec_pre_bypass_user !== null){\n                message += \" (bypassed by \" + data.task_by_pk.opsec_pre_bypass_user.username + \")\";\n            }\n            message += \":\\n\\n\" + data.task_by_pk.opsec_pre_message + \"\\n\";\n            if(data.task_by_pk.opsec_post_blocked){\n                message += \"\\nOPSEC PostCheck Message\";\n                if(data.task_by_pk.opsec_post_bypass_user !== null){\n                    message += \" (bypassed by \" + data.task_by_pk.opsec_post_bypass_user.username + \")\";\n                }\n                message += \":\\n\\n\" + data.task_by_pk.opsec_post_message + \"\\n\";\n                \n            }\n            setOpsecData(data.task_by_pk);\n            setOpsecMessage(message);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateOpsecRequest] = useMutation(updateOpsecRequestMutation, {\n        update: (cache, {data}) => {\n            if(data.requestOpsecBypass.status === \"success\"){\n                enqueueSnackbar(\"Bypass processed successfully\", {variant: \"success\"});\n            }else{\n                enqueueSnackbar(data.requestOpsecBypass.error, {variant: \"warning\"});\n            }\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onRequestSubmit = () => {\n       console.log(props.task_id);\n        updateOpsecRequest({variables: {task_id: props.task_id}});\n        props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Request OPSEC Bypass</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={opsecMessage} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          {(opsecData.opsec_pre_blocked === true && !opsecData.opsec_pre_bypassed) || (opsecData.opsec_post_blocked === true && !opsecData.opsec_post_bypassed) ?\n          (\n            <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Submit Bypass Request</Button>\n          ) : (null) }\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    display_params\n    original_params\n    params\n    tasking_location\n    parameter_group_name\n    id\n  }\n}\n`;\n\nexport function TaskViewParametersDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let workingComment = \"Original Parameters:\\n\" + data.task_by_pk.original_params;\n            workingComment += \"\\n\\nAgent Parameters:\\n\" + data.task_by_pk.params;\n            workingComment += \"\\n\\nDisplay Parameters:\\n\" + data.task_by_pk.display_params;\n            workingComment += \"\\n\\nTasking Location:\\n\" + data.task_by_pk.tasking_location;\n            workingComment += \"\\n\\nParameter Group:\\n\" + data.task_by_pk.parameter_group_name;\n            setComment(workingComment);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    stdout\n    stderr\n    id\n  }\n}\n`;\n\nexport function TaskViewStdoutStderrDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(\"[STDOUT]:\\n\" + data.task_by_pk.stdout + \"\\n\\[STDERR]:\\n\" + data.task_by_pk.stderr);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {ResponseDisplayTable} from './ResponseDisplayTable';\n\n\nexport function ResponseDisplayTableDialogTable({table, callback_id, title, onClose}) {\n      \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\n        <DialogContent dividers={true}>\n            <ResponseDisplayTable table={table} callback_id={callback_id} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect, useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport { MythicViewJSONAsTableDialog, MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicDisplayTextDialog } from '../../MythicComponents/MythicDisplayTextDialog';\nimport { ResponseDisplayTableDialogTable } from './ResponseDisplayTableDialogTable';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport 'react-virtualized/styles.css';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport IconButton from '@material-ui/core/IconButton';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {MythicStyledTooltip} from '../../MythicComponents/MythicStyledTooltip';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport MythicResizableGrid from '../../MythicComponents/MythicResizableGrid';\nimport {faList, faTrashAlt, faSkullCrossbones, faCamera, faSyringe, faFolder, faFolderOpen, faFileArchive, faCog, faFileWord, faFileExcel, faFilePowerpoint, faFilePdf, faDatabase, faKey, faFileCode, faDownload, faUpload, faFileImage, faCopy, faBoxOpen, faFileAlt } from '@fortawesome/free-solid-svg-icons';\n\nconst onCopyToClipboard = (data) => {\n  let result = copyStringToClipboard(data);\n  if(result){\n    snackActions.success(\"Copied text!\");\n  }else{\n    snackActions.error(\"Failed to copy text\");\n  }\n}\nconst getIconName = (iconName) => {\n  switch(iconName.toLowerCase()){\n    case \"openfolder\":\n    case \"folder\":\n      return faFolderOpen;\n    case \"closedfolder\":\n      return faFolder;\n    case \"archive\":\n    case \"zip\":\n      return faFileArchive;\n    case \"diskimage\":\n      return faBoxOpen;\n    case \"executable\":\n      return faCog;\n    case \"word\":\n      return faFileWord;\n    case \"excel\":\n      return faFileExcel;\n    case \"powerpoint\":\n      return faFilePowerpoint;\n    case \"pdf\":\n    case \"adobe\":\n      return faFilePdf;\n    case \"database\":\n      return faDatabase;\n    case \"key\":\n      return faKey;\n    case \"code\":\n    case \"source\":\n      return faFileCode;\n    case \"download\":\n      return faDownload;\n    case \"upload\":\n      return faUpload;\n    case \"png\":\n    case \"jpg\":\n    case \"image\":\n      return faFileImage;\n    case \"list\":\n      return faList;\n    case \"delete\":\n      return faTrashAlt;\n    case \"inject\":\n      return faSyringe;\n    case \"kill\":\n      return faSkullCrossbones;\n    case \"camera\":\n      return faCamera;\n    default:\n      return faFileAlt;\n  }\n}\nconst doubleClickRow = () => {\n\n}\nconst ResponseDisplayTableStringCell = ({cellData, rowData}) => {\n\n  return (\n    <div style={{...cellData?.cellStyle || null}}>\n      {cellData?.copyIcon? \n        <MythicStyledTooltip title={\"Copy to clipboard\"}>\n            <IconButton onClick={() => onCopyToClipboard(cellData[\"plaintext\"])} size=\"small\">\n                <FontAwesomeIcon icon={faCopy} />\n            </IconButton>\n        </MythicStyledTooltip> : null}\n      {cellData?.startIcon? \n        <MythicStyledTooltip title={cellData?.startIconHoverText || \"\"} >\n            <FontAwesomeIcon icon={getIconName(cellData?.startIcon)} style={{marginRight: \"5px\", color: cellData?.startIconColor  || \"\"}}/>\n        </MythicStyledTooltip>\n         : null\n      }\n      {cellData?.plaintextHoverText? (\n        <MythicStyledTooltip title={cellData.plaintextHoverText}>\n          <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext?.replaceAll(\"\\n\", \"\") || \" \"}\n          </pre>\n          \n        </MythicStyledTooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext?.replaceAll(\"\\n\",\"\") || \" \"}\n          </pre>\n      )}\n      {cellData?.endIcon? \n       <MythicStyledTooltip title={cellData?.endIconHoverText || \"\"}>\n          <FontAwesomeIcon icon={getIconName(cellData?.endIcon)} style={{color: cellData?.endIconColor  || \"\"}}/>\n        </MythicStyledTooltip>: null\n      }\n    </div>\n          \n  )\n}\nconst ResponseDisplayTableNumberCell = ({cellData, rowData}) => {\n  return (\n    <div style={{...cellData?.cellStyle || null}}>\n      {cellData?.copyIcon? \n        <MythicStyledTooltip title={\"Copy to clipboard\"}>\n            <IconButton onClick={() => onCopyToClipboard(cellData[\"plaintext\"])} size=\"small\">\n                <FontAwesomeIcon icon={faCopy} />\n            </IconButton>\n        </MythicStyledTooltip> : null}\n      {cellData?.startIcon? \n        <MythicStyledTooltip title={cellData?.startIconHoverText || \"\"} >\n            <FontAwesomeIcon icon={getIconName(cellData?.startIcon)} style={{marginRight: \"5px\", color: cellData?.startIconColor  || \"\"}}/>\n        </MythicStyledTooltip>\n         : null\n      }\n      {cellData?.plaintextHoverText? (\n        <MythicStyledTooltip title={cellData.plaintextHoverText}>\n          <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext  || \" \"}\n          </pre>\n          \n        </MythicStyledTooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext || \" \"}\n          </pre>\n      )}\n      {cellData?.endIcon? \n       <MythicStyledTooltip title={cellData?.endIconHoverText || \"\"}>\n          <FontAwesomeIcon icon={getIconName(cellData?.endIcon)} style={{color: cellData?.endIconColor  || \"\"}}/>\n        </MythicStyledTooltip>: null\n      }\n    </div>\n          \n  )\n}\nconst getStringSize = ({cellData}) => {\n  try{\n      // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n      let bytes = parseInt(cellData[\"plaintext\"]);\n      if (cellData[\"plaintext\"] === ''){\n        return \"\"\n      }\n      if (bytes === 0){\n        return \"0 Bytes\";\n      };\n      const decimals = 2;\n      const k = 1024;\n      const dm = decimals < 0 ? 0 : decimals;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      const size = parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n      return size;\n  }catch(error){\n    return cellData?.plaintext?.replaceAll(\"\\n\", \"\") || \"\"\n    \n  }\n}\nconst ResponseDisplayTableSizeCell = ({cellData, rowData}) => {\n  return (\n    <div style={{...cellData?.cellStyle || null}}>\n        {cellData?.plaintextHoverText? (\n        <MythicStyledTooltip title={cellData.plaintextHoverText} >\n          <pre style={{display: \"inline-block\"}}>\n            {getStringSize({cellData})}\n          </pre>\n          \n        </MythicStyledTooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {getStringSize({cellData})}\n          </pre>\n      )}\n     </div>\n          \n  )\n}\nconst ResponseDisplayTableActionCell = ({cellData, callback_id, rowData}) => {\n  const theme = useTheme();\n  const [openButton, setOpenButton] = React.useState(false);\n  const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n  const [openDictionaryButton, setOpenDictionaryButton] = React.useState(false);\n  const [openStringButton, setOpenStringButton] = React.useState(false);\n  const [openTableButton, setOpenTableButton] = React.useState(false);\n  const dropdownAnchorRef = useRef(null);\n  const [openDropdownButton, setOpenDropdownButton] = React.useState(false);\n  const [taskingData, setTaskingData] = React.useState({});\n  const handleClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpenDropdownButton(false);\n  };\n  const handleMenuItemClick = (event, index) => {\n    switch(cellData.button.value[index].type.toLowerCase()){\n      case \"task\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenTaskingButton(true);\n        break;\n      case \"dictionary\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenDictionaryButton(true);\n        break;\n      case \"string\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenStringButton(true);\n        break;\n      case \"table\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenTableButton(true);\n        break;\n    }\n    setOpenDropdownButton(false);\n  };\n  const finishedTasking = () => {\n    setOpenButton(false);\n    setOpenTaskingButton(false);\n    setOpenDictionaryButton(false);\n    setOpenStringButton(false);\n    setOpenTableButton(false);\n    setTaskingData({});\n  }\n  const finishedViewingData = () => {\n    setOpenButton(false);\n    setOpenTaskingButton(false);\n    setOpenDictionaryButton(false);\n    setOpenStringButton(false);\n    setOpenTableButton(false);\n    setTaskingData({});\n  }\n  const getButtonObject = () => {\n    switch(cellData.button.type.toLowerCase()){\n      case \"dictionary\":\n        return (\n          <React.Fragment>\n            <MythicStyledTooltip title={cellData?.button?.hoverText || \"Display Data\"} >\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" \n                onClick={() => setOpenButton(true)} disabled={cellData?.button?.disabled || false}\n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n                >{cellData?.button?.name || \" \"}</Button>\n            </MythicStyledTooltip>\n            {openButton &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openButton} \n                    onClose={()=>{setOpenButton(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title={cellData?.button?.title || \"Title Here\"} leftColumn={cellData?.button?.leftColumnTitle || \"Left Column\"} \n                    rightColumn={cellData?.button?.rightColumnTitle || \"Right Column\"} value={cellData?.button?.value || {}} onClose={()=>{setOpenButton(false);}} />}\n                />\n              }\n            </React.Fragment>\n        )\n      case \"string\":\n        return (\n          <React.Fragment>\n            <MythicStyledTooltip title={cellData?.button?.hoverText || \"Display Data\"} >\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" \n                onClick={() => setOpenButton(true)} disabled={cellData?.button?.disabled || false}\n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n                >{cellData?.button?.name || \" \"}</Button>\n            </MythicStyledTooltip>\n            {openButton &&\n                <MythicDisplayTextDialog fullWidth={true} maxWidth=\"lg\" open={openButton} title={cellData?.button?.title || \"Title Here\"} value={cellData?.button?.value || \"\"}\n                    onClose={()=>{setOpenButton(false);}}\n                />\n              }\n          </React.Fragment>\n        )\n      case \"table\": \n        return (\n          <React.Fragment>\n            <MythicStyledTooltip title={cellData?.button?.hoverText || \"Display Data\"} >\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" \n                onClick={() => setOpenButton(true)} disabled={cellData?.button?.disabled || false}\n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n                >{cellData?.button?.name || \" \"}</Button>\n            </MythicStyledTooltip>\n            {openButton &&\n                <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openButton} \n                    onClose={()=>{setOpenButton(false);}} \n                    innerDialog={<ResponseDisplayTableDialogTable title={cellData?.button?.title || \"Title Here\"} \n                    table={cellData?.button?.value || {}} callback_id={callback_id} onClose={()=>{setOpenButton(false);}} />}\n                />\n              }\n          </React.Fragment>\n        )\n      case \"task\":\n        return (\n          <React.Fragment>\n            <MythicStyledTooltip title={cellData?.button?.hoverText || \"Issues Task to Agent\"}>\n              <Button size=\"small\" onClick={() => setOpenTaskingButton(true)} disabled={cellData?.button?.disabled || false} variant=\"contained\" color=\"secondary\" \n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n              >{cellData?.button?.name || \" \"}</Button>\n            </MythicStyledTooltip>\n            {openTaskingButton && \n              <TaskFromUIButton ui_feature={cellData?.button?.ui_feature || \" \"} \n                callback_id={callback_id} \n                parameters={cellData?.button?.parameters || \"\"}\n                openDialog={cellData?.button?.openDialog || false}\n                getConfirmation={cellData?.button?.getConfirmation || false}\n                onTasked={() => setOpenTaskingButton(false)}/>\n            }\n          </React.Fragment>\n        )\n      case \"menu\":\n        return (\n          <React.Fragment>\n            {openTaskingButton && \n              <TaskFromUIButton ui_feature={taskingData.ui_feature} \n                callback_id={callback_id} \n                parameters={taskingData.parameters}\n                onTasked={finishedTasking}/>\n            }\n            {openDictionaryButton && \n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openDictionaryButton} \n                onClose={finishedViewingData} \n                innerDialog={<MythicViewJSONAsTableDialog title={taskingData.title} leftColumn={taskingData.leftColumnTitle} \n                rightColumn={taskingData.rightColumnTitle} value={taskingData.value} onClose={finishedViewingData} />}\n            />\n            }\n            {openStringButton &&\n              <MythicDisplayTextDialog fullWidth={true} maxWidth=\"lg\" open={openStringButton} title={taskingData?.title || \"Title Here\"} value={taskingData?.value || \"\"}\n                  onClose={finishedViewingData}\n              />\n            }\n            {openTableButton &&\n                <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openTableButton} \n                    onClose={finishedViewingData} \n                    innerDialog={<ResponseDisplayTableDialogTable title={taskingData?.title || \"Title Here\"} \n                    table={taskingData?.value || {}} callback_id={callback_id} onClose={finishedViewingData} />}\n                />\n              }\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" ref={dropdownAnchorRef}\n                onClick={() => setOpenDropdownButton(true)} disabled={cellData?.button?.disabled || false}\n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n                >{cellData?.button?.name || \" \"}</Button>\n                <Popper open={openDropdownButton} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {cellData.button.value.map((option, index) => (\n                              <MenuItem\n                                key={option.name + index}\n                                disabled={option.disabled}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                <MythicStyledTooltip title={option?.hoverText || (option.type === \"task\" ? \"Task an Agent\" : \"Display Data\")}>\n                                    {option?.startIcon ? <FontAwesomeIcon icon={getIconName(option?.startIcon)} style={{color: option?.startIconColor  || \"\", marginRight: \"5px\"}}/> : null}\n                                    {option.name}\n                                </MythicStyledTooltip>\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n          </React.Fragment>\n        )\n    }\n  }\n  return (\n    <div style={{...rowData?.rowStyle || null, ...cellData?.cellStyle || null}}>\n      {cellData?.plaintext ? cellData.plaintext : null}\n      {cellData?.button ? (getButtonObject()) : (null)}\n    </div>\n  )\n}\n\nexport const ResponseDisplayTable = ({table, callback_id}) =>{\n  const theme = useTheme();\n  const rowHeight = 35;\n  const headerHeight = 45;\n  const [dataHeight, setDataHeight] = React.useState(530);\n  const maxElements = Math.floor(dataHeight / rowHeight);\n  const [allData, setAllData] = React.useState([]);\n  const [sortData, setSortData] = React.useState({sortKey: null, sortType: null, sortDirection: \"ASC\"})\n  const sortedData = React.useMemo(() => {\n    if (sortData.sortKey === null || sortData.sortType === null) {\n      return allData\n    }\n    const tmpData = [...allData];\n    if(sortData.sortType === \"number\" || sortData.sortType === \"size\"){\n      tmpData.sort((a, b) => (parseInt(a[sortData.sortKey][\"plaintext\"]) > parseInt(b[sortData.sortKey][\"plaintext\"]) ? 1 : -1));\n    }else if(sortData.sortType === \"date\"){\n      tmpData.sort((a,b) => ( (new Date(a[sortData.sortKey][\"plaintext\"])) > (new Date(b[sortData.sortKey][\"plaintext\"])) ? 1: -1));\n    }else{\n      tmpData.sort( (a, b) => {\n        if(a[sortData.sortKey][\"plaintext\"] === undefined){\n          return -1;\n        }else if(b[sortData.sortKey][\"plaintext\"] === undefined){\n          return 1;\n        }\n        return a[sortData.sortKey][\"plaintext\"].toLowerCase() > b[sortData.sortKey][\"plaintext\"].toLowerCase() ? 1 : -1\n      });\n    }\n    if(sortData.sortDirection === \"DESC\"){\n      tmpData.reverse();\n    }\n    return tmpData;\n  }, [allData, sortData]);\n  const onClickHeader = (e, columnIndex) => {\n    const column = table.headers[columnIndex];\n\n    if(column.disableSort){\n        return;\n    }\n    if (!column.plaintext) {\n        setSortData({sortKey: null, sortType: null, sortDirection: \"ASC\"});\n    }\n    if (sortData.sortKey === column.plaintext) {\n        if (sortData.sortDirection === 'ASC') {\n            setSortData({sortKey: column.plaintext, sortType: column.type, sortDirection: \"DESC\"});\n        } else {\n            setSortData({sortKey: column.plaintext, sortType: column.type, sortDirection: \"ASC\"});\n        }\n    } else {\n        setSortData({sortKey: column.plaintext, sortType: column.type, sortDirection: \"ASC\"});\n    }\n  };\n  const gridData = React.useMemo(\n    () => {\n        return sortedData.map((row) => {\n          let rowData = [];\n          for(let i = 0; i < table.headers.length; i++){\n            switch(table.headers[i].type){\n              case \"string\":\n                rowData.push(\n                  <ResponseDisplayTableStringCell cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n              case \"size\":\n                rowData.push(\n                  <ResponseDisplayTableSizeCell cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n              case \"button\":\n                rowData.push(\n                  <ResponseDisplayTableActionCell callback_id={callback_id} cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n              case \"number\":\n                rowData.push(\n                  <ResponseDisplayTableNumberCell callback_id={callback_id} cellData={row[table.headers[i][\"plaintext\"]]} rowData={row} />\n                )\n                break;\n              default:\n                rowData.push(\n                  <ResponseDisplayTableStringCell cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n            }\n          }\n          return [...rowData];\n        });\n    }, [sortedData]\n  );\n  \n  useEffect( () => {\n    setAllData([...table.rows]);\n    if(table.rows.length < maxElements){\n      setDataHeight((table.rows.length * rowHeight) + headerHeight);\n    }else{\n      setDataHeight(530);\n    }\n  }, [table.rows])\n  const sortColumn = table.headers.findIndex((column) => column.plaintext === sortData.sortKey);\n  return (\n      <React.Fragment>\n        {table?.title ? (\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  {table.title}\n              </Typography>\n          </Paper>\n        ) : (null)}\n          \n          <div style={{height: dataHeight, width: \"100%\"}}>\n            <MythicResizableGrid\n                  columns={table.headers}\n                  sortIndicatorIndex={sortColumn}\n                  sortDirection={sortData.sortDirection}\n                  items={gridData}\n                  widthMeasureKey={\"plaintext\"}\n                  headerNameKey={\"plaintext\"}\n                  onDoubleClickRow={doubleClickRow}\n                  rowHeight={rowHeight}\n                  onClickHeader={onClickHeader}\n              />\n            \n          </div>\n      </React.Fragment>\n    \n  )   \n}","import {useEffect, useRef } from 'react';\n\nexport function toLocalTime(date, view_utc_time) {\n    try {\n        if(date === null){\n            return \"N/A\";\n        }\n        let init_date = new Date(date);\n        if (view_utc_time) {\n            return date + \" UTC\";\n        }\n        return init_date.toDateString() + \" \" + init_date.toTimeString().substring(0, 8);\n    } catch (error) {\n        console.log(\"warning\", \"Failed to get local time converted: \" + error.toString());\n    }\n\n}\n\nexport function getTimeDifference(checkin_time) {\n    let date = new Date();\n    let now = date.getTime() + date.getTimezoneOffset() * 60000;\n    let millisec = Math.abs(now - (new Date(checkin_time).getTime()));\n    let seconds = Math.trunc(((millisec / 1000)) % 60);\n    let minutes = Math.trunc(((millisec / (1000 * 60))) % 60);\n    let hours = Math.trunc(((millisec / (1000 * 60 * 60))) % 24);\n    let days = Math.trunc(((millisec / (1000 * 60 * 60 * 24))) % 365);\n    let output = \"\";\n    if(days !== 0){ output += days + \"d\";}\n    if(hours !== 0){ output += hours + \"h\";}\n    if(minutes !== 0){ output += minutes + \"m\";}\n    output += seconds + \"s\";\n    return output;\n}\n//https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback, delay, mountedRef, parentMountedRef) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n  useEffect(() => {\n    function tick() {\n      if((mountedRef && !mountedRef.current) || (parentMountedRef && !parentMountedRef.current)){\n        return;\n      }\n      savedCallback.current();\n    }\n    if( (mountedRef && !mountedRef.current) || (parentMountedRef && !parentMountedRef.current)){\n      return;\n    }\n    let id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay, mountedRef, parentMountedRef]);\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicConfirmDialog(props) {\n    const theme = useTheme();\n    const handleSubmit = () => {\n        props.onSubmit();\n        props.onClose();\n    }\n\n  return (\n    <MythicDialog fullWidth={false} maxWidth=\"sm\" open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle >{props.title ? (props.title) : (\"Are you sure?\")}</DialogTitle>\n            {props.dialogText === undefined ? (null) : (\n              <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n                <DialogContentText>\n                  {props.dialogText}\n                </DialogContentText>\n              </DialogContent>\n            )}\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                {props.cancelText ? (props.cancelText) : (\"Close\")}\n              </Button>\n              <Button onClick={handleSubmit} autoFocus variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                {props.acceptText ? (props.acceptText) : (\"Remove\")}\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 814;","export default __webpack_public_path__ + \"static/media/mythic.7189479f.svg\";","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport logo from '../../../assets/mythic.svg';\nimport { Redirect } from 'react-router-dom';\nimport { meState, successfulLogin, FailedRefresh } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {restartWebsockets, isJWTValid} from '../../../index';\nimport { snackActions } from '../../utilities/Snackbar';\n\nexport function LoginForm(props){\n    const me = useReactiveVar(meState);\n    const [username, setUsername] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    useEffect( () => {\n        if(!isJWTValid()){\n            console.log(\"calling FailedRefresh on the login page to remove old data\");\n            FailedRefresh();\n        }else{\n            //console.log(meState());\n        }\n    }, [])\n    const submit = e => {\n        e.preventDefault();\n        if( username === \"\" || password === \"\"){\n            snackActions.warning(\"Username and Password required\");\n            return;\n        }\n        const requestOptions = {\n            method: \"POST\",\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({username, password})\n        };\n        fetch('/auth', requestOptions).then((response) => {\n            response.json().then(data => {\n                console.log(data)\n                if(\"access_token\" in data){\n                    successfulLogin(data);\n                    restartWebsockets();\n                }else{\n                    snackActions.warning(\"Invalid Username or Password\");\n                    console.log(\"Error\", data);\n                }\n            }).catch(error => {\n                snackActions.warning(\"Error getting JSON from server\");\n                console.log(\"Error trying to get json response\", error.toString());\n            });\n        }).catch(error => {\n            snackActions.warning(\"Error talking to server\");\n            console.log(\"There was an error!\", error.toString());\n        });\n    }\n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordChange = (name, value, error) => {\n        setPassword(value);\n    }\n    const redirectPath = () => {\n        const locationState = props.location.state;\n        return locationState && locationState.from ? locationState.from.pathname : '/new/';\n    }\n    return (\n        <div style={{justifyContent: \"center\", display: \"flex\"}}>\n        { \n            me.loggedIn ?\n                (\n                    <Redirect to={redirectPath()}/>\n                )\n               : (\n                    <div>\n                    <img src={logo} height=\"400px\" alt=\"Mythic logo\"/>\n                        <form onSubmit={submit}>\n                            <MythicTextField name='username' value={username} onChange={onUsernameChange} width={30} />\n                            <MythicTextField name='password' type=\"password\" value={password} onChange={onPasswordChange} width={30} />\n                            <Button type=\"submit\" color=\"primary\" onClick={submit} variant=\"contained\" style={{marginRight: \"10px\"}}>Login</Button>\n                        </form>\n                    </div>\n                )\n        }\n        </div>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nexport function APITokenRow(props){\n    \n    return (\n            <TableRow key={\"apitokenRow\" + props.id}>\n                <TableCell><Button size=\"small\" onClick={() => {props.onDeleteAPIToken(props.id)}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button></TableCell>\n                <TableCell>{props.token_value}</TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function SettingsOperatorDialog(props) {\n    const [username, setUsername] = React.useState(props.username ? props.username : \"\");\n    const [passwordOld, setPasswordOld] = React.useState(\"\");\n    const [passwordNew, setPasswordNew] = React.useState(\"\");\n    \n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordOldChange = (name, value, error) => {\n        setPasswordOld(value);\n    }\n    const onPasswordNewChange = (name, value, error) => {\n        setPasswordNew(value);\n    }\n    const onAccept = () =>{\n        props.onAccept(props.id, username, passwordOld, passwordNew);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            Use this dialog to update some information about an operator.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            placeholder={props.username}\n            value={username}\n            onChange={onUsernameChange}\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordOld\"\n            onChange={onPasswordOldChange}\n            name=\"old password\"\n            type=\"password\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordNew\"\n            onChange={onPasswordNewChange}\n            name=\"new password\"\n            type=\"password\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"primary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n\nexport function SettingsOperatorDeleteDialog(props) {\n    const onAccept = () =>{\n        props.onAccept(props.id);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Delete Operator</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This deletes an operator and prevents them from permanently logging in again. If you want a temporary solution, disable the operator instead.\n          </DialogContentText>\n          <DialogContentText>\n            Are you sure you want to delete operator \"{props.username}\"?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Delete\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { APITokenRow } from './SettingsOperatorAPIToken';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { SettingsOperatorDeleteDialog } from './SettingsOperatorDeleteDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nexport function SettingsOperator(props){\n    const [open, setOpen] = React.useState(false);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const onViewUTCChanged = (evt) => {\n        const {id} = props;\n        props.onViewUTCChanged(id, !props[evt.target.name]);\n    }\n    const onAdminChanged = (evt) => {\n        const {id} = props;\n        props.onAdminChanged(id, !props[evt.target.name]);\n    }\n    const onActiveChanged = (evt) => {\n        const {id} = props;\n        props.onActiveChanged(id, !props[evt.target.name]);\n    }\n    const onAccept = (id, username, passwordOld, passwordNew) => {\n        if(username !== props.username){\n          props.onUsernameChanged(id, username);\n        }\n        if(passwordNew.length > 0){\n          props.onPasswordChanged({user_id: id, old_password: passwordOld, new_password: passwordNew})\n        }\n        setOpenUpdateDialog(false);\n    }\n    const onAcceptDelete = (id) => {\n        props.onDeleteOperator(id);\n        setOpenDeleteDialog(false);\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id}>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button>\n                    <MythicDialog open={openDelete} \n                        onClose={()=>{setOpenDeleteDialog(false);}} \n                        innerDialog={<SettingsOperatorDeleteDialog onClose={()=>{setOpenDeleteDialog(false);}}  onAccept={onAcceptDelete} {...props} />}\n                     />\n                </TableCell>\n                <TableCell>{props.username}</TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Update</Button>\n                    <MythicDialog open={openUpdate} \n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<SettingsOperatorDialog onAccept={onAccept} handleClose={()=>{setOpenUpdateDialog(false);}} title=\"Update Operator\"  {...props}/>}\n                     />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.view_utc_time}\n                        onChange={onViewUTCChanged}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"view_utc_time\"\n                      />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onActiveChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />\n                </TableCell>\n                <TableCell>{toLocalTime(props.last_login, me.user.view_utc_time)}</TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.admin}\n                        onChange={onAdminChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"admin\"\n                      />\n                </TableCell>\n                <TableCell>\n                  {props.id === me.user.id && \n                    <IconButton aria-label=\"expand row\" size=\"small\" onClick={() => setOpen(!open)}>\n                      {open ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                    </IconButton>\n                  }\n                    \n                </TableCell>\n            </TableRow>\n            <TableRow>\n              {props.id === me.user.id &&\n                <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={9}>\n                  <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                    <Box margin={1}>\n                      <Typography variant=\"h6\" gutterBottom component=\"div\" style={{display: \"inline-block\"}}>\n                        API Tokens\n                      </Typography>\n                      <Button size=\"small\" onClick={props.onCreateAPIToken} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New</Button>\n                      <Table size=\"small\" aria-label=\"tokens\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                        <TableHead>\n                          <TableRow>\n                            <TableCell style={{width: \"10rem\"}}>Delete</TableCell>\n                            <TableCell>Token</TableCell>\n                          </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {\n                            props.apitokens.map((token) => (<APITokenRow {...token} key={\"token\" + token.id} onDeleteAPIToken={props.onDeleteAPIToken} />))\n                          }\n                        </TableBody>\n                      </Table>\n                    </Box>\n                  </Collapse>\n                </TableCell>\n              }\n            \n          </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { SettingsOperator } from './SettingsOperator';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function SettingsOperatorTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            props.onNewOperator(username, passwordNew);\n            setOpenNewDialog(false);\n        }\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Settings\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n        <MythicDialog open={openNew} \n            onClose={()=>{setOpenNewDialog(false);}} \n            innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewDialog(false);}}  {...props}/>}\n         />\n        <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n            <TableHead>\n                <TableRow>\n                    <TableCell style={{width: \"9rem\"}}>Delete Account</TableCell>\n                    <TableCell>Username</TableCell>\n                    <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                    <TableCell style={{width: \"10rem\"}}>UTC Timestamps</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Account Active</TableCell>\n                    <TableCell>Last Login</TableCell>\n                    <TableCell>Account Creation Date</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Admin Status</TableCell>\n                    <TableCell style={{width: \"5rem\"}}>More...</TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n            \n            {props.operators.map( (op) => (\n                <SettingsOperator\n                    onViewUTCChanged={props.onViewUTCChanged}\n                    onAdminChanged={props.onAdminChanged}\n                    onActiveChanged={props.onActiveChanged} \n                    onDeleteOperator={props.onDeleteOperator}\n                    onUsernameChanged={props.onUsernameChanged}\n                    onPasswordChanged={props.onPasswordChanged}\n                    onDeleteAPIToken={props.onDeleteAPIToken}\n                    onCreateAPIToken={props.onCreateAPIToken}\n                    key={\"operator\" + op.id}\n                    {...op}\n                />\n            ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { SettingsOperatorTable } from './SettingsOperatorTable';\nimport {useMutation, useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst GET_Operator = gql`\nquery GetOperators {\n  operator(where: {deleted: {_eq: false}}, order_by: {username: asc}) {\n    active\n    admin\n    creation_time\n    deleted\n    id\n    last_login\n    username\n    view_utc_time\n    apitokens {\n      token_value\n      token_type\n      active\n      id\n    }\n  }\n}\n`;\nconst operatorsUpdateViewUTCTime = gql`\nmutation SettingsUpdateOperatorViewUTCTime($id: Int!, $view_utc_time: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {view_utc_time: $view_utc_time}) {\n    id\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdateAdmin = gql`\nmutation SettingsUpdateOperatorAdminMutation($id: Int!, $admin: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {admin: $admin}) {\n      id\n      admin\n  }\n}\n`;\nconst operatorsUpdateActive = gql`\nmutation SettingsUpdateOperatorActiveMutation($id: Int!, $active: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {active: $active}) {\n      id\n      active\n  }\n}\n`;\nconst operatorsDelete = gql`\nmutation SettingsDeleteOperatorMutation($id: Int!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {deleted: true}) {\n      id\n      deleted\n  }\n}\n`;\nconst operatorsUpdateUsername = gql`\nmutation SettingsUsernameOperatorMutation($id: Int!, $username: String!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {username: $username}) {\n      id\n      username\n  }\n}\n`;\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    active\n    creation_time\n    deleted\n    error\n    id\n    last_login\n    status\n    username\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdatePassword = gql`\nmutation operatorsUpdatePasswordMutation($user_id: Int!, $new_password: String!, $old_password: String){\n  updatePassword(user_id: $user_id, new_password: $new_password, old_password: $old_password){\n    status\n    error\n  }\n}\n`;\nconst createAPITokenMutation = gql`\nmutation createAPITokenMutation{\n  createAPIToken(token_type: \"User\"){\n    id\n    token_value\n    status\n    error\n    operator_id\n  }\n}\n`;\nconst deleteAPITokenMutation = gql`\nmutation deleteAPIToken($id: Int!){\n  delete_apitokens_by_pk(id: $id){\n    id\n    operator_id\n  }\n}\n`;\nexport function Settings(props){\n    const me = useReactiveVar(meState);\n    const [operators, setOperators] = React.useState([]);\n    useQuery(GET_Operator, {fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        setOperators(data.operator);\n      }\n    });\n    const [updateUTC] = useMutation(operatorsUpdateViewUTCTime, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          const updatedOperators = operators.map(o => {\n            if(o.id === result.update_operator_by_pk.id){\n              return {...o, view_utc_time: result.update_operator_by_pk.view_utc_time}\n            }else{\n              return {...o}\n            }\n          })\n          if(result.update_operator_by_pk.id === me.user.id){\n              const state = meState();\n              state.user.view_utc_time = result.update_operator_by_pk.view_utc_time;\n              meState(state);\n          }\n          setOperators(updatedOperators);\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: (err) => {\n          console.log(err);\n          snackActions.error(\"Unable to update operator timestamps without Admin permissions\");\n        }\n    });\n    const [deleteOperator] = useMutation(operatorsDelete, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          const updatedOperators = operators.filter( o => o.id !== result.update_operator_by_pk.id);\n          setOperators(updatedOperators);\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: () => {\n          snackActions.warning(\"Unable to delete operator without Admin permissions\");\n        }\n    });\n    const [updateAdmin] = useMutation(operatorsUpdateAdmin, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map(o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, admin: result.update_operator_by_pk.admin}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator admin status without Admin permissions\");\n      }\n    });\n    const [updateActive] = useMutation(operatorsUpdateActive, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map(o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, active: result.update_operator_by_pk.active}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator active status without Admin permissions\");\n      }\n    });\n    const [createAPIToken] = useMutation(createAPITokenMutation, {\n      onCompleted: (data) => {\n        if(data.createAPIToken.status === \"success\"){\n          snackActions.success(\"Successfully created new API Token\");\n          const updatedOperators = operators.map( o => {\n            if(o.id === data.createAPIToken.operator_id){\n              return {...o, apitokens: [...o.apitokens, {...data.createAPIToken}]}\n            }else{\n              return {...o}\n            }\n          });\n          setOperators(updatedOperators);\n        }else{\n          snackActions.error(data.createAPIToken.error);\n        }\n      },\n      onError: (result) => {\n        console.log(result);\n      }\n    });\n    const [deleteAPIToken] = useMutation(deleteAPITokenMutation, {\n      onCompleted: (data) => {\n        const updatedOperators = operators.map( o => {\n          if(o.id === data.delete_apitokens_by_pk.operator_id){\n            return {...o, apitokens: o.apitokens.filter(api => api.id !== data.delete_apitokens_by_pk.id)}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n      },\n      onError: (data) => {\n\n      }\n    });\n    const [newOperator] = useMutation(newOperatorMutation, {\n        onCompleted: (data) => {\n            if(data.createOperator.status === \"success\"){\n                const newOperator = data.createOperator;\n                setOperators( [...operators, newOperator]);\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateUsername] = useMutation(operatorsUpdateUsername, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map( o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, username: result.update_operator_by_pk.username};\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's username without Admin permissions\");\n      }\n    });\n    const [updatePassword] = useMutation(operatorsUpdatePassword, {\n      onCompleted: (result) => {\n        if(result.updatePassword.status === \"success\"){\n          snackActions.success(\"Successfully updated password\");\n        }else{\n          snackActions.warning(result.updatePassword.error);\n        }\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's password without Admin permissions\");\n      }\n    })\n    const onViewUTCChanged = (id, value) => {\n        updateUTC({variables: {id, view_utc_time: value}});\n    }\n    const onAdminChanged = (id, value) => {\n        updateAdmin({variables: {id, admin: value}});\n    }\n    const onActiveChanged = (id, value) => {\n        updateActive({variables: {id, active: value}});\n    }\n    const onNewOperator = (username, password) => {\n        newOperator({variables: {username, password}});\n    }\n    const onDeleteOperator = (id) => {\n        deleteOperator({variables: {id}});\n    }\n    const onUsernameChanged = (id, value) => {\n      updateUsername({variables: {id, username: value}})\n    }\n    const onPasswordChanged = ({user_id, old_password, new_password}) => {\n      updatePassword({variables: {user_id, new_password, old_password}})\n    }\n    const onCreateAPIToken = () => {\n      createAPIToken({variables: {}})\n    }\n    const onDeleteAPIToken = (id) => {\n      deleteAPIToken({variables: {id}})\n    }\n    return (\n    <div style={{height: \"calc(94vh)\", marginTop: \"10px\", marginRight: \"5px\"}}>\n        <SettingsOperatorTable \n            onViewUTCChanged={onViewUTCChanged}\n            onAdminChanged={onAdminChanged}\n            onActiveChanged={onActiveChanged}\n            onNewOperator={onNewOperator}\n            onDeleteOperator={onDeleteOperator}\n            onUsernameChanged={onUsernameChanged}\n            onPasswordChanged={onPasswordChanged}\n            onCreateAPIToken={onCreateAPIToken}\n            onDeleteAPIToken={onDeleteAPIToken}\n            operators={operators} />\n        </div>\n    );\n} \n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_name: String!) {\n  payloadtype(where: {ptype: {_eq: $payload_name}}) {\n    buildparameters (where: {deleted: {_eq: false} } ){\n      description\n      name\n      id\n      parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function PayloadTypeBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_Payload_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            console.log(data);\n            const buildParams = data.payloadtype[0].buildparameters.map((param) => {\n              switch(param.parameter_type){\n                case \"ChooseOne\":\n                  return {...param, defaultParameter: param.parameter.split(\"\\n\")[0], options: param.parameter.split(\"\\n\").join(\", \")};\n                default:\n                  return {...param, defaultParameter: param.parameter};\n              }\n            });\n            setBuildParams(buildParams);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell >Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id} hover>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                            <b>Scripting/Building Name: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.name}</pre><br/>\n                            <b>Parameter Type: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.parameter_type}</pre><br/>\n                            <b>Default Parameter: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.defaultParameter}</pre><br/>\n                            {param.parameter_type === \"ChooseOne\" ? (\n                              <React.Fragment>\n                                <b>Parameter Options: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.options}</pre><br/>\n                              </React.Fragment>\n                            ) : (null)}\n                            <b>Required? </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.required ? \"Yes\": \"No\"}</pre><br/>\n                            <b>Verifier Regex: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.verifier_regex}</pre><br/>\n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {PayloadTypeBuildDialog} from './PayloadTypeBuildDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function PayloadTypeCard(props) {\n  const classes = useStyles();\n  const [wrappedPayloads, setWrappedPayloads] = React.useState(\"\");\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [supportedOS, setSupportedOS] = React.useState(\"\");\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  useEffect( () => {\n    if( props.wrap_these_payload_types.length > 0){\n      const wrapped = props.wrap_these_payload_types.map( (cur) => {\n        return cur.wrapped.ptype;\n      });\n      setWrappedPayloads(wrapped.join(\", \"));\n    }\n    else{\n      setWrappedPayloads(\"\");\n    }\n    setSupportedOS(props.supported_os.split(\",\").join(\", \"));\n  }, [props.wrap_these_payload_types, props.supported_os]);\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <CardMedia\n            className={classes.media}\n            component=\"img\"\n            style={{width: \"125px\", height: \"125\", padding: \"10px\", objectFit: \"unset\"}}\n            src={\"/static/\" + props.ptype + \".svg\"}\n          />\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.ptype}</Typography>\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Operating Systems:</b> {supportedOS}\n              </Typography>\n              \n              {props.wrap_these_payload_types.length === 0 ? (null) : (\n                <Typography variant=\"body1\" component=\"p\">\n                  <b>Wrapped Payload Types:</b> {wrappedPayloads}\n                </Typography>\n              )}\n              <Typography variant=\"body2\" component=\"p\">\n                {props.note}\n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={props.wrapper ? \"/docs/wrappers/\" + props.ptype : \"/docs/agents/\" + props.ptype} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Building Info</Button>\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                    onClose={()=>{setOpenBuildingDialog(false);}} \n                    innerDialog={<PayloadTypeBuildDialog {...props} payload_name={props.ptype} />}\n                 />\n          </div>\n    </Card>\n  );\n}\n","import React, { useEffect }  from 'react';\nimport { PayloadTypeCard } from './PayloadTypeCard';\nimport {useSubscription, gql } from '@apollo/client';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\n\n const SUB_Payload_Types = gql`\n subscription getPayloadTypesSubscription {\n  payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n    author\n    container_running\n    id\n    last_heartbeat\n    note\n    ptype\n    supported_os\n    wrapper\n    translationcontainer {\n        id\n        name\n        last_heartbeat\n        container_running\n    }\n    wrap_these_payload_types {\n        id\n        wrapped {\n          ptype\n        }\n    }\n  }\n}\n `;\n\n\nexport function PayloadTypeContainerDisplay(props){\n    const theme = useTheme();\n    const {  data } = useSubscription(SUB_Payload_Types);\n    const [payloadTypes, setPayloadTypes] = React.useState([]);\n    useEffect( () => {\n      if(data === undefined){\n        setPayloadTypes([]);\n        return;\n      }\n      setPayloadTypes(data.payloadtype);\n    }, [data])\n    return (\n          <div style={{flexDirection: \"column\", alignItems: \"stretch\"}}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                  <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                      Payload Types\n                  </Typography>\n                </Paper> \n              {\n                  payloadTypes.map( (pt) => (\n                      <PayloadTypeCard key={\"payloadtype\" + pt.id} {...pt} />\n                  ))\n              }\n              \n          </div>\n    );\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_C2_Details = gql`\nquery GetPC2Details($payload_name: String!) {\n  c2profile(where: {name: {_eq: $payload_name}}) {\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      name\n      parameter_type\n      id\n      randomize\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function C2ProfileBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_C2_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            const buildParams = data.c2profile[0].c2profileparameters.map((param) => {\n              switch(param.parameter_type){\n                case \"ChooseOne\":\n                  return {...param, defaultParameter: param.default_value.split(\"\\n\")[0], options: param.default_value.split(\"\\n\").join(\", \")};\n                case \"Date\":\n                  return {...param, defaultParameter: \"Today with an offset of \" + param.default_value + \" days\"}\n                case \"Dictionary\":\n                  return {...param, defaultParameter: JSON.stringify(JSON.parse(param.default_value), null, 2)};\n                default:\n                  return {...param, defaultParameter: param.default_value};\n              }\n            });\n            setBuildParams(buildParams);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id}>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                              <b>Scripting/Building Name: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.name}</pre><br/>\n                              <b>Parameter Type: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.parameter_type}</pre><br/>\n                              <b>Default Parameter: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.defaultParameter}</pre><br/>\n                              {param.parameter_type === \"ChooseOne\" ? (\n                              <React.Fragment>\n                                <b>Parameter Options: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.options}</pre><br/>\n                              </React.Fragment>\n                            ) : (null)}\n                              <b>Required? </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.required ? \"Yes\": \"No\"}</pre><br/>\n                              {param.verifier_regex === \"\" ? (null) : (<React.Fragment>\n                                <b>Verifier Regex: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.verifier_regex}</pre><br/>\n                              </React.Fragment>)}\n                              <b>Randomize value?: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.randomize ? \"Yes\" : \"No\" }</pre><br/>\n                              {param.format_string === \"\" ? (null) : (<React.Fragment>\n                                <b>Random Format String: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.format_string}</pre><br/>\n                              </React.Fragment>)}\n                              \n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst getProfileOutputQuery = gql`\nquery getProfileOutput($id: Int!) {\n  getProfileOutput(id: $id) {\n    status\n    error\n    output\n  }\n}\n`;\n\nexport function C2ProfileOutputDialog(props) {\n    const theme = useTheme();\n    const { loading, error, data } = useQuery(getProfileOutputQuery, {\n        variables: {id: props.profile_id},\n        onCompleted: data => {\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <AceEditor \n              mode=\"json\"\n              theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n              fontSize={14}\n              showGutter={true}\n              height={\"100px\"}\n              highlightActiveLine={true}\n              value={data.getProfileOutput.output}\n              width={\"100%\"}\n              minLines={2}\n              maxLines={50}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst getProfileConfigQuery = gql`\nquery getProfileConfigOutput($id: Int!, $filename: String!) {\n  downloadContainerFile(id: $id, filename: $filename) {\n    status\n    error\n    filename\n    data\n  }\n}\n`;\n\nexport function C2ProfileConfigDialog(props) {\n    const [config, setConfig] = useState(\"\");\n    const theme = useTheme();\n    const { loading, error } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.profile_id, filename: \"config.json\"},\n        onCompleted: data => {\n            if(data.downloadContainerFile.status === \"error\"){\n                setConfig(\"Errored trying to read file from container\\n\" + data.downloadContainerFile.error);\n            }else{\n                console.log(data);\n                setConfig(atob(data.downloadContainerFile.data));\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    \n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onConfigSubmit = () => {\n        props.onConfigSubmit(btoa(config));\n        props.onClose();\n    }\n    const onChange = (value, event) => {\n        setConfig(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Configuration</DialogTitle>\n        <DialogContent dividers={true}>\n            <AceEditor \n              mode=\"json\"\n              theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n              onChange={onChange}\n              fontSize={14}\n              showGutter={true}\n              highlightActiveLine={true}\n              value={config}\n              focus={true}\n              width={\"100%\"}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function C2ProfileStartStopOutputDialog(props) {\n  const theme = useTheme();\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n          <AceEditor \n              mode=\"json\"\n              theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n              fontSize={14}\n              showGutter={true}\n              height={\"100px\"}\n              highlightActiveLine={true}\n              value={props.output}\n              width={\"100%\"}\n              minLines={2}\n              maxLines={50}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport Switch from '@material-ui/core/Switch';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.reduce( (prev, opt) => {\n            if(opt.value !== \"\"){\n                return [...prev, {\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                let initial = passedValue.reduce( (prev, op) => {\n                    // find all the options that have a default_show of true\n                    if(op.default_show){\n                        return [...prev, {...op} ];\n                    }else{\n                        return [...prev];\n                    }\n                }, [] );\n                submitDictChange(initial);\n                setDictValue(initial);\n                setDictOptions(passedValue);\n                let dictSelectOptionsInitial = passedValue.reduce( (prev, op) => {\n                    //for each option, check how many instances of it are allowed\n                    // then check how many we have currently\n                    const count = initial.reduce( (preCount, cur) => {\n                        if(cur.name === op.name){return preCount + 1}\n                        return preCount;\n                    }, 0);\n                    if(op.max === -1 || op.max > count){\n                        return [...prev, {...op} ];  \n                    }else{\n                        return [...prev]\n                    }\n                }, []);\n                setDictSelectOptions(dictSelectOptionsInitial);\n                if (dictSelectOptionsInitial.length > 0){\n                    setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n                }\n            }else{\n                const options = JSON.parse(default_value);\n                setDictOptions(options);\n                let initial = options.reduce( (prev, op) => {\n                    // find all the options that have a default_show of true\n                    if(op.default_show){\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                    }else{\n                        return [...prev];\n                    }\n                }, [] );\n                submitDictChange(initial);\n                setDictValue(initial);\n                let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                    //for each option, check how many instances of it are allowed\n                    // then check how many we have currently\n                    const count = initial.reduce( (preCount, cur) => {\n                        if(cur.name === op.name){return preCount + 1}\n                        return preCount;\n                    }, 0);\n                    if(op.max === -1 || op.max > count){\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                    }else{\n                        return [...prev]\n                    }\n                }, []);\n                setDictSelectOptions(dictSelectOptionsInitial);\n                if (dictSelectOptionsInitial.length > 0){\n                    setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n                }\n            }\n        }else if(parameter_type === \"Boolean\"){\n            if(default_value !== undefined){\n                setValue( default_value.toLowerCase() === \"true\" ? true : false);\n            }else{\n                setValue(true);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n            }\n        }else{\n            \n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        let choice = {...dictSelectOptionsChoice};\n        if(choice.name === \"*\"){\n            choice.key = \"\";\n            choice.value = \"\";\n        }\n        const newDictValue = [...dictValue, {...choice, default_show: true}]\n        setDictValue(newDictValue);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newDictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(newDictValue);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(newValues);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const toggleSwitchValue = (evt) => {\n        let newVal = !value;\n        setValue(newVal);\n        onChange(name, newVal, false);\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + i} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                      <Switch\n                        checked={Boolean(value)}\n                        onChange={toggleSwitchValue}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                      />\n                )\n           default:\n            return null\n        }\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <MythicStyledTooltip title={name.length > 0 ? name : \"No Description\"}>\n                        {description}\n                    </MythicStyledTooltip>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\n\n\nexport function CreatePayloadC2ProfileParametersTable(props){\n\n    const onChange = (paramName, value, error) => {\n        props.onChange(props.name, paramName, value, error);\n    }\n    return (\n    <TableContainer component={Paper} className=\"mythicElement\">\n  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"20%\"}}>Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {props.c2profileparameters.map( (op) => (\n                        <CreatePayloadParameter key={\"c2paramtablerow\" + op.id} returnAllDictValues={props.returnAllDictValues} onChange={onChange} {...op} />\n                    ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {useState} from 'react';\nimport {Button, Typography} from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useLazyQuery, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {CreatePayloadC2ProfileParametersTable} from '../CreatePayload/CreatePayloadC2ProfileParametersTable';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport * as RandExp from 'randexp';\n\nconst getProfileConfigQuery = gql`\nquery getProfileParameters($id: Int!, $operation_id: Int!) {\n  c2profile_by_pk(id: $id) {\n    c2profileparameters(where: {deleted: {_eq: false}}, order_by: {name: asc}){\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n      instance_name\n    }\n  }\n}\n`;\nconst getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    id\n    value\n  }\n}\n`;\nconst deleteInstanceMutation = gql`\nmutation deleteSavedInstance($name: String!, $operation_id: Int!){\n  delete_c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}){\n    affected_rows\n  }\n}\n`;\nconst createInstanceMutation = gql`\nmutation createNewC2Instance($instance_name: String!, $c2_instance: String!, $c2profile_id: Int!){\n  create_c2_instance(c2_instance: $c2_instance, instance_name: $instance_name, c2profile_id: $c2profile_id){\n    status\n    error\n  }\n}\n`;\n\nexport function C2ProfileSavedInstancesDialog(props) {\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [instanceName, setInstanceName] = useState(\"\");\n    const [selectedInstance, setSelectedInstance] = useState(\"\");\n    const [createdInstances, setCreatedInstances] = useState([]);\n    const [baseParameters, setBaseParameters] = useState([]);\n    const [currentParameters, setCurrentParameters] = useState([]);\n    const { loading } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const parameters = data.c2profile_by_pk.c2profileparameters.map( (param) => {\n              if(param.format_string !== \"\"){\n                  const random = new RandExp(param.format_string).gen();\n                  return {...param, default_value: random, value: random}\n              }else if(param.default_value !== \"\"){\n                  if(param.parameter_type === \"ChooseOne\"){\n                      return {...param, value: param.default_value.split(\"\\n\")[0]}\n                  }else if(param.parameter_type === \"Dictionary\"){\n                      let tmp = JSON.parse(param.default_value);\n                      let initial = tmp.reduce( (prev, op) => {\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name, default_show: op.default_show} ];\n                      }, [] );\n                      return {...param, value: initial}\n                  }else if(param.parameter_type === \"Date\"){\n                    let tmpDate = new Date();\n                    if(param.default_value !== \"\"){\n                      tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                    }\n                    return {...param, value: tmpDate.toISOString().slice(0,10)}\n                  }else{\n                      return {...param, value: param.default_value}\n                  }\n              }else{\n                return {...param, error: param.required, value: param.default_value}\n              }\n          });\n          parameters.sort((a,b) => -b.description.localeCompare(a.description));\n          setBaseParameters([...parameters]);\n          setCurrentParameters([...parameters]);\n          setCreatedInstances(data.c2profile_by_pk.c2profileparametersinstances);\n        },\n        onError: data => {\n          \n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n      onCompleted: (data) => {\n        const updates = data.c2profileparametersinstance.map( (cur) => {\n          let inst = {...cur, ...cur.c2profileparameter};\n          if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n            inst[\"value\"] = JSON.parse(inst[\"value\"]);\n            // now need to reconcile inst[\"value\"] being the final array\n            // and needing to add back in the 'max' and 'default_show' values\n            const original = JSON.parse(inst.default_value);\n            const fixedArray = inst.value.map( (p) => {\n                // p looks like {\"name\": \"something\", \"key\": \"something\", \"value\": \"something\", \"custom\": true/false}\n                // we're missing the \"max\" limiter from the original that we need to add back in\n                const originalPiece = original.find( o => o[\"name\"] === p[\"name\"]);\n                if(originalPiece !== undefined){\n                    return {...originalPiece, ...p, \"default_show\": p.value === \"\" ? false : true}\n                }\n                return {...p, \"default_show\": false}\n            });\n            // now that we've added in the `max` value for each of the keys we had, we need to add back in the original possibilities that we didn't select\n            const final = original.reduce( (prev, current) => {\n                //console.log(\"looking for\", cur, \"in\", prev)\n                if(prev.findIndex( o => o[\"name\"] === current[\"name\"]) > -1 ){\n                    return [...prev]\n                }\n                return [...prev, {...current, default_show: false, \"key\": current.name === \"*\" ? \"\": current.name, value: current.default_value}]\n            }, [...fixedArray])\n            return {...inst, value: final};\n          }\n          return inst;\n        })\n        updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n        setCurrentParameters(updates);\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch instance data: \" + data);\n        console.log(data);\n      },\n      fetchPolicy: \"no-cache\"\n    })\n    const [deleteInstance] = useMutation(deleteInstanceMutation, {\n      onCompleted: (data) => {\n        setSelectedInstance(\"\")\n        setInstanceName(\"\");\n        setCurrentParameters([...baseParameters]);\n        const updatedInstances = createdInstances.filter( (cur) => cur.instance_name !== selectedInstance);\n        setCreatedInstances(updatedInstances);\n        snackActions.success(\"Sucessfully deleted instance\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to delete instance: \" + data);\n      }\n    });\n    const [createInstance] = useMutation(createInstanceMutation, {\n      onCompleted: (data) => {\n        if(data.create_c2_instance.status === \"success\"){\n          snackActions.success(\"Successfully created instance\");\n        }else{\n          snackActions.error(\"Failed to create instance: \" + data.create_c2_instance.error);\n        }\n        props.onClose();\n        \n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to create instance: \" + data);\n      }\n    })\n    if (loading) {\n     return <LinearProgress />;\n    }\n    const onConfigSubmit = () => {\n      if(instanceName.length === 0){\n        snackActions.warning(\"Must supply an instance name\");\n        return;\n      }\n        const config = currentParameters.reduce( (prev, cur) => {\n          return {...prev, [cur.name]: cur.value}\n        }, {});\n        createInstance({variables: {operation_id: me.user.current_operation_id, instance_name: instanceName, c2profile_id: props.id, c2_instance: JSON.stringify(config)}})\n    }\n    const onChange = (name, value, error) => {\n      setInstanceName(value);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n      const c2params = currentParameters.map( (param) => {\n        if (param.name === parameterName){\n            return {...param, error, value}\n        }\n        return param;\n      });\n      //console.log(c2params);\n      setCurrentParameters(c2params);\n    }\n    const onChangeCreatedInstanceName = (evt) => {\n      setSelectedInstance(evt.target.value);\n      setInstanceName(evt.target.value);\n      if(evt.target.value === \"\"){\n        setCurrentParameters([...baseParameters]);\n      }else{\n        setCurrentParameters([]);\n        getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n      }\n    }\n    const deleteInstanceButton = () => {\n      setCurrentParameters([]);\n      deleteInstance({variables: {name: selectedInstance, operation_id: me.user.current_operation_id}})\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Save an Instance of {props.name}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <Typography style={{paddingBottom: \"10px\"}}>\n            Saving an instance of the parameters allows you to select them from a dropdown when creating agents later, saving time and typos.\n          </Typography>\n            {createdInstances.length > 0 ? (\n              <Grid container spacing={2} style={{paddingTop: \"10px\"}}>\n                <Grid item xs={6}>\n                  <FormControl style={{width: \"100%\"}}>\n                  <InputLabel >Select an Existing Instance</InputLabel>\n                      <Select\n                        style={{width: \"100%\", marginBottom: \"10px\"}}\n                        value={selectedInstance}\n                        label=\"Select an Existing Instance\"\n                        onChange={onChangeCreatedInstanceName}\n                      >\n                        <MenuItem value=\"\">New Instance</MenuItem>\n                      {\n                          createdInstances.map((opt, i) => (\n                              <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                          ))\n                      }\n                      </Select>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                  {selectedInstance.length > 0 ? (\n                    <Button style={{backgroundColor: theme.palette.error.main, color: \"white\"}} variant=\"contained\" onClick={deleteInstanceButton}> Delete Instance</Button>\n                  ) : (null)}\n                </Grid>\n            </Grid>\n            ) : (null)}\n            <MythicTextField name=\"Instance Name\" onChange={onChange} value={instanceName} style={{paddingTop: \"10px\"}}/>\n            <CreatePayloadC2ProfileParametersTable {...props} returnAllDictValues={true} c2profileparameters={currentParameters} onChange={updateC2Parameter} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            {selectedInstance.length > 0 ? (\"Update\") : (\"Create\")}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport {C2ProfileBuildDialog} from './C2ProfileBuildDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport {useMutation, gql} from '@apollo/client';\nimport {C2ProfileOutputDialog} from './C2ProfileOutputDialog';\nimport {C2ProfileConfigDialog} from './C2ProfileConfigDialog';\nimport {C2ProfileStartStopOutputDialog} from './C2ProfileStartStopOutputDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport {C2ProfileSavedInstancesDialog} from './C2ProfileSavedInstancesDialog';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n  successButton: {\n    backgroundColor: theme.palette.success.main,\n    color: 'white',\n    \"&:hover\":{\n      backgroundColor: theme.palette.success.dark\n    }\n  },\n  errorButton: {\n    backgroundColor: theme.palette.error.main,\n    color: 'white',\n    \"&:hover\":{\n      backgroundColor: theme.palette.error.dark\n    }\n  }\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\nconst startStopProfileMutation = gql`\nmutation StartStopProfile($id: Int!, $action: String) {\n  startStopProfile(id: $id, action: $action) {\n    status\n    error\n    output\n  }\n}\n`;\nconst setProfileConfigMutation = gql`\nmutation setProfileConfiguration($id: Int!, $file_path: String!, $data: String!) {\n  uploadContainerFile(id: $id, file_path: $file_path, data: $data) {\n    status\n    error\n    filename\n  }\n}\n`;\nexport function C2ProfilesCard(props) {\n  let date = new Date();\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n  const dropdownAnchorRef = React.useRef(null);\n  const handleDropdownToggle = () => {\n    setDropdownOpen((prevOpen) => !prevOpen);\n  };\n  const handleDropdownClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setDropdownOpen(false);\n  };\n  const [startStopProfile] = useMutation(startStopProfileMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            setOutput(data.startStopProfile.output);\n            setOpenProfileStartStopDialog(true);\n        }\n    });\n    const onStartStopProfile = () => {\n        if(props.running){\n            snackActions.info(\"Submitting stop task...\" );\n        }else{\n            snackActions.info(\"Submitting start task...\" );\n        }  \n        startStopProfile({variables: {id: props.id, action: props.running ? \"stop\" : \"start\"}});\n    }\n    const [openProfileDialog, setOpenProfileDialog] = React.useState(false);\n    const [openProfileConfigDialog, setOpenProfileConfigDialog] = React.useState(false);\n    const [output, setOutput] = React.useState(\"\");\n    const [openProfileStartStopDialog, setOpenProfileStartStopDialog] = React.useState(false);\n    const [openProfileSavedInstancesDialog, setOpenProfileSavedInstancesDialog] = React.useState(false);\n    const [configSubmit] = useMutation(setProfileConfigMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            //console.log(data);\n            if(data.uploadContainerFile.status === \"success\"){\n                snackActions.success(\"Updated file\");\n            }else{\n                snackActions.error(\"Error updating: \" + data.uploadContainerFile.error );\n            }\n        }\n    });\n    const onConfigSubmit = (content) => {\n        configSubmit({variables: {id: props.id, file_path: \"config.json\", data: content}});\n    }\n  return (\n    <Card className={classes.root} elevation={5} style={{maxWidth: \"100%\"}}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            {props.is_p2p ? \n            (<FontAwesomeIcon icon={faLink}  style={{width: \"100px\", height: \"100px\", marginTop: \"25px\"}} />)\n            : \n            (<WifiIcon style={{width: \"100px\", height: \"100px\", marginTop: \"25px\"}}/>)\n            }\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\"}}>{props.name}</Typography>\n          {!props.is_p2p && props.running &&\n            <Typography variant=\"h6\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\", color:theme.palette.success.main}}>(Server Running)</Typography>\n          }\n          {!props.is_p2p && !props.running &&\n            <Typography variant=\"h6\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\", color:theme.palette.error.main}}>(Server Not Running)</Typography>\n          }\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Agents:</b> {props.payloadtypec2profiles.map( (pt) => (pt.payloadtype.ptype + \" \") )}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                {props.description}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n               \n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={\"/docs/c2-profiles/\" + props.name.toLowerCase()} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Build Info</Button>\n            {openBuildingDialog &&\n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                onClose={()=>{setOpenBuildingDialog(false);}} \n                innerDialog={<C2ProfileBuildDialog {...props} onClose={()=>{setOpenBuildingDialog(false);}} payload_name={props.name} />}\n            />\n            }\n            {openProfileStartStopDialog &&\n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileStartStopDialog} \n                onClose={()=>{setOpenProfileStartStopDialog(false);}} \n                innerDialog={<C2ProfileStartStopOutputDialog output={output} onClose={()=>{setOpenProfileStartStopDialog(false);}} payload_name={props.name} />}\n            />\n            }\n            \n            {props.container_running ? (\n                   props.running ?\n                   (\n                    <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\">\n                       <Button size=\"small\" className={props.running ? classes.successButton : classes.errorButton} onClick={onStartStopProfile} style={{width: \"100%\"}}>Stop Profile</Button>\n                       <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          className={props.running ? classes.successButton : classes.errorButton}\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                   )\n                   :\n                   (\n                     props.is_p2p ? (\n                      null\n                     ) : (\n                      <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\">\n                        <Button size=\"small\" onClick={onStartStopProfile} className={props.running ? classes.successButton : classes.errorButton} style={{width: \"100%\"}}>Start Profile</Button>\n                        <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          className={props.running ? classes.successButton : classes.errorButton}\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                     )\n                      \n                   )\n            ) : (\n              <Button disabled color=\"secondary\">Container Offline</Button>\n            )}\n             <Button size=\"small\" variant=\"contained\" color=\"primary\" onClick={() => {setOpenProfileSavedInstancesDialog(true);}}><BookmarkIcon /> Saved Instances</Button>\n             {openProfileDialog &&\n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileDialog} \n                onClose={()=>{setOpenProfileDialog(false);}} \n                innerDialog={<C2ProfileOutputDialog {...props} payload_name={props.name} onClose={()=>{setOpenProfileDialog(false);}} profile_id={props.id} />}\n              />\n             }\n            {openProfileConfigDialog &&\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileConfigDialog} \n              onClose={()=>{setOpenProfileConfigDialog(false);}} \n              innerDialog={<C2ProfileConfigDialog {...props} onConfigSubmit={onConfigSubmit} payload_name={props.name} onClose={()=>{setOpenProfileConfigDialog(false);}} profile_id={props.id} />}\n            />\n            }\n            {openProfileSavedInstancesDialog &&\n              <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openProfileSavedInstancesDialog} \n                onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} \n                innerDialog={<C2ProfileSavedInstancesDialog {...props} onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} />}\n            />\n            }\n            \n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleDropdownClose}>\n                      <MenuList id=\"split-button-menu\">\n                        <MenuItem key={\"dropdownprofile\" + props.id + \"menu1\"} onClick={()=>{setOpenProfileConfigDialog(true);}}>View/Edit Config</MenuItem>\n                       {\n                        props.running ? \n                        (<MenuItem key={\"dropdownprofile\" + props.id + \"menu2\"} onClick={()=>{setOpenProfileDialog(true);}}>View Stdout/Stderr</MenuItem>) : (null)\n                       }\n                      </MenuList>\n                      \n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n          </div>\n    </Card>\n  );\n}\n","import React, {useEffect} from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {C2ProfilesCard} from './C2ProfilesCard';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_C2_Profiles = gql`\nsubscription getPayloadTypesSubscription {\n   c2profile(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   author\n   id\n   container_running\n   description\n   is_p2p\n   last_heartbeat\n   name\n   running\n   payloadtypec2profiles(order_by: {payloadtype: {ptype: asc}}) {\n     payloadtype {\n       ptype\n     }\n   }\n }\n}\n`;\n\nexport function C2ProfileContainerDisplay(props) {\n  const { data } = useSubscription(SUB_C2_Profiles, {fetchPolicy: \"network-only\"});\n  const [c2profile, setC2profile] = React.useState([]);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setC2profile([]);\n      return;\n    }\n    setC2profile(data.c2profile);\n  }, [data])\n  return (\n        <div style={{ flexDirection: \"column\", alignItems: \"stretch\", paddingLeft: \"10px\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  C2 Profiles\n              </Typography>\n            </Paper> \n            {\n                c2profile.map( (pt) => (\n                    <C2ProfilesCard key={\"c2prof\" + pt.id} {...pt} />\n                ))\n            }\n        </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLanguage } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function TranslationContainerCard(props) {\n  const classes = useStyles();\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <FontAwesomeIcon icon={faLanguage} size=\"6x\" style={{width: \"125px\", height: \"125px\"}} />\n        </StyledAvatar>\n        <div>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.name}</Typography>\n          {props.payloadtypes.length > 0 ? (\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Translated Payload Types:</b> {props.payloadtypes.map( (pt) => pt.ptype).join(\", \")}\n              </Typography>\n          ): (null)}\n        </div>\n    </Card>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {TranslationContainerCard} from './TranslationContainerCard';\nimport {useSubscription, gql } from '@apollo/client';\nconst SUB_Translation_Containers = gql`\nsubscription getTranslationContainersSubscription {\n translationcontainer(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   name\n   id\n   container_running\n   last_heartbeat\n   payloadtypes(order_by: {ptype: asc}) {\n       ptype\n       id\n   }\n }\n}\n`;\nexport function TranslationContainerDisplay(props) {\n  const [translationContainers, setTranslationContainers] = React.useState([]);\n  const [translationContainersWithPayloads, setTranslationContainersWithPayloads] = React.useState([]);\n  const {  data } = useSubscription(SUB_Translation_Containers);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setTranslationContainers([]);\n      return;\n    }\n    const unassigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length === 0);\n    const assigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length > 0);\n    setTranslationContainers(unassigned);\n    setTranslationContainersWithPayloads(assigned); \n  }, [data]);\n  return (\n    <div style={{width: \"100%\", display: \"inline-flex\", flexDirection: \"column\", alignItems: \"stretch\", }}>\n      {\n        translationContainers.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers Not Assigned to Payload Types\n              </Typography>\n            </Paper> \n            {translationContainers.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n      {\n        translationContainersWithPayloads.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers\n              </Typography>\n            </Paper> \n            {translationContainersWithPayloads.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n    </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport {PayloadTypeContainerDisplay} from './PayloadTypeContainerDisplay';\nimport {C2ProfileContainerDisplay} from './C2ProfileContainerDisplay';\nimport {TranslationContainerDisplay} from './TranslationContainerDisplay';\nimport Grid from '@material-ui/core/Grid';\n\nexport function PayloadTypesC2Profiles(props){\n\n    return (\n      <React.Fragment>\n        <Grid container spacing={0}>\n          <Grid item xs={6}>\n          <PayloadTypeContainerDisplay />\n          </Grid>\n          <Grid item xs={6}>\n          <C2ProfileContainerDisplay />\n          </Grid>\n          <Grid item xs={12}>\n          <TranslationContainerDisplay />\n          </Grid>\n        </Grid>\n      </React.Fragment>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Link } from 'react-router-dom';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n              {props.last &&\n              <React.Fragment>\n                  <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={props.startOver}\n                  style={{marginLeft: \"10px\"}}\n                  >\n                    Start Over\n                  </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  component={Link}\n                  style={{marginLeft: \"10px\"}}\n                  to={\"/new/createwrapper\"}\n                  >\n                    Create Wrapper\n                  </Button>\n              </React.Fragment>\n                \n              }\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [supportsDynamicLoading, setSupportsDynamicLoading] = React.useState(false);\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n                    console.log(props.prevData);\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setFileExtension(props.prevData.file_extension);\n                    setSupportsDynamicLoading(props.prevData.supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    setSupportsDynamicLoading(data.payloadtype[0].supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }else if(param.parameter_type === \"Boolean\"){\n                                    return {...param, error: param.required, value: param.default_value.toLowerCase() === \"true\" ? true : false}\n                                }else{\n                                    return {...param, error: param.required, value: param.default_value}\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    console.log(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"file_extension\": fileExtension, \n                        \"supports_dynamic_loading\": supportsDynamicLoading,\n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSupportsDynamicLoading(payload.supports_dynamic_loading);\n                const params = payload.buildparameters.map( (param) => {\n                    console.log(param);\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else if(param.parameter_type === \"Boolean\"){\n                        return {...param, error: param.required, value: param.default_value.toLowerCase() === \"true\" ? true : false}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React, {useEffect} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nconst GET_Payload_Types = gql`\nquery getCommands($payloadType: String!) {\n  command(where: {payloadtype: {ptype: {_eq: $payloadType}}, deleted: {_eq: false}}, order_by: {cmd: asc}) {\n    cmd\n    attributes\n    id\n    supported_ui_features\n    help_cmd\n    description\n    needs_admin\n  }\n}\n `;\n\nexport function Step3SelectCommands(props){\n    const [commands, setCommands] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type\"]},\n        onCompleted: () => {\n          \n          if(!props.buildOptions[\"supports_dynamic_loading\"]){\n              \n              const allCommands = data.command.map( c => {\n                return {...c, selected: true, disabled: true, reason: \"Agent doesn't support dynamic loading\"}\n              });\n              setCommandOptions(allCommands);\n          }else{\n            const allCommands = data.command.reduce( (prev, cur) => {\n              try{\n                const attributes = JSON.parse(cur.attributes);\n                if(attributes[\"supported_os\"].length === 0 || attributes[\"supported_os\"].includes(props.buildOptions[\"os\"])){\n                  if(attributes[\"builtin\"] !== undefined && attributes[\"builtin\"]){\n                    return [...prev, {...cur, disabled: true, selected: true, reason: \"This command is builtin and must be included\"}];\n                  }else{\n                    try{\n                      if(attributes[\"load_only\"] !== undefined && attributes[\"load_only\"]){\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"This command can only be loaded in once a callback is established\"}]\n                      }\n                      let include_command = true;\n                      let build_option_that_sets_include_to_false = {};\n                      if(attributes[\"filter_by_build_parameter\"] !== undefined){\n                        // if filter_attributes has keys, we need to filter down based on all of them\n                        for( const[key, value] of Object.entries(attributes[\"filter_by_build_parameter\"])){\n                            for(let i = 0; i < props.buildOptions.parameters.length; i++){\n                              if(props.buildOptions.parameters[i][\"name\"] === key){\n                                if(props.buildOptions.parameters[i][\"value\"] !== value){\n                                  include_command = false;\n                                  build_option_that_sets_include_to_false[\"name\"] = key;\n                                  build_option_that_sets_include_to_false[\"value\"] = value;\n                                }\n                              }\n                            }\n                        }\n                      }\n                      if(include_command){\n                        if(attributes[\"suggested_command\"] !== undefined && attributes[\"suggested_command\"]){\n                          return [...prev, {...cur, disabled: false, selected: true, reason: \"This command is suggested to be included\"}]\n                        }else{\n                          return [...prev, {...cur, disabled: false, selected: false, reason: \"\"}];\n                        }\n                      }else{\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"Not available when build option \\\"\" + build_option_that_sets_include_to_false[\"name\"] + \"\\\" is not \\\"\" + build_option_that_sets_include_to_false[\"value\"] + \"\\\"\"}]\n                      }\n                    }catch(error){\n                      console.error(error);\n                    }\n                  }\n                }\n                return [...prev, {...cur, disabled: true, selected: false, reason: \"This command isn't supported by the selected OS\"}];\n              }catch(error){\n                return [...prev, {...cur, disabled: false, selected: false, reason: \"Failed to parse command attributes\"}];\n              }\n            }, []);\n            setCommandOptions(allCommands);\n            if(props.prevData !== undefined){\n              const selectedCommands = allCommands.map( (c) => {\n                if(props.prevData.includes(c.cmd)){\n                  return {...c, selected: true};\n                }else{\n                  return {...c, selected: false};\n                }\n              })\n              setCommandOptions(selectedCommands);\n            }\n          }\n        }\n    });\n    const finished = (selectedCommands) => {\n        let foundExit = false;\n        for(let i = 0; i < selectedCommands.length; i++){\n            if(selectedCommands[i][\"supported_ui_features\"].includes(\"callback_table:exit\")){\n              foundExit = true;\n              break;\n            }\n        }\n        if(foundExit){\n          const cmdNames = selectedCommands.map( c => c.cmd);\n          props.finished(cmdNames);\n        }else{\n          setOpenConfirmDialog(true);\n          setCommands(selectedCommands);\n        }\n    }\n    const acceptConfirm = () => {\n      const cmdNames = commands.map( c => c.cmd);\n      props.finished(cmdNames);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Build Commands Into Agent\n        </Typography> <br/>\n        <CommandTransferSelect commands={commandOptions} payload_type={props.buildOptions[\"payload_type\"]} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        <MythicConfirmDialog open={openConfirmDialog} \n            title={\"No exit command selected, continue?\"} \n            onClose={() => setOpenConfirmDialog(false)} \n            acceptText=\"Accept\"\n            onSubmit={acceptConfirm} />\n        \n        </div>\n    );\n} \n\nfunction CommandTransferSelect(props) {\n  const classes = useStyles();\n  const [checked, setChecked] = React.useState([]);\n  const [left, setLeft] = React.useState([]);\n  const [right, setRight] = React.useState([]);\n  const leftChecked = intersection(checked, left);\n  const rightChecked = intersection(checked, right);\n  const [hoveredCommand, setHoveredCommnad] = React.useState({});\n  function not(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) === undefined)\n  }\n  \n  function intersection(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) !== undefined)\n  }\n  const handleToggle = (value) => () => {\n    let currentIndex = -1;\n    if(props.itemKey){\n      currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n    }else{\n      currentIndex = checked.indexOf(value);\n    }\n    \n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  };\n\n  const handleAllRight = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(cur.disabled && !cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && !cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n\n  const handleCheckedRight = () => {\n    setRight(right.concat(leftChecked));\n    setLeft(not(left, leftChecked));\n    setChecked(not(checked, leftChecked));\n  };\n\n  const handleCheckedLeft = () => {\n    setLeft(left.concat(rightChecked));\n    setRight(not(right, rightChecked));\n    setChecked(not(checked, rightChecked));\n  };\n\n  const handleAllLeft = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if((cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n  useEffect( () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n        if(!cur.selected){\n          return [...prev, {...cur}];\n        }else{\n          return [...prev];\n        }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  }, [props.commands]);\n  const setHoveredData = (event) => {\n    const cmd = props.commands.filter( c => c.cmd === event.target.innerText );\n    if(cmd.length > 0){\n      setHoveredCommnad(cmd[0]);\n    }\n  }\n  const customList = (title, items) => (\n    <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(40vh)\", overflow: \"auto\"}} elevation={5}>\n      \n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = valueObj[\"cmd\"];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <div onMouseEnter={setHoveredData} key={'commandtransfer' + value}>\n                  <ListItem style={{padding:0}} disabled={valueObj[\"disabled\"]} \n                    key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}\n                    >\n                    <ListItemIcon>\n                      <Checkbox\n                        disabled={valueObj[\"disabled\"]}\n                        checked={checked.findIndex( (element) => element[\"cmd\"] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                </div>\n              );\n            })}\n            <ListItem />\n          </List>\n        \n    </Paper>\n  );\n  const finished = () => {\n    props.finished(right);\n  }\nreturn (\n  <React.Fragment>\n      <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n        <Grid item xs={5}>{customList(\"Available Commands\", left)}</Grid>\n        <Grid item>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllRight}\n              disabled={left.length === 0}\n              aria-label=\"move all right\"\n            >\n              ≫\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedRight}\n              disabled={leftChecked.length === 0}\n              aria-label=\"move selected right\"\n            >\n              &gt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedLeft}\n              disabled={rightChecked.length === 0}\n              aria-label=\"move selected left\"\n            >\n              &lt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllLeft}\n              disabled={right.length === 0}\n              aria-label=\"move all left\"\n            >\n              ≪\n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item xs={5}>{customList(\"Commands Included\", right)}</Grid>\n      </Grid>\n      <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.root}>\n        <Grid item xs={12} style={{height: \"100%\", marginBottom: \"10px\"}}>\n          {hoveredCommand[\"cmd\"] !== undefined &&\n            <Paper className={classes.paper} style={{width: \"100%\"}} elevation={5}>\n              \n                <CardHeader className={classes.cardHeader}\n                  title={\n                    <React.Fragment>\n                      {hoveredCommand[\"cmd\"]}\n                      <Button variant=\"contained\" color=\"primary\" href={\"/docs/agents/\" + props.payload_type + \"/commands/\" + hoveredCommand[\"cmd\"]} \n                        style={{marginLeft: \"10px\", float: \"right\"}}  target=\"_blank\">Documentation\n                      </Button>\n                    </React.Fragment>\n                  }\n                />\n                <Divider classes={{root: classes.divider}}/>\n                {hoveredCommand[\"reason\"] !== \"\" ? (\n                  <Typography variant=\"body1\" align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>{hoveredCommand[\"disabled\"] ? (\"Disabled Reason: \") : (\"Information: \")} </b>{hoveredCommand[\"reason\"]}\n                  </Typography>\n                ) : (null)}\n                <br/>\n                <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Commandline Help: </b>{hoveredCommand[\"help_cmd\"]}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Needs Admin Permissions: </b>{hoveredCommand[\"needs_admin\"] ? \"True\": \"False\"}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Description: </b>{hoveredCommand[\"description\"]}\n                  </Typography>\n            </Paper>\n          }\n          \n        </Grid>\n      </Grid>\n      <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n  </React.Fragment>\n);\n}","import React from 'react';\nimport {useQuery, gql, useLazyQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadC2ProfileParametersTable} from './CreatePayloadC2ProfileParametersTable';\nimport Typography from '@material-ui/core/Typography';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport * as RandExp from 'randexp';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesC2ProfilesQuery($payloadType: String!, $operation_id: Int!) {\n  c2profile(where: {payloadtypec2profiles: {payloadtype: {ptype: {_eq: $payloadType}}}, deleted: {_eq: false}}) {\n    name\n    is_p2p\n    description\n    id\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n        instance_name\n    }\n  }\n}\n `;\n const getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n      c2profile {\n          name\n      }\n    }\n    id\n    value\n  }\n}\n`;\n\nexport function Step4C2Profiles(props){\n    const me = useReactiveVar(meState);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [selectedInstance, setSelectedInstance] = React.useState(\"\");\n    const { loading, error } = useQuery(GET_Payload_Types, {variables:{payloadType: props.buildOptions[\"payload_type\"], operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const profiles = data.c2profile.map( (c2) => {\n                if(props.prevData !== undefined){\n                    //console.log(props.prevData);\n                    for(let p = 0; p < props.prevData.length; p++){\n                        if(props.prevData[p][\"name\"] === c2.name){\n                            // we selected this c2 profile before and clicked back, so re-fill it out\n                            const parameters = props.prevData[p][\"c2profileparameters\"].map( (c) => {\n                                if(c.parameter_type === 'Dictionary'){\n                                    const original = JSON.parse(c.default_value);\n                                    const fixedArray = c.value.map( (p) => {\n                                        // p looks like {\"name\": \"something\", \"key\": \"something\", \"value\": \"something\", \"custom\": true/false}\n                                        // we're missing the \"max\" limiter from the original that we need to add back in\n                                        const originalPiece = original.find( o => o[\"name\"] === p[\"name\"]);\n                                        if(originalPiece !== undefined){\n                                            return {...originalPiece, ...p, \"default_show\": p.value === \"\" ? false : true}\n                                        }\n                                        return {...p, \"default_show\": false}\n                                    });\n                                    // now that we've added in the `max` value for each of the keys we had, we need to add back in the original possibilities that we didn't select\n                                    const final = original.reduce( (prev, cur) => {\n                                        //console.log(\"looking for\", cur, \"in\", prev)\n                                        if(prev.findIndex( o => o[\"name\"] === cur[\"name\"]) > -1 ){\n                                            return [...prev]\n                                        }\n                                        return [...prev, {...cur, default_show: false, \"key\": cur.name === \"*\" ? \"\": cur.name, value: cur.default_value}]\n                                    }, [...fixedArray])\n                                    return {...c, value: final};\n                                    \n                                }\n                                return c;\n                            })\n                            \n                            parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                            return {...c2, \"selected\": props.prevData[p][\"selected\"], c2profileparameters: parameters};\n                        }\n                    }\n                }\n                \n                const parameters = c2.c2profileparameters.map( (param) => {\n                    if(param.format_string !== \"\"){\n                        const random = new RandExp(param.format_string).gen();\n                        return {...param, default_value: random, value: random}\n                    }else if(param.default_value !== \"\"){\n                        if(param.parameter_type === \"ChooseOne\"){\n                            return {...param, value: param.default_value.split(\"\\n\")[0]}\n                        }else if(param.parameter_type === \"Dictionary\"){\n                            let tmp = JSON.parse(param.default_value);\n                            let initial = tmp.reduce( (prev, op) => {\n                                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name, default_show: op.default_show} ];\n                            }, [] );\n                            return {...param, value: initial}\n                        }else if(param.parameter_type === \"Date\"){\n                            var tmpDate = new Date();\n                            if(param.default_value !== \"\"){\n                                tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                            }\n                            return {...param, value: tmpDate.toISOString().slice(0,10)}\n                        }else{\n                            return {...param, value: param.default_value}\n                        }\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                return {...c2, \"selected\": false, c2profileparameters: parameters};\n            });\n            profiles.sort((a, b) => -b.name.localeCompare(a.name))\n            //console.log(profiles);\n            setC2Profiles(profiles);\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const finished = () => {\n        let allValid = true;\n        let includedC2 = false;\n        const adjustedC2 = c2Profiles.reduce( (prev, c2) => {\n            if(c2.selected){\n                const params = c2.c2profileparameters.map( (p) => {\n                    if(p.parameter_type === \"Dictionary\"){\n                        const values = p.value.filter(v => v.value !== \"\");\n                        return {...p, value: values};\n                    }else{\n                        return {...p};\n                    }\n                })\n                return [...prev, {...c2, c2profileparameters: params}];\n            }else{\n                return [...prev, {...c2}];\n            }\n        }, []);\n        c2Profiles.forEach( (c2) => {\n            if(c2.selected){\n                includedC2 = true;\n                c2.c2profileparameters.forEach( (param) => {\n                    if(param.error){\n                        snackActions.warning(c2.name + \"'s parameter \" + param.name + \" is invalid\");\n                        allValid = false;\n                    }\n                });\n            }\n        });\n        if(allValid){\n            //console.log(c2Profiles);\n            if(!includedC2){\n                snackActions.warning(\"Must select at least one C2 to include\");\n                return;\n            }\n            props.finished(adjustedC2);\n        }\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const toggleC2Selection = (evt, c2) => {\n        const updatedc2 = c2Profiles.map( (curc2) => {\n            if(c2.name === curc2.name){\n                return {...curc2, selected: !curc2.selected}\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n        const updatedc2 = c2Profiles.map( (curC2) => {\n            if(curC2.name === c2Name){\n                const c2params = curC2.c2profileparameters.map( (param) => {\n                    if (param.name === parameterName){\n                        return {...param, error, value}\n                    }\n                    return param;\n                });\n                return {...curC2, c2profileparameters: c2params};\n            }\n            return curC2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n        onCompleted: (data) => {\n          const updates = data.c2profileparametersinstance.map( (cur) => {\n            let inst = {...cur, ...cur.c2profileparameter};\n            if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n                inst[\"value\"] = JSON.parse(inst[\"value\"]);\n                const original = JSON.parse(inst.default_value);\n                const fixedArray = inst.value.map( (p) => {\n                    // p looks like {\"name\": \"something\", \"key\": \"something\", \"value\": \"something\", \"custom\": true/false}\n                    // we're missing the \"max\" limiter from the original that we need to add back in\n                    const originalPiece = original.find( o => o[\"name\"] === p[\"name\"]);\n                    if(originalPiece !== undefined){\n                        return {...originalPiece, ...p, \"default_show\": p.value === \"\" ? false : true}\n                    }\n                    return {...p, \"default_show\": false}\n                });\n                // now that we've added in the `max` value for each of the keys we had, we need to add back in the original possibilities that we didn't select\n                const final = original.reduce( (prev, current) => {\n                    //console.log(\"looking for\", cur, \"in\", prev)\n                    if(prev.findIndex( o => o[\"name\"] === current[\"name\"]) > -1 ){\n                        return [...prev]\n                    }\n                    return [...prev, {...current, default_show: false, \"key\": current.name === \"*\" ? \"\": current.name, value: current.default_value}]\n                }, [...fixedArray])\n                return {...inst, value: final};\n            }\n            return inst;\n          })\n          updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n          const updatedc2 = c2Profiles.map( (curc2) => {\n            if(updates[0].c2profile.name === curc2.name){\n                return {...curc2, c2profileparameters: updates};\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to fetch instance data: \" + data);\n          console.log(data);\n        },\n        fetchPolicy: \"no-cache\"\n      })\n    const onChangeCreatedInstanceName = (evt, c2) => {\n        setSelectedInstance(evt.target.value);\n        if(evt.target.value !== \"\"){\n            const updatedc2 = c2Profiles.map( (curc2) => {\n                if(c2.name === curc2.name){\n                    curc2.c2profileparameters = [];\n                }\n                return curc2;\n            });\n            setC2Profiles(updatedc2);\n            getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n        }\n      }\n      if (loading) {\n        return <div><CircularProgress /></div>;\n       }\n       if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n       }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select C2 Profiles\n            </Typography>\n            {\n                c2Profiles.map( (c2) => (\n                <React.Fragment key={\"step4c2switch\" + c2.id}>\n                    <FormControlLabel\n                      value=\"top\"\n                      control={\n                      <Switch\n                        checked={c2.selected}\n                        onChange={evt => toggleC2Selection(evt, c2)}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />}\n                      label={c2.name}\n                      labelPlacement=\"top\"\n                      style={{display: \"inline\"}}\n                    />\n                    {c2.c2profileparametersinstances.length > 0 && c2.selected ? (\n                        <FormControl style={{width: \"100%\"}}>\n                        <InputLabel >Select an Existing Instance</InputLabel>\n                            <Select\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedInstance}\n                              label=\"Select an Existing Instance\"\n                              onChange={evt => onChangeCreatedInstanceName(evt, c2)}\n                            >\n                              <MenuItem value=\"\">New Instance</MenuItem>\n                            {\n                                c2.c2profileparametersinstances.map((opt, i) => (\n                                    <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                    ) : (null)}\n                    <Typography variant=\"body1\" align=\"left\" id=\"selectc2profiles\" component=\"div\" key={\"step4desc\" + c2.id}\n                        style={{\"marginLeft\": \"10px\"}}>\n                          {c2.description}\n                    </Typography>\n                    { c2.selected ? ( \n                        <CreatePayloadC2ProfileParametersTable key={\"step4table\" + c2.id} returnAllDictValues={false} {...c2} onChange={updateC2Parameter} />\n                        ):(null)\n                    }\n                </React.Fragment>\n                ))\n            }\n<br/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n        </div>\n    );\n} \n","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        console.log(data);\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                \n            }else{\n                if(data.payload[0].build_stderr !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const c2Profiles = props.buildOptions[3].reduce( (prev, c2) => {\n            if(c2.selected){\n                const parameters = c2.c2profileparameters.reduce( (prev, param) => {\n                    if(param.parameter_type === \"Dictionary\"){\n                        const final_values = param.value.map( (p) => {\n                            return {name: p.name, key: p.key, value: p.value, custom: p.custom}\n                        });\n                        return {...prev, [param.name]: final_values};\n                    }\n                    return {...prev, [param.name]: param.value}\n                }, {});\n                return [...prev, {\"c2_profile\": c2.name, \"c2_profile_parameters\": parameters}];\n            }\n            return prev;\n        }, []);\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": props.buildOptions[2],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": c2Profiles\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField onEnter={finished} autoFocus={true} required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField onEnter={finished} required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} startOver={props.startOver} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectCommands} from './Step3SelectCommands';\nimport {Step4C2Profiles} from './Step4C2Profiles';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Commands', 'Select C2 Profiles', 'Build']\n}\n\nexport function CreatePayload(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectCommands buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step4C2Profiles buildOptions={payload[1]} prevData={payload[3]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 4:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} startOver={startOver} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      React.useEffect( () => {\n        startOver();\n      }, [props.location.key])\n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n      const startOver = () => {\n        setActiveStep(0);\n      }\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Link } from 'react-router-dom';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n                disabled={props.disableNext}\n              >\n                {props.last ? 'Create Wrapped Payload' : 'Next'}\n              </Button>\n              {props.last &&\n              <React.Fragment>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  style={{marginLeft: \"10px\"}}\n                  onClick={props.startOver}\n                >\n                  Start Over\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  component={Link}\n                  style={{marginLeft: \"10px\"}}\n                  to={\"/new/createpayload\"}\n                >\n                  Create Another Payload\n                </Button>\n              </React.Fragment>\n                \n              }\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n        if(sortedOptions.length === 0){\n            snackActions.warning(\"No Wrappers exist within Mythic. Try importing one first via the mythic-cli binary\")\n        }\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        if(osOptions.length === 0){\n            snackActions.warning(\"No Wrappers exist within Mythic. Try importing one first via the mythic-cli binary\");\n            return;\n        }\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.map( (opt) => {\n            if(returnAllDictValues){\n                return{\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }\n            }\n            return {[opt.key]: opt.value};\n        });\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            const options = JSON.parse(default_value);\n            setDictOptions(options);\n            let initial = options.reduce( (prev, op) => {\n                // find all the options that have a default_show of true\n                if(op.default_show){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                }else{\n                    return [...prev];\n                }\n            }, [] );\n            submitDictChange(initial);\n            setDictValue(initial);\n            let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                //for each option, check how many instances of it are allowed\n                // then check how many we have currently\n                const count = initial.reduce( (preCount, cur) => {\n                    if(cur.name === op.name){return preCount + 1}\n                    return preCount;\n                }, 0);\n                if(op.max === -1 || op.max > count){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                }else{\n                    return [...prev]\n                }\n            }, []);\n            setDictSelectOptions(dictSelectOptionsInitial);\n            if (dictSelectOptionsInitial.length > 0){\n                setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                setDictValue(passedValue);\n                submitDictChange(passedValue);\n            }\n            \n        }else{\n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        const choice = dictSelectOptionsChoice;\n        setDictValue([...dictValue, choice]);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = dictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + \"i\"} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n           default:\n            return null\n        }\n    }\n\n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <MythicStyledTooltip title={name.length > 0 ? name : \"No Description\"}>\n                        {description}\n                    </MythicStyledTooltip>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedPayloadTypeID, setSelectedPayloadTypeID] = React.useState(0);\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setSelectedPayloadTypeID(props.prevData.payload_type_id);\n                    setFileExtension(props.prevData.file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    if(payloadtypedata.length === 0){\n                        snackActions.warning(\"No available payload types exist for the selected OS\");\n                    }\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setSelectedPayloadTypeID(data.payloadtype[0].id);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }\n                                return {...param, error: param.required, value: param.default_value}\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        if(selectedPayloadType === \"\"){\n            snackActions.warning(\"No payload type selected\");\n            return;\n        }\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"payload_type_id\": selectedPayloadTypeID,\n                        \"file_extension\": fileExtension, \n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSelectedPayloadTypeID(payload.id);\n                const params = payload.buildparameters.map( (param) => {\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_id: Int!, $operation_id: Int!) {\n  payload(where: {id: {_eq: $payload_id}, operation_id: {_eq: $operation_id}}) {\n    uuid\n    wrapped_payload_id\n    payloadtype{\n        ptype\n    }\n    payloadcommands {\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    filemetum {\n      filename_text\n      agent_file_id\n      id\n      md5\n      sha1\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        description\n      }\n    }\n    os\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n  }\n}\n`;\nexport function DetailedPayloadTable(props){\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Payload Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n           <DetailedPayloadInnerTable {...props} />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\nfunction DetailedPayloadInnerTable(props){\n  const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {payload_id: props.payload_id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const commandState = data.payload[0].payloadcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            }).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0));\n            setCommands(commandState);\n            const buildParametersState = data.payload[0].buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.payload[0].c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n      <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.payload[0].payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.payload[0].os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.payload[0].uuid}</TableCell>\n                    </TableRow>\n                    { data.payload[0].filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.payload[0].filemetum.filename_text}</TableCell>\n                        </TableRow>\n                        \n                    ) : null }\n\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.payload[0].filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.payload[0].filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.payload[0].filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + props.payload_id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + props.payload_id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + props.payload_id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                          {cmd.enc_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Encryption Key: </b> {cmd.enc_key}\n                                          </React.Fragment>) }\n                                        {cmd.dec_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Decryption Key: </b> {cmd.dec_key}\n                                        </React.Fragment>) }\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                                \n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n                {commands.length > 0 &&\n                <React.Fragment>\n                    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Loaded Commands\n                      </Typography>\n                    </Paper>\n                    <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Command Name</TableCell>\n                        <TableCell>Mythic Version</TableCell>\n                        <TableCell>Loaded Version</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Documentation</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {\n                        commands.map( (cmd) => (\n                            <TableRow key={cmd.cmd + props.payload_id} hover>\n                                <TableCell>{cmd.cmd}</TableCell>\n                                <TableCell>{cmd.mythic}</TableCell>\n                                <TableCell>{cmd.payload}</TableCell>\n                                <TableCell>\n                                <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                                    href={\"/docs/agents/\" + data.payload[0].payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button>\n                                </TableCell>\n                            </TableRow>\n                        ))\n                        \n                      }\n                    </TableBody>\n                  </Table>\n                </React.Fragment>\n                }\n              {data.payload[0].wrapped_payload_id !== null &&\n                <React.Fragment>\n                  <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Wrapped Payload Information\n                      </Typography>\n                    </Paper>\n                  <DetailedPayloadInnerTable payload_id={data.payload[0].wrapped_payload_id} />\n                </React.Fragment>\n              }\n          </React.Fragment>\n        )\n}","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from '../Payloads/DetailedPayloadTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport InfoIcon from '@material-ui/icons/Info';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nconst GET_Payload_Types = gql`\nquery getWrappablePayloads($payloadType: Int!) {\n  payloadtype_by_pk(id: $payloadType) {\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n        payloads(where: {auto_generated: {_eq: false}, build_phase: {_eq: \"success\"}, deleted: {_eq: false}}) {\n          id\n          tag\n          uuid\n          creation_time\n          filemetum {\n            agent_file_id\n            filename_text\n            id\n          }\n        }\n      }\n    }\n  }\n}\n `;\n\nexport function Step3SelectPayload(props){\n    const [payloadOptions, setPayloadOptions] = React.useState([]);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type_id\"]},\n        onCompleted: () => {\n          if(data.payloadtype_by_pk.wrap_these_payload_types.length > 0){\n            let options = [];\n            for(let i = 0; i < data.payloadtype_by_pk.wrap_these_payload_types.length; i++){\n              for(let j = 0; j < data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads.length; j++){\n                options.push({ptype: data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.ptype, ...data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads[j] })\n              }\n            }\n            setPayloadOptions(options);\n          }else{\n            snackActions.warning(\"No supported payload for that wrapper\");\n          }\n          \n        }\n    });\n    const finished = (selectedPayload) => {\n      if(selectedPayload.uuid === undefined){\n        snackActions.error(\"Can't continue without selecting a payload\");\n        return;\n      }\n      props.finished(selectedPayload.uuid);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Wrap Agent Into New Payload\n        </Typography> <br/>\n        <PayloadSelect payloadOptions={payloadOptions} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        </div>\n    );\n} \n\nfunction PayloadSelect(props) {\n  const classes = useStyles();\n  \n  const finished = (payload) => {\n    props.finished(payload);\n  }\nreturn (\n  <React.Fragment>\n      <TableContainer component={Paper}>\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Select</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.payloadOptions.map( (op) => (\n                    <PayloadsTableRow\n                        onSelected={finished}\n                        key={\"payload\" + op.id}\n                        payload={op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <div style={{paddingTop: \"20px\"}}>\n           <CreatePayloadNavigationButtons disableNext first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n        </div>\n      \n  </React.Fragment>\n);\n}\n\nexport function PayloadsTableRow(props){\n  const [openDetailedView, setOpenDetailedView] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const onSelected = () => {\n      props.onSelected(props.payload);\n  }\n  return (\n      <React.Fragment>\n          <TableRow key={\"payload\" + props.payload.uuid} hover>\n              <TableCell>\n              <Button size=\"small\" onClick={onSelected} color=\"primary\" variant=\"contained\">Select</Button>\n              </TableCell>\n              <TableCell>{toLocalTime(props.payload.creation_time, me.user.view_utc_time)}</TableCell>\n              <TableCell>{props.payload.filemetum.filename_text}</TableCell>\n              <TableCell>{props.payload.tag}</TableCell>\n              <TableCell>\n                  <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                      <InfoIcon />\n                  </IconButton>\n              </TableCell>\n          </TableRow>\n          <TableRow>\n          {openDetailedView ? (\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                onClose={()=>{setOpenDetailedView(false);}} \n                innerDialog={<DetailedPayloadTable {...props} payload_id={props.payload.id} onClose={()=>{setOpenDetailedView(false);}} />}\n            />\n          ) : (null) }\n        </TableRow>\n      </React.Fragment>\n      )\n}","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                snackActions.info(`Building payload ${data.payload[0].uuid}...`, {autoHideDuration: 5000});\n            }else{\n                if(data.payload[0].build_error !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": [],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": [],\n            \"wrapper\": true,\n            \"wrapped_payload\": props.buildOptions[2]\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField onEnter={finished} autoFocus={true} required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField onEnter={finished} required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} startOver={props.startOver} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectPayload} from './Step3SelectPayload';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Payload', 'Build']\n}\n\nexport function CreatePayloadWrapper(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectPayload buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} startOver={startOver}/>;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n      const startOver = () => {\n        setActiveStep(0);\n      }\n      React.useEffect( () => {\n        startOver();\n      }, [props.location.key])\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nexport function EventFeedTableEventsActions(props){\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    \n    const onUpdateResolution = () => {\n        handleClose();\n        props.onUpdateResolution({id: props.id, resolved: !props.resolved});\n    }\n    const onUpdateLevel = () => {\n        handleClose();\n        props.onUpdateLevel({id:props.id});\n    }\n    const handleClose = () => {\n        setAnchorEl(null);\n      };\n    const onUpdateDeleted = () => {\n        handleClose();\n        props.onUpdateDeleted({id:props.id});\n    }\n    const getSurroundingEvents = () => {\n        handleClose();\n        props.getSurroundingEvents({id:props.id});\n    }\n    const handleClick = React.useCallback((e) => {\n        setAnchorEl(e.currentTarget)\n    }, []);\n    return (\n        <ListItemSecondaryAction>\n            <IconButton aria-controls={\"eventmenu\" + props.id} aria-haspopup=\"true\" onClick={handleClick}><MoreVertIcon/></IconButton>\n                <Menu elevation={5} id={\"eventmenu\" + props.id} anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleClose} >\n                    {\n                        props.level === \"warning\" && props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Unresolve</MenuItem>\n                        ) : ( props.level === \"warning\" && !props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Resolve</MenuItem>\n                            ) : (\n                            <MenuItem onClick={onUpdateLevel}>Make Warning</MenuItem>\n                            )\n                        )\n                    }\n                    <MenuItem onClick={getSurroundingEvents}>Get Surrounding Events</MenuItem>\n                    <MenuItem onClick={onUpdateDeleted}><DeleteIcon/>Delete</MenuItem>\n                </Menu>\n            </ListItemSecondaryAction>\n        )\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EventFeedTableEventsActions} from './EventFeedTableEventsActions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: '36ch',\n  },\n  inline: {\n    display: 'inline',\n  },\n}));\n\nexport function EventFeedTableEvents(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n\n    return (\n            <ListItem alignItems=\"flex-start\" style={{...props.style, }}>\n                <ListItemAvatar>\n                    <Avatar>\n                        {props.operator ? props.operator.username[0] : \"M\"}\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText disableTypography \n                    primary={\n                        <React.Fragment>\n                          <Typography\n                            component=\"span\"\n                            variant=\"body1\"\n                            className={classes.inline}\n                            style={{fontWeight: \"bold\", margin: 0, padding: 0}}\n                          >\n                            {props.operator ? props.operator.username : \"Mythic\"}\n                            {props.count > 1 ? \" ( \" + props.count + \" )\" : \"\"}\n                          </Typography>\n                          <Typography\n                            component=\"span\"\n                            variant=\"caption\"\n                            className={classes.inline}\n                            style={{margin: \"0 0 0 10px\"}}\n                            >\n                            {toLocalTime(props.timestamp, me.user.view_utc_time)}\n                            </Typography>\n                        </React.Fragment>\n                    }\n                    secondary={\n                          <pre style={{overflowX: \"auto\", width: \"max-content\", maxWidth: \"97%\", margin: \"0 0 0 0\", borderRadius: \"9px\", padding: \"5px\", backgroundColor: props.level === \"warning\" && props.resolved ? theme.palette.textBackgroundColorSuccess : (props.level === \"warning\" && !props.resolved ? theme.palette.textBackgroundColorError : (props.operator ? theme.palette.textBackgroundColor : theme.palette.textBackgroundColorMythic))}}>{props.message}</pre>\n                    }\n                    style={{}}\n                />\n                <EventFeedTableEventsActions id={props.id} level={props.level} \n                  onUpdateDeleted={props.onUpdateDeleted}\n                  onUpdateResolution={props.onUpdateResolution} \n                  onUpdateLevel={props.onUpdateLevel} \n                  getSurroundingEvents={props.getSurroundingEvents} \n                  resolved={props.resolved}/>\n\n            </ListItem>\n        )\n}\n\n\n","import React from 'react';\nimport SendIcon from '@material-ui/icons/Send';\nimport IconButton from '@material-ui/core/IconButton';\nimport {TextField} from '@material-ui/core';\n\nexport function EventFeedTableInput(props){\n    const [message, setMessage] = React.useState(\"\");\n    const onMessageChange = (evt) => {\n        evt.preventDefault();\n        setMessage(evt.target.value);\n    }\n    const onSubmitMessage = (e) => {\n        e.preventDefault();\n        if(message && message.length > 0){\n            props.onSubmitMessage(message);\n            setMessage(\"\");\n        }\n    } \n\n    return (          \n        <div style={{padding: \"0\", margin: \"0\", position: \"absolute\", bottom: 0, width: \"100%\"}}>\n            <form onSubmit={onSubmitMessage}>\n                <TextField InputProps={{endAdornment:\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitMessage}>\n                        <SendIcon/>\n                    </IconButton>\n                    }} \n                    fullWidth\n                    size=\"small\"\n                    style={{padding:0,margin:0}}\n                    variant=\"outlined\"\n                    value={message} onChange={onMessageChange}\n                    label=\"Type Message...\" \n                />\n            </form>\n        </div>  \n    )\n}\n\n","import React, { useEffect, useRef } from 'react';\nimport { EventFeedTableEvents } from './EventFeedTableEvents';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport { EventFeedTableInput } from './EventFeedTableInput';\nimport {Button} from '@material-ui/core';\nimport {VariableSizeList } from 'react-window';\nimport Autosizer from 'react-virtualized-auto-sizer';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nconst Row = ({data, index, style}) => {\n    const op = data[data.length - index - 1];\n    return (\n        <div style={style}>\n            <EventFeedTableEvents\n                {...op}\n            />\n        </div> \n    )\n};\n\nconst EventList = ({onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, operationeventlog}) => {\n    const listRef = React.createRef();\n    const getItemSize = (index) => {\n        const op = operationeventlog[operationeventlog.length - index - 1];\n        return 75 + (20 * (op[\"message\"].match(/\\n/g) || []).length);\n    }\n    const eventlogWithFunctions = operationeventlog.map( (oplog) => {\n        return {onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, ...oplog}\n    });\n    useEffect( () => {\n        if(listRef.current){\n            listRef.current.resetAfterIndex(0);\n        }\n    }, [operationeventlog])\n    return (\n        <Autosizer>\n            {({height, width}) => (\n                <VariableSizeList\n                    ref={listRef}\n                    height={height-50}\n                    itemData={eventlogWithFunctions}\n                    itemCount={operationeventlog.length}\n                    width={width}\n                    itemSize={getItemSize}\n                    overscanCount={20}\n                    >\n                        {Row}\n                </VariableSizeList>\n            )}\n        </Autosizer>\n    )\n};\n\nexport function EventFeedTable(props){\n    const messagesEndRef = useRef(null);\n    const theme = useTheme();\n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    \n    const onSubmitMessage = (message) => {\n        if(message && message.length > 0){\n            props.onSubmitMessage({level:\"info\", message});\n            scrollToBottom();\n        }\n    } \n    const scrollToBottom = () => {\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" })\n    }\n    const dropDownOptions = [\n        {\n            name: \"Load More Events\",\n            click: props.loadMore\n        },\n        {\n            name: \"Load All Errors\",\n            click: props.loadNextError\n        },\n        {\n            name: \"Resolve Viewable Errors\",\n            click: props.resolveViewableErrors\n        },\n        {\n            name: \"Resolve All Errors\",\n            click: props.resolveAllErrors\n        },\n    ]\n    const handleMenuItemClick = (event, index) => {\n        dropDownOptions[index].click();\n        setDropdownOpen(false);\n    };\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main,  color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Operational Event Messages\n                </Typography>\n                <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginRight: \"10px\", marginTop:\"10px\", float: \"right\"}} color=\"primary\">\n                    <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                        aria-expanded={dropdownOpen ? 'true' : undefined}\n                        aria-haspopup=\"menu\"\n                        onClick={() => setDropdownOpen(!dropdownOpen)}>\n                            Actions <ArrowDropDownIcon />\n                    </Button>\n                </ButtonGroup>\n                <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 10}}>\n                {({ TransitionProps, placement }) => (\n                    <Grow\n                    {...TransitionProps}\n                    style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                    }}\n                    >\n                    <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={() => setDropdownOpen(false)}>\n                        <MenuList id=\"split-button-menu\">\n                            {dropDownOptions.map((option, index) => (\n                            <MenuItem\n                                key={option.name}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                            >\n                                {option.name}\n                            </MenuItem>\n                            ))}\n                        </MenuList>\n                        </ClickAwayListener>\n                    </Paper>\n                    </Grow>\n                )}\n                </Popper>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", height: \"calc(90vh)\", backgroundColor: theme.body}} variant={\"elevation\"}>\n                <EventList \n                    onUpdateResolution={props.onUpdateResolution}\n                    onUpdateLevel={props.onUpdateLevel}\n                    onUpdateDeleted={props.onUpdateDeleted}\n                    getSurroundingEvents={props.getSurroundingEvents}\n                    operationeventlog={props.operationeventlog}/>\n                <div ref={messagesEndRef} />\n                <EventFeedTableInput onSubmitMessage={onSubmitMessage} />\n            </Paper>\n        </React.Fragment>\n    )\n}","import React  from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {EventFeedTable} from './EventFeedTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst SURROUNDING_EVENTS = 5;\nconst EVENT_QUERY_SIZE = 100;\nconst GET_Event_Feed = gql`\nquery GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const SUB_Event_Feed = gql`\nsubscription GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\nconst GET_Surrounding_Events = gql`\nquery GetSurroundingOperationEventLogs($operation_id: Int!, $lower_id: Int!, $upper_id: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, id: {_gt: $lower_id, _lt: $upper_id}}, order_by: {id: desc}) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const Create_Operational_Event_Log = gql`\nmutation CreateOperationEventLog($message: String!, $level: String!) {\n  insert_operationeventlog_one(object:{level: $level, message: $message}) {\n    id\n  }\n}\n `;\n const GET_Event_Feed_Next_Error = gql`\n query GetOperationEventLogError($operation_id: Int!) {\n   operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}}, order_by: {id: desc}) {\n     id\n     level\n     message\n     resolved\n     timestamp\n     count\n     operator {\n       id\n       username\n     }\n   }\n }\n  `;\n  const Update_Deleted = gql`\nmutation UpdateDeletedOperationEventLog($id: Int!) {\n  update_operationeventlog(where:{id: {_eq: $id}}, _set: {deleted: true}) {\n    returning{\n        id\n        deleted\n    }\n  }\n}\n `;\n const Update_Resolution = gql`\nmutation UpdateResolutionOperationEventLog($id: Int!, $resolved: Boolean!) {\n  update_operationeventlog_by_pk(pk_columns:{id: $id}, _set: {resolved: $resolved}) {\n    id\n    resolved\n  }\n}\n `;\n const Update_Level = gql`\nmutation UpdateLevelOperationEventLog($id: Int!) {\n  update_operationeventlog_by_pk(pk_columns: {id: $id}, _set: {level: \"warning\"}) {\n    id\n    level\n  }\n}\n `;\n const Update_ResolveViewableErrors = gql`\n mutation UpdateResolveViewableErrorsOperationEventLog($ids: [Int]!) {\n   update_operationeventlog(where:{id: {_in: $ids}}, _set: {resolved: true}) {\n     returning{\n         id\n         resolved\n     }\n   }\n }\n  `;\n  const Update_ResolveAllErrors = gql`\n  mutation UpdateResolveAllErrorsOperationEventLog($operation_id: Int!) {\n    update_operationeventlog(where: {resolved: {_eq: false}, operation_id: {_eq: $operation_id}}, _set: {resolved: true}) {\n      returning{\n          id\n          resolved\n      }\n    }\n  }\n   `;\nexport function EventFeed(props){\n  const me = useReactiveVar(meState);\n  const [operationeventlog, setOperationEventLog] = React.useState([]);\n  const [offset, setOffset] = React.useState(0);\n  useSubscription(SUB_Event_Feed, {\n    variables: {operation_id: me.user.current_operation_id, offset: 0, eventQuerySize: EVENT_QUERY_SIZE}, fetchPolicy: \"network-only\",\n    shouldResubscribe: true,\n    onSubscriptionData: ({subscriptionData}) => {\n      if(offset === 0){\n        setOffset(subscriptionData.data.operationeventlog.length);\n      }\n      const newEvents = subscriptionData.data.operationeventlog.reduce( (prev, cur) => {\n        if(prev.find(({ id }) => id === cur.id)){\n          let indx = prev.findIndex( ({id}) => id === cur.id);\n          let updatingPrev = [...prev];\n          updatingPrev[indx] = cur;\n          return [...updatingPrev];\n        }\n        return [...prev, cur];\n      }, [...operationeventlog]);\n      newEvents.sort((a,b) => (a.id > b.id) ? -1 : ((b.id > a.id) ? 1 : 0));\n      setOperationEventLog(newEvents);\n    }\n});\n  const [getMoreTasking] = useLazyQuery(GET_Event_Feed, {\n      onError: data => {\n          console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        snackActions.dismiss();\n          if(data.operationeventlog.length === 0){\n            snackActions.info(\"No more events\");\n            return;\n          }\n          const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n            if(prev.find(({ id }) => id === cur.id)){\n              return [...prev];\n            }\n            return [...prev, cur];\n          }, [...operationeventlog]);\n          setOffset(offset + EVENT_QUERY_SIZE);\n          setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more events\");\n      }\n  });\n  const [getSurroundingEventQuery] = useLazyQuery(GET_Surrounding_Events, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        snackActions.dismiss();\n        let foundNew = false;\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          foundNew = true;\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        if(foundNew){\n          snackActions.success(\"Successfully fetched surrounding events\");\n        }else{\n          snackActions.info(\"No additional surrounding events\");\n        }\n        \n    }\n});\n  const [getNextError] = useLazyQuery(GET_Event_Feed_Next_Error, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      snackActions.dismiss();\n        if(data.operationeventlog.length === 0){\n          snackActions.info(\"No more events\");\n          return;\n        }\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more errors\");\n    }\n  });\n  const [newOperationEventLog] = useMutation(Create_Operational_Event_Log);\n  const [updateDeleted] = useMutation(Update_Deleted, {\n    update: (cache, {data}) => {\n        const removedMessage = data.update_operationeventlog.returning[0];\n        const newMessages = operationeventlog.filter(op => (op.id !== removedMessage.id));\n        setOperationEventLog(newMessages);\n        snackActions.success(\"Successfully deleted event log\");\n    }\n  });\n  const [updateResolution] = useMutation(Update_Resolution, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, resolved: updatedMessage.resolved};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateLevel] = useMutation(Update_Level, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, level: updatedMessage.level};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateResolveViewable] = useMutation(Update_ResolveViewableErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss();\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Viewable Errors to Resolve\");\n      }\n      \n    }\n  });\n  const [updateResolveAllErrors] = useMutation(Update_ResolveAllErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss()\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Errors to Resolve\");\n      }\n      \n    }\n  });\n  const onUpdateDeleted = ({id}) => {\n      snackActions.info(\"Deleting event log...\");\n      updateDeleted({variables: {id}});\n  }\n  const onSubmitMessage = ({level, message}) => {\n      newOperationEventLog({variables: {level, message}});\n  }\n  const onUpdateResolution = ({id, resolved}) => {\n    updateResolution({variables: {id, resolved}});\n  }\n  const onUpdateLevel = ({id}) => {\n    updateLevel({variables: {id}})\n  }\n  const loadMore = () => {\n    snackActions.info(\"Loading more events...\");\n    getMoreTasking({variables: {operation_id: me.user.current_operation_id, offset: offset, eventQuerySize: EVENT_QUERY_SIZE}})\n  }\n  const loadNextError = () => {\n    snackActions.info(\"Loading more errors...\");\n    getNextError({variables: {operation_id: me.user.current_operation_id}})\n  }\n  const getSurroundingEvents = ({id}) => {\n    snackActions.info(\"Loading surrounding events...\");\n    getSurroundingEventQuery({variables: {lower_id: id - SURROUNDING_EVENTS, upper_id: id + SURROUNDING_EVENTS, operation_id: me.user.current_operation_id}})\n  }\n  const resolveViewableErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    const resolveIds = operationeventlog.reduce( (prev, cur) => {\n      if(cur.level === \"warning\" && !cur.resolved){\n        return [...prev, cur.id];\n      }else{\n        return [...prev];\n      }\n    }, []);\n    updateResolveViewable({variables: {ids: resolveIds}});\n  }\n  const resolveAllErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    updateResolveAllErrors({variables: {operation_id: me.user.current_operation_id}});\n  }\n  return (\n      <EventFeedTable onSubmitMessage={onSubmitMessage} operationeventlog={operationeventlog} loadMore={loadMore} loadNextError={loadNextError}\n                      onUpdateDeleted={onUpdateDeleted} onUpdateResolution={onUpdateResolution} onUpdateLevel={onUpdateLevel} getSurroundingEvents={getSurroundingEvents}\n                      resolveViewableErrors={resolveViewableErrors} resolveAllErrors={resolveAllErrors}\n      />\n  );\n}\n","import React, { useEffect, useRef } from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nexport function OperationTableRowUpdateOperatorsDialogRow(props){\n    const [checked, setChecked] = React.useState(false);\n    const [viewMode, setViewMode] = React.useState(\"operator\");\n    const [blockListName, setBlockListName] = React.useState({});\n    const options = [\"operator\", \"spectator\", \"lead\"];\n    const inputRef = useRef(null); \n    useEffect( () => {\n      setChecked(props.operator.checked);\n      setViewMode(props.operator.view_mode);\n      console.log(props.operator);\n      if(!props.operator.disabledcommandsprofile){\n        setBlockListName(\"\")\n      }else{\n        setBlockListName(props.operator.disabledcommandsprofile.name);\n      }\n      \n\n    }, [props.operator]);\n    const onBoolChange = (event) => {\n      setChecked(event.target.checked);\n      props.updateOperator({...props.operator, checked: event.target.checked, view_mode: viewMode});\n    }\n    const handleChange = (event) => {\n      setViewMode(event.target.value);\n      props.updateOperator({...props.operator, checked, view_mode: event.target.value});\n    };\n    const handleBlockListChange = (event) => {\n      setBlockListName(event.target.value);\n      const blockListItemIndex = props.commandBlockLists.findIndex( cbl => cbl.name === event.target.value);\n      if(blockListItemIndex > -1){\n        props.updateOperator({...props.operator, checked, disabledcommandsprofile: props.commandBlockLists[blockListItemIndex]});\n      }else{\n        props.updateOperator({...props.operator, checked, disabledcommandsprofile: null});\n      }\n      \n    }\n    return (\n        <React.Fragment>\n            <TableRow>\n                <TableCell><Switch checked={checked} onChange={onBoolChange} color=\"secondary\" /></TableCell>\n                <TableCell>{props.operator.username}</TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={viewMode}\n                        onChange={handleChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        {options.map( (opt) => (\n                            <MenuItem value={opt} key={opt}>{opt}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Block List Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={blockListName}\n                        onChange={handleBlockListChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        <MenuItem value={-1} key={\"None\"}>None</MenuItem>\n                        {props.commandBlockLists.map( (opt) => (\n                            <MenuItem value={opt.name} key={props.operator.username + opt.name}>{opt.name}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React, {  } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation, useQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport {OperationTableRowUpdateOperatorsDialogRow} from './OperationTableRowUpdateOperatorsDialogRow';\n\nconst GET_Operations = gql`\nquery GetOperation($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      disabledcommandsprofile {\n        name\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n  disabledcommandsprofile(where: {operation_id: {_eq: $operation_id}}, distinct_on: name, order_by: {name: asc}) {\n    name\n    id\n  }\n}\n`;\nconst Update_Lead = gql`\nmutation updateLeadMutation($operation_id: Int!, $admin_id: Int!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {admin_id: $admin_id}) {\n    admin {\n      id\n      username\n    }\n    id\n  }\n}\n`;\nconst Update_OperatorViewMode = gql`\nmutation updateOperatorViewMode($operatoroperation_id: Int!, $view_mode: String!, $disabledcommandsprofile: Int) {\n  update_operatoroperation_by_pk(pk_columns: {id: $operatoroperation_id}, _set: {view_mode: $view_mode, base_disabled_commands_id: $disabledcommandsprofile}) {\n    id\n    view_mode\n  }\n}`;\nconst Remove_OperatorFromOperation = gql`\nmutation removeOperatorsFromOperation($operatoroperation_ids: [Int!]!) {\n  delete_operatoroperation(where: {id: {_in: $operatoroperation_ids}}) {\n    returning {\n      id\n    }\n  }\n}`;\nconst Add_OperatorsToOperation = gql`\nmutation addNewOperators($operators: [operatoroperation_insert_input!]!) {\n  insert_operatoroperation(objects: $operators) {\n    returning {\n      id\n    }\n  }\n}`;\nexport function OperationTableRowUpdateOperatorsDialog(props) {\n    const [operators, setOperators] = React.useState([]);\n    const [admin, setAdmin] = React.useState({});\n    const [originalOperators, setOriginalOperators] = React.useState([]);\n    const [commandBlockLists, setCommandBlockLists] = React.useState([]);\n    useQuery(GET_Operations, {variables: {operation_id: props.id}, fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const allOperators = data.operator.map( (operator) => {\n          return {...operator, checked: false}\n        });\n        setOriginalOperators(data.operation_by_pk.operatoroperations);\n        setAdmin(data.operation_by_pk.admin);\n        const updateAssignments = allOperators.map( (operator) => {\n          const assigned = data.operation_by_pk.operatoroperations.find( (op) => op.operator.id === operator.id );\n          if( assigned ){\n            if(assigned.operator.id === data.operation_by_pk.admin.id){\n              return {...operator, checked: true, view_mode: \"lead\", operatoroperation_id: assigned.id, disabledcommandsprofile: assigned.disabledcommandsprofile};\n            }\n            return {...operator, checked: true, view_mode: assigned.view_mode, operatoroperation_id: assigned.id, disabledcommandsprofile: assigned.disabledcommandsprofile};\n          }\n          return {...operator, view_mode: \"operator\"};\n        });\n        updateAssignments.sort( (a,b) => a.username > b.username ? 1 : -1)\n        setOperators(updateAssignments);\n        const blockListNames = [...data.disabledcommandsprofile];\n        setCommandBlockLists(blockListNames)\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to get operational data\");\n        console.error(data);\n      }\n    });\n    const [updateOperationLead] = useMutation(Update_Lead, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated Lead\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operation\");\n        console.log(\"error updating operation\", data);\n      }\n    })\n    const [addOperators] = useMutation(Add_OperatorsToOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully added operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to add operators\");\n        console.error(\"error adding operators to operation\", data);\n      }\n    })\n    const [removeOperatorsMutation] = useMutation(Remove_OperatorFromOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully removed operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to remove operators\");\n        console.error(\"error removing operators from operation\", data);\n      }\n    })\n    const [updateOperatorViewMode] = useMutation(Update_OperatorViewMode, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated operator view mode\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operator view mode\");\n        console.error(\"failed to update view mode: \", data);\n      }\n    })\n    const onAccept = () =>{\n      // make sure there is only one with view_mode of \"lead\"\n      //   set that operator as the lead, add/remove the other operators\n      const newAdmin = operators.find( (op) => op.view_mode === \"lead\");\n      if(!newAdmin){\n        snackActions.error(\"No Lead for the operation is set\");\n        return;\n      }\n      if(newAdmin.id !== admin.id){\n        updateOperationLead({variables: {\n          operation_id: props.id,\n          admin_id: newAdmin.id\n        }});\n      }\n      // now loop through the props.assignedOperators to see \n      let newOperators = [];\n      let removeOperators = [];\n      operators.forEach( (op) => {\n        let oldMatch = originalOperators.find( (oop) => oop.operator.id === op.id);\n        if(oldMatch){\n          // op was listed in the original set, so we're looking to update or remove based on checked/view_mode\n          if(op.checked){\n            // op is still checked, so just a potential update\n            if(op.view_mode !== oldMatch.view_mode || op.disabledcommandsprofile !== oldMatch.disabledcommandsprofile){\n              updateOperatorViewMode({variables: {operatoroperation_id: oldMatch.id, view_mode: op.view_mode, disabledcommandsprofile: op.disabledcommandsprofile?op.disabledcommandsprofile.id:null}});\n            }\n          }\n          else{\n            // op is unchecked, but was originally listed, so remove this operator\n            removeOperators.push(oldMatch.id);\n          }\n          //op was checked then, is checked now, and nothing changed. just move on\n        }else{\n          //op wasn't listed, so if checked is true, then we want to add them to the operation\n          if(op.checked){\n            newOperators.push({operation_id: props.id, operator_id: op.id, view_mode: op.view_mode});\n          }\n          // op wasnt checked then, isn't checked now, so move on\n        }\n      });\n      if(newOperators.length > 0){\n        addOperators({variables: {operators: newOperators}});\n      }\n      if(removeOperators.length > 0){\n        removeOperatorsMutation({variables: {operatoroperation_ids: removeOperators}});\n      }      \n      props.onClose();\n    }\n    const updateOperator = (op) => {\n      let updates = [...operators];\n      if(op.view_mode === \"lead\"){\n        //make sure nobody else has this, if they do, demote them down to \"operator\"\n        updates = updates.map( (operator) => {\n          if(operator.view_mode === \"lead\"){\n            return {...operator, view_mode: \"operator\"}\n          }\n          return {...operator}\n        });\n      }\n      updates = updates.map( (operator) => {\n        if(operator.id === op.id){\n          return {...op};\n        }\n        return {...operator};\n      });\n      setOperators(updates);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify Operator Assignments</DialogTitle>\n        <DialogContent dividers={true}>\n          <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>   \n              <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"8rem\"}}>Assign to Operation</TableCell>\n                          <TableCell style={{width: \"8rem\"}}>Operator</TableCell>\n                          <TableCell style={{width: \"10rem\"}}>Role</TableCell>\n                          <TableCell >Block List</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                  \n                  {operators.map( (op) => (\n                      <OperationTableRowUpdateOperatorsDialogRow\n                          key={\"operator\" + op.id} operator={op} updateOperator={updateOperator} commandBlockLists={commandBlockLists}\n                      />\n                  ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Switch from '@material-ui/core/Switch';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\n\nconst GET_OperationData = gql`\nquery GetOperations($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    name\n    id\n    channel\n    display_name\n    icon_emoji\n    icon_url\n    webhook\n    webhook_message\n    complete\n  }\n}\n`;\n\nexport function OperationTableRowNotificationsDialog(props) {\n    const [name, setName] = React.useState(\"\");\n    const [channel, setChannel] = React.useState(\"\");\n    const [displayName, setDisplayName] = React.useState(\"\");\n    const [iconEmoji, setIconEmoji] = React.useState(\"\");\n    const [iconURL, setIconURL] = React.useState(\"\");\n    const [webhook, setWebhook] = React.useState(\"\");\n    const [webhookMessage, setWebhookMessage] = React.useState(\"\");\n    const [complete, setComplete] = React.useState(false);\n    \n    useQuery(GET_OperationData, {\n      fetchPolicy: \"no-cache\",\n      variables: {operation_id: props.id},\n      onCompleted: (data) => {\n        let webhookMessage = data.operation_by_pk.webhook_message;\n        try{\n          webhookMessage = JSON.stringify(JSON.parse(webhookMessage), null, 4);\n        }catch(error){\n          \n        }\n          setName(data.operation_by_pk.name);\n          setChannel(data.operation_by_pk.channel);\n          setDisplayName(data.operation_by_pk.display_name);\n          setIconEmoji(data.operation_by_pk.icon_emoji);\n          setIconURL(data.operation_by_pk.icon_url);\n          setWebhook(data.operation_by_pk.webhook);\n          setWebhookMessage(webhookMessage);\n          setComplete(data.operation_by_pk.complete);\n      },\n      onError: () => {\n        snackActions.error(\"Failed to fetch data\");\n      }\n    });\n    const onTextChange = (name, value, error) => {\n      switch(name){\n        case \"name\":\n          setName(value);\n          break;\n        case \"Webhook Channel\":\n          setChannel(value);\n          break;\n        case \"Webhook Display Name\":\n          setDisplayName(value);\n          break;\n        case \"Webhook Icon Emoji\":\n          setIconEmoji(value);\n          break;\n        case \"Webhook Icon URL\":\n          setIconURL(value);\n          break;\n        case \"Webhook URL\":\n          setWebhook(value);\n          break;\n        case \"Webhook POST Message\":\n          setWebhookMessage(value);\n          break;\n        default:\n          break;\n      }\n    }\n    const onEditorChange = (value, event) => {\n      setWebhookMessage(value);\n    }\n    const onBoolChange = (event) => {\n      setComplete(event.target.checked);\n    }\n    const onAccept = () =>{\n      props.onUpdateOperation({\n        operation_id: props.id,\n        name: name,\n        channel: channel,\n        display_name: displayName,\n        icon_emoji: iconEmoji,\n        icon_url: iconURL,\n        webhook: webhook,\n        webhook_message: webhookMessage,\n        complete: complete\n      });\n      props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify {name}</DialogTitle>\n        <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n          <DialogContentText>\n            Use this dialog to update some information about an operation.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            value={name}\n            onChange={onTextChange}\n            margin=\"dense\"\n            name=\"name\"\n          />\n          Complete Operation? <Switch checked={complete} onChange={onBoolChange} color=\"secondary\" />\n          <MythicTextField\n            margin=\"dense\"\n            value={channel}\n            onChange={onTextChange}\n            name=\"Webhook Channel\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={displayName}\n            onChange={onTextChange}\n            name=\"Webhook Display Name\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconEmoji}\n            onChange={onTextChange}\n            name=\"Webhook Icon Emoji\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconURL}\n            onChange={onTextChange}\n            name=\"Webhook Icon URL\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={webhook}\n            onChange={onTextChange}\n            name=\"Webhook URL\"\n          />\n          <AceEditor \n              mode=\"json\"\n              theme={\"monokai\"}\n              onChange={onEditorChange}\n              fontSize={14}\n              showGutter={true}\n              maxLines={20}\n              highlightActiveLine={true}\n              value={webhookMessage}\n              width={\"100%\"}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { } from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { OperationTableRowUpdateOperatorsDialog } from './OperationTableRowUpdateOperatorsDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar, useMutation, gql} from '@apollo/client';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport {OperationTableRowNotificationsDialog} from './OperationTableRowNotificationsDialog';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateCurrentOpertionMutation = gql`\nmutation updateCurrentOpertionMutation($operator_id: Int!, $operation_id: Int!) {\n  updateCurrentOperation(user_id: $operator_id, operation_id: $operation_id) {\n    status\n    error\n    operation_id\n  }\n}\n`;\nexport function OperationTableRow(props){\n    const [openUpdateNotifications, setOpenUpdateNotifications] = React.useState(false);\n    const [openUpdateOperators, setOpenUpdateOperators] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [updateCurrentOperation] = useMutation(updateCurrentOpertionMutation, {\n      onCompleted: (data) => {\n        if(data.updateCurrentOperation.status === \"success\"){\n          meState({...meState(), user: {...meState().user, current_operation_id: data.updateCurrentOperation.operation_id, current_operation: props.name}});\n          localStorage.setItem(\"user\", JSON.stringify(meState().user));\n          snackActions.success(\"Updated current operation\");\n        }else{\n          snackActions.error(data.updateCurrentOperation.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update current operation\");\n        console.error(data);\n      }\n    })\n    const makeCurrentOperation = () => {\n      updateCurrentOperation({variables: {operator_id: me.user.user_id, operation_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id} hover>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateNotifications(true);}} startIcon={<EditIcon/>} color={props.complete ? \"secondary\" : \"primary\"} variant=\"contained\">Edit</Button>\n                {openUpdateNotifications && \n                    <MythicDialog open={openUpdateNotifications} fullWidth maxWidth={\"lg\"}\n                        onClose={()=>{setOpenUpdateNotifications(false);}} \n                        innerDialog={<OperationTableRowNotificationsDialog onClose={()=>{setOpenUpdateNotifications(false);}} id={props.id} onUpdateOperation={props.onUpdateOperation} />}\n                     />\n                }\n                </TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateOperators(true);}} startIcon={<AssignmentIndIcon/>} color={props.complete ? \"secondary\" : \"primary\"} variant=\"contained\">Edit</Button>\n                {openUpdateOperators && \n                    <MythicDialog open={openUpdateOperators} maxHeight={\"calc(80vh)\"} fullWidth maxWidth={\"md\"}\n                        onClose={()=>{setOpenUpdateOperators(false);}} \n                        innerDialog={<OperationTableRowUpdateOperatorsDialog id={props.id} onClose={()=>{setOpenUpdateOperators(false);}}/>}\n                     />\n                }\n                </TableCell>\n                <TableCell>{props.name} {props.complete ? \" (Completed) \" : \"\"}</TableCell>\n                <TableCell>{props.admin.username}</TableCell>\n                <TableCell>\n                <Button size=\"small\" startIcon={<AssessmentIcon/>} onClick={() => {snackActions.warning(\"Not Implemented\")}} color=\"primary\" variant=\"contained\">Analysis</Button>\n                </TableCell>\n                <TableCell>{props.id === me.user.current_operation_id ? (\"Current Operation\") : (\n                  <React.Fragment>\n                    <Button size=\"small\"startIcon={<PlayArrowIcon/>} onClick={makeCurrentOperation} color=\"primary\" variant=\"contained\">Make Current</Button>\n                   \n                  </React.Fragment>\n                )}</TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { OperationTableRow } from './OperationTableRow';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport {SettingsOperatorDialog} from '../Settings/SettingsOperatorDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql} from '@apollo/client';\n\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    error\n    id\n    status\n  }\n}\n`;\nconst Update_Operation = gql`\nmutation MyMutation($operation_id: Int!, $channel: String!, $complete: Boolean!, $display_name: String!, $icon_emoji: String!, $icon_url: String!, $name: String!, $webhook: String!, $webhook_message: String!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {channel: $channel, complete: $complete, display_name: $display_name, icon_emoji: $icon_emoji, icon_url: $icon_url, name: $name, webhook: $webhook, webhook_message: $webhook_message}) {\n    id\n    name\n    complete\n  }\n}\n`;\nconst newOperationMutation = gql`\nmutation newOperationMutation{\n    createOperation{\n        status\n        error\n        operation{\n            name\n            id\n            admin {\n                id\n                username\n            }\n        }\n        \n    }\n}\n`;\n\nexport function OperationTable(props){\n    const theme = useTheme();\n    const [openNewOperator, setOpenNewOperatorDialog] = React.useState(false);\n    const [newOperator] = useMutation(newOperatorMutation, {\n        update: (cache, {data}) => {\n            if(data.createOperator.status === \"success\"){\n                snackActions.success(\"Created operator\");\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateOperation] = useMutation(Update_Operation, {\n        onCompleted: (data) => {\n          props.onUpdateOperation(data.update_operation_by_pk);\n          snackActions.success(\"Successfully updated operation\");\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to update operation\");\n          console.log(\"error updating operation\", data);\n        }\n      });\n    const [newOperation] = useMutation(newOperationMutation, {\n        onCompleted: (data) => {\n            console.log(data);\n            if(data.createOperation.status === \"success\"){\n                snackActions.success(\"Successfully created operation!\");\n                props.onNewOperation(data.createOperation.operation);\n            }else{\n                snackActions.error(data.createOperation.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        }\n    })\n    const onUpdateOperation = ({operation_id, name, channel, display_name, icon_emoji, icon_url, webhook, webhook_message, complete}) => {\n        updateOperation({variables:{\n            operation_id,\n            name,\n            channel,\n            display_name,\n            icon_emoji,\n            icon_url,\n            webhook,\n            webhook_message,\n            complete\n        }});\n    }\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            newOperator({variables:{username:username, password:passwordNew}})\n            setOpenNewOperatorDialog(false);\n        }\n    }\n    const onSubmitNewOperation = () => {\n        newOperation()\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Operations\n            </Typography>\n            <Button size=\"small\" onClick={onSubmitNewOperation} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operation</Button>\n            \n            <Button size=\"small\" onClick={()=>{setOpenNewOperatorDialog(true);}} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n            {openNewOperator &&\n                <MythicDialog open={openNewOperator} \n                    onClose={()=>{setOpenNewOperatorDialog(false);}} \n                    innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewOperatorDialog(false);}}  {...props}/>}\n                />\n            }\n            \n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"8rem\"}}>Configure</TableCell>\n                        <TableCell style={{width: \"8rem\"}}>Operators</TableCell>\n                        <TableCell>Operation Name</TableCell>\n                        <TableCell>Operation Admin</TableCell>\n                        <TableCell style={{width: \"10rem\"}}>Analysis</TableCell>\n                        <TableCell style={{width: \"12rem\"}}>Operation Status</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.operations.map( (op) => (\n                    <OperationTableRow\n                        key={\"operation\" + op.id} onUpdateOperation={onUpdateOperation}\n                        {...op} operator={props.operator}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent'\nimport Divider from '@material-ui/core/Divider';\nimport {useQuery, gql} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    overflow: 'auto',\n    backgroundColor: \"rgb(76,80,86) !important\"\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nfunction PayloadTypeBlockListPreMemo(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    useEffect( () => {\n      props.onChange({selected: right, ptype: props.ptype});\n    }, [right])\n    const customList = (title, items) => (\n      <Paper style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.paper}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <CardContent style={{height: \"calc(30vh)\", overflow: \"auto\"}} className={classes.paper}>\n            <List dense component=\"div\" role=\"list\" style={{padding:0}} className={classes.paper}>\n              {items.map((valueObj) => {\n                const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n                const labelId = `transfer-list-item-${value}-label`;\n                return (\n                  <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                    <ListItemIcon>\n                      <Checkbox\n                        checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                );\n              })}\n            </List>\n          </CardContent>\n        </Card>\n      </Paper>\n    );\n    \n  return (\n    <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n      <Grid item xs={12}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                {props.ptype}\n            </Typography>\n        </Paper>\n      </Grid>\n      <Grid item xs={5}>{customList(leftTitle, left)}</Grid>\n      <Grid item>\n        <Grid container direction=\"column\" alignItems=\"center\">\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleAllRight}\n            disabled={left.length === 0}\n            aria-label=\"move all right\"\n          >\n            ≫\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleCheckedRight}\n            disabled={leftChecked.length === 0}\n            aria-label=\"move selected right\"\n          >\n            &gt;\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleCheckedLeft}\n            disabled={rightChecked.length === 0}\n            aria-label=\"move selected left\"\n          >\n            &lt;\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleAllLeft}\n            disabled={right.length === 0}\n            aria-label=\"move all left\"\n          >\n            ≪\n          </Button>\n        </Grid>\n      </Grid>\n      <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n    </Grid>\n  );\n}\nconst PayloadTypeBlockList = React.memo(PayloadTypeBlockListPreMemo);\nconst getPayloadTypesAndCommandsQuery = gql`\n  query getPayloadTypesAndCommands{\n    payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n      commands(order_by: {cmd: asc}) {\n        cmd\n        id\n      }\n      id\n      ptype\n    }\n  }\n`;\nexport function EditBlockListDialog({dialogTitle, onSubmit, blockListName: propBlockListName, onClose, currentSelected, editable}) {\n  const [payloadtypes, setPayloadTypes] = React.useState([]);\n  const [selectedCommands, setSelectedCommands] = React.useState({});\n  const [blockListName, setBlockListName] = React.useState(\"\");\n  useQuery(getPayloadTypesAndCommandsQuery, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      if(propBlockListName){\n        setBlockListName(propBlockListName);\n      }\n      // for each of the possible commands mark them as selected or not\n      const updatedPayloadTypes = data.payloadtype.map( p => {\n        let selectedCommands = [];\n        if(currentSelected[p.ptype] !== undefined){\n          selectedCommands = [...currentSelected[p.ptype]];\n        }\n        return {...p, selected: selectedCommands};\n      });\n      setPayloadTypes(updatedPayloadTypes);      \n      setSelectedCommands({...currentSelected});\n      \n    },\n    onError: (data) => {\n\n    }\n  })\n  const onChange = React.useCallback( ({selected, ptype}) => {\n    setSelectedCommands({...selectedCommands, [ptype]: selected});\n  }, [selectedCommands]);\n  const onChangeBlockListName = (name, value, error) => {\n    setBlockListName(value);\n  };\n  const submit = () => {\n    if(blockListName.trim() === \"\"){\n      snackActions.warning(\"Must supply a block list name\");\n      return;\n    }\n    // now diff selectedCommands with props.currentSelected to see which should be added or removed\n    let toAdd = [];\n    let toRemove = [];\n    for(const value of Object.values(selectedCommands)){\n      //key is the payload type name, value is an array of commands\n      for(let i = 0; i < value.length; i++){\n        toAdd.push({command_id: value[i].id, name:blockListName.trim()});\n      }\n    }\n    for(const value of Object.values(currentSelected)){\n      for(let i = 0; i < value.length; i++){\n        // if value[i] in add, then remove it from add because it was selected before and is selected now\n        // if value[i] is not in add, then add it to toRemove because it was selected and is no longer selected\n        let index = toAdd.findIndex(c => c.command_id === value[i].id);\n        if(index > -1){\n          toAdd.splice(index, 1); //remove it\n        }else{\n          toRemove.push({command_id: value[i].id, name: blockListName.trim()});\n        }\n      }\n    }\n    onSubmit({toAdd, toRemove});\n    onClose();\n  }\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{dialogTitle}</DialogTitle>\n      <DialogContent dividers={true}>\n        <MythicTextField disabled={!editable} onChange={onChangeBlockListName} value={blockListName} name=\"Block List Name\" autoFocus requiredValue/>\n        {payloadtypes.map(p => (\n          <PayloadTypeBlockList key={p.ptype} leftTitle={\"Not Blocked\"} onChange={onChange} rightTitle={\"Blocked Commands\"} itemKey={\"cmd\"} right={p.selected} left={p.commands} ptype={p.ptype}/>\n        ))}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} variant=\"contained\" color=\"primary\">\n          Close\n        </Button>\n        <Button onClick={submit} variant=\"contained\" color=\"secondary\">\n          Submit\n        </Button>\n      </DialogActions>\n    </React.Fragment>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EditBlockListDialog} from './EditBlockListDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport TuneIcon from '@material-ui/icons/Tune';\n\nconst newBlockListEntry = gql`\nmutation newBlockListsEntries($entries: [disabledcommandsprofile_insert_input!]!) {\n    insert_disabledcommandsprofile(objects: $entries) {\n        returning {\n            id\n            name\n            command{\n              id\n              cmd\n              payloadtype{\n                ptype\n              }\n            }\n        }\n    }\n}\n`;\nconst deleteBlockListMutation = gql`\nmutation deleteEntireBlockList($name: String!){\n    deleteBlockList(name: $name){\n        status\n        error\n        name\n    }\n}\n`;\nconst deleteBlockListEntriesMutation = gql`\nmutation deleteBlockListEntries($name: String!, $entries: [Int!]!){\n    deleteBlockListEntry(name: $name, entries: $entries){\n        status\n        error\n        name\n        deleted_ids\n    }\n}\n`;\n\nexport function CommandBlockListTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const [blockLists, setBlockLists] = React.useState([]);\n    const [newBlockListEntries] = useMutation(newBlockListEntry, {\n        onCompleted: (data) => {\n            const newBlockList = data.insert_disabledcommandsprofile.returning.reduce( (prev, cur) => {\n                if(prev[cur.command.payloadtype.ptype] === undefined){\n                    prev[cur.command.payloadtype.ptype] = [];\n                }\n                prev[cur.command.payloadtype.ptype].push(cur);\n                return {...prev};\n            }, {});\n            // check if this is part of a new block list\n            \n            let currentBlockLists = [...blockLists];\n            let found = false;\n            const newBlockLists = currentBlockLists.map( cbl => {\n                if(cbl[\"name\"] === data.insert_disabledcommandsprofile.returning[0].name){\n                    found = true;\n                    // now we need to update cbl[\"entries\"] based on the newBlockList dictionary\n                    let newEntries = {};\n                    for(const [key, value] of Object.entries(newBlockList)){\n                        if(newEntries[key] === undefined){\n                            newEntries[key] = [...value];\n                        }else{\n                            newEntries[key] = [...newEntries[key], ...value];\n                        }\n                    }\n                    for(const [key, value] of Object.entries(cbl[\"entries\"])){\n                        if(newEntries[key] === undefined){\n                            newEntries[key] = [...value];\n                        }else{\n                            newEntries[key] = [...newEntries[key], ...value];\n                        }\n                    }\n                    return {...cbl, entries: newEntries};\n                }else{\n                    return {...cbl};\n                }\n            });\n            if(!found){\n                setBlockLists([...newBlockLists, {\"name\": data.insert_disabledcommandsprofile.returning[0].name, \"entries\": newBlockList}]);\n            }else{\n                setBlockLists([...newBlockLists]);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new block lists\");\n          console.log(err);\n        }\n    });\n    const [deleteBlockList] = useMutation(deleteBlockListMutation, {\n        onCompleted: (data) => {\n            if(data.deleteBlockList.status === \"success\"){\n                const filteredBlockLists = blockLists.filter( b => b.name !== data.deleteBlockList.name);\n                setBlockLists(filteredBlockLists);\n                snackActions.success(\"Successfully deleted block list\");\n            }else{\n                snackActions.error(data.deleteBlockList.error);\n            }\n        },\n        onError: (err) => {\n            snackActions.warning(\"Unable to delete block list\");\n            console.log(err);\n        }\n    })\n    const [deleteBlockListEntries] = useMutation(deleteBlockListEntriesMutation, {\n        onCompleted: (data) => {\n            if(data.deleteBlockListEntry.status === \"success\"){\n                snackActions.success(\"Successfully deleted block list\");\n                let currentBlockLists = [...blockLists];\n                const newBlockLists = currentBlockLists.map( cbl => {\n                    if(cbl[\"name\"] === data.deleteBlockListEntry.name){\n                        // now we need to update cbl[\"entries\"] based on the newBlockList dictionary\n                        let newEntries = {};\n                        for(const [key, value] of Object.entries(cbl[\"entries\"])){\n                            const filteredValues = value.filter( e => !data.deleteBlockListEntry.deleted_ids.includes(e.id));\n                            newEntries[key] = filteredValues;\n                        }\n                        return {...cbl, entries: newEntries};\n                    }else{\n                        return {...cbl};\n                    }\n                });\n                setBlockLists([...newBlockLists]);\n            }else{\n                snackActions.error(data.deleteBlockListEntry.error);\n            }\n        },\n        onError: (err) => {\n            snackActions.warning(\"Unable to delete block list\");\n            console.log(err);\n        }\n    })\n    React.useEffect( () => {\n        setBlockLists(props.blockLists);\n    }, [props.blockLists])\n    const onSubmitNewBlockList = ({toAdd}) => {\n        newBlockListEntries({variables: {entries: toAdd}});\n    }\n    const onSubmitEdits = ({toAdd, toRemove}) => {\n        if(toAdd.length > 0){\n            newBlockListEntries({variables: {entries: toAdd}});\n        }\n        const removeEntryIDs = toRemove.map(c => c.command_id);\n        if(removeEntryIDs.length > 0){\n            deleteBlockListEntries({variables: {entries: removeEntryIDs, name: toRemove[0][\"name\"]}});\n        }\n        \n    }\n    const onAcceptDelete = ({name}) => {\n        deleteBlockList({variables:{name}})\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Command Block Lists\n            </Typography>\n            <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Block List</Button>\n            {openNew &&\n                <MythicDialog open={openNew} fullWidth={true} maxWidth=\"lg\"\n                    onClose={()=>{setOpenNewDialog(false);}} \n                    innerDialog={<EditBlockListDialog editable={true} currentSelected={[]} onSubmit={onSubmitNewBlockList} dialogTitle=\"Create New Block List\" onClose={() => setOpenNewDialog(false)}\n                    />}\n                />\n            }\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Modify</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Name</TableCell>\n                        <TableCell >Blocked Commands</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {\n                        blockLists.map( b => (\n                            <CommandBlockListTableRow key={b.name} {...b} onAcceptDelete={onAcceptDelete} onSubmitEdits={onSubmitEdits}/>\n                        ))\n                    }\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\nfunction CommandBlockListTableRow(props){\n    const theme = useTheme();\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [blockedCommandDisplay, setBlockedCommandDisplay] = React.useState([]);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [updatedEntries, setUpdatedEntries] = React.useState({});\n    React.useEffect(() => {\n        let newDisplay = [];\n        let entries = {};\n        for(const [key, value] of Object.entries(props.entries)){\n            const commandNames = value.map(c => c.command.cmd).sort().join(\", \");\n            newDisplay.push(\n                {ptype: key, commands: commandNames}\n            )\n            entries[key] = value.map(c => c.command);\n        }\n        setUpdatedEntries(entries);\n        setBlockedCommandDisplay(newDisplay);\n    }, [props.entries])\n    const onAcceptDelete = () => {\n        setOpenDeleteDialog(false);\n        props.onAcceptDelete({name: props.name})\n    }\n    const onSubmitEdits = ({toAdd, toRemove}) => {\n        props.onSubmitEdits({toAdd, toRemove})\n    }\n    return (\n        <TableRow hover>\n            <TableCell>\n                <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n            </TableCell>\n            <TableCell>\n                <Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} startIcon={<TuneIcon/>} color=\"secondary\" variant=\"contained\">Edit</Button>\n                {openUpdate &&\n                    <MythicDialog open={openUpdate} fullWidth maxWidth={\"lg\"}\n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<EditBlockListDialog editable={false} blockListName={props.name} currentSelected={updatedEntries} onSubmit={onSubmitEdits} dialogTitle=\"Edit Block List\" onClose={() => setOpenUpdateDialog(false)}\n                        />}\n                    />\n                }\n                \n            </TableCell>\n            <TableCell>{props.name}</TableCell>\n            <TableCell>\n                {blockedCommandDisplay.map( b => (\n                    <div key={props.name + b.ptype}>{b.ptype} - {b.commands}</div>\n                    \n                ))}\n            </TableCell>\n        </TableRow>\n    )\n}\n\n","import React from 'react';\nimport { OperationTable } from './OperationTable';\nimport {useQuery, gql} from '@apollo/client';\nimport {CommandBlockListTable} from './CommandBlockListTable';\n\nconst GET_Operations = gql`\nquery GetOperations {\n  operation(order_by: {name: asc}) {\n    complete\n    name\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n}\n`;\nconst GET_BlockLists = gql`\nquery getBlockLists {\n  disabledcommandsprofile(order_by: {name: asc}) {\n    id\n    name\n    command{\n      id\n      cmd\n      payloadtype{\n        ptype\n      }\n    }\n  }\n}\n`;\nexport function Operations(props){\n  const [blockLists, setBlockLists] = React.useState([]);\n  const [operations, setOperations] = React.useState([]);\n    useQuery(GET_Operations, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        setOperations(data.operation);\n      },\n      onError: (data) => {\n\n      }\n    });\n    useQuery(GET_BlockLists, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const condensed = data.disabledcommandsprofile.reduce( (prev, cur) => {\n          if(prev[cur.name] === undefined){\n            prev[cur.name] = {};\n          }\n          if(prev[cur.name][cur.command.payloadtype.ptype] === undefined){\n            prev[cur.name][cur.command.payloadtype.ptype] = [];\n          }\n          prev[cur.name][cur.command.payloadtype.ptype].push(cur);\n          return {...prev};\n        }, {});\n        // now break out into array\n        let arrayForm = [];\n        for(const [key, value] of Object.entries(condensed)){\n          arrayForm.push({\"name\": key, entries: value});\n        }\n        setBlockLists(arrayForm);\n      },\n      onError: (data) => {\n\n      }\n    });\n    const onUpdateOperation = ({id, name, complete}) => {\n      const updatedOperations = operations.map( o => {\n        if(o.id === id){\n          return {...o, name, complete};\n        }\n        return {...o};\n      })\n      setOperations(updatedOperations);\n    }\n    const onNewOperation = ({id, name, admin}) => {\n      setOperations([...operations, {id, name, admin}])\n    }\n    return (\n      <div style={{  height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n        <OperationTable operations={operations} onUpdateOperation={onUpdateOperation} onNewOperation={onNewOperation}/>\n        <CommandBlockListTable blockLists={blockLists} />\n      </div>\n    );\n} \n","import React, {useEffect, useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport \"ace-builds/src-noconflict/theme-monokai\";\nimport {useTheme} from '@material-ui/core/styles';\nimport { gql, useQuery } from '@apollo/client';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nconst getCommandsAndPayloadTypesQuery = gql`\nquery getCommandsAndPayloadTypes{\n  payloadtype(order_by: {ptype: asc}){\n    id\n    ptype\n    commands(order_by: {cmd: asc}){\n      id\n      cmd\n    }\n  }\n}\n`;\n\nexport function EditScriptDialog(props) {\n    const theme = useTheme();\n    const [script, setScript] = React.useState(\"\");\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedCommand, setSelectedCommand] = React.useState('');\n    const [payloadTypeCmdOptions, setPayloadTypeCmdOptions] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [author, setAuthor] = React.useState('');\n    const inputPTRef = useRef(null); \n    const inputCMDRef = useRef(null); \n    useQuery(getCommandsAndPayloadTypesQuery, {\n      onCompleted: data => {\n        setPayloadTypeCmdOptions(data.payloadtype);\n        if(props.payload_type_id !== undefined){\n          setSelectedPayloadType(props.payload_type_id);\n        }else{\n          if(data.payloadtype.length > 0){\n            setSelectedPayloadType(data.payloadtype[0].id);\n          }\n        }\n        if(props.command_id !== undefined){\n          setSelectedCommand(props.command_id);\n          for(let i = 0; i < data.payloadtype.length; i++){\n            if(props.payload_type_id === data.payloadtype[i].id){\n              setCommandOptions(data.payloadtype[i].commands)\n            }\n          }\n        }else{\n          if(data.payloadtype.length > 0){\n            if(data.payloadtype[0].commands.length > 0){\n              setCommandOptions(data.payloadtype[0].commands);\n              setSelectedCommand(data.payloadtype[0].commands[0].id);\n            }\n          }\n        }\n        if(props.author !== undefined){\n          setAuthor(props.author);\n        }\n      },\n      onError: data => {\n\n      }\n    })\n    useEffect( () => {\n        if(props.script !== undefined){\n          setScript(atob(props.script));\n        }        \n    }, [props.script]);\n    const onChange = (value) => {\n        setScript(value);\n    }\n    const onSubmit = () => {\n        props.onSubmitEdit({script: btoa(script), command_id: selectedCommand, payload_type_id: selectedPayloadType, author});\n        props.onClose();\n    }\n    const onRevert = () => {\n        props.onRevert();\n        props.onClose();\n    }\n    const onChangeSelectedPayloadType = (event) => {\n      setSelectedPayloadType(event.target.value);\n      const cmds = payloadTypeCmdOptions.filter( (p) => p.id === event.target.value);\n      setCommandOptions(cmds[0].commands);\n      setSelectedCommand(cmds[0].commands[0].id);\n    }\n    const onChangeSelectedCommand = (event) => {\n      setSelectedCommand(event.target.value);\n    }\n    const onChangeAuthor = (name, value, error) => {\n      setAuthor(value);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >\n          {props.title ? props.title : \"Edit BrowserScript Code\"}\n          </DialogTitle>\n        <DialogContent dividers={true} style={{height: \"calc(80vh)\"}}>\n        <FormControl style={{width: \"50%\"}}>\n            <InputLabel ref={inputPTRef}>Payload Type</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedPayloadType}\n              onChange={onChangeSelectedPayloadType}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {payloadTypeCmdOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"payloadtype\" + opt.id}>{opt.ptype}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <FormControl style={{width: \"50%\", paddingBottom: \"10px\"}}>\n            <InputLabel ref={inputCMDRef}>Command</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedCommand}\n              onChange={onChangeSelectedCommand}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {commandOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"command\" + opt.id}>{opt.cmd}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <MythicTextField value={author} onChange={onChangeAuthor} name=\"Author\" fullWidth />\n           <AceEditor\n                mode=\"javascript\"\n                theme={theme.palette.type === 'dark' ? 'monokai' : 'github'}\n                width=\"100%\"\n                height=\"100%\"\n                value={script} \n                focus={true}\n                onChange={onChange}\n                setOptions={{\n                \n                }}\n            />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" style={{backgroundColor: theme.palette.primary.main}}>\n            Close\n          </Button>\n          {props.new ? (\n            <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n              Create\n          </Button>\n          ) : (\n            <React.Fragment>\n              <Button onClick={onRevert} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n                Revert\n              </Button>\n          \n              <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                Save\n              </Button>\n            </React.Fragment>\n          )}\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {Button, Switch} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function BrowserScriptsTableRow(props){\n    const theme = useTheme();\n    const [openEdit, setOpenEdit] = React.useState(false);\n    const [isApplied, setIsApplied] = React.useState(false);\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const onSubmitEdit = ({script, command_id, payload_type_id, author}) => {\n        props.onSubmitEdit({browserscript_id: props.id, script, command_id, payload_type_id, author});\n    }\n    const onRevert = () => {\n        props.onRevert({browserscript_id: props.id, script: props.container_version});\n    }\n    const onSubmitApplyToOperation = () => {\n        props.onSubmitApplyToOperation({browserscript_id: props.id});\n    }\n    const onSubmitRemoveFromOperation = () => {\n        props.onSubmitRemoveFromOperation({browserscript_id: props.id});\n    }\n    useEffect( () => {\n        let found = false;\n        props.browserscriptoperations.forEach( (op) => {\n            if(op.operation_id === props.operation_id){\n                found = true;\n            }\n        } );\n        setIsApplied(found);\n    }, [props.browserscriptoperations, props.operation_id]);\n    const onToggleActive = () => {\n        props.onToggleActive({browserscript_id: props.id, active: !props.active});\n    }\n    const onConfirmDelete = () => {\n        props.onDelete({browserscript_id: props.id})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.id} hover>\n                <TableCell>\n                    <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onConfirmDelete} open={openDeleteDialog}/>\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onToggleActive}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'checkbox', \"track\": \"white\" }}\n                        name=\"Active\"\n                      />\n                </TableCell>\n                <TableCell>{props.payloadtype.ptype}</TableCell>\n                <TableCell>{props.command.cmd}</TableCell>\n                <TableCell>{props.author}</TableCell>\n                <TableCell>{props.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" onClick={ () => {setOpenEdit(true);} } color=\"primary\"> Edit </Button></TableCell>\n                <TableCell>\n                    {isApplied ?\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitRemoveFromOperation} color=\"secondary\">Remove</Button>)\n                    :\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitApplyToOperation} color=\"primary\">Apply</Button>)\n                    }\n                </TableCell>\n                {openEdit ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openEdit} \n                        onClose={()=>{setOpenEdit(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenEdit(false);}} payload_type_id={props.payloadtype.id} command_id={props.command.id}\n                                script={props.script} onSubmitEdit={onSubmitEdit} onRevert={onRevert} author={props.author}/>\n                        } />    \n                    ) : (null)\n                }\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React  from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsTableRow } from './BrowserScriptsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport Button from '@material-ui/core/Button';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\n\n\nexport function BrowserScriptsTable(props){\n    const theme = useTheme();\n    const [openNewScriptDialog, setOpenNewScriptDialog] = React.useState(false);\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Browser Scripts\n                </Typography>\n                <Button size=\"small\" onClick={() => setOpenNewScriptDialog(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Script</Button>\n                {openNewScriptDialog ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openNewScriptDialog} \n                        onClose={()=>{setOpenNewScriptDialog(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenNewScriptDialog(false);}} title=\"Create New Browser Script\" new={true} onSubmitEdit={props.onSubmitNew} />\n                        } />    \n                    ) : (null)\n                }\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Active</TableCell>\n                        <TableCell >Payload</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell> Author</TableCell>\n                        <TableCell style={{width: \"15em\"}}>User Modified?</TableCell>\n                        <TableCell style={{width: \"8em\"}}> Edit</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Apply to Operation</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.browserscripts.map( (op) => (\n                    <BrowserScriptsTableRow onSubmitApplyToOperation={props.onSubmitApplyToOperation} \n                    onSubmitRemoveFromOperation={props.onSubmitRemoveFromOperation} \n                    operation_id={props.operation_id} onToggleActive={props.onToggleActive} \n                    onSubmitEdit={props.onSubmitEdit} onRevert={props.onRevert} \n                    onToggleOperation={props.onToggleOperation}\n                    onDelete={props.onDelete}\n                        key={\"script\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n        \n    )\n}\n\n","import React, {useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport {muiTheme} from '../../../themes/Themes';\n\nexport function BrowserScriptsOperationsTableRow(props){\n    const [openViewScript, setOpenViewScript] = React.useState(false);\n    const [displayName, setDisplayName] = React.useState(\"\");\n\n    useEffect( () => {\n        setDisplayName(props.browserscript.command === null ? \"Support Script: \" + props.browserscript.name : props.browserscript.command.cmd);\n    }, [props.browserscript]);\n    return (\n        <React.Fragment>\n            <TableRow key={\"opscript\" + props.browserscript.id}>\n                <TableCell>{props.browserscript.payloadtype.ptype}</TableCell>\n                <TableCell>{displayName}</TableCell>\n                <TableCell>{props.browserscript.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell>{props.operation.admin.username}</TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" style={{color: muiTheme.palette.info.main}} onClick={() => {setOpenViewScript(true);}}> View </Button></TableCell>    \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openViewScript} \n                    onClose={()=>{setOpenViewScript(false);}} \n                    innerDialog={\n                        <AceEditor\n                            mode=\"javascript\"\n                            theme=\"github\"\n                            width=\"100%\"\n                            value={atob(props.browserscript.script)} \n                            focus={true}\n                            readOnly={true}\n                            onChange={() => {}}\n                            setOptions={{\n                            \n                            }}\n                        />\n                    } />\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsOperationsTableRow } from './BrowserScriptsOperationsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function BrowserScriptsOperationsTable(props){\n    const theme = useTheme();\n    return (\n        props.browserscriptoperation.length > 0 &&\n            <React.Fragment>\n                <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        Operation Browser Scripts\n                    </Typography>\n                </Paper>\n                <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(30vh)\"}}>\n                    <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell style={{width: \"10em\"}}>Payload</TableCell>\n                                <TableCell style={{}}>Command</TableCell>\n                                <TableCell style={{width: \"5em\"}}>User Modified?</TableCell>\n                                <TableCell style={{}}>Operator</TableCell>\n                                <TableCell style={{width: \"5em\"}}>View Script</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                        {props.browserscriptoperation.map( (op) => (\n                            <BrowserScriptsOperationsTableRow\n                                key={\"opscriptrow\" + op.browserscript.id}\n                                {...op}\n                            />\n                        ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </React.Fragment>\n    )\n}\n\n","import React  from 'react';\nimport { gql, useMutation, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {BrowserScriptsTable} from './BrowserScriptsTable';\nimport {BrowserScriptsOperationsTable} from './BrowserScriptsOperationsTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst SUB_BrowserScripts = gql`\nsubscription SubscribeBrowserScripts($operator_id: Int!) {\n  browserscript(where: {operator_id: {_eq: $operator_id}, for_new_ui: {_eq: true}}, order_by: {payloadtype: {ptype: asc}}) {\n    active\n    author\n    user_modified\n    script\n    payloadtype {\n      ptype\n      id\n    }\n    name\n    id\n    creation_time\n    container_version_author\n    container_version\n    command {\n      cmd\n      id\n    }\n    browserscriptoperations {\n      operation_id\n      id\n    }\n  }\n}\n `;\nconst SUB_OperationBrowserScripts = gql`\nsubscription SubscribeOperationBrowserScripts($operation_id: Int!) {\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {for_new_ui: {_eq: true}}}){\n    browserscript{\n        active\n        author\n        user_modified\n        script\n        payloadtype {\n          ptype\n          id\n        }\n        name\n        id\n        creation_time\n        container_version_author\n        container_version\n        command {\n          cmd\n          id\n        }\n      }\n   operation{\n    admin{\n        username\n    }\n   }\n  }\n}\n `;\nconst updateBrowserScriptActive = gql`\nmutation updateBrowserScriptActive($browserscript_id: Int!, $active: Boolean!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {active: $active}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptScript = gql`\nmutation updateBrowserScriptScript($browserscript_id: Int!, $script: String!, $command_id: Int!, $payload_type_id: Int!, $author: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, author: $author, user_modified: true, command_id: $command_id, payload_type_id: $payload_type_id}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptRevert = gql`\nmutation updateBrowserScriptRevert($browserscript_id: Int!, $script: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, user_modified: false}) {\n    id\n  }\n}\n`;\nconst addBrowserScript = gql`\nmutation insertNewBrowserScript($script: String!, $author: String!, $payload_type_id: Int!, $command_id: Int!){\n  insert_browserscript_one(object: {script: $script, author: $author, payload_type_id: $payload_type_id, command_id: $command_id}){\n    id\n  }\n}\n`;\nconst deleteBrowserScriptMutation = gql`\nmutation deleteBrowserScriptMutation($browserscript_id: Int!){\n  delete_browserscript_by_pk(id: $browserscript_id){\n    id\n  }\n}\n`;\n\n\nexport function BrowserScripts(props){\n    const me = useReactiveVar(meState);\n    const [browserScripts, setBrowserScripts] = React.useState([]);\n    const [operationBrowserScripts, setOperationBrowserScripts] = React.useState({\"browserscriptoperation\": []});\n    const mountedRef = React.useRef(true);\n    useSubscription(SUB_BrowserScripts, {\n      variables: {operator_id: me.user.id}, fetchPolicy: \"no-cache\",\n      shouldResubscribe: true,\n      onSubscriptionData: ({subscriptionData}) => {\n        console.log(subscriptionData)\n        if(!mountedRef.current){return}\n        let scripts = [...subscriptionData.data.browserscript];\n        scripts.sort((a,b) => {\n          if(a.payloadtype.ptype === b.payloadtype.ptype){\n            return a.command.cmd.localeCompare(b.command.cmd);\n          }else{\n            return 0;\n          }\n        \n        } )\n        setBrowserScripts(scripts);\n      }\n    });\n      useSubscription(SUB_OperationBrowserScripts, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"no-cache\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(!mountedRef.current){return}\n          setOperationBrowserScripts(subscriptionData.data);\n        }\n    });\n    const [toggleActive] = useMutation(updateBrowserScriptActive, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [updateScript] = useMutation(updateBrowserScriptScript, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [revertScript] = useMutation(updateBrowserScriptRevert, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [createBrowserScript] = useMutation(addBrowserScript, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully created new browser script!\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to create new script: \" + data);\n      }\n    });\n    const [deleteBrowserScript] = useMutation(deleteBrowserScriptMutation, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully deleted browser script\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to delete browser script: \" + data);\n      }\n    })\n    const onToggleActive = ({browserscript_id, active}) => {\n        toggleActive({variables: {browserscript_id, active}});\n    }\n    const onSubmitEdit = ({browserscript_id, script, command_id, payload_type_id, author}) => {\n        updateScript({variables: {browserscript_id, script, command_id, payload_type_id, author}});\n    }\n    const onRevert = ({browserscript_id, script}) => {\n        revertScript({variables:{browserscript_id, script}});\n    }\n    const onSubmitApplyToOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitRemoveFromOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitCreateNewBrowserScript = ({script, author, payload_type_id, command_id}) => {\n      createBrowserScript({variables: {author, script, payload_type_id, command_id}});\n    }\n    const onDelete = ({browserscript_id}) => {\n      deleteBrowserScript({variables: {browserscript_id}});\n    }\n    React.useRef( () => {\n      return () => {\n        mountedRef.current = false;\n      }\n    }, [])\n    return (\n    <React.Fragment>\n        <BrowserScriptsTable browserscripts={browserScripts} operation_id={me.user.current_operation_id} onToggleActive={onToggleActive} \n          onSubmitEdit={onSubmitEdit} onRevert={onRevert} onSubmitNew={onSubmitCreateNewBrowserScript} onDelete={onDelete}\n          onSubmitApplyToOperation={onSubmitApplyToOperation} \n          onSubmitRemoveFromOperation={onSubmitRemoveFromOperation}\n        />\n        <BrowserScriptsOperationsTable {...operationBrowserScripts} />\n    </React.Fragment>\n    );\n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($payload_id: Int!, $description: String) {\n  update_payload_by_pk(pk_columns: {id: $payload_id}, _set: {tag: $description}) {\n    tag\n    id\n  }\n}\n`;\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    tag\n    id\n  }\n}\n`;\n\nexport function PayloadDescriptionDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.tag)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated Description\")\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {payload_id: props.payload_id, description: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($file_id: Int!, $filename: bytea!) {\n  update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {filename: $filename}) {\n    filename_text\n    id\n  }\n}\n`;\nconst getFilenameQuery = gql`\nquery getFilenameQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    filemetum {\n      filename_text\n      id\n    }\n    id\n  }\n}\n`;\n\nexport function PayloadFilenameDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const [fileId, setFileId] = useState();\n    const { loading, error } = useQuery(getFilenameQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.filemetum.filename_text);\n            setFileId(data.payload_by_pk.filemetum.id);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n          snackActions.success(\"Updated filename\");\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {file_id: fileId, filename: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Filename</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    build_message\n    build_stderr\n    build_stdout\n    id\n  }\n}\n`;\n\nexport function PayloadBuildMessageDialog(props) {\n    const [payloadData, setPayloadData] = useState({});\n    const [viewError, setViewError] = useState(false);\n    const theme = useTheme();\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setViewError(props.viewError);\n            let output = \"Message:\\n\" + data.payload_by_pk.build_message;\n            output += \"\\nSTDOUT:\\n\" + data.payload_by_pk.build_stdout;\n            setPayloadData({\"message\": output,\n                            \"error\": \"STDERR:\\n\" + data.payload_by_pk.build_stderr});\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        setViewError(props.viewError);\n    }, [props.viewError]);\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Build Messages</DialogTitle>\n        <DialogContent dividers={true}>\n          <AceEditor \n              mode=\"json\"\n              theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n              fontSize={14}\n              showGutter={true}\n              height={\"100px\"}\n              highlightActiveLine={true}\n              value={viewError ? payloadData[\"error\"] : payloadData[\"message\"]}\n              width={\"100%\"}\n              minLines={2}\n              maxLines={50}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {MythicStyledTooltip} from '../../MythicComponents/MythicStyledTooltip';\nimport PermScanWifiIcon from '@material-ui/icons/PermScanWifi';\n\nexport function PayloadsTableRowC2Status(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {\n                props.payloadc2profiles.map( (c2) => (\n                    <Typography key={c2.c2profile.name + props.uuid} style={{display: \"flex\"}}> \n                        {c2.c2profile.is_p2p ?\n                            ( c2.c2profile.container_running ? \n                                <MythicStyledTooltip title=\"C2 Container online\">\n                                    <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                                </MythicStyledTooltip>: \n                                <MythicStyledTooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/>\n                                </MythicStyledTooltip> )\n                            :\n                        ( c2.c2profile.running ? \n                            <MythicStyledTooltip title=\"C2 Internal Server Running\">\n                                <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                            </MythicStyledTooltip> : \n                            (c2.c2profile.container_running ? (\n                                <MythicStyledTooltip title=\"C2 Internal Server Not Running, but Container Online\">\n                                    <PermScanWifiIcon style={{color: theme.palette.warning.main}}/> \n                                </MythicStyledTooltip>\n                            ) : (\n                                <MythicStyledTooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/> \n                                </MythicStyledTooltip>\n                            ))\n                            )\n                        } - {c2.c2profile.name}\n                    </Typography>\n                )) \n            }\n                \n        </React.Fragment>\n        )\n}\n","import IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { snackActions } from '../../utilities/Snackbar';\nimport ReportProblemIcon from '@material-ui/icons/ReportProblem';\nimport {MythicStyledTooltip} from '../../MythicComponents/MythicStyledTooltip';\n\nexport function PayloadsTableRowBuildStatus(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {props.build_phase === \"success\" ?\n                ( <MythicStyledTooltip title=\"Download payload\">\n                    <IconButton variant=\"contained\" target=\"_blank\" color=\"primary\" href={window.location.origin + \"/direct/download/\" + props.filemetum.agent_file_id} download>\n                        <GetAppIcon style={{color: theme.palette.success.main}} />\n                    </IconButton>\n                  </MythicStyledTooltip>\n                    \n                )\n                : \n                (props.build_phase === \"building\" ? \n                (<MythicStyledTooltip title=\"Payload still building\">\n                    <IconButton variant=\"contained\"><CircularProgress size={20} thickness={4} style={{color: theme.palette.info.main}}/></IconButton>\n                </MythicStyledTooltip>) : \n                (<MythicStyledTooltip title=\"Failed to build payload\">\n                    <IconButton variant=\"contained\" onClick={() => snackActions.warning(\"Payload failed to build, cannot download\")}>\n                        <ReportProblemIcon style={{color: theme.palette.error.main}} />\n                    </IconButton>\n                </MythicStyledTooltip>\n                ) \n                )\n            }\n        </React.Fragment>\n\n        )\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst checkPayloadConfigurationQuery = gql`\nquery checkPayloadConfigurationQuery($uuid: String!) {\n  config_check(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadConfigCheckDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const theme = useTheme();\n    const { loading, error } = useQuery(checkPayloadConfigurationQuery, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.config_check.status === \"success\"){\n            setMessage(data.config_check.output);\n          }else{\n            snackActions.warning(data.config_check.error);\n            setMessage(\"Error!\\n\" + data.config_check.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Config Check</DialogTitle>\n        <DialogContent dividers={true}>\n        <AceEditor \n              mode=\"json\"\n              theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n              fontSize={14}\n              showGutter={true}\n              height={\"100px\"}\n              highlightActiveLine={true}\n              value={message}\n              width={\"100%\"}\n              minLines={2}\n              maxLines={50}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst generateRedirectRulesMutation = gql`\nquery generateRedirectRulesMutation($uuid: String!) {\n  redirect_rules(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadRedirectRulesDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const theme = useTheme();\n    const { loading, error } = useQuery(generateRedirectRulesMutation, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.redirect_rules.status === \"success\"){\n            setMessage(data.redirect_rules.output);\n          }else{\n            snackActions.warning(data.redirect_rules.error);\n            setMessage(\"Error!\\n\" + data.redirect_rules.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Redirect Rules Check</DialogTitle>\n        <DialogContent dividers={true}>\n        <AceEditor \n              mode=\"json\"\n              theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n              fontSize={14}\n              showGutter={true}\n              height={\"100px\"}\n              highlightActiveLine={true}\n              value={message}\n              width={\"100%\"}\n              minLines={2}\n              maxLines={50}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from './DetailedPayloadTable';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {PayloadDescriptionDialog} from './PayloadDescriptionDialog';\nimport {PayloadFilenameDialog} from './PayloadFilenameDialog';\nimport {PayloadBuildMessageDialog} from './PayloadBuildMessageDialog';\nimport {PayloadsTableRowC2Status} from './PayloadsTableRowC2Status';\nimport {PayloadsTableRowBuildStatus} from './PayloadsTableRowBuildStatus';\nimport {PayloadConfigCheckDialog} from './PayloadConfigCheckDialog';\nimport {PayloadRedirectRulesDialog} from './PayloadRedirectRulesDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport InfoIcon from '@material-ui/icons/Info';\nimport {useMutation, gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nconst rebuildPayloadMutation = gql`\nmutation triggerRebuildMutation($uuid: String!) {\n  rebuild_payload(uuid: $uuid) {\n      status\n      error\n      uuid\n  }\n}\n`;\nconst exportPayloadConfigQuery = gql`\nquery exportPayloadConfigQuery($uuid: String!) {\n  export_payload_config(uuid: $uuid) {\n      status\n      error \n      config \n  }\n}\n`;\n\nexport function PayloadsTableRow(props){\n    const [viewError, setViewError] = React.useState(true);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [openDescription, setOpenDescriptionDialog] = React.useState(false);\n    const [openFilename, setOpenFilenameDialog] = React.useState(false);\n    const [openBuildMessage, setOpenBuildMessageDialog] = React.useState(false);\n    const [openDetailedView, setOpenDetailedView] = React.useState(false);\n    const [openConfigCheckDialog, setOpenConfigCheckDialog] = React.useState(false);\n    const [openRedirectRulesDialog, setOpenRedirectRulesDialog] = React.useState(false);\n    const dropdownAnchorRef = useRef(null);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [triggerRebuild] = useMutation(rebuildPayloadMutation, {\n      onCompleted: (data) => {\n        console.log(data);\n        snackActions.success(\"Successfully triggered rebuild\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to trigger rebuild: \" + data);\n      }\n    });\n    const [exportConfig] = useLazyQuery(exportPayloadConfigQuery, {\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        if(data.export_payload_config.status === \"success\"){\n          const dataBlob = new Blob([data.export_payload_config.config], {type: 'text/plain'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = props.filemetum.filename_text + \".json\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = props.filemetum.filename_text + \".json\";\n            document.body.appendChild(element);\n            element.click();\n          }\n        }else{\n          snackActions.error(\"Failed to export configuration: \" + data.export_payload_config.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to export configuration: \" + data)\n      }\n    })\n    const onAlertChanged = () => {\n        const {id, callback_alert} = props;\n        props.onAlertChanged(id, !callback_alert);\n    }\n    const onAcceptDelete = () => {\n        props.onDeletePayload(props.filemetum.id);\n        setOpenDeleteDialog(false);\n    }\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setOpenUpdateDialog(false);\n    };\n    const options = [{name: 'Rename File', click: () => {\n                        setOpenFilenameDialog(true);\n                     }},\n                     {name: 'Edit Description', click: () => {\n                        setOpenDescriptionDialog(true);\n                     }},\n                     {name: props.callback_alert ? 'Stop Alerting to New Callbacks' : \"Start Alerting to New Callbacks\", click: () => {\n                        onAlertChanged();\n                      }},\n                     {name: 'View Build Message/Stdout', click: () => {\n                        setViewError(false);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'View Build Errors', click: () => {\n                        setViewError(true);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'Trigger New Build', click: () => {\n                      triggerRebuild({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Export Payload Config', click: () => {\n                      exportConfig({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Generate Redirect Rules', click: () => {\n                      setOpenRedirectRulesDialog(true);\n                    }},\n                    {name: 'Check Agent C2 Configuration', click: () => {\n                      setOpenConfigCheckDialog(true);\n                    }}\n                     ]\n    ;\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setOpenUpdateDialog(false);\n      };\n    const shouldDisplay = React.useMemo(() => {\n      if(!props.deleted && !props.auto_generated){\n        return true;\n      }else if(props.deleted && props.showDeleted){\n        if(!props.auto_generated){return true}\n        if(props.auto_generated && props.showAutoGenerated){return true}\n        return false; // we're auto generated but we aren't showing autogenerated\n      }else if(props.auto_generated && props.showAutoGenerated){\n        if(!props.deleted){return true}\n        if(props.deleted && props.showDeleted){return true}\n        return false; // we're deleted and we aren't showing deleted\n      }else{\n        return false; // we're either deleted or auto generated and we aren't showing those\n      }\n    }, [props.deleted, props.showDeleted, props.auto_generated, props.showAutoGenerated]);\n    return (\n      shouldDisplay ? (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.uuid} hover>\n                <TableCell>\n                  {props.deleted ? (\n                    <MythicStyledTooltip title={\"Mark payload as not deleted so you can get callbacks, but does not recreate the payload on disk\"}>\n                      <IconButton size=\"small\" onClick={() => {props.onRestorePayload(props.id)}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon /></IconButton>\n                    </MythicStyledTooltip>\n                    \n                  ) : (\n                    <React.Fragment>\n                      <MythicStyledTooltip title={\"Delete the payload from disk and mark as deleted. No new callbacks can be generated from this payload\"}>\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                      </MythicStyledTooltip>\n                      \n                      {openDelete && \n                        <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                      }\n                    </React.Fragment>\n                  )}\n                  \n                </TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell><Button ref={dropdownAnchorRef} size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Actions</Button>\n                <Popper open={openUpdate} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name + props.uuid}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n                {openDescription ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDescription} \n                        onClose={()=>{setOpenDescriptionDialog(false);}} \n                        innerDialog={<PayloadDescriptionDialog payload_id={props.id} onClose={()=>{setOpenDescriptionDialog(false);}} />}\n                    />\n                ): (null) }\n                {openFilename ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilename} \n                        onClose={()=>{setOpenFilenameDialog(false);}} \n                        innerDialog={<PayloadFilenameDialog payload_id={props.id} onClose={()=>{setOpenFilenameDialog(false);}} />}\n                    />\n                ): (null) }\n                {openBuildMessage ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openBuildMessage} \n                        onClose={()=>{setOpenBuildMessageDialog(false);}} \n                        innerDialog={<PayloadBuildMessageDialog payload_id={props.id} viewError={viewError} onClose={()=>{setOpenBuildMessageDialog(false);}} />}\n                    />\n                ): (null) }\n                {openConfigCheckDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openConfigCheckDialog} \n                        onClose={()=>{setOpenConfigCheckDialog(false);}} \n                        innerDialog={<PayloadConfigCheckDialog uuid={props.uuid} onClose={()=>{setOpenConfigCheckDialog(false);}} />}\n                    />\n                ): (null) }\n                {openRedirectRulesDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openRedirectRulesDialog} \n                        onClose={()=>{setOpenRedirectRulesDialog(false);}} \n                        innerDialog={<PayloadRedirectRulesDialog uuid={props.uuid} onClose={()=>{setOpenRedirectRulesDialog(false);}} />}\n                    />\n                ): (null) }\n                </TableCell>\n                <TableCell>\n                    <PayloadsTableRowBuildStatus {...props} />\n                </TableCell>\n                <TableCell>{props.filemetum.filename_text}</TableCell>\n                <TableCell>{props.tag}</TableCell>\n                <TableCell>\n                    <PayloadsTableRowC2Status payloadc2profiles={props.payloadc2profiles} uuid={props.uuid} />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                        <InfoIcon />\n                    </IconButton>\n                </TableCell>\n            </TableRow>\n            <TableRow>\n            {openDetailedView ? (\n              <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                  onClose={()=>{setOpenDetailedView(false);}} \n                  innerDialog={<DetailedPayloadTable {...props} payload_id={props.id} onClose={()=>{setOpenDetailedView(false);}} />}\n              />\n            ) : (null) }\n          </TableRow>\n        </React.Fragment>\n      ) : (null)\n    )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\nexport function ImportPayloadConfigDialog(props) {\n  const [fileValue, setFileValue] = React.useState({name: \"\"});\n  const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    const onCommitSubmit = () => {\n      createPayloadMutation({variables: {payload: fileValue.contents}}).catch( (e) => {console.log(e)} );\n        props.onClose();\n    }\n    const onFileChange = (evt) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n          const contents = e.target.result;\n          setFileValue({name: evt.target.files[0].name, contents: contents});\n      }\n      reader.readAsBinaryString(evt.target.files[0]);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Import Payload Config to Generate New Payload</DialogTitle>\n        <DialogContent dividers={true}>\n          <Button variant=\"contained\" component=\"label\"> \n              { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n              <input onChange={onFileChange} type=\"file\" hidden /> \n          </Button>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { PayloadsTableRow } from './PayloadsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport {ImportPayloadConfigDialog} from './ImportPayloadConfigDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport {useHistory} from 'react-router-dom';\n\n\nexport function PayloadsTable({payload, onDeletePayload, onUpdateCallbackAlert, onRestorePayload}){\n    const theme = useTheme();\n    const [showDeleted, setShowDeleted] = React.useState(false);\n    const [showAutoGenerated, setShowAutoGenerated] = React.useState(false);\n    const [openPayloadImport, setOpenPayloadImport] = React.useState(false);\n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const history = useHistory();\n    const toggleShowDeleted = () => {\n        setShowDeleted(!showDeleted);\n    }\n    const toggleShowAutoGenerated = () => {\n        setShowAutoGenerated(!showAutoGenerated);\n    }\n    \n    const dropDownOptions = [\n        {\n            name: \"Generate New Payload\",\n            click: () => {\n                history.push(\"/new/createpayload\");\n            }\n        },\n        {\n            name: \"Generate New Wrapper Payload\",\n            click: () => {\n                history.push(\"/new/createwrapper\");\n            }\n        },\n        {\n            name: \"Import Payload Config\",\n            click: () => {\n                setOpenPayloadImport(true)\n            }\n        },\n        {\n            name: showDeleted ? \"Hide Deleted Payloads\" : \"Show Deleted Payloads\",\n            click: toggleShowDeleted\n        },\n        {\n            name: showAutoGenerated ? \"Hide Autogenerated Payloads\" : \"Show Autogenerated Payloads\",\n            click: toggleShowAutoGenerated\n        }\n    ]\n    const handleMenuItemClick = (event, index) => {\n        dropDownOptions[index].click();\n        setDropdownOpen(false);\n    };\n    return (\n        <div style={{display: \"flex\", flexDirection: \"column\", width: \"100%\", height: \"100%\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Payloads\n                </Typography>\n                <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginRight: \"10px\", marginTop:\"10px\", float: \"right\"}} color=\"primary\">\n                    <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                        aria-expanded={dropdownOpen ? 'true' : undefined}\n                        aria-haspopup=\"menu\"\n                        onClick={() => setDropdownOpen(!dropdownOpen)}>\n                            Actions <ArrowDropDownIcon />\n                    </Button>\n                </ButtonGroup>\n                <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 10}}>\n                {({ TransitionProps, placement }) => (\n                    <Grow\n                    {...TransitionProps}\n                    style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                    }}\n                    >\n                    <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={() => setDropdownOpen(false)}>\n                        <MenuList id=\"split-button-menu\">\n                            {dropDownOptions.map((option, index) => (\n                            <MenuItem\n                                key={option.name}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                            >\n                                {option.name}\n                            </MenuItem>\n                            ))}\n                        </MenuList>\n                        </ClickAwayListener>\n                    </Paper>\n                    </Grow>\n                )}\n                </Popper>\n                {openPayloadImport &&\n                    <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openPayloadImport} \n                        onClose={()=>{setOpenPayloadImport(false);}} \n                        innerDialog={<ImportPayloadConfigDialog onClose={()=>{setOpenPayloadImport(false);}} />}\n                    />\n                }\n            </Paper>  \n            <div style={{display: \"flex\", flexGrow: 1, overflow: \"auto\"}}>\n                <TableContainer component={Paper} className=\"mythicElement\">\n                    <Table size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell style={{width: \"4rem\"}}> Delete</TableCell>\n                                <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                                <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                                <TableCell style={{width: \"6rem\"}}>Download</TableCell>\n                                <TableCell>File</TableCell>\n                                <TableCell>Description</TableCell>\n                                <TableCell >C2 Status</TableCell>\n                                <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                        \n                        {payload.map( (op) => (\n                            <PayloadsTableRow\n                                onDeletePayload={onDeletePayload}\n                                onAlertChanged={onUpdateCallbackAlert}\n                                showDeleted={showDeleted}\n                                showAutoGenerated={showAutoGenerated}\n                                onRestorePayload={onRestorePayload}\n                                key={\"payload\" + op.id}\n                                {...op}\n                            />\n                        ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </div>\n        </div>\n    )\n}\n\n","import React from 'react';\nimport { PayloadsTable } from './PayloadsTable';\nimport {useMutation, useQuery, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nconst payloadFragment = gql`\nfragment payloadData on payload {\n  build_message\n  build_phase\n  build_stderr\n  callback_alert\n  creation_time\n  id\n  operator {\n    id\n    username\n  }\n  uuid\n  tag\n  deleted\n  auto_generated\n  payloadtype {\n    id\n    ptype\n  }\n  filemetum {\n    agent_file_id\n    filename_text\n    id\n  }\n  payloadc2profiles {\n    c2profile {\n      running\n      name\n      is_p2p\n      container_running\n    }\n  }\n}\n`;\nconst SUB_Payloads = gql`\n${payloadFragment}\nsubscription SubPayloadsQuery($operation_id: Int!) {\n  payload(where: { operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    ...payloadData\n  }\n}\n`;\nconst Get_Payloads = gql`\n${payloadFragment}\nquery GetPayloadsQuery($operation_id: Int!) {\n  payload(where: { operation_id: {_eq: $operation_id}}, order_by: {id: desc}, limit: 20) {\n    ...payloadData\n  }\n}\n`;\nconst payloadsDelete = gql`\nmutation PayloadsDeletePayloadMutation($id: Int!) {\n  deleteFile(file_id: $id) {\n      file_ids\n      status\n      error\n      payload_ids\n  }\n}\n`;\nconst payloadsCallbackAlert = gql`\nmutation PayloadsCallbackAlertMutation($id: Int!, $callback_alert: Boolean!) {\n  update_payload_by_pk(pk_columns: {id: $id}, _set: {callback_alert: $callback_alert}) {\n    id\n    callback_alert\n  }\n}\n`;\nconst restorePayloadMutation = gql`\nmutation RestorePayloadToUndeleted($id: Int!){\n  update_payload_by_pk(pk_columns: {id: $id}, _set: {deleted: false}){\n    id\n    deleted\n  }\n}\n`;\n\nexport function Payloads(props){\n    const me = useReactiveVar(meState);\n    const [payloads, setPayloads] = React.useState([]);\n    const mountedRef = React.useRef(true);\n    useQuery(Get_Payloads, {\n      variables: {operation_id: me?.user?.current_operation_id || 0},\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        if(!mountedRef.current){\n          return null;\n        }\n        const updated = data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n    })\n    useSubscription(SUB_Payloads, {\n      variables: {operation_id: me?.user?.current_operation_id || 0},\n      fetchPolicy: \"no-cache\",\n      onSubscriptionData: ({subscriptionData}) => {\n        if(!mountedRef.current){\n          return  null;\n        }\n        const updated = subscriptionData.data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to get payloads\");\n        console.log(data);\n      }\n      });\n    const [deletePayload] = useMutation(payloadsDelete, {\n        onCompleted: (data) => {\n          if(data.deleteFile.status === \"success\"){\n            const updated = payloads.map( (p) => {\n              if(data.deleteFile.payload_ids.includes(p.id)){\n                return {...p, deleted: true};\n              }else{\n                return {...p}\n              }\n            });\n            setPayloads(updated);\n            snackActions.success(\"Successfully deleted\");\n          }else{\n            snackActions.error(data.deleteFile.error);\n          }\n          \n        },\n        onError: (data) => {\n          snackActions.warning(\"Failed to delete payload\");\n          console.log(data);\n        }\n    });\n    const [restorePayload] = useMutation(restorePayloadMutation, {\n      onCompleted: (data) => {\n        const updated = payloads.map( (payload) => {\n          if(payload.id === data.update_payload_by_pk.id){\n            return {...payload, ...data.update_payload_by_pk};\n          }else{\n            return {...payload};\n          }\n        });\n        setPayloads(updated);\n        if(data.update_payload_by_pk.deleted === false){\n          snackActions.success(\"Successfully marked payload as not deleted\");\n        }\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to mark as not deleted\");\n        console.log(data);\n      }\n  });\n    const [callbackAlert] = useMutation(payloadsCallbackAlert, {\n      onCompleted: (data) => {\n        const updated = payloads.map( (payload) => {\n          if(payload.id === data.update_payload_by_pk.id){\n            return {...payload, ...data.update_payload_by_pk};\n          }else{\n            return {...payload};\n          }\n        });\n        if(data.update_payload_by_pk.callback_alert){\n          snackActions.success(\"Now Alerting on New Callbacks\");\n        }else{\n          snackActions.success(\"No Longer Alerting on New Callbacks\");\n        }\n        \n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to update callback alerting status\");\n        console.log(data);\n      }\n    });\n    const onDeletePayload = (id) => {\n        deletePayload({variables: {id}});\n    }\n    const onUpdateCallbackAlert = (id, callback_alert) => {\n        callbackAlert({\n            variables: {id, callback_alert}\n        \n        });\n    }\n    const onRestorePayload = (id) => {\n      restorePayload({\n        variables: {id}\n      })\n    }\n    React.useEffect( () => {\n      return() => {\n        mountedRef.current = false;\n      }\n       // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    return (\n      <div style={{display: \"flex\", flexGrow: 1, flexDirection: \"column\", marginTop:\"10px\"}}>\n        <PayloadsTable onDeletePayload={onDeletePayload} onUpdateCallbackAlert={onUpdateCallbackAlert} payload={payloads} onRestorePayload={onRestorePayload}/>\n      </div>\n    );\n} \n","import * as d3 from \"d3\";\n\nexport const menuFactory = (g, x, y, menuItems, data, svgId) => {\n    d3.select(`.contextMenu`).remove();\n    // Draw the menu\n    if(menuItems.length > 0){\n        d3.select(svgId).append('g').attr('class', 'contextMenu')\n            .selectAll('tmp')\n            .data(menuItems).enter()\n            .append('g').attr('class', \"menuEntry\")\n            .style({'cursor': 'pointer'});\n\n        // Draw menu entries\n        d3.selectAll(`.menuEntry`)\n            .append('rect')\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('rx', 2)\n            .attr('fill', '#ffffff')\n            .attr('width', 180)\n            .attr('height', 30)\n            .on('click', (d) => { d.action(g, data) });\n\n        d3.selectAll(`.menuEntry`)\n            .append('text')\n            .text((d) => { return d.title; })\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('dy', 20)\n            .attr('dx', 10)\n            .on('click', (d) => { d.action(g, data) });\n\n        // Other interactions\n        d3.select('body')\n            .on('click', () => {\n                d3.select(`.contextMenu`).remove();\n                d3.select(`.menuEntry`).remove();\n            });\n        }\n}\n\nexport const createContextMenu = (g, d, menuItems, width, height, svgId) => {\n    menuFactory(g, d3.event.pageX , d3.event.pageY - 80 , menuItems, d, svgId);\n    d3.event.preventDefault();\n}\n","import React, {useRef, useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport * as d3 from 'd3';\nimport {createContextMenu} from './D3ContextMenu';\nimport dagreD3 from 'dagre-d3';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function C2PathDialog(props) {\n    const dagreRef = useRef(null);   \n    const [reZoom, setReZoom] = useState(true);\n    const theme = useTheme();\n    useEffect( () => {\n        const view_config = {\n            rankDir: \"LR\",\n            label_components: [\"id\", \"user\"],\n            packet_flow_view: true,\n            include_disconnected: true,\n            show_all_nodes: true\n        }\n        const node_events = {\n            \"mouseover\": (parent, node, d) => {return},\n            \"mouseout\": (parent, node, d) => {return},\n            \"click\": (parent, node, d) => {return},\n            \"contextmenu\": []\n        }\n        drawC2PathElements(props.callbackgraphedges, dagreRef, reZoom, view_config, node_events, theme);\n        setReZoom(false);\n    }, [props.callbackgraphedges, reZoom, theme])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Callback {props.id}'s Egress Path</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <svg ref={dagreRef} id=\"nodeTree\" style={{width: \"100%\", height: \"calc(78vh)\", marginTop: \"10px\"}}></svg>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n\nexport const drawC2PathElements = (edges, dagreRef, reZoom, view_config, node_events, theme) =>{\n    const disconnected = `stroke: ${theme.palette.warning.main}; stroke-width: 3px; stroke-dasharray: 5, 5; fill:none`;\n    const disconnectedArrow = `fill: ${theme.palette.warning.main}`;\n    const connected = `stroke: ${theme.palette.info.main}; fill: none; stroke-width: 1.5px;`;\n    const connectedArrow = `stroke: ${theme.palette.info.main}; fill: ${theme.palette.info.main}; stroke-width: 1.5px;`\n    const nodeColor = `fill: ${theme.palette.success.main},`;\n    const nodeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const edgeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const add_edge_to_mythic = (g, edge, view_config) => {\n        if(!edge.source.active && !view_config[\"show_all_nodes\"]){return}\n        add_node(g, edge.source, view_config);\n        g.setEdge(edge.source.id, \"Mythic\",  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp,direction: edge.direction,\n            style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n            arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n    }\n    const add_node = (g, node, view_config) => {\n        g.setNode(node.id, {label: getLabel(node, view_config[\"label_components\"]),  node: node, style: nodeColor, labelStyle: nodeLabelStyle, shape: 'circle', isParent:false});\n        g.setNode(node.host, {label:  node.host, clusterLabelPos: 'top', style: `fill:${theme.palette.graphGroup}`, node: null, labelStyle: nodeLabelStyle, isParent: true});\n        g.setParent(node.id, node.host);\n        g.setNode(node.host + \"mythic_expander\", {label:\"\", shape: \"square\", node: node, isParent: false})\n        g.setParent(node.host + \"mythic_expander\", node.host)\n    }\n    const getLabel = (edge, label_components) => {\n        return label_components.map( (name) => {\n            return edge[name]\n        }).join(\", \");\n    }\n    const add_edge_p2p = (g, edge, view_config) => {\n        if(!edge.source.active && !edge.destination.active && !view_config[\"show_all_nodes\"]){\n            return;\n        }else if(!view_config[\"show_all_nodes\"]){\n            //at least one of the two nodes is active and we don't want to show all the nodes\n            if(edge.source.active){add_node(g, edge.source, view_config)}\n            if(edge.destination.active){add_node(g, edge.destination, view_config)}\n            // not adding an edge because one of the nodes could be non-existent\n            if(!edge.source.active || !edge.destination.active){\n                return;\n            }\n        }else{\n            add_node(g, edge.source, view_config);\n            add_node(g, edge.destination, view_config);\n        }\n        if(edge.direction === 1){\n            if(view_config[\"packet_flow_view\"]){\n                createEdge(g, edge, 2);\n            }else{\n                createEdge(g, edge, 1);\n            }\n        }else if(edge.direction === 2){\n            createEdge(g, edge, 2);\n        }else{\n            createEdge(g, edge, 1);\n            createEdge(g, edge, 2);\n        }\n    }\n    const createEdge = (g, edge, adjusted_direction) =>{\n        if(adjusted_direction === 1){\n            g.setEdge(edge.source.id, edge.destination.id,  {label: edge.c2profile.name, edge_id: edge.id,end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }else if(adjusted_direction === 2){\n            g.setEdge(edge.destination.id, edge.source.id,  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }\n    }\n    var g = new dagreD3.graphlib.Graph({ compound: true, multigraph: true, directed: true}).setGraph({rankdir: view_config[\"rankDir\"]}).setDefaultEdgeLabel(function() {return {}; });\n    var svg = d3.select(dagreRef.current);\n    var svgGroup;\n    var test = svg.select(\"g\")._groups[0][0];\n    if(test){\n        svgGroup = svg.select(\"g\");\n    }else{\n        svgGroup = svg.append(\"g\");\n    }\n    var zoom = d3.zoom().on(\"zoom\", function() {\n          svgGroup.attr(\"transform\", d3.event.transform);\n        });\n    if(reZoom){\n        svg.select('g.output').remove();\n        svg.call(zoom);\n    }\n    g.setNode(\"Mythic\", {label: \"\", style: nodeColor, shape: 'circle', node: null, labelStyle: nodeLabelStyle});\n    edges.forEach( (edge) => {\n        if(!view_config[\"include_disconnected\"] && edge.end_timestamp !== null){return}\n        if(edge.destination.id === edge.source.id){\n            if(g.hasEdge(edge.source.id, \"Mythic\", edge.c2profile.name)){\n                // we already have an edge to Mythic from our source id, check if this edge is newer or not\n                if(edge.id > g.edge(edge.source.id, \"Mythic\", edge.c2profile.name).edge_id){\n                    add_edge_to_mythic(g, edge, view_config);\n                }\n            }else{\n                //this is a new edge to mythic\n                add_edge_to_mythic(g, edge, view_config);\n            }\n        }else{\n            if(edge.direction === 1){\n                if(!view_config[\"packet_flow_view\"]){\n                    if(g.hasEdge(edge.source.id, edge.destination.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.source.id, edge.destination.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }else{\n                            console.log(\"doing nothing, dropping data\");\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }\n                \n            }else if(edge.direction === 2){\n                if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                    //we've seen an edge between these two before\n                   \n                    if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    //this is a new edge\n                    add_edge_p2p(g, edge, view_config);\n                }\n            }\n        }\n    });\n    var render = new dagreD3.render();\n    var width = svg.node().getBoundingClientRect().width;\n    var height = svg.node().getBoundingClientRect().height;\n    render.shapes().circle = function circle(parent, bbox, node) {\n         var shapeSvg = parent.insert(\"image\")\n             .attr(\"class\", \"nodeImage\")\n             .attr(\"xlink:href\", function(d) {\n                 if (node.node) {\n                    return \"/static/\" + node.node.payload.payloadtype.ptype + \".svg\";\n                 }else{\n                    return \"/static/mythic.svg\";\n                 }\n             }).attr(\"x\", \"-20px\")\n             .attr(\"y\", \"-20px\")\n             .attr(\"width\", \"40px\")\n             .attr(\"height\", \"40px\")\n             .on(\"mouseover\", function(d) { node_events[\"mouseover\"](parent, node, d) })\n             .on(\"mouseout\", function(d) { node_events[\"mouseout\"](parent, node, d) })\n             .on(\"click\", function(d) { d3.event.preventDefault(); node_events[\"click\"](parent, node, d) })\n             .on(\"contextmenu\", (d) => {createContextMenu(g, node, node_events[\"contextmenu\"], width, height, \"#callbacksgraph\")});\n         node.intersect = function(point) {\n             return dagreD3.intersect.circle(node, 25, point);\n         };\n         return shapeSvg;\n     };\n     render.shapes().square = function square(parent, bbox, node){\n         var shapeSvg = parent.insert(\"rect\")\n            .attr(\"width\", function(d) {\n                let candidates = g.children(node.node.host);\n                let longest = node.node.host.length;\n                if(candidates !== undefined){\n                    candidates.forEach( (x) => {\n                        if(g.node(x).label.length > longest){\n                            longest = g.node(x).label.length;\n                        }\n                    });\n                }\n                if(view_config[\"rankDir\"] === \"LR\"){\n                    // need a box at least as long as the host name or longest label with matching parent\n                    return longest * 9 + \"px\";\n                }else{\n                    // need a box at least as long as the hostname or longest label with matching parent\n                    //   need to also subtract width of elements for everything with an edge to Mythic\n                    if(candidates !== undefined){\n                        let count = 0;\n                        candidates.forEach( (x) => {\n                            if(g.outEdges(x, \"Mythic\").length > 0){\n                                count += 1;\n                            }\n                        });\n                        longest = (longest * 9) - (count * 100);\n                        if(longest < 0){ return 0}\n                        return longest + \"px\";\n                    }else{\n                        console.log(\"candidates were undefined\");\n                    }\n                }\n            })\n            .attr(\"height\", 0);\n        return shapeSvg;\n     }\n     // if a parent has no children then it should be removed\n    \n    render(svgGroup, g);\n    if(reZoom){\n        var graphWidth = g.graph().width + 40;\n        var graphHeight = g.graph().height + 40;\n        var zoomScale = Math.min(width / graphWidth, height / graphHeight);\n        var translateX = (width / 2) - ((graphWidth * zoomScale) / 2)\n        var translateY = (height / 2) - ((graphHeight * zoomScale) / 2);\n        var svgZoom = svg.transition().duration(500);\n        svgZoom.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(zoomScale));\n    }\n    svgGroup.selectAll(\"g.nodes g.label\")\n        .attr(\"transform\", \"translate(0,30)\");\n}\nexport const getNodeEdges = (g, node) =>{\n    return g.nodeEdges(node);\n}\n\n","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {C2PathDialog} from '../Callbacks/C2PathDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\n\nexport function ExpandedCallbackSideDetails(props){\n    const maxWidth = \"30%\";\n    const theme = useTheme();\n    return (\n        <div style={{maxWidth, width: maxWidth, display: \"inline-flex\", height: \"calc(94vh)\", flexDirection: \"column\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Callback {props.callback.id}\n                </Typography>\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\">   \n            <ExpandedCallbackSideDetailsTable {...props.callback} />\n        </TableContainer>\n        </div>\n    )\n}\n\n\nexport function ExpandedCallbackSideDetailsTable(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(props.last_checkin);\n    });\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = callbackEdges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in callbackEdges that are _not_ in myEdges so far\n                const newEdges = callbackEdges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        setCallbackgraphedges(myActiveEdges);\n        setCallbackgraphedgesAll(myEdges);\n    }, [callbackEdges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const options = [{name: props.locked ? 'Locked (by ' + props.locked_operator.username + ')' : 'Unlocked', icon: props.locked ? (<LockIcon style={{paddingRight: \"5px\"}}/>) : (<LockOpenIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                 ];\n    return (\n        <Table  size=\"small\" style={{\"overflow\": \"scroll\"}}>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Elevation Level</TableCell>\n                        <TableCell>{props.integrity_level}\n                            {props.integrity_level > 2 ? (\" ( Elevated Access )\") : \"\"}\n                            {props.integrity_level === 2 ? (\" ( Medium Integrity ) \") : \"\"}\n                            {props.integrity_level < 2 ? (\" ( Low Integrity )\") : \"\"}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Callback Lock Status</TableCell>\n                        <TableCell>\n                            {props.locked ? (\n                                <React.Fragment>\n                                    <LockIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Locked (by ' + props.locked_operator.username + ')'}\n                                    </Typography>\n                                </React.Fragment>\n                            ) : (\n                                <React.Fragment>\n                                    <LockOpenIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    \n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Unlocked'}\n                                    </Typography>\n                                </React.Fragment>\n                            )}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>IP Address</TableCell>\n                        <TableCell>{props.ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>External IP</TableCell>\n                        <TableCell>{props.external_ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Host</TableCell>\n                        <TableCell>{props.host}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>User</TableCell>\n                        <TableCell>{props.user}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Domain</TableCell>\n                        <TableCell>{props.domain}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>OS / Architecture</TableCell>\n                        <TableCell>{props.os}({props.architecture})</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process ID</TableCell>\n                        <TableCell>{props.pid}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Last Checkin</TableCell>\n                        <TableCell>{displayTime}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Description</TableCell>\n                        <TableCell>{props.description}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Sleep Info</TableCell>\n                        <TableCell>{props.sleep_info}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Agent Type</TableCell>\n                        <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Egress Route</TableCell>\n                        <TableCell>\n                        {hasEgressRoute ? \n                            <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                            <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                        }\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process Name</TableCell>\n                        <TableCell>{props.process_name}</TableCell>\n                    </TableRow>\n                    <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                        onClose={()=>{setOpenC2Dialog(false);}} \n                        innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                    />\n                    <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                        innerDialog={\n                            <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n                        }\n                        />\n                    <TableRow hover>\n                        <TableCell>Extra Info</TableCell>\n                        <TableCell>{props.extra_info}</TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n    )\n}\n","import React  from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {ExpandedCallbackSideDetails} from './ExpandedCallbackSideDetails';\nimport  {useParams} from \"react-router-dom\";\nimport {CallbacksTabsTaskingPanel} from '../Callbacks/CallbacksTabsTasking';\nimport { snackActions } from '../../utilities/Snackbar';\n\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    last_checkin\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n    callbacktokens(where: {deleted: {_eq: false}}) {\n      token {\n        TokenId\n        id\n        User\n        description\n      }\n      callback {\n        id\n      }\n      id\n    }\n  }\n}\n `;\n\n\nexport function ExpandedCallback(props){\n    \n    const {callbackId} = useParams();\n    const [callback, setCallbacks] = React.useState({\"payload\": {\"payloadtype\": {\"ptype\": \"\"}}, \"callbacktokens\": []});\n    const [tabInfo, setTabInfo] = React.useState({callbackID: parseInt(callbackId)});\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callbackId}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(subscriptionData.data.callback_by_pk === null){\n            snackActions.error(\"Unknown Callback\");\n            return;\n          }\n          setCallbacks(subscriptionData.data.callback_by_pk);\n          setTabInfo({tabID: \"interact\", tabType: \"interact\", callbackID: parseInt(callbackId), \n          payloadtype: subscriptionData.data.callback_by_pk[\"payload\"][\"payloadtype\"][\"ptype\"],\n          payloadDescription: subscriptionData.data.callback_by_pk[\"payload\"][\"tag\"],\n          callbackDescription: subscriptionData.data.callback_by_pk[\"description\"],\n          os: subscriptionData.data.callback_by_pk[\"payload\"][\"os\"]});\n        }\n    });\n\n    return (\n        <div style={{width: \"100%\", height: \"100%\", maxHeight: \"100%\", display: \"flex\", flexDirection: \"row\"}}>\n          {tabInfo.payloadtype !== undefined ? (\n            <React.Fragment>\n              <ExpandedCallbackSideDetails callback={callback} />\n              <CallbacksTabsTaskingPanel style={{height:`calc(${96}vh)`, maxHeight:`calc(${96}vh)`, width:\"69%\", maxWidth: \"69%\", position: \"absolute\", overflow: \"auto\", display: \"inline-flex\", flexDirection: \"column\"}} \n                tabInfo={tabInfo} callbacktokens={callback.callbacktokens}/>\n            </React.Fragment>\n          ) : (\n            <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>Fetching Callback</div>\n          )}\n            \n        </div>\n    );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { red } from '@material-ui/core/colors';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: `100%`,\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n}));\n\nexport function QuickStartCard() {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  return (\n    <Card className={classes.root} elevation={5}>\n      <CardHeader\n        avatar={\n          <Avatar className={classes.avatar}>\n            \n          </Avatar>\n        }\n        title=\"Mythic Quick Start Guide\"\n        subheader=\"Expand this section to learn how to: Generate a Payload, Download the Payload, Get To Callbacks\"\n        style={{paddingBottom: 0, marginBottom: 0}}\n      />\n      <CardActions styl={{padding: 0, margin: 0}}>\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent style={{margin: 0, paddingTop: 0}}>\n          <ol>\n            <li>\n              Create a payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/createpayload\"}>Create -> Create Payload</Link>\n              <ul>\n                <li>Select Desired OS</li>\n                <li>Select Payload Type and Supply Build Parameters</li>\n                <li>Select Commands You Want Stamped Into The Agent</li>\n                <li>Select C2 Profiles and Fill Out Parameters</li>\n                <li>Name Your Payload</li>\n                <li>Provide a Description</li>\n                <li>Build Your Payload</li>\n              </ul>\n            </li>\n            <li>Download Your Payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/payloads\"}>Operational Data -> Payloads</Link></li>\n            <li>Run Your payload\n              <ul>\n                <li>For More Information About Your Agent, Check Out The <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/docs/agents\"}>Internal Documentation</Link></li>\n              </ul>\n            </li>\n            <li>Interact With Your Agent At <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/callbacks\"}>Active Callbacks</Link></li>\n          </ol>\n        </CardContent>\n      </Collapse>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst GetC2ProfilesAndPayloadTypes = gql`\nquery GetC2AndPayloadType {\n  c2profile(where: {deleted: {_eq: false}}) {\n    name\n    id\n  }\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    id\n    payloadtypec2profiles {\n      c2profile {\n        name\n        id\n      }\n    }\n  }\n  wrappers: payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n      }\n    }\n  }\n}\n`;\n\nexport function AgentC2Overview(props){\n    const theme = useTheme();\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [payloadTypeRows, setPayloadTypeRows] = React.useState([]);\n    const [wrappers, setWrappers] = React.useState([]);\n    const { loading } = useQuery(GetC2ProfilesAndPayloadTypes, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const c2Headers = data.c2profile.map( (c2) => c2.name);\n        const payloadRows = data.payloadtype.map( (payload) => {\n          const payloadc2 = payload.payloadtypec2profiles.map( (c2) => {\n            return c2.c2profile.name;\n          })\n          return {ptype: payload.ptype, payloadtypec2profiles: payloadc2 };\n        });\n        c2Headers.sort();\n        payloadRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        const wrapperRows = data.wrappers.map( (payload) => {\n          const wrapped = payload.wrap_these_payload_types.map( (w) => {\n            return w.wrapped.ptype;\n          });\n          return {ptype: payload.ptype, wrapped}\n        });\n        wrapperRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        setWrappers(wrapperRows);\n        setC2Profiles(c2Headers);\n        setPayloadTypeRows(payloadRows);\n      },\n      onError: (data) => {\n\n      }\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    return (\n    <div style={{ marginTop: \"10px\", marginRight: \"5px\"}}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Agent / C2 Overview\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Table  size=\"small\">\n            <TableHead>\n                <TableRow hover>\n                    <TableCell></TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={c2}>{c2}</TableCell>\n                    ))}\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                {payloadTypeRows.map( (payload) => (\n                  <TableRow key={payload.ptype} hover>\n                    <TableCell>{payload.ptype}</TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={'payload' + c2}>\n                        {payload.payloadtypec2profiles.includes(c2) ? \n                        <Tooltip title={payload.ptype + \" supports \" + c2}>\n                            <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                        </Tooltip>\n                     : \"\"}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n        {wrappers.length > 0 && \n          <TableContainer component={Paper} className=\"mythicElement\" style={{marginTop: \"10px\"}}>   \n              <Table  size=\"small\">\n                  <TableHead>\n                      <TableRow hover>\n                          <TableCell></TableCell>\n                          {payloadTypeRows.map( (pt) => (\n                            <TableCell key={'wrapped' + pt.ptype}>{pt.ptype}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                      {wrappers.map( (payload) => (\n                        <TableRow key={'wrapper' + payload.ptype} hover>\n                          <TableCell>{payload.ptype}</TableCell>\n                          {payloadTypeRows.map( (wr) => (\n                            <TableCell key={'payload' + wr.ptype}>\n                              {payload.wrapped.includes(wr.ptype) ? \n                              <Tooltip title={payload.ptype + \" wraps \" + wr.ptype}>\n                                  <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                              </Tooltip>\n                          : \"\"}\n                            </TableCell>\n                          ))}\n                        </TableRow>\n                      ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        }\n      </div>\n    );\n} \n","import React from 'react';\nimport { QuickStartCard } from './QuickStartCard';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {AgentC2Overview} from './AgentC2Overview';\n\n\nexport function Home() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Welcome To Mythic\n      </Typography>\n    </Paper> \n    <QuickStartCard />\n    <AgentC2Overview />\n  </div>\n  );\n}\n","import { Route, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../cache';\n\n\nexport function LoggedInRoute({component, ...rest}){\n    const me = useReactiveVar(meState);\n    return (\n        <Route {...rest} render={(props) => (\n            me.loggedIn && me.user ? (\n                //logged in\n                React.createElement(component, props)\n            ) : (\n                //not logged in\n                <Redirect to={{ \n                    pathname: '/new/login',\n                    state: { from: props.location }\n                }} />\n            )\n        )} />\n    )\n}\n","import { makeStyles, fade } from \"@material-ui/core\";\nimport { useCallback, useMemo } from \"react\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { snackActions } from '../utilities/Snackbar';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport ComputerIcon from '@material-ui/icons/Computer';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { useTheme } from '@material-ui/core/styles';\nimport Badge from '@material-ui/core/Badge';\nimport { Typography } from '@material-ui/core';\nimport { MythicStyledTooltip } from \"./MythicStyledTooltip\";\n\nconst useStyles = makeStyles((theme) => ({\n  rowContainer: {},\n  row: {\n    display: \"flex\",\n    alignItems: \"left\",\n    marginLeft: (props) => theme.spacing(3 * props.depth),\n    userSelect: \"none\",\n    whiteSpace: \"nowrap\"\n  },\n  rowButtonWrapper: {\n    width: theme.spacing(3),\n    textAlign: \"center\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  rowButton: {\n    width: theme.spacing(3)\n  },\n  rowLabel: {\n    marginLeft: theme.spacing(0.5)\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    whiteSpace: 'pre-line',\n},\nsecondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    overflow: 'hidden',\n    display: 'block',\n    textOverflow: 'ellipsis',\n    maxWidth: 'calc(90vw)',\n    whiteSpace: 'nowrap',\n},\ntaskAndTimeDisplay: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n    overflow: 'hidden',\n    display: 'block',\n    textOverflow: 'ellipsis',\n    maxWidth: 'calc(90vw)',\n    whiteSpace: 'nowrap',\n},\nsecondaryHeadingExpanded: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    display: 'block',\n    overflow: 'auto',\n    maxWidth: 'calc(90vw)',\n    whiteSpace: 'break-word',\n},\nicon: {\n    verticalAlign: 'middle',\n    height: 20,\n    width: 20,\n},\ndetails: {\n    alignItems: 'center',\n},\ncolumn: {\n    padding: '0 5px 0 0',\n    display: 'inline-block',\n    margin: 0,\n    height: 'auto',\n},\npaper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n},\ntable: {\n    minWidth: 750,\n},\nvisuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n},\n}));\n\nconst VirtualTreeRow = ({\n  onSelectNode,\n  onExpandNode,\n  onCollapseNode,\n  ...ListProps\n}) => {\n\n  const item = ListProps.data[ListProps.index];\n  const theme = useTheme();\n  const classes = useStyles();\n  const handleOnClickButton = (e) => {\n    e.stopPropagation();\n    if (item.isOpen) {\n      onCollapseNode(item.id, item);\n    } else {\n      snackActions.info('fetching elements...', { persist: true });\n      onExpandNode(item.id, item);\n    }\n  };\n\n  const handleOnClickRow = (e) => {\n    onSelectNode(item.id, item);\n  };\n  return (\n    <div style={ListProps.style}>\n    <div style={{display: 'flex' , marginBottom: \"2px\", flexGrow: 1, width: \"100%\"}}>\n        {[...Array(item.data.depth)].map((o, i) => (\n            <div\n                key={'folder' + item.data.id + 'lines' + i}\n                style={{\n                    borderLeft: `2px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n                    marginLeft: 15,\n                    paddingRight: 15,\n                    display: 'inline-block',\n                }}></div>\n        ))}\n        <div\n          className={classes.root}\n          style={{ backgroundColor: theme.body, color: theme.text, alignItems: 'center', display: 'flex', paddingRight: \"10px\" }}\n          onClick={handleOnClickRow}>\n          {item.data.parent_id === null ? (\n              <ComputerIcon style={{ marginLeft: '3px', marginRight: '5px' }} onClick={handleOnClickButton} />\n          ) : item.data.is_file ? (\n              <DescriptionIcon style={{ marginLeft: '3px', marginRight: '5px' }} />\n          ) : item.isOpen ? (\n              <FolderOpenIcon\n                  style={{\n                      marginLeft: '3px',\n                      marginRight: '5px',\n                      color: theme.folderColor\n                  }}\n                  onClick={handleOnClickButton}\n              />\n          ) : (\n              <FolderIcon style={{ paddingTop: '5px', marginLeft: '3px', marginRight: '5px', color: theme.folderColor }} onClick={handleOnClickButton} />\n          )}\n          {item.data.depth > 0 &&\n          item.data.filebrowserobjs_aggregate.aggregate.count > 99 ? (\n              <MythicStyledTooltip title='Number of known children'>\n                  <Badge\n                      style={{ left: -50 }}\n                      max={99}\n                      badgeContent={item.data.filebrowserobjs_aggregate.aggregate.count}\n                      color='primary'\n                      anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}></Badge>\n              </MythicStyledTooltip>\n          ) : null}\n          <Typography\n              style={{\n                  color:\n                      item.data.filebrowserobjs_aggregate.aggregate.count > 0 ||\n                      item.data.success !== null\n                          ? theme.palette.text.primary\n                          : theme.palette.text.secondary,\n              }}>\n              {item.data.parent_id === null ? item.data.host : item.data.name_text}\n          </Typography>\n\n          {item.data.success === true && item.data.depth > 0 ? (\n              <MythicStyledTooltip title='Successfully listed contents of folder'>\n                  <CheckCircleIcon fontSize='small' style={{ color: theme.palette.success.main }} />\n              </MythicStyledTooltip>\n          ) : item.data.success === false && item.data.depth > 0 ? (\n              <MythicStyledTooltip title='Failed to list contents of folder'>\n                  <ErrorIcon fontSize='small' style={{ color: theme.palette.error.main }} />\n              </MythicStyledTooltip>\n          ) : null}\n      </div>\n    </div>\n    </div>\n);\n};\n\nconst FileBrowserVirtualTree = ({\n  nodes,\n  openNodes,\n  onSelectNode,\n  onExpandNode,\n  onCollapseNode,\n  display_name,\n}) => {\n  const flattenNode = useCallback(\n    (node, depth = 0) => {\n      if(depth === 0){\n        return [\n          {\n            id: node.id,\n            name: node[display_name],\n            depth,\n            isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n            isOpen: true,\n            data: {...node, depth}\n          },\n          ...(Object.values(node.children).reduce( (prev, cur) => {\n            if(cur.is_file){return [...prev]}\n            return [...prev, flattenNode(cur, depth+1)];\n        }, []).flat())\n        ];\n      }\n      if (openNodes[node.id] === true) {\n        return [\n          {\n            id: node.id,\n            name: node[display_name],\n            depth,\n            isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n            isOpen: true,\n            data: {...node, depth}\n          },\n          ...(Object.values(node.children).reduce( (prev, cur) => {\n              if(cur.is_file){return [...prev]}\n              return [...prev, flattenNode(cur, depth+1)];\n          }, []).flat())\n        ];\n      }\n      return [\n        {\n          id: node.id,\n          name: node[display_name],\n          depth,\n          isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n          isOpen: false,\n          data: {...node, depth},\n        }\n      ];\n     \n    },\n    [openNodes] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  const flattenedNodes = useMemo(\n    () => nodes.map((node) => flattenNode(node)).flat(),\n    [flattenNode, nodes]\n  );\n  return (\n    <AutoSizer>\n      {(AutoSizerProps) => (\n        <List\n          itemData={flattenedNodes}\n          direction=\"vertical\"\n          height={AutoSizerProps.height - 10}\n          width={AutoSizerProps.width - 10}\n          itemCount={flattenedNodes.length}\n          itemSize={24}\n        >\n          {(ListProps) => (\n            <VirtualTreeRow\n              {...ListProps}\n              onSelectNode={onSelectNode}\n              onExpandNode={onExpandNode}\n              onCollapseNode={onCollapseNode}\n            />\n          )}\n        </List>\n      )}\n    </AutoSizer>\n  );\n};\n\nexport default FileBrowserVirtualTree;\n","import React from 'react';\nimport FileBrowserVirtualTree from '../../MythicComponents/MythicFileBrowserVirtualTree';\n\n\nexport const CallbacksTabsFileBrowserTree = ({ treeRoot, fetchFolderData, setTableData }) => {\n    const [openNodes, setOpenNodes] = React.useState({});\n    const toggleNodeExpanded = (nodeId, nodeData) => {\n        console.log(\"toggleNodeExpanded\", nodeId, nodeData);\n        setTableData(nodeData.data);\n        fetchFolderData(nodeData.data);\n        setOpenNodes({\n          ...openNodes,\n          [nodeId]: true\n        });\n      };\n    const toggleNodeCollapsed = (nodeId, nodeData) => {\n        setOpenNodes({\n          ...openNodes,\n          [nodeId]: false\n        });\n      };\n    const onSelectNode = (nodeId, nodeData) => {\n        setTableData(nodeData.data);\n        console.log(\"onSelectNode\", nodeId, nodeData);\n    };\n    return treeRoot.length === 0 ? (\n        <div\n            style={{\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n            }}>\n            No File Browser Data Collected\n        </div>\n    ) : (\n        <FileBrowserVirtualTree\n            nodes={treeRoot}\n            display_name={\"name_text\"}\n            openNodes={openNodes}\n            onSelectNode={onSelectNode}\n            onExpandNode={toggleNodeExpanded}\n            onCollapseNode={toggleNodeCollapsed}\n        />\n    );\n};","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport IconButton from '@material-ui/core/IconButton';\n\nexport function DownloadHistoryDialog(props){\n   const [history, setHistory] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    setHistory(props.value);\n   }, [props.value]);\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"5rem\"}}>Download</TableCell>\n                          <TableCell>Time</TableCell>\n                          <TableCell>Task</TableCell>\n                          <TableCell>Comment</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {history.map( (hist) => (\n                      <TableRow key={'hist' + hist.id}>\n                        <TableCell >{hist.complete ? (\n                          <IconButton href={\"/api/v1.4/files/download/\" + hist.agent_file_id} style={{color: theme.palette.success.main}}><GetAppIcon /></IconButton>\n                        ) : (hist.chunks_received + \"/\" + hist.total_chunks)}</TableCell>\n                        <TableCell>{hist.timestamp}</TableCell>\n                        <TableCell>{hist.task.id}</TableCell>\n                        <TableCell>{hist.comment}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n          </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function TableFilterDialog({filterOptions, onSubmit, onClose, selectedColumn}) {\n    const [description, setDescription] = useState(\"\");\n    \n    const onCommitSubmit = () => {\n        onSubmit({...filterOptions, [selectedColumn.key]: description});\n        onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n    React.useEffect( () => {\n        if(filterOptions[selectedColumn.key]){\n          setDescription(filterOptions[selectedColumn.key]);\n        }\n    }, [selectedColumn]);\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Filter {selectedColumn.name} Entries</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\n\n  \nexport function MythicTransferListDialog(props) {\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    \n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(50vh)\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    const setFinalTags = () => {\n      props.onSubmit({left, right});\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.dialogTitle}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5} style={{paddingLeft: 0, marginLeft: 0}}>{customList(leftTitle, left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                ≫\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                ≪\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n        </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport { useMutation, useLazyQuery, gql } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {\n    MythicDialog,\n    MythicModifyStringDialog,\n    MythicViewJSONAsTableDialog,\n} from '../../MythicComponents/MythicDialog';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { useTheme } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { DownloadHistoryDialog } from './DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport 'react-virtualized/styles.css';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport MythicResizableGrid from '../../MythicComponents/MythicResizableGrid';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\nimport {TableFilterDialog} from './TableFilterDialog';\nimport {MythicTransferListDialog} from '../../MythicComponents/MythicTransferList';\n\nconst getPermissionsDataQuery = gql`\n    query getPermissionsQuery($filebrowserobj_id: Int!) {\n        filebrowserobj_by_pk(id: $filebrowserobj_id) {\n            id\n            permissions\n        }\n    }\n`;\nconst getFileDownloadHistory = gql`\n    query getFileDownloadHistory($filebrowserobj_id: Int!) {\n        filebrowserobj_by_pk(id: $filebrowserobj_id) {\n            filemeta {\n                id\n                comment\n                agent_file_id\n                chunks_received\n                complete\n                total_chunks\n                timestamp\n                task {\n                    id\n                    comment\n                }\n            }\n        }\n    }\n`;\nconst updateFileComment = gql`\n    mutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!) {\n        update_filebrowserobj_by_pk(pk_columns: { id: $filebrowserobj_id }, _set: { comment: $comment }) {\n            comment\n            id\n        }\n    }\n`;\n\n\nexport const CallbacksTabsFileBrowserTable = (props) => {\n    const [allData, setAllData] = React.useState([]);\n    const [openContextMenu, setOpenContextMenu] = React.useState(false);\n    const [filterOptions, setFilterOptions] = React.useState({});\n    const [selectedColumn, setSelectedColumn] = React.useState({});\n    const [sortData, setSortData] = React.useState({\"sortKey\": null, \"sortDirection\": null, \"sortType\": null})\n    const [columnVisibility, setColumnVisibility] = React.useState({\n        \"visible\": [\"Actions\", \"Name\", \"Size\", \"Last Modified\"],\n        \"hidden\": [\"Comment\"]\n    });\n    const [openAdjustColumnsDialog, setOpenAdjustColumnsDialog] = React.useState(false);\n    const columns = React.useMemo(\n        () =>\n            [\n                { name: 'Actions', width: 100, disableAutosize: true, disableSort: true, disableFilterMenu: true },\n                { name: 'Name', type: 'string', key: 'name_text', fillWidth: true },\n                { name: 'Size', type: 'number', key: 'size', width: 100 },\n                { name: 'Last Modified', type: 'date', key: 'modify_time', width: 220 },\n                { name: 'Comment', type: 'string', key: 'comment', width: 200 },\n            ].reduce( (prev, cur) => {\n                if(columnVisibility.visible.includes(cur.name)){\n                    if(filterOptions[cur.key] && String(filterOptions[cur.key]).length > 0){\n                        return [...prev, {...cur, filtered: true}];\n                    }else{\n                        return [...prev, {...cur}];\n                    }\n                }else{\n                    return [...prev];\n                }\n            }, [])\n        , [filterOptions, columnVisibility]\n    );\n    const sortedData = React.useMemo(() => {\n        if (sortData.sortKey === null || sortData.sortType === null) {\n            return allData;\n        }\n        const tempData = [...allData];\n\n        if (sortData.sortType === 'number' || sortData.sortType === 'size' || sortData.sortType === 'date') {\n            tempData.sort((a, b) => (parseInt(a[sortData.sortKey]) > parseInt(b[sortData.sortKey]) ? 1 : -1));\n        } else if (sortData.sortType === 'string') {\n            tempData.sort((a, b) => (a[sortData.sortKey].toLowerCase() > b[sortData.sortKey].toLowerCase() ? 1 : -1));\n        }\n        if (sortData.sortDirection === 'DESC') {\n            tempData.reverse();\n        }\n        return tempData;\n    }, [allData, sortData]);\n    const onSubmitFilterOptions = (newFilterOptions) => {\n        setFilterOptions(newFilterOptions);\n    }\n    const filterRow = (row) => {\n        for(const [key,value] of Object.entries(filterOptions)){\n            if(!String(row[key]).toLowerCase().includes(value)){\n                return true;\n            }\n        }\n        return false;\n    }\n    const gridData = React.useMemo(\n        () =>\n            sortedData.reduce((prev, row) => {\n                if(filterRow(row)){\n                    return [...prev];\n                }else{\n                    return [...prev, columns.map( c => {\n                        switch(c.name){\n                            case \"Actions\":\n                                return  <FileBrowserTableRowActionCell rowData={row} onTaskRowAction={props.onTaskRowAction} />;\n                            case \"Name\":\n                                return <FileBrowserTableRowNameCell rowData={row} cellData={row.name_text} />;\n                            case \"Size\":\n                                return FileBrowserTableRowSizeCell({ cellData: row.size });\n                            case \"Last Modified\":\n                                return FileBrowserTableRowDateCell({ cellData: row.modify_time });\n                            case \"Comment\":\n                                return FileBrowserTableRowStringCell({ cellData: row.comment });\n                        }\n                    })];\n                }\n                \n        }, []),\n        [sortedData, props.onTaskRowAction, filterOptions, columnVisibility]\n    );\n\n    useEffect(() => {\n        if (props.showDeletedFiles) {\n            setAllData([...props.selectedFolder]);\n        } else {\n            const filteredData = props.selectedFolder.filter((f) => !f.deleted);\n            setAllData([...filteredData]);\n        }\n    }, [props.selectedFolder, props.showDeletedFiles]);\n\n    const onRowDoubleClick = (e, rowIndex) => {\n        const rowData = allData[rowIndex];\n        if (rowData.is_file) {\n            return;\n        }\n        snackActions.info('Fetching contents of folder...');\n        props.onRowDoubleClick(rowData);\n\n        setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n    };\n\n    const onClickHeader = (e, columnIndex) => {\n        const column = columns[columnIndex];\n        if(column.disableSort){\n            return;\n        }\n        if (!column.key) {\n            setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n        }\n        if (sortData.sortKey === column.key) {\n            if (sortData.sortDirection === 'ASC') {\n                setSortData({...sortData, \"sortDirection\": \"DESC\"});\n            } else {\n                setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n            }\n        } else {\n            setSortData({\"sortKey\": column.key, \"sortType\":column.type, \"sortDirection\": \"ASC\"});\n        }\n    };\n    const contextMenuOptions = [\n        {\n            name: 'Filter Column', \n            click: ({event, columnIndex}) => {\n                if(columns[columnIndex].disableFilterMenu){\n                    snackActions.warning(\"Can't filter that column\");\n                    return;\n                }\n                setSelectedColumn(columns[columnIndex]);\n                setOpenContextMenu(true);\n            }\n        },\n        {\n            name: \"Show/Hide Columns\",\n            click: ({event, columnIndex}) => {\n                if(columns[columnIndex].disableFilterMenu){\n                    snackActions.warning(\"Can't filter that column\");\n                    return;\n                }\n                setOpenAdjustColumnsDialog(true);\n            }\n        }\n    ];\n    const onSubmitAdjustColumns = ({left, right}) => {\n        setColumnVisibility({visible: right, hidden: left});\n    }\n    const sortColumn = columns.findIndex((column) => column.key === sortData.sortKey);\n\n    return (\n        <div style={{ width: '100%', height: '100%', overflow: \"hidden\" }}>\n            <MythicResizableGrid\n                columns={columns}\n                sortIndicatorIndex={sortColumn}\n                sortDirection={sortData.sortDirection}\n                items={gridData}\n                rowHeight={35}\n                onClickHeader={onClickHeader}\n                onDoubleClickRow={onRowDoubleClick}\n                contextMenuOptions={contextMenuOptions}\n            />\n            {openContextMenu &&\n                <MythicDialog fullWidth={true} maxWidth=\"xs\" open={openContextMenu} \n                    onClose={()=>{setOpenContextMenu(false);}} \n                    innerDialog={<TableFilterDialog \n                        selectedColumn={selectedColumn} \n                        filterOptions={filterOptions} \n                        onSubmit={onSubmitFilterOptions} \n                        onClose={()=>{setOpenContextMenu(false);}} />}\n                />\n            }\n            {openAdjustColumnsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openAdjustColumnsDialog} \n                  onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                  innerDialog={\n                    <MythicTransferListDialog onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                      onSubmit={onSubmitAdjustColumns} right={columnVisibility.visible} rightTitle=\"Show these columns\"\n                      leftTitle={\"Hidden Columns\"} left={columnVisibility.hidden} dialogTitle={\"Edit which columns are shown\"}/>}\n                />\n            } \n        </div>\n    );\n};\nconst FileBrowserTableRowNameCell = ({ cellData, rowData }) => {\n    const theme = useTheme();\n    return (\n        <div style={{ alignItems: 'center', display: 'flex', textDecoration: rowData.deleted ? 'line-through' : '' }}>\n            {rowData.is_file ? (\n                <DescriptionIcon style={{ marginRight: '5px' }} />\n            ) : (\n                <FolderOpenIcon\n                    style={{\n                        marginRight: '5px',\n                        color:\n                            rowData.filebrowserobjs_aggregate.aggregate.count > 0 || rowData.success !== null\n                                ? theme.folderColor\n                                : 'grey',\n                    }}\n                />\n            )}\n            {rowData.filemeta.length > 0 ? <GetAppIcon style={{ color: theme.palette.success.main }} /> : null}\n            <pre \n                style={{\n                    color:\n                        rowData.filebrowserobjs_aggregate.aggregate.count > 0 || rowData.success !== null\n                            ? theme.palette.text.primary\n                            : theme.palette.text.secondary,\n                }}>\n                {cellData}\n            </pre>\n            {rowData.success === true ? (\n                <MythicStyledTooltip title='Successfully listed contents of folder'>\n                    <CheckCircleIcon fontSize='small' style={{ color: theme.palette.success.main }} />\n                </MythicStyledTooltip>\n            ) : rowData.success === false ? (\n                <MythicStyledTooltip title='Failed to list contents of folder'>\n                    <ErrorIcon fontSize='small' style={{ color: theme.palette.error.main }} />\n                </MythicStyledTooltip>\n            ) : null}\n        </div>\n    );\n};\nconst FileBrowserTableRowStringCell = ({ cellData }) => {\n    return cellData;\n};\nconst FileBrowserTableRowDateCell = ({ cellData }) => {\n    if(cellData === \"\" || cellData <= 0){\n        return cellData;\n    }\n    const dateData = new Date(parseInt(cellData)).toISOString();\n    return dateData.slice(0, 10) + \" \" + dateData.slice(11,-1);\n};\nconst FileBrowserTableRowSizeCell = ({ cellData }) => {\n    const getStringSize = () => {\n        try {\n            // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n            let bytes = parseInt(cellData);\n            if (cellData === '') return '';\n            if (bytes === 0) return '0 B';\n            const decimals = 2;\n            const k = 1024;\n            const dm = decimals < 0 ? 0 : decimals;\n            const sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n        } catch (error) {\n            return cellData;\n        }\n    };\n    return getStringSize(cellData);\n};\nconst FileBrowserTableRowActionCell = ({ rowData, onTaskRowAction }) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [fileCommentDialogOpen, setFileCommentDialogOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState('');\n    const [downloadHistory, setDownloadHistory] = React.useState([]);\n    const [getPermissions] = useLazyQuery(getPermissionsDataQuery, {\n        onCompleted: (data) => {\n            setPermissionData(data.filebrowserobj_by_pk.permissions);\n            if (data.filebrowserobj_by_pk.permissions !== '') {\n                setViewPermissionsDialogOpen(true);\n            } else {\n                snackActions.warning('No permission data available');\n            }\n        },\n        fetchPolicy: 'network-only',\n    });\n    const [getHistory] = useLazyQuery(getFileDownloadHistory, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if (data.filebrowserobj_by_pk.filemeta.length === 0) {\n                snackActions.warning('File has no download history');\n            } else {\n                setDownloadHistory(data.filebrowserobj_by_pk.filemeta);\n                setFileHistoryDialogOpen(true);\n            }\n        },\n        fetchPolicy: 'network-only',\n    });\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success('updated comment');\n        },\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({ variables: { filebrowserobj_id: rowData.id, comment: comment } });\n    };\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption) {\n            case 'A':\n                optionsA[index].click(event);\n                break;\n            case 'B':\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n            return;\n        }\n        setDropdownOpen(false);\n    };\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(rowData.full_path_text);\n        if (result) {\n            snackActions.success('Copied text!');\n        } else {\n            snackActions.error('Failed to copy text');\n        }\n    };\n    const optionsA = [\n        {\n            name: 'View Permissions',\n            icon: <VisibilityIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                getPermissions({ variables: { filebrowserobj_id: rowData.id } });\n            },\n        },\n        {\n            name: 'Download History',\n            icon: <HistoryIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                getHistory({ variables: { filebrowserobj_id: rowData.id } });\n            },\n        },\n        {\n            name: 'Edit Comment',\n            icon: <EditIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                setFileCommentDialogOpen(true);\n            },\n        },\n        {\n            name: 'Copy Path to Clipboard',\n            icon: <FileCopyOutlinedIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                copyToClipboard();\n            },\n        },\n    ];\n    const optionsB = [\n        {\n            name: 'Task File Listing',\n            icon: <ListIcon style={{ paddingRight: '5px', color: theme.palette.warning.main }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                onTaskRowAction({\n                    path: rowData.parent_path_text,\n                    host: rowData.host,\n                    filename: rowData.name_text,\n                    uifeature: 'file_browser:list',\n                });\n            },\n        },\n        {\n            name: 'Task Download',\n            icon: <GetAppIcon style={{ paddingRight: '5px', color: theme.palette.success.main }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                onTaskRowAction({\n                    path: rowData.parent_path_text,\n                    host: rowData.host,\n                    filename: rowData.name_text,\n                    uifeature: 'file_browser:download',\n                });\n            },\n        },\n        {\n            name: 'Task File Removal',\n            icon: <DeleteIcon style={{ paddingRight: '5px', color: theme.palette.error.main }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                onTaskRowAction({\n                    path: rowData.parent_path_text,\n                    host: rowData.host,\n                    filename: rowData.name_text,\n                    uifeature: 'file_browser:remove',\n                    getConfirmation: true\n                });\n            },\n        },\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{ }}\n                size='small'\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup='menu'\n                onClick={handleDropdownToggle}\n                color='primary'\n                variant='contained'\n                ref={dropdownAnchorRef}>\n                Actions\n            </Button>\n            <Popper\n                open={dropdownOpen}\n                anchorEl={dropdownAnchorRef.current}\n                role={undefined}\n                transition\n                style={{ zIndex: 4000 }}>\n                {({ TransitionProps, placement }) => (\n                    <Grow\n                        {...TransitionProps}\n                        style={{\n                            transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                        }}>\n                        <Paper\n                            style={{\n                                backgroundColor:\n                                    theme.palette.type === 'dark'\n                                        ? theme.palette.primary.dark\n                                        : theme.palette.primary.light,\n                                color: 'white',\n                            }}>\n                            <ClickAwayListener onClickAway={handleClose}>\n                                <MenuList id='split-button-menu'>\n                                    {optionsA.map((option, index) => (\n                                        <MenuItem\n                                            key={option.name}\n                                            onClick={(event) => handleMenuItemClick('A', event, index)}>\n                                            {option.icon}\n                                            {option.name}\n                                        </MenuItem>\n                                    ))}\n                                    <Divider />\n                                    {optionsB.map((option, index) => (\n                                        <MenuItem\n                                            key={option.name}\n                                            onClick={(event) => handleMenuItemClick('B', event, index)}>\n                                            {option.icon}\n                                            {option.name}\n                                        </MenuItem>\n                                    ))}\n                                </MenuList>\n                            </ClickAwayListener>\n                        </Paper>\n                    </Grow>\n                )}\n            </Popper>\n            {fileCommentDialogOpen && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={fileCommentDialogOpen}\n                    onClose={() => {\n                        setFileCommentDialogOpen(false);\n                    }}\n                    innerDialog={\n                        <MythicModifyStringDialog\n                            title='Edit File Browser Comment'\n                            onSubmit={onSubmitUpdatedComment}\n                            value={rowData.comment}\n                            onClose={() => {\n                                setFileCommentDialogOpen(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n            {viewPermissionsDialogOpen && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={viewPermissionsDialogOpen}\n                    onClose={() => {\n                        setViewPermissionsDialogOpen(false);\n                    }}\n                    innerDialog={\n                        <MythicViewJSONAsTableDialog\n                            title='View Permissions Data'\n                            leftColumn='Permission'\n                            rightColumn='Value'\n                            value={permissionData}\n                            onClose={() => {\n                                setViewPermissionsDialogOpen(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n            {fileHistoryDialogOpen && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={fileHistoryDialogOpen}\n                    onClose={() => {\n                        setFileHistoryDialogOpen(false);\n                    }}\n                    innerDialog={\n                        <DownloadHistoryDialog\n                            title='Download History'\n                            value={downloadHistory}\n                            onClose={() => {\n                                setFileHistoryDialogOpen(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n        </React.Fragment>\n    );\n};\n","import { MythicTabPanel, MythicTabLabel } from '../../../components/MythicComponents/MythicTabPanel';\nimport React, { useEffect, useCallback } from 'react';\nimport { gql, useLazyQuery, useQuery } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { useTheme } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport { CallbacksTabsFileBrowserTree } from './CallbacksTabsFileBrowserTree';\nimport { CallbacksTabsFileBrowserTable } from './CallbacksTabsFileBrowserTable';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport { MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { Backdrop } from '@material-ui/core';\nimport {CircularProgress} from '@material-ui/core';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nconst fileDataFragment = gql`\n    fragment fileObjData on filebrowserobj {\n        access_time\n        comment\n        deleted\n        filemeta {\n            id\n        }\n        host\n        id\n        is_file\n        modify_time\n        parent_id\n        size\n        success\n        task {\n            callback {\n                id\n            }\n            operator {\n                id\n            }\n        }\n        full_path_text\n        name_text\n        timestamp\n        parent_path_text\n        filebrowserobjs_aggregate {\n            aggregate {\n                count\n            }\n        }\n    }\n`;\nconst rootFileQuery = gql`\n    ${fileDataFragment}\n    query myRootFolderQuery($operation_id: Int!) {\n        filebrowserobj(where: { operation_id: { _eq: $operation_id }, parent_id: { _is_null: true } }) {\n            ...fileObjData\n        }\n    }\n`;\nconst folderQuery = gql`\n    ${fileDataFragment}\n    query myFolderQuery($filebrowserobj_id: Int!, $operation_id: Int!) {\n        filebrowserobj(\n            where: { parent_id: { _eq: $filebrowserobj_id }, operation_id: { _eq: $operation_id } }\n            order_by: { is_file: asc, name: asc }\n        ) {\n            ...fileObjData\n        }\n    }\n`;\nconst fileDataSubscription = gql`\n    ${fileDataFragment}\n    subscription liveData($now: timestamp!, $operation_id: Int!) {\n        filebrowserobj(\n            distinct_on: id\n            order_by: { id: desc }\n            where: { timestamp: { _gt: $now }, operation_id: { _eq: $operation_id } }\n            limit: 1\n        ) {\n            ...fileObjData\n        }\n    }\n`;\nconst getDeltaFilesQuery = gql`\n    ${fileDataFragment}\n    query myDeltaFilesQuery($lastTime: timestamp!, $now: timestamp!, $operation_id: Int!) {\n        filebrowserobj(\n            distinct_on: id\n            order_by: { id: desc }\n            where: {\n                _and: [{ timestamp: { _gte: $lastTime } }, { timestamp: { _lte: $now } }]\n                operation_id: { _eq: $operation_id }\n            }\n        ) {\n            ...fileObjData\n        }\n    }\n`;\n\nexport function CallbacksTabsFileBrowserLabel(props) {\n    const [description, setDescription] = React.useState('File Browser: ' + props.tabInfo.callbackID);\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    };\n    useEffect(() => {\n        if (props.tabInfo.customDescription !== '' && props.tabInfo.customDescription !== undefined) {\n            setDescription(props.tabInfo.customDescription);\n        } else {\n            setDescription('File Browser: ' + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription]);\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    };\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props} />\n            {openEditDescriptionDialog && (\n                <MythicDialog\n                    fullWidth={true}\n                    open={openEditDescriptionDialog}\n                    onClose={() => {\n                        setOpenEditDescriptionDialog(false);\n                    }}\n                    innerDialog={\n                        <MythicModifyStringDialog\n                            title={\"Edit Tab's Description\"}\n                            onClose={() => {\n                                setOpenEditDescriptionDialog(false);\n                            }}\n                            value={description}\n                            onSubmit={editDescriptionSubmit}\n                        />\n                    }\n                />\n            )}\n        </React.Fragment>\n    );\n}\nexport const CallbacksTabsFileBrowserPanel = ({ index, value, tabInfo }) => {\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [backdropOpen, setBackdropOpen] = React.useState(false);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const selectedFolderDataRef = React.useRef({});\n    const [selectedFolderData, setSelectedFolderData] = React.useState({\n        task: { callback: { id: tabInfo.callbackID } },\n        host: tabInfo.host,\n        full_path_text: '.',\n    });\n    const currentCallbackIDSetInTable = React.useRef();\n    const lastFetchedTime = React.useRef(new Date().toISOString());\n    const [showDeletedFiles, setShowDeletedFiles] = React.useState(false);\n    const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n    const taskingData = React.useRef({\"parameters\": \"\", \"ui_feature\": \"file_browser:list\"});\n    const mountedRef = React.useRef(true);\n    const { subscribeToMore, loading } = useQuery(rootFileQuery, {\n        variables: { operation_id: me.user.current_operation_id },\n        onCompleted: (data) => {\n            const roots = data.filebrowserobj.reduce((prev, cur) => {\n                for (let i = 0; i < prev.length; i++) {\n                    if (prev[i]['host'] === cur.host) {\n                        if(prev[i].children){\n                            prev[i].children.push({ ...cur, parent_id: cur.host, children: [] });\n                        }else{\n                            prev[i].children = [{ ...cur, parent_id: cur.host, children: [] }];\n                        }\n                        \n                        return [...prev];\n                    }\n                }\n                return [\n                    ...prev,\n                    { ...cur, id: cur.host, children: [{ ...cur, parent_id: cur.host, children: [] }] },\n                ];\n            }, []);\n            setFileBrowserRootsState(roots);\n        },\n        fetchPolicy: 'network-only',\n    });\n    const [getFileDeltas] = useLazyQuery(getDeltaFilesQuery, {\n        onCompleted: (data) => {\n            let updatingData = [...fileBrowserRoots.current];\n            data.filebrowserobj.forEach((obj) => {\n                let found = false;\n                if (obj.parent_id === null) {\n                    // we could have a new host, a new root, or a n updated root\n                    let foundHost = false;\n                    updatingData.forEach((root) => {\n                        if (root['host'] === obj['host']) {\n                            foundHost = true;\n                            //console.log(root, obj);\n                            root.children.forEach((rootEntry) => {\n                                if (rootEntry['name_text'] === obj['name_text']) {\n                                    found = true;\n                                    rootEntry.comment = obj.comment;\n                                    rootEntry.success = obj.success;\n                                    rootEntry.deleted = obj.deleted;\n                                    rootEntry.filemeta = obj.filemeta;\n                                }\n                            });\n                        }\n                    });\n                    if (!foundHost) {\n                        found = false;\n                    } else if (foundHost && !found) {\n                        found = true;\n                        // there's a host entry that matches obj, but this is a new root, so find the match again\n                        updatingData.forEach((root) => {\n                            if (root['host'] === obj['host']) {\n                                root.children.push({ ...obj, parent_id: obj['host'], children: [] });\n                            }\n                        });\n                    }\n                } else {\n                    // parent_id is not null, so it's not a root entry\n                    updatingData.forEach((root) => {\n                        if (root['host'] === obj['host']) {\n                            found = true;\n                            mergeData(root, obj.parent_id, [obj]);\n                        }\n                    });\n                }\n                if (!found && obj.parent_id === null) {\n                    // add a new top-level host entry\n                    updatingData.push({\n                        ...obj,\n                        id: obj['host'],\n                        children: [{ ...obj, parent_id: obj['host'], children: [] }],\n                    });\n                }\n            });\n            setFileBrowserRootsState(updatingData);\n            //console.log(\"updating data\", updatingData, selectedFolderDataRef.current, data.filebrowserobj[0]);\n            if (\n                data.filebrowserobj.length > 0 &&\n                selectedFolderDataRef.current.id !== undefined &&\n                (data.filebrowserobj[0].parent_id === selectedFolderDataRef.current.id ||\n                    selectedFolderDataRef.current.host === data.filebrowserobj[0].host)\n            ) {\n                // this means we got updated data for something in the folder we're currently looking at in the table, so we need to make sure to update the table\n                //console.log(\"updating table\");\n                setSelectedFolder(Object.values(selectedFolderDataRef.current.children));\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        },\n    });\n    useEffect(() => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState]);\n    useEffect(() => {\n        selectedFolderDataRef.current = selectedFolderData;\n    }, [selectedFolderData]);\n    const [getFolderData] = useLazyQuery(folderQuery, {\n        onError: (data) => {\n            console.error(data);\n        },\n        fetchPolicy: 'no-cache',\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n            let found = false;\n            if (data.filebrowserobj.length === 0) {\n                snackActions.dismiss();\n                if (selectedFolderData.success === null) {\n                    snackActions.info(\"Folder hasn't been listed yet\");\n                } else {\n                    snackActions.info('Empty folder');\n                }\n                setSelectedFolder(Object.values(selectedFolderData.children));\n                setBackdropOpen(false);\n                return;\n            }\n            snackActions.dismiss();\n            snackActions.success('Fetched data');\n            const newRoots = fileBrowserRootsState.map((root) => {\n                if (data.filebrowserobj[0]['host'] === root['host']) {\n                    // for each element we get back, add to this root\n                    let workingSet = { ...root };\n                    found = true;\n                    mergeData(workingSet, data.filebrowserobj[0].parent_id, data.filebrowserobj);\n                    return workingSet;\n                } else {\n                    return { ...root };\n                }\n            });\n            if (!found) {\n                // we need to add this as a root element\n                newRoots.push(data.filebrowserobj[0]);\n                mergeData(data.filebrowserobj[0], data.filebrowserobj[0].parent_id, data.filebrowserobj);\n            }\n            //console.log(\"setting new roots\");\n            setFileBrowserRootsState(newRoots);\n            setSelectedFolder(Object.values(selectedFolderData.children));\n            setBackdropOpen(false);\n        },\n    });\n    const mergeData = useCallback((search, parent_id, all_objects) => {\n        //merge the obj into fileBrowserRoots\n        //console.log('in mergeData');\n        // might need to do a recursive call\n        // if this is a folder with children, check the children\n        if (parent_id === search.id) {\n            // iterate for each child we're trying to update/insert\n            //console.log(\"found parent, setting children\");\n            for (let i = 0; i < all_objects.length; i++) {\n                if (search.children[all_objects[i].id] === undefined) {\n                    search.children[all_objects[i].id] = { ...all_objects[i], children: {} };\n                } else {\n                    search.children[all_objects[i].id] = {\n                        ...all_objects[i],\n                        children: search.children[all_objects[i].id].children,\n                    };\n                }\n            }\n            //console.log(\"found parent, set children, returning\");\n            return true;\n        }\n        // this current search isn't all_object's parent, so check search's children for our parent\n        for (const [_, value] of Object.entries(search.children)) {\n            if (all_objects[0].parent_path_text.startsWith(value.full_path_text)) {\n                let found = mergeData(value, parent_id, all_objects);\n                if (found) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }, []);\n    const onSetTableData = useCallback((filebrowserobj) => {\n        setSelectedFolder(Object.values(filebrowserobj.children));\n        setSelectedFolderData(filebrowserobj);\n    }, []);\n    const fetchFolderData = useCallback((filebrowserobj) => {\n        getFolderData({\n            variables: { filebrowserobj_id: filebrowserobj.id, operation_id: me.user.current_operation_id },\n        });\n        setBackdropOpen(true);\n        setSelectedFolderData(filebrowserobj);\n    }, []);\n    const onListFilesButton = ({ fullPath, hostname }) => {\n        taskingData.current = ({\"parameters\": {path: fullPath, host: hostname, file: \"\"}, \"ui_feature\": \"file_browser:list\"});\n        setOpenTaskingButton(true);\n    };\n    const onUploadFileButton = ({ hostname, fullPath }) => {\n        taskingData.current = ({\"parameters\": {path: fullPath, host: hostname}, \"ui_feature\": \"file_browser:upload\", \"openDialog\": true});\n        setOpenTaskingButton(true);\n    };\n    const onTaskRowAction = useCallback(({ path, host, filename, uifeature, openDialog, getConfirmation }) => {\n        taskingData.current = ({\"parameters\": {\n            host: host,\n            path: path,\n            file: filename,\n        }, \"ui_feature\": uifeature, openDialog, getConfirmation});\n        setOpenTaskingButton(true);\n    }, []);\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    };\n    const subscribeToMoreCallback = useCallback(\n        (prev, { subscriptionData }) => {\n            if(!mountedRef.current){\n                return;\n            }\n            if (subscriptionData.data.filebrowserobj.length > 0) {\n                getFileDeltas({\n                    variables: {\n                        operation_id: me.user.current_operation_id,\n                        now: new Date().toISOString(),\n                        lastTime: lastFetchedTime.current,\n                    },\n                });\n                if (\n                    subscriptionData.data.filebrowserobj[0] !== null &&\n                    subscriptionData.data.filebrowserobj[0] !== undefined\n                ) {\n                    lastFetchedTime.current = subscriptionData.data.filebrowserobj[0]['timestamp'];\n                }\n\n                return;\n            }\n        },\n        [mergeData]\n    );\n    const toggleShowDeletedFiles = (showStatus) => {\n        setShowDeletedFiles(showStatus);\n    };\n    React.useEffect( () => {\n        return() => {\n            mountedRef.current = false;\n        }\n         // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return (\n        <MythicTabPanel index={index} value={value}>\n            <div style={{ display: 'flex', flexGrow: 1, overflowY: 'auto' }}>\n                <div style={{ width: '30%', overflow: 'auto', flexGrow: 1 }}>\n                    <Backdrop open={backdropOpen} style={{zIndex: 2, position: \"absolute\"}} invisible={true}>\n                        <CircularProgress color=\"inherit\" />\n                    </Backdrop>\n                    <CallbacksTabsFileBrowserTree\n                        showDeletedFiles={showDeletedFiles}\n                        treeRoot={fileBrowserRootsState}\n                        fetchFolderData={fetchFolderData}\n                        setTableData={onSetTableData}\n                    />\n                    \n                </div>\n                <div style={{ width: '60%', display: 'flex', flexDirection: 'column', flexGrow: 1 }}>\n                    <div style={{ flexGrow: 0 }}>\n                        <FileBrowserTableTop\n                            selectedFolderData={selectedFolderData}\n                            onListFilesButton={onListFilesButton}\n                            onUploadFileButton={onUploadFileButton}\n                            onChangeCallbackID={onChangeCallbackID}\n                            toggleShowDeletedFiles={toggleShowDeletedFiles}\n                            initialCallbackID={tabInfo.callbackID}\n                            subscribeToNewFileBrowserObjs={() => {\n                                subscribeToMore({\n                                    document: fileDataSubscription,\n                                    variables: {\n                                        now: new Date().toISOString(),\n                                        operation_id: me?.user?.current_operation_id || 0,\n                                    },\n                                    updateQuery: subscribeToMoreCallback,\n                                })\n                            }}\n                        />\n                    </div>\n                    <div style={{ flexGrow: 1 }}>\n                        <Backdrop open={backdropOpen} style={{zIndex: 2, position: \"absolute\"}} invisible={true}>\n                            <CircularProgress color=\"inherit\" />\n                        </Backdrop>\n                        <CallbacksTabsFileBrowserTable\n                            showDeletedFiles={showDeletedFiles}\n                            onRowDoubleClick={fetchFolderData}\n                            selectedFolder={selectedFolder}\n                            onTaskRowAction={onTaskRowAction}\n                        />\n                    </div>\n                </div>\n            </div>\n            {openTaskingButton && \n                <TaskFromUIButton ui_feature={taskingData.current?.ui_feature || \" \"} \n                    callback_id={currentCallbackIDSetInTable.current} \n                    parameters={taskingData.current?.parameters || \"\"}\n                    tasking_location={\"file_browser\"}\n                    openDialog={taskingData.current?.openDialog || false}\n                    getConfirmation={taskingData.current?.getConfirmation || false}\n                    onTasked={() => setOpenTaskingButton(false)}/>\n            }\n        </MythicTabPanel>\n    );\n};\nconst FileBrowserTableTop = ({\n    selectedFolderData,\n    onListFilesButton,\n    initialCallbackID,\n    onUploadFileButton,\n    onChangeCallbackID,\n    subscribeToNewFileBrowserObjs,\n    toggleShowDeletedFiles,\n}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState('');\n    const [fullPath, setFullPath] = React.useState('');\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [showDeletedFiles, setLocalShowDeletedFiles] = React.useState(false);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const onChangeHost = (_, value) => {\n        setHostname(value);\n    };\n    const onChangePath = (_, value) => {\n        setFullPath(value);\n    };\n    const onChangeID = (_, value) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    };\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if (selectedFolderData.task) {\n            setCallbackID(selectedFolderData.task.callback.id);\n        } else {\n            setCallbackID(0);\n            onChangeCallbackID(0);\n        }\n    };\n    useEffect(() => {\n        if (selectedFolderData.host !== undefined) {\n            setHostname(selectedFolderData.host);\n        }\n        if (selectedFolderData.full_path_text !== undefined) {\n            setFullPath(selectedFolderData.full_path_text);\n        }\n        if (!manuallySetCallbackID) {\n            if (selectedFolderData.task !== undefined) {\n                setCallbackID(selectedFolderData.task.callback.id);\n            }\n        }\n    }, [selectedFolderData, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if (fullPath === '') {\n            snackActions.warning('Must provide a path to list');\n            return;\n        }\n        if (callbackID > 0) {\n            onListFilesButton({ callbackID, fullPath, hostname });\n        } else {\n            snackActions.warning('Must select a folder or set a callback number first');\n        }\n    };\n    const onLocalUploadFileButton = () => {\n        if (callbackID > 0) {\n            onUploadFileButton({ fullPath, hostname });\n        } else {\n            snackActions.warning('Must select a folder or set a callback number first');\n        }\n    };\n    useEffect(() => {\n        //console.log(\"useEffect for onChangeCAllbackID\")\n        onChangeCallbackID(callbackID);\n    }, [callbackID]);\n    useEffect(() => {\n        subscribeToNewFileBrowserObjs();\n    }, []);\n    const onLocalToggleShowDeletedFiles = () => {\n        setLocalShowDeletedFiles(!showDeletedFiles);\n        toggleShowDeletedFiles(!showDeletedFiles);\n    };\n    return (\n        <Grid container spacing={0} style={{ paddingTop: '10px' }}>\n            <Grid item xs={4}>\n                <MythicTextField placeholder='Host Name' value={hostname} onChange={onChangeHost} name='Host Name' />\n            </Grid>\n            <Grid item xs={7}>\n                <MythicTextField\n                    placeholder='Path'\n                    value={fullPath}\n                    onEnter={onLocalListFilesButton}\n                    onChange={onChangePath}\n                    name='Path'\n                    InputProps={{\n                        endAdornment: (\n                            <React.Fragment>\n                                <MythicStyledTooltip title='Task callback to list contents'>\n                                    <IconButton style={{ padding: '3px' }} onClick={onLocalListFilesButton}>\n                                        <RefreshIcon style={{ color: theme.palette.info.main }} />\n                                    </IconButton>\n                                </MythicStyledTooltip>\n                                <MythicStyledTooltip title='Upload file to folder via callback'>\n                                    <IconButton style={{ padding: '3px' }} onClick={onLocalUploadFileButton}>\n                                        <CloudUploadIcon style={{ color: theme.palette.info.main }} />\n                                    </IconButton>\n                                </MythicStyledTooltip>\n                                <MythicStyledTooltip title={showDeletedFiles ? 'Hide Deleted Files' : 'Show Deleted Files'}>\n                                    <IconButton style={{ padding: '3px' }} onClick={onLocalToggleShowDeletedFiles}>\n                                        {showDeletedFiles ? (\n                                            <VisibilityIcon style={{ color: theme.palette.info.main }} />\n                                        ) : (\n                                            <VisibilityOffIcon style={{ color: theme.palette.info.main }} />\n                                        )}\n                                    </IconButton>\n                                </MythicStyledTooltip>\n                            </React.Fragment>\n                        ),\n                        style: { padding: 0 },\n                    }}\n                />\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField\n                    type='number'\n                    placeholder='Callback'\n                    name='Callback'\n                    onChange={onChangeID}\n                    value={callbackID}\n                    InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <MythicStyledTooltip title='Change Callback Based on Data Origin'>\n                                <IconButton style={{ padding: '3px' }} onClick={revertCallbackID}>\n                                    <LockIcon style={{ color: theme.palette.info.main }} />\n                                </IconButton>\n                            </MythicStyledTooltip>\n                        ) : (\n                            <MythicStyledTooltip title='Manually Update Callback Number to Prevent Data Origin Tracking'>\n                                <IconButton style={{ padding: '3px' }}>\n                                    <RotateLeftIcon disabled style={{ color: theme.palette.warning.main }} />\n                                </IconButton>\n                            </MythicStyledTooltip>\n                        ),\n                        style: { padding: 0, margin: 0 },\n                    }}\n                />\n            </Grid>\n        </Grid>\n    );\n};\n","import { fade } from \"@material-ui/core\";\nimport { useCallback, useMemo } from \"react\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { useTheme } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport DescriptionIcon from '@material-ui/icons/Description';\n\nconst VirtualTreeRow = ({\n  onSelectNode,\n  onExpandNode,\n  onCollapseNode,\n  ...ListProps\n}) => {\n\n  const item = ListProps.data[ListProps.index];\n  const theme = useTheme();\n  const handleOnClickButton = (e) => {\n    e.stopPropagation();\n    if (item.isOpen) {\n      onCollapseNode(item.id, item);\n    } else {\n      onExpandNode(item.id, item);\n    }\n  };\n\n  const handleOnClickRow = (e) => {\n    onSelectNode(item.id, item);\n  };\n  return (\n    <div style={ListProps.style}>\n    <div style={{display: 'flex' , marginBottom: \"2px\", flexGrow: 1}}>\n        {[...Array(item.data.depth)].map((o, i) => (\n            <div\n                key={'folder' + item.data.id + 'lines' + i}\n                style={{\n                    borderLeft: `2px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n                    marginLeft: 15,\n                    paddingRight: 15,\n                    display: 'inline-block',\n                }}></div>\n        ))}\n        {item.data.children.length === 0 ? (\n          <DescriptionIcon style={{ marginLeft: '3px' }} />\n        ) : (\n          item.isOpen ? (\n            <KeyboardArrowDownIcon \n              style={{\n                marginLeft: \"3px\",\n              }}\n              onClick={handleOnClickButton}\n              />\n          ) : (\n            <KeyboardArrowRightIcon \n              style={{\n                marginLeft: \"3px\",\n              }}\n              onClick={handleOnClickButton}\n              />\n          )\n        )}\n        <Typography style={{paddingLeft: \"10px\"}} component=\"pre\">\n                {item.data.process_id} - {item.data.name}\n        </Typography>\n    </div>\n    </div>\n);\n};\n\nconst ProcessBrowserVirtualTree = ({\n  nodes,\n  openNodes,\n  onSelectNode,\n  onExpandNode,\n  onCollapseNode,\n  display_name,\n}) => {\n  const flattenNode = useCallback(\n    (node, depth = 0) => {\n      if (openNodes[node.id] === true) {\n        return [\n          {\n            id: node.id,\n            name: node[display_name],\n            depth,\n            isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n            isOpen: true,\n            data: {...node, depth}\n          },\n          ...(Object.values(node.children).reduce( (prev, cur) => {\n              if(cur.is_file){return [...prev]}\n              return [...prev, flattenNode(cur, depth+1)];\n          }, []).flat())\n        ];\n      }\n      return [\n        {\n          id: node.id,\n          name: node[display_name],\n          depth,\n          isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n          isOpen: false,\n          data: {...node, depth},\n        }\n      ];\n     \n    },\n    [openNodes] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  const flattenedNodes = useMemo(\n    () => nodes.map((node) => flattenNode(node)).flat(),\n    [flattenNode, nodes]\n  );\n  return (\n    <AutoSizer>\n      {(AutoSizerProps) => (\n        <List\n          itemData={flattenedNodes}\n          direction=\"vertical\"\n          height={AutoSizerProps.height - 10}\n          width={AutoSizerProps.width - 10}\n          itemCount={flattenedNodes.length}\n          itemSize={24}\n        >\n          {(ListProps) => (\n            <VirtualTreeRow\n              {...ListProps}\n              onSelectNode={onSelectNode}\n              onExpandNode={onExpandNode}\n              onCollapseNode={onCollapseNode}\n            />\n          )}\n        </List>\n      )}\n    </AutoSizer>\n  );\n};\n\nexport default ProcessBrowserVirtualTree;\n","import React from 'react';\nimport ProcessBrowserVirtualTree from '../../MythicComponents/MythicProcessBrowserVirtualTree';\n\n\nexport const CallbacksTabsProcessBrowserTree = ({treeRoot}) => {\n    const [openNodes, setOpenNodes] = React.useState({});\n    const toggleNodeExpanded = (nodeId, nodeData) => {\n        setOpenNodes({\n          ...openNodes,\n          [nodeId]: true\n        });\n      };\n    const toggleNodeCollapsed = (nodeId, nodeData) => {\n        setOpenNodes({\n          ...openNodes,\n          [nodeId]: false\n        });\n      };\n    const onSelectNode = (nodeId, nodeData) => {\n        console.log(\"onSelectNode\", nodeId, nodeData);\n    };\n    React.useEffect( () => {\n      // start off with all of the nodes open for the process browser\n      let open = {};\n      const recursiveCall = (node) => {\n        open[node.id] = true;\n        node?.children?.forEach( n => recursiveCall(n));\n      }\n      treeRoot.forEach(r => recursiveCall(r));\n      setOpenNodes(open);\n    }, [treeRoot]);\n    return (\n        treeRoot.length === 0 ? (\n            <div style={{\n                display: \"flex\", \n                justifyContent: \"center\", \n                alignItems: \"center\",\n                 position: \"absolute\", \n                 left: \"50%\", \n                 top: \"50%\"\n                }}>\n                    No Process Listing Data\n            </div>\n        ) : (\n            <ProcessBrowserVirtualTree\n                nodes={treeRoot}\n                display_name={\"name\"}\n                openNodes={openNodes}\n                onSelectNode={onSelectNode}\n                onExpandNode={toggleNodeExpanded}\n                onCollapseNode={toggleNodeCollapsed}\n            />\n        )\n    )\n}\n","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport { MythicDialog, MythicViewObjectPropertiesAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Button} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { snackActions } from '../../utilities/Snackbar';\nimport 'react-virtualized/styles.css';\nimport MythicResizableGrid from '../../MythicComponents/MythicResizableGrid';\nimport {TableFilterDialog} from './TableFilterDialog';\nimport {MythicTransferListDialog} from '../../MythicComponents/MythicTransferList';\n\n\nconst getDetailedData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        command_line\n        description\n        signer\n        start_time\n        name\n        bin_path\n    }\n}\n`;\nconst getProcessTokenData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        tokens(where: {deleted: {_eq: false}}) {\n            Address\n            AppContainer\n            AppContainerNumber\n            AppContainerSid\n            AppId\n            AppModelPolicies\n            AppModelPolicyDictionary\n            AttributesFlags\n            AuditPolicy\n            AuthenticationId_id\n            BnoIsolationPrefix\n            CanSynchronize\n            Capabilities\n            CreationTime\n            DefaultDacl\n            DenyOnlyGroups\n            DeviceClaimAttributes\n            DeviceGroups\n            Elevated\n            ElevationType\n            EnabledGroups\n            ExpirationTime\n            Filtered\n            Flags\n            FullPath\n            GrantedAccess\n            GrantedAccessGeneric\n            GrantedAccessMask\n            GroupCount\n            Groups\n            Handle\n            HandleReferenceCount\n            HasRestrictions\n            ImpersonationLevel\n            Inherit\n            IntegrityLevel\n            IntegrityLevelSid\n            IsClosed\n            IsContainer\n            IsPseudoToken\n            IsRestricted\n            IsSandbox\n            LogonSid\n            LowPrivilegeAppContainer\n            MandatoryPolicy\n            ModifiedId\n            Name\n            NoChildProcess\n            NotLow\n            NtType\n            NtTypeName\n            Owner\n            Origin\n            PackageFullName\n            PackageIdentity\n            PackageName\n            PointerReferenceCount\n            PrimaryGroup\n            PrivateNamespace\n            Privileges\n            ProcessUniqueAttribute\n            ProtectFromClose\n            Restricted\n            RestrictedDeviceClaimAttributes\n            RestrictedDeviceGroups\n            RestrictedSids\n            RestrictedSidsCount\n            RestrictedUserClaimAttributes\n            SandboxInert\n            Sddl\n            SecurityAttributes\n            SecurityDescriptor\n            SessionId\n            Source\n            ThreadID\n            TokenId\n            TokenType\n            TrustLevel\n            UIAccess\n            User\n            UserClaimAttributes\n            VirtualizationAllowed\n            VirtualizationEnabled\n            WriteRestricted\n            callbacktokens {\n                callback_id\n            }\n            logonsession {\n                id\n            }\n            task_id\n            timestamp_created\n        }\n    }\n}\n`;\n\n\nexport const CallbacksTabsProcessBrowserTable = (props) => {\n    const [allData, setAllData] = React.useState([]);\n    const [sortData, setSortData] = React.useState({\"sortKey\": null, \"sortDirection\": null, \"sortType\": null});\n    const [openContextMenu, setOpenContextMenu] = React.useState(false);\n    const [filterOptions, setFilterOptions] = React.useState({});\n    const [selectedColumn, setSelectedColumn] = React.useState({});\n    const [columnVisibility, setColumnVisibility] = React.useState({\n        \"visible\": [\"Actions\", \"PPID\", \"PID\", \"Arch\", \"Name\", \"User\"],\n        \"hidden\": [\"Path\"]\n    })\n    const [openAdjustColumnsDialog, setOpenAdjustColumnsDialog] = React.useState(false);\n    const columns = React.useMemo(\n        () => \n            [\n                { name: 'Actions', width: 100, disableAutosize: true, disableSort: true, disableFilterMenu: true },\n                { name: 'PPID', type: 'number', key: 'parent_process_id', width:75 },\n                { name: 'PID',  type: 'number', key: 'process_id', width: 75},\n                { name: 'Arch', type: 'string', key: 'architecture', width: 75 },\n                { name: 'Name', type: 'string', key: 'name', fillWidth: true },\n                { name: 'User', type: 'string', key: 'user', fillWidth: true},\n                { name: 'Path', type: 'string', key: 'bin_path', width: 200}\n            ].reduce( (prev, cur) => {\n                if(columnVisibility.visible.includes(cur.name)){\n                    if(filterOptions[cur.key] && String(filterOptions[cur.key]).length > 0){\n                        return [...prev, {...cur, filtered: true}];\n                    }else{\n                        return [...prev, {...cur}];\n                    }\n                }else{\n                    return [...prev];\n                }\n            }, [])\n        , [filterOptions, columnVisibility]\n    );\n    useEffect( () => {\n        setAllData([...props.selectedFolder]);\n    }, [props.selectedFolder]);\n    const sortedData = React.useMemo(() => {\n        if (sortData.sortKey === null || sortData.sortType === null) {\n            return allData;\n        }\n        const tempData = [...allData];\n\n        if (sortData.sortType === 'number' || sortData.sortType === 'size' || sortData.sortType === 'date') {\n            tempData.sort((a, b) => (parseInt(a[sortData.sortKey]) > parseInt(b[sortData.sortKey]) ? 1 : -1));\n        } else if (sortData.sortType === 'string') {\n            tempData.sort((a, b) => (a[sortData.sortKey].toLowerCase() > b[sortData.sortKey].toLowerCase() ? 1 : -1));\n        }\n        if (sortData.sortDirection === 'DESC') {\n            tempData.reverse();\n        }\n        return tempData;\n    }, [allData, sortData]);\n    const onSubmitFilterOptions = (newFilterOptions) => {\n        setFilterOptions(newFilterOptions);\n    }\n    const filterRow = (row) => {\n        for(const [key,value] of Object.entries(filterOptions)){\n            if(!String(row[key]).toLowerCase().includes(value)){\n                return true;\n            }\n        }\n        return false;\n    }\n    const gridData = React.useMemo(\n        () =>\n            sortedData.reduce((prev, row) => { \n                if(filterRow(row)){\n                    return [...prev];\n                }else{\n                    return [...prev, columns.map( c => {\n                        switch(c.name){\n                            case \"Actions\":\n                                return <FileBrowserTableRowActionCell rowData={row} onTaskRowAction={props.onTaskRowAction} />;\n                            case \"PPID\":\n                                return <FileBrowserTableRowStringCell rowData={row} cellData={row.parent_process_id} />;\n                            case \"PID\":\n                                return <FileBrowserTableRowStringCell rowData={row} cellData={row.process_id} />;\n                            case \"Arch\":\n                                return <FileBrowserTableRowStringCell rowData={row} cellData={row.architecture} />;\n                            case \"Name\":\n                                return <FileBrowserTableRowStringCell rowData={row} cellData={row.name} />;\n                            case \"User\":\n                                return <FileBrowserTableRowStringCell rowData={row} cellData={row.user} />;\n                            case \"Path\":\n                                return <FileBrowserTableRowStringCell rowData={row} cellData={row.bin_path} />;\n                        }\n                    })];\n                }\n            }, []),\n        [sortedData, props.onTaskRowAction, filterOptions, columnVisibility]\n    );\n    const onClickHeader = (e, columnIndex) => {\n        const column = columns[columnIndex];\n        if(column.disableSort){\n            return;\n        }\n        if (!column.key) {\n            setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n        }\n        if (sortData.sortKey === column.key) {\n            if (sortData.sortDirection === 'ASC') {\n                setSortData({...sortData, \"sortDirection\": \"DESC\"});\n            } else {\n                setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n            }\n        } else {\n            setSortData({\"sortKey\": column.key, \"sortType\":column.type, \"sortDirection\": \"ASC\"});\n        }\n    };\n    const onRowDoubleClick = React.useCallback( () => {\n\n    }, []);\n    const contextMenuOptions = [\n        {\n            name: 'Filter Column', \n            click: ({event, columnIndex}) => {\n                if(columns[columnIndex].disableFilterMenu){\n                    snackActions.warning(\"Can't filter that column\");\n                    return;\n                }\n                setSelectedColumn(columns[columnIndex]);\n                setOpenContextMenu(true);\n            }\n        },\n        {\n            name: \"Show/Hide Columns\",\n            click: ({event, columnIndex}) => {\n                if(columns[columnIndex].disableFilterMenu){\n                    snackActions.warning(\"Can't filter that column\");\n                    return;\n                }\n                setOpenAdjustColumnsDialog(true);\n            }\n        }\n    ];\n    const onSubmitAdjustColumns = ({left, right}) => {\n        setColumnVisibility({visible: right, hidden: left});\n    }\n    const sortColumn = columns.findIndex((column) => column.key === sortData.sortKey);\n    return (\n        <div style={{ width: '100%', height: '100%', overflow: \"hidden\" }}>\n            <MythicResizableGrid\n                columns={columns}\n                sortIndicatorIndex={sortColumn}\n                sortDirection={sortData.sortDirection}\n                items={gridData}\n                rowHeight={35}\n                onClickHeader={onClickHeader}\n                onDoubleClickRow={onRowDoubleClick}\n                contextMenuOptions={contextMenuOptions}\n            />\n            {openContextMenu &&\n                <MythicDialog fullWidth={true} maxWidth=\"xs\" open={openContextMenu} \n                    onClose={()=>{setOpenContextMenu(false);}} \n                    innerDialog={<TableFilterDialog \n                        selectedColumn={selectedColumn} \n                        filterOptions={filterOptions} \n                        onSubmit={onSubmitFilterOptions} \n                        onClose={()=>{setOpenContextMenu(false);}} />}\n                />\n            }\n            {openAdjustColumnsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openAdjustColumnsDialog} \n                  onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                  innerDialog={\n                    <MythicTransferListDialog onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                      onSubmit={onSubmitAdjustColumns} right={columnVisibility.visible} rightTitle=\"Show these columns\"\n                      leftTitle={\"Hidden Columns\"} left={columnVisibility.hidden} dialogTitle={\"Edit which columns are shown\"}/>}\n                />\n            }       \n        </div>\n    )\n}\n\nconst FileBrowserTableRowStringCell = ({cellData}) => {\n    return (\n        <div>{cellData}</div>\n    )\n}\n\nconst FileBrowserTableRowActionCell = ({rowData, onTaskRowAction, os}) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [viewTokensDialogOpen, setViewTokensDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState({});\n    const [tokenData, setTokenData] = React.useState({});\n    const [getPermissions] = useLazyQuery(getDetailedData, {\n        onCompleted: (data) => {\n            setPermissionData(data.process_by_pk);\n            setViewPermissionsDialogOpen(true);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getTokens] = useLazyQuery(getProcessTokenData, {\n        onCompleted: (data) => {\n            if(data.process_by_pk.tokens.length === 0){\n                snackActions.warning(\"No Token Data for Process\");\n            }else{\n                setTokenData(data.process_by_pk.tokens);\n                setViewPermissionsDialogOpen(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption){\n            case \"A\":\n                optionsA[index].click(event);\n                break;\n            case \"B\":\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n    };\n    const optionsA = [{name: 'View Detailed Data', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getPermissions({variables: {process_id: rowData.id}});\n                    }},\n                    {name: 'View Tokens', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getTokens({variables: {process_id: rowData.id}});\n                    }, os: [\"Windows\"]},\n    ];\n    const optionsB = [{name: 'Task Token Listing', icon: <ListIcon style={{paddingRight: \"5px\", color: theme.palette.warning.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            process_id: rowData.process_id,\n                            architecture: rowData.architecture,\n                            uifeature: \"process_browser:list_tokens\"\n                        });\n                    }, os: [\"Windows\"]},\n                    {name: 'Task Inject', icon: <GetAppIcon style={{paddingRight: \"5px\", color: theme.palette.success.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        console.log(rowData);\n                        onTaskRowAction({\n                            process_id: rowData.process_id,\n                            architecture: rowData.architecture,\n                            uifeature: \"process_browser:inject\"\n                        });\n                    }},\n                    {name: 'Task Steal Token', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            process_id: rowData.process_id,\n                            architecture: rowData.architecture,\n                            uifeature: \"process_browser:steal_token\"\n                        });\n                        \n                    }, os: [\"Windows\"]},\n                    {name: 'Task Kill Process', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            process_id: rowData.process_id,\n                            architecture: rowData.architecture,\n                            uifeature: \"process_browser:kill\"\n                        });\n                        \n                    }},\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                size=\"small\"\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup=\"menu\"\n                onClick={handleDropdownToggle}\n                color=\"primary\"\n                variant=\"contained\"\n                ref={dropdownAnchorRef}\n            >\n                Actions\n            </Button>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                {...TransitionProps}\n                style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n                >\n                <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList id=\"split-button-menu\">\n                        {optionsA.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"A\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                        <Divider />\n                        {optionsB.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"B\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                    </MenuList>\n                    </ClickAwayListener>\n                </Paper>\n                </Grow>\n            )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewObjectPropertiesAsTableDialog title=\"View Detailed Data\" leftColumn=\"Attribute\" \n                        rightColumn=\"Value\" value={permissionData} \n                        onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                        keys={[\"name\", \"bin_path\", \"signer\", \"command_line\", \"start_time\", \"description\"]}\n                        />}\n                />\n        </React.Fragment>\n    )\n}\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect} from 'react';\nimport {gql, useLazyQuery, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useTheme} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport {CallbacksTabsProcessBrowserTree} from './CallbacksTabsProcessBrowserTree';\nimport {CallbacksTabsProcessBrowserTable} from './CallbacksTabsProcessBrowserTable';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nconst dataFragment = gql`\nfragment objData on process {\n    name\n    process_id\n    parent_process_id\n    architecture\n    bin_path\n    integrity_level\n    id\n    user\n}\n`;\nconst taskFragment = gql`\nfragment taskDataProcess on task {\n    id\n    callback {\n        id\n        host\n        payload {\n            id\n            os\n            payloadtype{\n                ptype\n            }\n        }\n    }\n}\n`;\nconst getNextProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_gt: $task_id}}, order_by: {task_id: asc}, limit: 1) {\n        task {\n            ...taskDataProcess\n            processes(order_by: {process_id: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getPrevProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_lt: $task_id}}, order_by: {task_id: desc}, limit: 1) {\n        task {\n            ...taskDataProcess\n            processes(order_by: {name: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getLatestTaskForHost = gql`\nquery getHostsQuery($operation_id: Int!, $host:String!){\n    process_aggregate(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}}, distinct_on: task_id){\n        aggregate {\n            max {\n              task_id\n            }\n        }\n    }\n}\n`;\n\nexport function CallbacksTabsProcessBrowserLabel(props){\n    const [description, setDescription] = React.useState(\"Processes: \" + props.tabInfo.host)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else{\n            setDescription(\"Processes: \" + props.tabInfo.host);\n        }\n    }, [props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const CallbacksTabsProcessBrowserPanel = ({index, value, tabInfo}) =>{\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const currentCallbackIDSetInTable = React.useRef();\n    const [currentOS, setCurrentOS] = React.useState(\"\");\n    const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n    const taskingData = React.useRef({\"parameters\": \"\", \"ui_feature\": \"process_browser:list\"});\n    const makeTree = (root, element) => {\n        if(root.process_id === element.parent_process_id){\n            root.children.push({...element, children: []});\n            return true;\n        }else{\n            // root isn't what we're looking for, but maybe a child of root is\n            for(let i = 0; i < root.children.length; i++){\n                if(makeTree(root.children[i], element)){\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    const [getNextProcessDataByHostAndTask] = useLazyQuery(getNextProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Newer Process Sets\");\n            }\n            \n        }\n    });\n    \n    const [getPreviousProcessDataByHostAndTask] = useLazyQuery(getPrevProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Earlier Process Sets\");\n            }\n            \n        }\n    });\n    useQuery(getLatestTaskForHost, {\n        variables: {operation_id: me.user.current_operation_id, host: tabInfo.host},\n        onCompleted: (data) => {\n            if(data.process_aggregate.aggregate.max.task_id === null){\n                snackActions.warning(\"No Process Data for \" + tabInfo.host)\n                setTaskInfo({callback: {host: tabInfo.host, id: tabInfo.callbackID}, id: 0})\n            }else{\n                snackActions.info(\"Fetching latest process data for \" + tabInfo.host);\n                getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n                    host: tabInfo.host,\n                    task_id: data.process_aggregate.aggregate.max.task_id - 1\n                }});\n            }\n        }, fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState])\n\n    const onListFilesButton = ({callbackID}) => {\n        taskingData.current = ({\"parameters\": \"\", \"ui_feature\": \"process_browser:list\"});\n        setOpenTaskingButton(true);\n    }\n    const onNextButton = ({task_id}) => {\n        getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onPreviousButton = ({task_id}) => {\n        getPreviousProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onDiffButton = ({task_id}) => {\n        \n    }\n    const onTaskRowAction = ({process_id, architecture, uifeature}) => {\n        taskingData.current = {\"parameters\": {\"process_id\": process_id, \"architecture\": architecture}, \"ui_feature\": uifeature, openDialog: true};\n        setOpenTaskingButton(true);\n        console.log(process_id, architecture, uifeature);\n    }\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            <div style={{display: \"flex\", flexGrow: 1, overflowY: \"auto\"}}>\n                <div style={{width: \"30%\", overflow: \"auto\", flexGrow: 1}}>\n                    <CallbacksTabsProcessBrowserTree \n                        treeRoot={fileBrowserRootsState} />\n                </div>\n                <div style={{width: \"60%\", display: \"flex\", flexDirection: \"column\", overflow: \"auto\", flexGrow: 1}}>\n                    <ProcessBrowserTableTop\n                        onListFilesButton={onListFilesButton} \n                        onNextButton={onNextButton} \n                        onPreviousButton={onPreviousButton}\n                        onDiffButton={onDiffButton}  \n                        initialCallbackID={tabInfo.callbackID}\n                        onChangeCallbackID={onChangeCallbackID}\n                        taskInfo={taskInfo}/>\n                    <CallbacksTabsProcessBrowserTable selectedFolder={selectedFolder} onTaskRowAction={onTaskRowAction} os={currentOS}/>\n                </div>\n                {openTaskingButton && \n                    <TaskFromUIButton ui_feature={taskingData.current?.ui_feature || \" \"} \n                        callback_id={currentCallbackIDSetInTable.current} \n                        parameters={taskingData.current?.parameters || \"\"}\n                        openDialog={taskingData.current?.openDialog || false}\n                        onTasked={() => setOpenTaskingButton(false)}/>\n                    }\n            </div>            \n        </MythicTabPanel>\n    )\n}\nconst ProcessBrowserTableTop = ({onListFilesButton, onNextButton, onPreviousButton, initialCallbackID, onDiffButton, onChangeCallbackID, taskInfo}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState(\"\");\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const [taskID, setTaskID] = React.useState(0);\n    const onChangeID = (name, value, error) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    }\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if(taskInfo.callback !== undefined){\n            setCallbackID(taskInfo.callback.id);\n        }else{\n            setCallbackID(0);\n        }\n        \n    }\n    useEffect( () => {\n        if(taskInfo.callback !== undefined){\n            setHostname(taskInfo.callback.host);    \n            setTaskID(taskInfo.id);\n        }\n        if(!manuallySetCallbackID){\n            if(taskInfo.callback !== undefined){\n                setCallbackID(taskInfo.callback.id);\n            }else{\n                setCallbackID(0);\n            }\n            \n        }\n    }, [taskInfo, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if(callbackID > 0){\n            onListFilesButton({callbackID})\n        }else{\n            snackActions.warning(\"Must set a callback number to task first\");\n        }\n    }\n    const onLocalNextButton = () => {\n        snackActions.info(\"Fetching next process data...\");\n        onNextButton({task_id: taskInfo.id});\n    }\n    const onLocalPreviousButton = () => {\n        snackActions.info(\"Fetching previous process data...\");\n        onPreviousButton({task_id: taskInfo.id});\n    }\n    const onLocalDiffButton = () => {\n        if(callbackID > 0){\n            onNextButton({callbackID});\n        }else{\n            snackActions.warning(\"Must select a callback number first\");\n        }\n    }\n    useEffect( () => {\n        onChangeCallbackID(callbackID);\n    }, [callbackID, onChangeCallbackID])\n    return (\n        <Grid container spacing={0} style={{paddingTop: \"10px\"}}>\n            <Grid item xs={10}>\n                <MythicTextField placeholder=\"Host Name\" value={hostname} disabled\n                    onChange={() => {}} name=\"Host Name\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <MythicStyledTooltip title=\"Fetch Previous Saved Process Listing\">\n                                <IconButton style={{padding: \"3px\"}} onClick={onLocalPreviousButton}><SkipPreviousIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </MythicStyledTooltip>\n                            <MythicStyledTooltip title=\"Task Callback to List Processes\">\n                                <IconButton style={{padding: \"3px\"}} onClick={onLocalListFilesButton}><RefreshIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </MythicStyledTooltip>\n                            <MythicStyledTooltip title=\"Fetch Next Saved Process Listing\">\n                                <IconButton style={{padding: \"3px\"}} onClick={onLocalNextButton}><SkipNextIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </MythicStyledTooltip>\n                            <MythicStyledTooltip title=\"Compare Previous Listing\">\n                                <IconButton style={{padding: \"3px\"}} onClick={onLocalDiffButton}><CompareArrowsIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </MythicStyledTooltip>\n                        </React.Fragment>\n                    }} />\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" placeholder=\"Callback\" name=\"Callback\"\n                    onChange={onChangeID} value={callbackID} InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <MythicStyledTooltip title=\"Change Callback Based on Data Origin\">\n                                <IconButton style={{padding: \"3px\"}} onClick={revertCallbackID}>\n                                    <LockIcon style={{color: theme.palette.info.main}}/>\n                                </IconButton>\n                            </MythicStyledTooltip>\n                        ) : (<MythicStyledTooltip title=\"Manually Update Callback Number to Prevent Data Origin Tracking\">\n                                <IconButton  style={{padding: \"3px\"}}>\n                                    <RotateLeftIcon disabled style={{color: theme.palette.warning.main}}/> \n                                </IconButton>\n                            </MythicStyledTooltip>),\n                        style: {padding: 0, margin: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" name=\"Task Data\"\n                    disabled value={taskID} onChange={() => {}}/>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, { useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport { CallbacksTabsTaskingLabel, CallbacksTabsTaskingPanel } from './CallbacksTabsTasking';\nimport { CallbacksTabsFileBrowserLabel, CallbacksTabsFileBrowserPanel } from './CallbacksTabsFileBrowser';\nimport { CallbacksTabsProcessBrowserLabel, CallbacksTabsProcessBrowserPanel } from './CallbacksTabsProcessBrowser';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    },\n}));\nexport function CallbacksTabs({ onCloseTab, openTabs, clickedTabId, onEditTabDescription }) {\n    const classes = useStyles();\n    const mountedRef = React.useRef(true);\n    const [value, setValue] = React.useState(0);\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n        localStorage.setItem('clickedTab', openTabs[newValue].tabID);\n    };\n    React.useEffect( () => {\n        return() => {\n            mountedRef.current = false;\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    const onCloseTabLocal = ({ tabID, index }) => {\n        if (index > 0) {\n            setValue(index - 1);\n        } else {\n            setValue(0);\n        }\n        onCloseTab({ tabID, index });\n    };\n    useEffect(() => {\n        console.log(clickedTabId);\n        for (let i = 0; i < openTabs.length; i++) {\n            if (openTabs[i].tabID === clickedTabId) {\n                setValue(i);\n            }\n        }\n    }, [clickedTabId, openTabs]);\n    \n    return (\n        <div className={classes.root} style={{ display: 'flex', flexDirection: 'column', flexGrow: 1, height: \"100%\" }}>\n            <AppBar color='default' position='static'>\n                <Tabs\n                    value={value}\n                    onChange={handleChange}\n                    indicatorColor='primary'\n                    textColor='primary'\n                    variant='scrollable'\n                    scrollButtons='auto'\n                    style={{ maxWidth: '100%', width: '100%' }}\n                    aria-label='scrollable auto tabs example'>\n                    {openTabs.map((tab, index) => {\n                        switch (tab.tabType) {\n                            case 'interact':\n                                return (\n                                    <CallbacksTabsTaskingLabel\n                                        onEditTabDescription={onEditTabDescription}\n                                        onCloseTab={onCloseTabLocal}\n                                        key={'tablabel' + tab.tabID + tab.tabType}\n                                        tabInfo={tab}\n                                        index={index}\n                                    />\n                                );\n                            case 'fileBrowser':\n                                return (\n                                    <CallbacksTabsFileBrowserLabel\n                                        onEditTabDescription={onEditTabDescription}\n                                        onCloseTab={onCloseTabLocal}\n                                        key={'tablabel' + tab.tabID + tab.tabType}\n                                        tabInfo={tab}\n                                        index={index}\n                                    />\n                                );\n                            case 'processBrowser':\n                                return (\n                                    <CallbacksTabsProcessBrowserLabel\n                                        onEditTabDescription={onEditTabDescription}\n                                        onCloseTab={onCloseTabLocal}\n                                        key={'tablabel' + tab.tabID + tab.tabType}\n                                        tabInfo={tab}\n                                        index={index}\n                                    />\n                                );\n                            default:\n                                return null;\n                        }\n                    })}\n                </Tabs>\n            </AppBar>\n\n            {openTabs.map((tab, index) => {\n                switch (tab.tabType) {\n                    case 'interact':\n                        return (\n                            <CallbacksTabsTaskingPanel\n                                style={{\n                                    position: 'relative',\n                                    height: '100%',\n                                    maxHeight: '100%',\n                                    overflow: 'auto',\n                                }}\n                                key={'tabpanel' + tab.tabID + tab.tabType}\n                                onCloseTab={onCloseTabLocal}\n                                tabInfo={tab}\n                                value={value}\n                                index={index}\n                                parentMountedRef={mountedRef}\n                            />\n                        );\n                    case 'fileBrowser':\n                        return (\n                            <CallbacksTabsFileBrowserPanel\n                                style={{\n                                    height: '100%',\n                                    maxHeight: '100%',\n                                    position: 'relative',\n                                    overflow: 'auto',\n                                }}\n                                onCloseTab={onCloseTabLocal}\n                                key={'tabpanel' + tab.tabID + tab.tabType}\n                                tabInfo={tab}\n                                value={value}\n                                index={index}\n                                parentMountedRef={mountedRef}\n                            />\n                        );\n                    case 'processBrowser':\n                        return (\n                            <CallbacksTabsProcessBrowserPanel\n                                style={{\n                                    height: '100%',\n                                    maxHeight: '100%',\n                                    position: 'relative',\n                                    overflow: 'auto',\n                                }}\n                                onCloseTab={onCloseTabLocal}\n                                key={'tabpanel' + tab.tabID + tab.tabType}\n                                tabInfo={tab}\n                                value={value}\n                                index={index}\n                                parentMountedRef={mountedRef}\n                            />\n                        );\n                    default:\n                        return null;\n                }\n            })}\n        </div>\n    );\n}\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function HeightsDialog(props) {\n  const [heights, setHeights] = React.useState({\"top\": \"0%\", \"bottom\": \"0%\"});\n  useEffect( () => {\n    setHeights(props.heights);\n  }, [props.heights]);\n  const onSubmit = () => {\n    props.onSubmit(heights);\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    const newHeights = {...heights};\n    newHeights[name] = value;\n    setHeights(newHeights);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Adjust sizes of Top/Bottom sections</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <MythicTextField autoFocus value={heights.top} onChange={onChange} name=\"top\"/>\n                <MythicTextField value={heights.bottom} onChange={onChange} name=\"bottom\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import {gql } from '@apollo/client';\n\nexport const hideCallbackMutation = gql`\nmutation hideCallback ($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, active: false}) {\n    status\n    error\n  }\n}\n`;\nexport const toggleHideCallbackMutations = gql`\nmutation hideCallback ($callback_id: Int!, $active: Boolean!){\n  updateCallback(input: {callback_id: $callback_id, active: $active}) {\n    status\n    error\n  }\n}\n`;\n\nexport const removeEdgeMutation = gql`\nmutation removeEdgeMutation ($edge_id: Int!, $end_timestamp: timestamp!){\n    update_callbackgraphedge_by_pk(pk_columns: {id: $edge_id}, _set: {end_timestamp: $end_timestamp}) {\n        end_timestamp\n        id\n      }\n}\n`;\n\nexport const addEdgeMutation = gql`\nmutation addEdgeMutation ($source_id: Int!, $destination_id: Int!, $profile_id: Int!){\n  insert_callbackgraphedge_one(object: {c2_profile_id: $profile_id, destination_id: $destination_id, direction: 1, source_id: $source_id}) {\n    id\n  }\n}\n`;\nexport const unlockCallbackMutation = gql`\nmutation unlockCallback($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: false}) {\n    status\n    error\n  }\n}\n`;\nexport const lockCallbackMutation = gql`\nmutation lockCallack($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: true}) {\n    status\n    error\n  }\n}\n`;\nexport const updateDescriptionCallbackMutation = gql`\nmutation updateDescriptionCallack($callback_id: Int!, $description: String!){\n  updateCallback(input: {callback_id: $callback_id, description: $description}) {\n    status\n    error\n  }\n}\n`;\n\nexport const updateSleepInfoCallbackMutation = gql`\nmutation updateSleepInfoCallback($callback_id: Int!, $sleep_info: String!){\n  update_callback_by_pk(pk_columns: {id: $callback_id}, _set: {sleep_info: $sleep_info}){\n    id\n    sleep_info\n  }\n}\n`;\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport {ExpandedCallbackSideDetailsTable} from '../ExpandedCallback/ExpandedCallbackSideDetails';\n\nconst GET_Payload_Details = gql`\nquery GetCallbackDetails($callback_id: Int!) {\n  callback_by_pk(id: $callback_id){\n    payload {\n      uuid\n      payloadtype{\n          ptype\n          id\n          commands(where: {script_only: {_eq: true}, deleted: {_eq: false}}){\n            id\n            cmd\n            version\n          }\n      }\n      filemetum {\n        filename_text\n        agent_file_id\n        id\n        md5\n        sha1\n      }\n      buildparameterinstances {\n        parameter\n        id\n        buildparameter {\n          description\n        }\n      }\n      os\n    }\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n    loadedcommands{\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    last_checkin\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n  }\n  \n}\n`;\nexport function DetailedCallbackTable(props){\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {callback_id: props.callback_id},\n        onCompleted: data => {\n            const commandState = data.callback_by_pk.loadedcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            });\n            const commandsWithScriptOnly = data.callback_by_pk.payload.payloadtype.commands.reduce( (prev, cur) => {\n              return [...prev, {cmd: cur.cmd, mythic: cur.version, payload: cur.version}]\n            }, [...commandState]).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0))\n            setCommands(commandsWithScriptOnly);\n            const buildParametersState = data.callback_by_pk.payload.buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.callback_by_pk.c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Callback Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Callback Information\n              </Typography>\n            </Paper>\n            <ExpandedCallbackSideDetailsTable {...data.callback_by_pk} />\n                \n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.uuid}</TableCell>\n                    </TableRow>\n                    { data.callback_by_pk.payload.filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.callback_by_pk.payload.filemetum.filename_text}</TableCell>\n                        </TableRow>\n                    ) : null }\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.callback_by_pk.payload.filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + data.callback_by_pk.payload.id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" || cmd.parameter_type === \"Array\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Loaded Commands\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Command Name</TableCell>\n                <TableCell>Mythic Version</TableCell>\n                <TableCell>Loaded Version</TableCell>\n                <TableCell>Documentation</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {\n                commands.map( (cmd) => (\n                    <TableRow key={cmd.cmd + data.callback_by_pk.payload.id} hover>\n                        <TableCell>{cmd.cmd}</TableCell>\n                        <TableCell>{cmd.mythic}</TableCell>\n                        <TableCell>{cmd.payload}</TableCell>\n                        <TableCell>\n                          <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                             href={\"/docs/agents/\" + data.callback_by_pk.payload.payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button> \n                        </TableCell>\n                    </TableRow>\n                ))\n                \n              }\n            </TableBody>\n          </Table>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {useQuery, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\n\nconst callbacksAndFeaturesQuery = gql`\nquery callbacksAndFeatures($operation_id: Int!) {\n  callback(where: {operation_id: {_eq: $operation_id}, active: {_eq: true}}, order_by: {id: asc}) {\n    loadedcommands(where: {command: {supported_ui_features: {_ilike: \"%callback_table%\"}}}) {\n      command {\n        supported_ui_features\n      }\n    }\n    id\n    host\n    user\n    process_name\n    pid\n  }\n}`;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 500,\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\n\nexport function CallbacksTabsTaskMultipleDialog({onClose}) {\n    const me = useReactiveVar(meState);\n    const [featureOptions, setFeatureOptions] = React.useState([]);\n    const [selectedFeature, setSelectedFeature] = React.useState(\"\");\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    const inputRef = React.useRef(null); \n    const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n    const taskingData = React.useRef({});\n    const leftToTask = React.useRef([]);\n    const startTasking = React.useRef(false);\n    const finalTaskedParameters = React.useRef(null);\n    useQuery(callbacksAndFeaturesQuery, {variables: {operation_id: me?.user?.current_operation_id || 0},\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        const callbackData = data.callback.map( c => {\n          // for each callback, get a unique set of supported features\n          const features = c.loadedcommands.reduce( (prev, cur) => {\n            // for each command, get their set of supported features\n            const featureList = cur.command.supported_ui_features.split(\"\\n\");\n            // iterate over those supported features in the command and add them to the running list for the callback\n            // if the callback doesn't currently have it listed\n            let runningSet = [...prev];\n            featureList.forEach( feature => {\n              // for each new feature in this current command, see if we have it before, if not, push it\n              if(!runningSet.includes(feature) && feature.startsWith(\"callback_table\")){\n                runningSet.push(feature);\n              }\n            });\n            return [...runningSet];\n          }, []);\n          const display = `${c.id} - ${c.user}@${c.host} (${c.pid})`\n          return {...c, features: features, display};\n        });\n        setLeft(callbackData);\n      }\n    });\n    React.useEffect( () =>{\n      //based on what's in the `right` variable, we can update the featureOptions to be the intersection of those values\n      let allFeatures = [];\n      if(right.length >= 1){\n        allFeatures = [...right[0].features];\n        for(let i = 1; i < right.length; i++){\n          let intersection = [];\n          for(let j = 0; j < allFeatures.length; j++){\n            if(right[i].features.includes(allFeatures[j])){\n              intersection.push(allFeatures[j]);\n            }\n          }\n          allFeatures = [...intersection];\n        }\n      }\n      setFeatureOptions(allFeatures);\n      if(allFeatures.length > 0){\n        setSelectedFeature(allFeatures[0]);\n      }else{\n        setSelectedFeature('');\n      }\n    }, [right]);\n    const handleToggle = (value) => () => {\n      const currentIndex = checked.indexOf(value);\n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    const issueNextTasking = () => {\n      let callback = leftToTask.current.shift(1);\n      if(callback){\n        if(finalTaskedParameters.current){\n          taskingData.current = {ui_feature: selectedFeature, callback_id: callback.id, openDialog: false, parameters: finalTaskedParameters.current, tasking_location: \"modal\"};\n        }else{\n          taskingData.current = {ui_feature: selectedFeature, callback_id: callback.id, openDialog: true, parameters: \"\", tasking_location: \"modal\"};\n        }\n        setOpenTaskingButton(true);\n      }else{\n        onClose();\n        return;\n      }\n    }\n    const submitTasking = () => {\n      if(right.length === 0 || selectedFeature === \"\"){\n        onClose();\n        return;\n      }\n      startTasking.current = true;\n      leftToTask.current = [...right];\n      issueNextTasking();\n    }\n    const onTasked = ({tasked, variables}) => {\n      if(tasked){\n        console.log(\"setting finalTaskedParameters to\", variables);\n        finalTaskedParameters.current = variables;\n        setOpenTaskingButton(false);\n      }else{\n        onClose()\n        return;\n      }\n      \n    }\n    React.useEffect( () => {\n      if(startTasking.current){\n        if(!openTaskingButton){\n          issueNextTasking();\n        }\n      }\n    }, [openTaskingButton, startTasking])\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <div style={{overflow: \"auto\"}}>\n            <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n              {items.map((value) => {\n                const labelId = `transfer-list-item-${value.id}-label`;\n                return (\n                  <ListItem style={{padding:0}} key={value.id} role=\"listitem\" button onClick={handleToggle(value)}>\n                    <ListItemIcon>\n                      <Checkbox\n                        checked={checked.indexOf(value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value.display} />\n                  </ListItem>\n                );\n              })}\n              <ListItem />\n            </List>\n          </div>\n          \n          </Card>\n      </Paper>\n    );\n    const handleChange = (event) => {\n      setSelectedFeature(event.target.value);\n    };\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Task Multiple Callbacks at Once</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={0} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(\"Callbacks Not Being Tasked\", left)}</Grid>\n          <Grid item xs={1}>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                ≫\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                ≪\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(\"Callbacks To Task\", right)}</Grid>\n          <Grid item xs={12}>\n            <pre>\n              {\"The following capabilities are loaded into all of the selected callbacks. Select one to issue mass tasking.\"}\n            </pre>\n            <InputLabel ref={inputRef}>Supported UI Features</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedFeature}\n              onChange={handleChange}\n              disabled={featureOptions.length === 0}\n              variant=\"filled\"\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {featureOptions.map( (opt) => (\n                  <MenuItem value={opt} key={opt}>{opt.split(\":\")[1]}</MenuItem>\n              ) )}\n            </Select>\n          </Grid>\n        </Grid>\n        </DialogContent>\n        {openTaskingButton && \n            <TaskFromUIButton ui_feature={taskingData.current?.ui_feature || \" \"} \n                callback_id={taskingData?.current?.callback_id || 0} \n                parameters={taskingData.current?.parameters || \"\"}\n                openDialog={taskingData.current?.openDialog || false}\n                tasking_location={taskingData.current?.tasking_location || \"command_line\"}\n                onTasked={onTasked}/>\n        }  \n        <DialogActions>\n          <Button onClick={onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={submitTasking} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {useQuery, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar, useMutation} from '@apollo/client';\nimport {hideCallbackMutation} from './CallbackMutations';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst callbacksAndFeaturesQuery = gql`\nquery callbacksAndFeatures($operation_id: Int!) {\n  callback(where: {operation_id: {_eq: $operation_id}, active: {_eq: true}}, order_by: {id: asc}) {\n    id\n    host\n    user\n    process_name\n    pid\n  }\n}`;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 500,\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\n\nexport function CallbacksTabsHideMultipleDialog({onClose}) {\n    const me = useReactiveVar(meState);\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    const updatedCallbacksSuccess = React.useRef(0);\n    const updatedCallbacks = React.useRef(0);\n    const [hideCallback] = useMutation(hideCallbackMutation, {\n      update: (cache, {data}) => {\n          updatedCallbacks.current += 1;\n          if(data.updateCallback.status === \"success\"){\n            updatedCallbacksSuccess.current += 1;\n          }else{\n              snackActions.warning(data.updateCallback.error);\n          }\n          if(updatedCallbacks.current === right.length){\n            snackActions.success(\"Successfully updated \" + updatedCallbacksSuccess.current + \" callbacks status\");\n          }\n          \n      },\n      onError: data => {\n          console.log(data);\n      }\n    });\n    useQuery(callbacksAndFeaturesQuery, {variables: {operation_id: me?.user?.current_operation_id || 0},\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        const callbackData = data.callback.map( c => {\n          // for each callback, get a unique set of supported features\n          const display = `${c.id} - ${c.user}@${c.host} (${c.pid})`;\n          return {...c, display};\n        });\n        setLeft(callbackData);\n      }\n    });\n    const handleToggle = (value) => () => {\n      const currentIndex = checked.indexOf(value);\n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n\n    const submitTasking = () => {\n      if(right.length === 0){\n        onClose();\n        return;\n      }\n      for(let i = 0; i < right.length; i++){\n        hideCallback({variables: {callback_id: right[i].id}});\n      }\n      \n    }\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <div style={{overflow: \"auto\"}}>\n            <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n              {items.map((value) => {\n                const labelId = `transfer-list-item-${value.id}-label`;\n                return (\n                  <ListItem style={{padding:0}} key={value.id} role=\"listitem\" button onClick={handleToggle(value)}>\n                    <ListItemIcon>\n                      <Checkbox\n                        checked={checked.indexOf(value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value.display} />\n                  </ListItem>\n                );\n              })}\n              <ListItem />\n            </List>\n          </div>\n          \n          </Card>\n      </Paper>\n    );\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Hide Multiple Callbacks at Once</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={0} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(\"Visible Callbacks\", left)}</Grid>\n          <Grid item xs={1}>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                ≫\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                ≪\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(\"Callbacks To Hide\", right)}</Grid>\n          \n        </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={submitTasking} variant=\"contained\" color=\"secondary\">\n            Hide\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useCallback, useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicDisplayTextDialog} from '../../MythicComponents/MythicDisplayTextDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport LockIcon from '@material-ui/icons/Lock';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport {C2PathDialog} from './C2PathDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport {hideCallbackMutation} from './CallbackMutations';\nimport {useMutation } from '@apollo/client';\nimport SnoozeIcon from '@material-ui/icons/Snooze';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {faQuestion, faSkullCrossbones, faFolderOpen, faList} from '@fortawesome/free-solid-svg-icons';\nimport {faLinux, faApple, faWindows, faChrome} from '@fortawesome/free-brands-svg-icons';\nimport {useSubscription, gql } from '@apollo/client';\nimport {DetailedCallbackTable} from './DetailedCallbackTable';\nimport InfoIcon from '@material-ui/icons/Info';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport {CallbacksTabsTaskMultipleDialog} from './CallbacksTabsTaskMultipleDialog';\nimport {CallbacksTabsHideMultipleDialog} from './CallbacksTabsHideMultipleDialog';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    id\n    last_checkin\n  }\n}\n `;\nexport const CallbacksTableIDCell = ({rowData, onOpenTab, toggleLock, updateDescription}) =>{\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [openMetaDialog, setOpenMetaDialog] = React.useState(false);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n    const taskingData = React.useRef({\"parameters\": \"\", \"ui_feature\": \"callback_table:exit\"});\n    const [openTaskMultipleDialog, setOpenTaskMultipleDialog] = React.useState(false);\n    const [openHideMultipleDialog, setOpenHideMultipleDialog] = React.useState(false);\n    const editDescriptionSubmit = (description) => {\n        updateDescription({description, id: rowData.id})\n    }\n    const handleDropdownToggle = (evt) => {\n            evt.stopPropagation();\n            setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    const localOnOpenTab = (tabType) => {\n        if(tabType === \"interact\"){\n            onOpenTab({tabType, tabID: rowData.id + tabType, callbackID: rowData.id});\n        }else if(tabType === \"processBrowser\"){\n            onOpenTab({tabType, tabID: rowData.host, callbackID: rowData.id});\n        }else{\n            onOpenTab({tabType, tabID: rowData.id + tabType, callbackID: rowData.id});\n        }\n    }\n    const handleMenuItemClick = (event, index) => {\n        options[index].click(event);\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n\n        setDropdownOpen(false);\n      };\n    const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            console.log(data);\n        }\n    });\n    const localToggleLock = () => {\n        toggleLock({id: rowData.id, locked: rowData.locked})\n    }\n    const options =  [\n        {name: 'Hide Callback', icon: <VisibilityOffIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n            evt.stopPropagation();\n            hideCallback({variables: {callback_id: rowData.id}});\n        }},\n        {\n            name: \"Hide Multiple\", icon: <VisibilityOffIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                setOpenHideMultipleDialog(true);\n            }\n        },\n        {\n            name: \"Exit Callback\", icon: <FontAwesomeIcon icon={faSkullCrossbones} style={{cursor: \"pointer\", marginRight: \"10px\"}} />, click: (evt) => {\n                taskingData.current = {\"parameters\": \"\", \"ui_feature\": \"callback_table:exit\", \"getConfirmation\": true};\n                setOpenTaskingButton(true);\n            }\n        },\n        {\n            name: \"Task Multiple\", icon: <FontAwesomeIcon icon={faList} style={{cursor: \"pointer\", marginRight: \"10px\"}} />, click: (evt) => {\n                setOpenTaskMultipleDialog(true);\n            }\n        },\n        {name: 'File Browser', icon: <FontAwesomeIcon icon={faFolderOpen} style={{cursor: \"pointer\", marginRight: \"10px\"}} />, click: (evt) => {\n            evt.stopPropagation();\n            localOnOpenTab(\"fileBrowser\");\n        }},\n        {name: 'Process Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n            evt.stopPropagation();\n            localOnOpenTab(\"processBrowser\");\n        }},\n        {name: rowData.locked ? 'Unlock (Locked by ' + rowData.locked_operator.username + ')' : 'Lock Callback', icon: rowData.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n            evt.stopPropagation();\n            localToggleLock();\n        }},\n        {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n            evt.stopPropagation();\n            setOpenEditDescriptionDialog(true);\n        }},\n        {name: \"Expand Callback\", icon: <OpenInNewIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n            evt.stopPropagation();\n            window.open(\"/new/callbacks/\" + rowData.id, \"_blank\").focus();\n        }},\n        {name: \"View Metadata\", icon: <InfoIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n            evt.stopPropagation();\n            setOpenMetaDialog(true);\n        }}\n    ];\n    return (\n        <div>\n            <ButtonGroup variant=\"contained\" \n                color={rowData.integrity_level > 2 ? \"secondary\" : \"primary\"} \n                ref={dropdownAnchorRef} \n                aria-label=\"split button\"\n            >\n                <Button style={{padding: \"0 10px 0 10px\"}}\n                    onClick={(evt) => {evt.stopPropagation();localOnOpenTab(\"interact\")}}>\n                    { rowData.locked ? (<LockIcon fontSize=\"large\" style={{marginRight: \"10px\"}} />):(<KeyboardIcon fontSize=\"large\" style={{marginRight: \"10px\"}}/>) } \n                    {rowData.id}\n                </Button>\n                <Button\n                    style={{margin: 0, padding: 0}}\n                    aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}\n                >\n                <ArrowDropDownIcon/>\n                </Button>\n            </ButtonGroup>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 200}}>\n                {({ TransitionProps, placement }) => (\n                <Grow\n                    {...TransitionProps}\n                    style={{\n                    transformOrigin: placement === 'bottom' ? 'top left' : 'top center',\n                    anchorOrigin: placement === 'bottom' ? 'bottom right' : 'bottom right'\n                    }}\n                >\n                    <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}} elevation={5}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                        <MenuList id=\"split-button-menu\">\n                        {options.map((option, index) => (\n                            <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(event, index)}\n                            >\n                            {option.icon}{option.name}\n                            </MenuItem>\n                        ))}\n                        </MenuList>\n                    </ClickAwayListener>\n                    </Paper>\n                </Grow>\n                )}\n            </Popper>     \n            {openTaskingButton && \n                <TaskFromUIButton ui_feature={taskingData.current?.ui_feature || \" \"} \n                    callback_id={rowData.id} \n                    parameters={taskingData.current?.parameters || \"\"}\n                    openDialog={taskingData.current?.openDialog || false}\n                    getConfirmation={taskingData.current?.getConfirmation || false}\n                    onTasked={() => setOpenTaskingButton(false)}/>\n            }  \n            {openMetaDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openMetaDialog}\n                    onClose={()=>{setOpenMetaDialog(false);}} \n                    innerDialog={<DetailedCallbackTable onClose={()=>{setOpenMetaDialog(false);}} callback_id={rowData.id} />}\n                />\n            }\n            {openEditDescriptionDialog &&\n                <MythicDialog \n                    fullWidth={true} \n                    open={openEditDescriptionDialog}  \n                    onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Callback's Description\"} \n                            onClose={() => {setOpenEditDescriptionDialog(false);}} \n                            value={rowData.description} \n                            onSubmit={editDescriptionSubmit} \n                        />\n                    }\n                />\n            }\n            {openTaskMultipleDialog &&\n                <MythicDialog \n                    fullWidth={true} \n                    maxWidth=\"lg\"\n                    open={openTaskMultipleDialog}  \n                    onClose={() => {setOpenTaskMultipleDialog(false);}}\n                    innerDialog={\n                        <CallbacksTabsTaskMultipleDialog onClose={() => {setOpenTaskMultipleDialog(false);}} />\n                    }\n                />\n            }\n            {openHideMultipleDialog &&\n                <MythicDialog \n                    fullWidth={true} \n                    maxWidth=\"lg\"\n                    open={openHideMultipleDialog}  \n                    onClose={() => {setOpenHideMultipleDialog(false);}}\n                    innerDialog={\n                        <CallbacksTabsHideMultipleDialog onClose={() => {setOpenHideMultipleDialog(false);}} />\n                    }\n                />\n            }\n    </div>\n    )\n}\nexport const CallbacksTableStringCell = ({cellData}) => {\n    return (\n        <div>{cellData}</div>\n    )\n}\nexport const CallbacksTableLastCheckinCell = React.memo( (props) => {\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [lastCheckin, setLastCheckin] = React.useState(-1);\n    const mountedRef = React.useRef(true);\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: props.rowData.id}, fetchPolicy: \"network-only\", shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            if(!mountedRef.current || !props.parentMountedRef.current){\n                return null;\n            }\n            setLastCheckin(subscriptionData.data.callback_by_pk.last_checkin);\n        }\n    });\n    useInterval( () => {\n        if(!mountedRef.current || !props.parentMountedRef.current){\n            return null;\n        }\n        if(lastCheckin === -1){\n            setDisplayTime(\"Loading...\");\n            return;\n        }\n        setDisplayTime(getTimeDifference(lastCheckin));\n    }, 1000, mountedRef, props.parentMountedRef);\n    React.useEffect( () => {\n        return() => {\n            mountedRef.current = false;\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    return (\n        <div>\n            {displayTime}\n        </div>\n        \n    )\n});\nexport const CallbacksTablePayloadTypeCell = ({rowData}) => {\n    return (\n        <MythicStyledTooltip title={rowData.payload.payloadtype.ptype}>\n            <img\n                style={{width: \"35px\", height: \"35px\"}}\n                src={\"/static/\" + rowData.payload.payloadtype.ptype + \".svg\"}\n            />\n        </MythicStyledTooltip>\n    )\n}\nexport const CallbacksTableC2Cell = ({rowData, initialCallbackGraphEdges}) => {\n    const theme = useTheme();\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n\n    const onOpenC2Dialog = (event) => {\n        event.stopPropagation();\n        setOpenC2Dialog(true);\n    }\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === rowData.id && edge.destination.id === rowData.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll]);\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = initialCallbackGraphEdges?.filter( (edge) =>{\n                if(edge.source.id === rowData.id || edge.destination.id === rowData.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            }) || [];\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in props.callbackgraphedges that are _not_ in myEdges so far\n                const newEdges = initialCallbackGraphEdges?.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]) || [];\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        if(callbackgraphedges.length !== myActiveEdges.length){\n            setCallbackgraphedges(myActiveEdges);\n        }\n        if(callbackgraphedgesAll.length !== myEdges.length){\n            setCallbackgraphedgesAll(myEdges);\n        }\n    }, [initialCallbackGraphEdges, rowData.id]);\n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n    useEffect( () => {\n        if(!activeEgressBool){\n            //snackActions.warning(`Callback ${rowData.id} has no egress route! Re-link before tasking`);\n        }\n    }, [activeEgressBool])\n    return (\n        <div>\n            {hasEgressRoute ? \n                <WifiIcon onClick={onOpenC2Dialog} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                <InsertLinkTwoToneIcon onClick={onOpenC2Dialog} style={{color: activeEgress, cursor: \"pointer\"}} />\n            }\n            <MythicDialog \n                fullWidth={true} \n                maxWidth=\"lg\" \n                open={openC2Dialog}\n                onClose={()=>{setOpenC2Dialog(false);}} \n                innerDialog={\n                    <C2PathDialog \n                        onClose={()=>{setOpenC2Dialog(false);}} {...rowData} \n                        callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} \n                    />\n                }\n            />\n        </div>\n        \n    )\n}\nexport const CallbacksTableOSCell = React.memo( ({rowData, cellData}) => {\n    const [openOSDialog, setOpenOSDialog] = React.useState(false);\n    const getOSIcon = useCallback( () => {\n        switch(rowData.payload.os.toLowerCase()){\n            case \"windows\":\n                return <FontAwesomeIcon icon={faWindows} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"linux\":\n                return <FontAwesomeIcon icon={faLinux} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"macos\":\n                return <FontAwesomeIcon icon={faApple} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo}/>\n            case \"chrome\":\n                return <FontAwesomeIcon icon={faChrome} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            default:\n                return <FontAwesomeIcon icon={faQuestion} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n        }\n    }, []);\n    const displayOSInfo = React.useCallback( () => {\n        setOpenOSDialog(true);\n    }, []);\n    return (\n        <div>\n            {getOSIcon()}\n            { openOSDialog &&\n                <MythicDisplayTextDialog \n                    onClose={()=>{setOpenOSDialog(false);}} \n                    title={\"Operating System Information\"} \n                    maxWidth={\"md\"} \n                    fullWidth={true} \n                    value={cellData} \n                    open={openOSDialog}\n                />\n            }\n        </div>\n        \n                \n    )\n});\nexport const CallbacksTableSleepCell = ({rowData, cellData, updateSleepInfo}) => {\n    const theme = useTheme();\n    const [openSleepDialog, setOpenSleepDialog] = React.useState(false);\n    const editSleepSubmit = (sleep) => {\n        updateSleepInfo({sleep_info: sleep, id: rowData.id});\n    }\n    const onOpenSleepDialog = (event) => {\n        event.stopPropagation();\n        setOpenSleepDialog(true);\n    }\n    return (\n        <div>\n            <SnoozeIcon onClick={onOpenSleepDialog} \n                style={{color: cellData === \"\" ? theme.palette.warning.main : theme.palette.info.main, cursor: \"pointer\"}}\n            />\n            { openSleepDialog &&\n                <MythicDialog fullWidth={true} open={openSleepDialog}  onClose={() => {setOpenSleepDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Sleep Information\"} \n                            onClose={() => {setOpenSleepDialog(false);}} \n                            value={cellData} \n                            onSubmit={editSleepSubmit} />\n                    }\n                />\n            }\n        </div>\n        \n            \n    )\n}","import React, { useEffect, useMemo, useRef } from 'react';\nimport {MythicTransferListDialog} from '../../MythicComponents/MythicTransferList';\nimport {MythicDialog} from '../../MythicComponents/MythicDialog';\nimport {\n  unlockCallbackMutation, \n  lockCallbackMutation, \n  updateDescriptionCallbackMutation, \n  updateSleepInfoCallbackMutation} from './CallbackMutations';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation } from '@apollo/client';\nimport {\n  CallbacksTableIDCell,\n  CallbacksTableStringCell,\n  CallbacksTableLastCheckinCell,\n  CallbacksTablePayloadTypeCell,\n  CallbacksTableC2Cell,\n  CallbacksTableOSCell,\n  CallbacksTableSleepCell\n} from './CallbacksTableRow';\nimport MythicResizableGrid from '../../MythicComponents/MythicResizableGrid';\nimport {TableFilterDialog} from './TableFilterDialog';\n\nfunction CallbacksTablePreMemo(props){\n    \n    const [allData, setAllData] = React.useState([]);\n    const [sortData, setSortData] = React.useState({\"sortKey\": null, \"sortDirection\": null, \"sortType\": null});\n    const [openContextMenu, setOpenContextMenu] = React.useState(false);\n    const [openAdjustColumnsDialog, setOpenAdjustColumnsDialog] = React.useState(false);\n    const [filterOptions, setFilterOptions] = React.useState({});\n    const [selectedColumn, setSelectedColumn] = React.useState({});\n    const [columnVisibility, setColumnVisibility] = React.useState({\n        \"visible\": [\"Interact\", \"Host\", \"Domain\", \"User\", \"Description\", \"Last Checkin\", \"Agent\", \"C2\", \"IP\", \"OS\"],\n        \"hidden\": [\"Arch\", \"PID\", \"Sleep\", \"Process Name\", \"External IP\"]\n    });\n    const [lockCallback] = useMutation(lockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Locked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [unlockCallback] = useMutation(unlockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Unlocked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [updateDescription] = useMutation(updateDescriptionCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Updated Callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const [updateSleep] = useMutation(updateSleepInfoCallbackMutation, {\n      update: (cache, {data}) => {\n        snackActions.success(\"Updated Callback\");\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const onSubmitAdjustColumns = ({left, right}) => {\n      setColumnVisibility({visible: right, hidden: left});\n      //localStorage.setItem(\"callbacks_table_columns\", JSON.stringify(right));\n    }\n    const columns = useMemo( \n      () => \n        [\n          {key: \"id\", type: 'number', name: \"Interact\", width: 150},\n          {key: \"ip\", type: 'string', name: \"IP\", width: 150},\n          {key: \"external_ip\",type: 'string', name: \"External IP\", width: 150},\n          {key: \"host\", type: 'string', name: \"Host\", fillWidth: true},\n          {key: \"user\", type: 'string', name: \"User\", fillWidth: true},\n          {key: \"domain\", type: 'string', name: \"Domain\", fillWidth: true},\n          {key: \"os\", type: 'string', name: \"OS\", width: 75},\n          {key: \"architecture\", type: 'string', name: \"Arch\", width: 75},\n          {key: \"pid\", type: 'number', name: \"PID\", width: 75},\n          {key: \"last_checkin\", type: 'string', name: \"Last Checkin\", width: 150, disableSort: true},\n          {key: \"description\", type: 'string', name: \"Description\", width: 400},\n          {key: \"sleep\", type: 'string', name: \"Sleep\", width: 75, disableSort: true},\n          {key: \"agent\", type: 'string', name: \"Agent\", width: 100, disableSort: true},\n          {key: \"c2\", type: 'string', name: \"C2\", width: 75, disableSort: true},\n          {key: \"process_name\", type: 'string', name: \"Process Name\", fillWidth: true},\n          \n        ].reduce( (prev, cur) => {\n          if(columnVisibility.visible.includes(cur.name) || cur.name === \"Interact\"){\n            if(filterOptions[cur.key] && String(filterOptions[cur.key]).length > 0){\n                return [...prev, {...cur, filtered: true}];\n            }else{\n                return [...prev, {...cur}];\n            }\n          }else{\n              return [...prev];\n          }\n        }, [])\n      , [filterOptions, columnVisibility]\n    );\n    const onClickHeader = (e, columnIndex) => {\n      const column = columns[columnIndex];\n      if(column.disableSort){\n          return;\n      }\n      if (!column.key) {\n          setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n      }\n      if (sortData.sortKey === column.key) {\n          if (sortData.sortDirection === 'ASC') {\n              setSortData({...sortData, \"sortDirection\": \"DESC\"});\n          } else {\n              setSortData({\"sortKey\": null, \"sortType\":null, \"sortDirection\": \"ASC\"});\n          }\n      } else {\n          setSortData({\"sortKey\": column.key, \"sortType\":column.type, \"sortDirection\": \"ASC\"});\n      }\n    };\n    const onRowDoubleClick = React.useCallback( () => {\n\n    }, []);\n    const contextMenuOptions = [\n        {\n            name: 'Filter Column', \n            click: ({event, columnIndex}) => {\n                if(columns[columnIndex].disableFilterMenu){\n                    snackActions.warning(\"Can't filter that column\");\n                    return;\n                }\n                setSelectedColumn(columns[columnIndex]);\n                setOpenContextMenu(true);\n            }\n        },\n        {\n            name: \"Show/Hide Columns\",\n            click: ({event, columnIndex}) => {\n                if(columns[columnIndex].disableFilterMenu){\n                    snackActions.warning(\"Can't filter that column\");\n                    return;\n                }\n                setOpenAdjustColumnsDialog(true);\n            }\n        }\n    ];\n    useEffect( () => {\n      let localSettings = localStorage.getItem(\"callbacks_table_columns\");\n      if(localSettings !== null){\n      }\n    }, [columns]);\n    const toggleLock = React.useCallback( ({id, locked}) => {\n      if(locked){\n        unlockCallback({variables: {callback_id: id}})\n      }else{\n        lockCallback({variables: {callback_id: id}})\n      }\n    }, []);\n    const updateDescriptionSubmit = React.useCallback( ({id, description}) => {\n      updateDescription({variables: {callback_id: id, description}})\n    }, []);\n    const updateSleepInfo = React.useCallback( ({id, sleep_info}) => {\n      updateSleep({variables: {callback_id: id, sleep_info}})\n    }, [])\n\n    const filterRow = (row) => {\n      for(const [key,value] of Object.entries(filterOptions)){\n          if(key === \"agent\"){\n            if(!String(row.payload.payloadtype.ptype).toLowerCase().includes(value)){\n              return true;\n            }\n          }else{\n            if(!String(row[key]).toLowerCase().includes(value)){\n              return true;\n            }\n          }\n          \n      }\n      return false;\n    }\n    const sortedData = React.useMemo(() => {\n      if (sortData.sortKey === null || sortData.sortType === null) {\n          return allData;\n      }\n      const tempData = [...allData];\n\n      if (sortData.sortType === 'number' || sortData.sortType === 'size' || sortData.sortType === 'date') {\n          tempData.sort((a, b) => (parseInt(a[sortData.sortKey]) > parseInt(b[sortData.sortKey]) ? 1 : -1));\n      } else if (sortData.sortType === 'string') {\n        tempData.sort((a, b) => (a[sortData.sortKey].toLowerCase() > b[sortData.sortKey].toLowerCase() ? 1 : -1));\n      }\n      if (sortData.sortDirection === 'DESC') {\n          tempData.reverse();\n      }\n      return tempData;\n    }, [allData, sortData]);\n    const gridData = React.useMemo(\n      () =>\n          sortedData.reduce((prev, row) => { \n              if(filterRow(row)){\n                  return [...prev];\n              }else{\n                  return [...prev, columns.map( c => {\n                      switch(c.name){\n                          case \"Interact\":\n                              return <CallbacksTableIDCell \n                                rowData={row} \n                                onOpenTab={props.onOpenTab} \n                                toggleLock={toggleLock}\n                                updateDescription={updateDescriptionSubmit}\n                                />;\n                          case \"IP\":\n                              return <CallbacksTableStringCell rowData={row} cellData={row.ip} />;\n                          case \"External IP\":\n                            return <CallbacksTableStringCell rowData={row} cellData={row.external_ip} />;\n                          case \"Host\":\n                              return <CallbacksTableStringCell rowData={row} cellData={row.host} />;\n                          case \"User\":\n                              return <CallbacksTableStringCell rowData={row} cellData={row.user} />;\n                          case \"Domain\":\n                              return <CallbacksTableStringCell rowData={row} cellData={row.domain} />;\n                          case \"OS\":\n                              return <CallbacksTableOSCell rowData={row} cellData={row.os} />;\n                          case \"Arch\":\n                              return <CallbacksTableStringCell rowData={row} cellData={row.architecture} />;\n                          case \"PID\":\n                            return <CallbacksTableStringCell rowData={row} cellData={row.pid} />;\n                          case \"Last Checkin\":\n                            return <CallbacksTableLastCheckinCell rowData={row} cellData={row.id} parentMountedRef={props.parentMountedRef}/>;\n                          case \"Description\":\n                            return <CallbacksTableStringCell rowData={row} cellData={row.description} />;\n                          case \"Sleep\":\n                            return <CallbacksTableSleepCell rowData={row} cellData={row.sleep_info} updateSleepInfo={updateSleepInfo} />;\n                          case \"Agent\":\n                            return <CallbacksTablePayloadTypeCell rowData={row} cellData={row.payload.payloadtype.ptype}/>;\n                          case \"C2\":\n                            return <CallbacksTableC2Cell rowData={row} initialCallbackGraphEdges={props.callbackgraphedges} />;\n                          case \"Process Name\":\n                            return <CallbacksTableStringCell rowData={row} cellData={row.process_name} />;\n                      }\n                  })];\n              }\n          }, []),\n      [sortedData, props.onTaskRowAction, filterOptions, columnVisibility, props.callbackgraphedges, props.onOpenTab, toggleLock]\n    );\n    const onSubmitFilterOptions = (newFilterOptions) => {\n      setFilterOptions(newFilterOptions);\n    }\n    const sortColumn = columns.findIndex((column) => column.key === sortData.sortKey);\n    React.useEffect( () => {\n      setAllData([...props.callbacks]);\n    }, [props.callbacks]);\n    return (\n        <div style={{ width: '100%', height: '100%' }}>\n          <MythicResizableGrid\n              columns={columns}\n              sortIndicatorIndex={sortColumn}\n              sortDirection={sortData.sortDirection}\n              items={gridData}\n              rowHeight={40}\n              onClickHeader={onClickHeader}\n              onDoubleClickRow={onRowDoubleClick}\n              contextMenuOptions={contextMenuOptions}\n          />\n          {openContextMenu &&\n              <MythicDialog fullWidth={true} maxWidth=\"xs\" open={openContextMenu} \n                  onClose={()=>{setOpenContextMenu(false);}} \n                  innerDialog={<TableFilterDialog \n                      selectedColumn={selectedColumn} \n                      filterOptions={filterOptions} \n                      onSubmit={onSubmitFilterOptions} \n                      onClose={()=>{setOpenContextMenu(false);}} />}\n              />\n          }\n          {openAdjustColumnsDialog &&\n              <MythicDialog fullWidth={true} maxWidth=\"md\" open={openAdjustColumnsDialog} \n                onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                innerDialog={\n                  <MythicTransferListDialog onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                    onSubmit={onSubmitAdjustColumns} right={columnVisibility.visible} rightTitle=\"Show these columns\"\n                    leftTitle={\"Hidden Columns\"} left={columnVisibility.hidden} dialogTitle={\"Edit which columns are shown\"}/>}\n              />\n          }       \n        </div>             \n    )\n}\nexport const CallbacksTable = React.memo(CallbacksTablePreMemo);\n","import React, {useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {useQuery, useReactiveVar, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst getP2PProfilesAndCallbacks = gql`\nquery getP2PProfilesAndCallbacks($operation_id: Int!){\n  c2profile(where: {is_p2p: {_eq: true}}) {\n    callbackc2profiles(where: {callback: {operation_id: {_eq: $operation_id}}}) {\n      id\n      callback {\n        id\n        description\n      }\n    }\n    name\n    id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    width: \"97%\"\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport function ManuallyAddEdgeDialog(props) {\n    const classes = useStyles();\n    const [callbackOptions, setCallbackOptions] = React.useState([]);\n    const [profileOptions, setProfileOptions] = React.useState([]);\n    const [selectedDestination, setSelectedDestination] = React.useState('');\n    const [selectedProfile, setSelectedProfile] = React.useState('');\n    const inputRefDestination = useRef(null); \n      const handleChangeProfile = (event) => {\n        setSelectedProfile(event.target.value);\n      };\n      const handleChangeDestination = (event) => {\n        setSelectedDestination(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(props.source.id, selectedProfile, selectedDestination.callback);\n        props.onClose();\n    }\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getP2PProfilesAndCallbacks, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const filteredProfileOptions = data.c2profile.filter( (profile) => {\n                let found = false;\n                props.source.callbackc2profiles.forEach( (source_profile) => {\n                    if(source_profile.c2profile.name === profile.name){found = true};\n                });\n                return found;\n            } );\n            setProfileOptions(filteredProfileOptions);\n            if(filteredProfileOptions.length > 0){\n                setSelectedProfile(filteredProfileOptions[0]);\n                const cbopts = filteredProfileOptions[0][\"callbackc2profiles\"].filter( (cb) => cb.callback.id !== props.source.id );\n                setCallbackOptions(cbopts);\n                if(cbopts.length > 0){\n                    setSelectedDestination(cbopts[0]);\n                }\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >Manually Add Edge From Callback {props.source.id}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                Manually add an edge from Callback {props.source.id} to another callback via a P2P C2 Profile they both share.<br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"demo-dialog-select-label-profile\">Profile</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-profile\"\n                    id=\"demo-dialog-select\"\n                    \n                    value={selectedProfile}\n                    onChange={handleChangeProfile}\n                    style={{minWidth: \"30%\"}}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {profileOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"profile:\" + opt.id}>{opt.name}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl><br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel ref={inputRefDestination}>Destination</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-destination\"\n                    id=\"demo-dialog-select-destination\"\n                    value={selectedDestination}\n                    \n                    onChange={handleChangeDestination}\n                    input={<Input />}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {callbackOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"callback:\" + opt.callback.id}>{opt.callback.id} ({opt.callback.description})</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: muiTheme.palette.success.main}}>\n            Add\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect, useState, useMemo} from 'react';\nimport {drawC2PathElements, getNodeEdges} from './C2PathDialog';\nimport {Button} from '@material-ui/core';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport {useMutation } from '@apollo/client';\nimport {saveSvgAsPng} from 'save-svg-as-png';\nimport {hideCallbackMutation, removeEdgeMutation, addEdgeMutation} from './CallbackMutations';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {ManuallyAddEdgeDialog} from './ManuallyAddEdgeDialog';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const loadedLinkCommandsQuery = gql`\nquery loadedLinkCommandsQuery ($callback_id: Int!){\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_ilike: \"graph_view:link\"}, deleted: {_eq: false}}}) {\n    command {\n        id\n        cmd\n        help_cmd\n        description\n        needs_admin\n    }\n  }\n}\n`;\n\nexport function CallbacksGraph({onOpenTab, callbackgraphedges}){\n    const theme = useTheme();\n    const dagreRef = useRef(null);    \n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [reZoom, setReZoom] = useState(true);\n    //used for creating a task to do a link command\n    const [linkCommands, setLinkCommands] = React.useState([]);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openSelectLinkCommandDialog, setOpenSelectLinkCommandDialog] = React.useState(false);\n    const [selectedLinkCommand, setSelectedLinkCommand] = useState();\n    const [selectedCallback, setSelectedCallback] = useState();\n    const [manuallyRemoveEdgeDialogOpen, setManuallyRemoveEdgeDialogOpen] = useState(false);\n    const [manuallyAddEdgeDialogOpen, setManuallyAddEdgeDialogOpen] = useState(false);\n    const [edgeOptions, setEdgeOptions] = useState([]); // used for manuallyRemoveEdgeDialog\n    const [addEdgeSource, setAddEdgeSource] = useState(null); // used for manuallyAddEdgeDialog\n    const [getLinkCommands] = useLazyQuery(loadedLinkCommandsQuery, {fetchPolicy: \"network-only\",\n        onCompleted: data => {            \n            if(data.loadedcommands.length === 1){\n                //no need for a popup, there's only one possible command\n                setSelectedLinkCommand(data.loadedcommands[0].command);\n                setOpenParametersDialog(true);\n            }else if(data.loadedcommands.length === 0){\n                //no possible command can be used, do a notification\n                snackActions.warning(\"No commands loaded that are 'link' commands\");\n            }else{\n                const cmds = data.loadedcommands.map( (cmd) => { return {...cmd, display: cmd.command.cmd} } );\n                setLinkCommands(cmds);\n                setSelectedLinkCommand(cmds[0].command);\n                setOpenSelectLinkCommandDialog(true);\n            }\n        }});\n    const onSubmitSelectedLinkCommand = (cmd) => {\n        setSelectedLinkCommand(cmd.command);\n        //console.log(cmd);\n        setOpenParametersDialog(true);\n    }\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"task created\");\n            }\n            \n        }\n    });\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: selectedCallback.id, command: cmd, params: parameters, files}});\n    }\n    const [viewConfig, setViewConfig] = React.useState({\n        rankDir: \"BT\",\n        label_components: [\"id\", \"user\"],\n        packet_flow_view: true,\n        include_disconnected: true,\n        show_all_nodes: false\n    });\n    const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyRemoveEdge] = useMutation(removeEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyAddEdge] = useMutation(addEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const onSubmitManuallyRemoveEdge = (edge) => {\n        if(edge === \"\"){\n            snackActions.warning(\"No edge selected\");\n            return;\n        }\n        manuallyRemoveEdge({variables: {edge_id: edge.edge_id, end_timestamp: (new Date()).toISOString()}});\n    }\n    const onSubmitManuallyAddEdge = (source_id, profile, destination) => {\n        if(profile === \"\" || destination === \"\"){\n            snackActions.warning(\"Profile or Destination Callback not provided\");\n            return;\n        }\n        manuallyAddEdge({variables: {source_id: source_id, profile_id: profile.id, destination_id: destination.id}});\n        //console.log(\"want to submit: \", source_id, profile, destination);\n    }\n    const node_events = useMemo(() => {return {\n        \"mouseover\": (parent, node, d) => {return},\n        \"mouseout\": (parent, node, d) => {return},\n        \"click\": (parent, node, d) => {return},\n        \"contextmenu\":  [\n\t        {\n\t\t        title: 'Hide Callback',\n\t\t        action: function(g, elm) {\n\t\t            hideCallback({variables: {callback_id: elm.node.id}});\n\t\t        }\n\t        },\n\t        {\n\t\t        title: 'Interact',\n\t\t        action: function(g, elm){\n\t\t            onOpenTab({tabType: \"interact\", tabID: elm.node.id + \"interact\", callbackID: elm.node.id});\n\t            }\n            },\n            {\n\t            title: \"Manually Remove Edge\",\n\t            action: function(g, elm){\n\t                const edges = getNodeEdges(g, elm.node.id);\n\t                const opts = edges.reduce( (prev, e) => {\n\t                    const fulledg = g.edge(e.v, e.w, e.name);\n\t                    if(fulledg.end_timestamp === null){\n\t                        if(fulledg.direction === 1){\n\t                            if(viewConfig[\"packet_flow_view\"]){\n\t                                return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                            }else{\n\t                                return [...prev, {...fulledg, \"display\": e.v + \" --> \" + e.name + \" --> \" + e.w}];\n\t                            }\n\t                        }else{\n\t                            return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                        }\n\t                        \n\t                    }else{\n\t                        return [...prev];\n\t                    }\n\t                }, []);\n\t                setEdgeOptions(opts);\n\t                setManuallyRemoveEdgeDialogOpen(true);\n                }\n            },\n            {\n                title: \"Manually Add Edge\",\n                action: function(g, elm){\n                    setAddEdgeSource(elm.node);\n                    setManuallyAddEdgeDialogOpen(true);\n                }\n\t        },\n\t        {\n\t            title: \"Task Callback for Edge\",\n\t            action: function(g, elm){\n\t                setLinkCommands([]);\n                    setSelectedLinkCommand(null);\n                    setSelectedCallback(null);\n\t                getLinkCommands({variables: {callback_id: elm.node.id} });\n\t                setSelectedCallback(elm.node);\n\t                \n                }\n            },\n        ]       \n    }}, [getLinkCommands, hideCallback, viewConfig, onOpenTab]);\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setDropdownOpen(false);\n    };\n    const options = [{name: viewConfig[\"include_disconnected\"] ? 'Show Only Active Edges' : \"Show All Edges\", click: () => {\n                        const view = {...viewConfig, include_disconnected: !viewConfig[\"include_disconnected\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }}, \n                     {name: viewConfig[\"show_all_nodes\"] ? 'Hide inactive callbacks' : 'Show All Callbacks', click: () => {\n                        const view = {...viewConfig, show_all_nodes: !viewConfig[\"show_all_nodes\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: 'Autosize', click: () => {\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, viewConfig, node_events, theme);\n                     }}, \n                     {name: viewConfig[\"rankDir\"] === \"LR\" ? 'Change Layout to Top-Bottom' : \"Change Layout to Left-Right\", click: () => {\n                        if(viewConfig[\"rankDir\"] === \"LR\"){\n                            const view = {...viewConfig, rankDir: \"BT\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }else{\n                            const view = {...viewConfig, rankDir: \"LR\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }\n                     }},\n                     {name: viewConfig[\"packet_flow_view\"] ? \"View Connection Directions\" : \"View Egress Routes\" , click: () => {\n                        const view = {...viewConfig, packet_flow_view: !viewConfig[\"packet_flow_view\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: \"Download Graph\", click: () => {\n                        saveSvgAsPng(document.getElementById(\"callbacksgraph\"), \"diagram.png\");\n                     }}];\n    const getConfigString = () => {\n        let config = \"\";\n        config += viewConfig[\"include_disconnected\"] ? \"Showing All Edges, \" : \"Showing Only Active Edges, \";\n        config += viewConfig[\"show_all_nodes\"] ? \"Showing All Callbacks, \" : \"Showing Active Callbacks, \";\n        config += \"Layout: \" + viewConfig[\"rankDir\"] + \", \";\n        config += viewConfig[\"packet_flow_view\"] ? \"Showing Egress Routes\" : \"Showing Connections Paths\";\n        return config;\n    }\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n      };\n    useEffect( () => {\n        const allEdges = [...callbackgraphedges];\n        drawC2PathElements(allEdges, dagreRef, reZoom, viewConfig, node_events, theme);\n        setReZoom(false);\n    }, [callbackgraphedges, reZoom, viewConfig, theme]) // eslint-disable-line react-hooks/exhaustive-deps\n    return (\n        <div style={{maxWidth: \"100%\", \"overflow\": \"auto\", height: \"100%\"}}>\n            <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginTop: \"10px\"}} color=\"primary\">\n                <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}>\n                        Actions <ArrowDropDownIcon />\n                </Button>\n            </ButtonGroup>\n            {getConfigString()}\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                      <MenuList id=\"split-button-menu\">\n                        {options.map((option, index) => (\n                          <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(event, index)}\n                          >\n                            {option.name}\n                          </MenuItem>\n                        ))}\n                      </MenuList>\n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n            {manuallyRemoveEdgeDialogOpen &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyRemoveEdgeDialogOpen}\n                    onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} identifier=\"edge_id\" display=\"display\"\n                                        onSubmit={onSubmitManuallyRemoveEdge} options={edgeOptions} title={\"Manually Remove Edge\"} action={\"remove\"} />}\n                />\n            }\n            {manuallyAddEdgeDialogOpen &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyAddEdgeDialogOpen}\n                    onClose={()=>{setManuallyAddEdgeDialogOpen(false);}} \n                    innerDialog={<ManuallyAddEdgeDialog onClose={()=>{setManuallyAddEdgeDialogOpen(false);}}\n                                        onSubmit={onSubmitManuallyAddEdge} source={addEdgeSource} />}\n                />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedLinkCommand} callback={selectedCallback} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            {openSelectLinkCommandDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectLinkCommandDialog}\n                    onClose={()=>{setOpenSelectLinkCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectLinkCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedLinkCommand} options={linkCommands} title={\"Select Link Command\"} \n                                        action={\"select\"} display={\"display\"} identifier={\"display\"}/>}\n                />\n            }\n            \n            \n                <svg id=\"callbacksgraph\" ref={dagreRef} width=\"100%\" height=\"90%\"></svg> \n            </div>\n    );\n}\n\n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {CallbacksTable} from './CallbacksTable';\nimport {CallbacksGraph} from './CallbacksGraph';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n  }\n}\n `;\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\nexport function CallbacksTop(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [callbacks, setCallbacks] = React.useState([]);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    const mountedRef = React.useRef(true);\n    useSubscription(SUB_Callbacks, {\n        variables: {operation_id: me?.user?.current_operation_id || 0}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(!mountedRef.current){\n            return;\n          }\n          setCallbacks(subscriptionData.data.callback);\n        }\n    });\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me?.user?.current_operation_id || 0}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(!mountedRef.current){\n            return;\n          }\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const onOpenTabLocal = React.useCallback( ({tabType, tabID, callbackID}) => {\n      for(let i = 0; i < callbacks.length; i++){\n        if(callbacks[i][\"id\"] === callbackID){\n          const tabData = {tabID, tabType, callbackID, \n              payloadtype: callbacks[i][\"payload\"][\"payloadtype\"][\"ptype\"],\n              payloadtype_id: callbacks[i][\"payload\"][\"payloadtype\"][\"id\"],\n              operation_id: callbacks[i][\"operation_id\"],\n              payloadDescription: callbacks[i][\"payload\"][\"tag\"],\n              callbackDescription: callbacks[i][\"description\"],\n              host: callbacks[i][\"host\"],\n              os: callbacks[i][\"payload\"][\"os\"]};\n          props.onOpenTab(tabData);\n        }\n      }\n    }, [callbacks, props.onOpenTab]);\n    React.useEffect( () => {\n      return() => {\n        mountedRef.current = false;\n      }\n       // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    return (\n      <div style={{height: \"100%\", width: \"100%\"}}>\n        {props.topDisplay === \"graph\" ? (\n          <CallbacksGraph maxHeight={\"100%\"} topHeight={props.heights.top} key={\"callbacksgraph\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        ) : (\n          <div style={{height: \"100%\", width: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\", width: \"100%\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Active Callbacks\n              </Typography>\n            </Paper>\n            <CallbacksTable key={\"callbackstable\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} parentMountedRef={mountedRef}/>\n          </div>\n          )}\n        </div>\n    );\n}","import React, { useEffect } from 'react';\nimport { CallbacksTabs } from './CallbacksTabs';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AspectRatioIcon from '@material-ui/icons/AspectRatio';\nimport TocIcon from '@material-ui/icons/Toc';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport { HeightsDialog } from './HeightsDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { CallbacksTop } from './CallbacksTop';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        transform: 'translateZ(0px)',\n        flexGrow: 1,\n    },\n    speedDial: {\n        position: 'absolute',\n        '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n            bottom: theme.spacing(2),\n            right: theme.spacing(2),\n        },\n        '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n            top: theme.spacing(2),\n            right: theme.spacing(2),\n        },\n    },\n    tooltip: {\n        backgroundColor: theme.palette.background.contrast,\n        color: theme.palette.text.contrast,\n        boxShadow: theme.shadows[1],\n        fontSize: 13,\n    },\n    arrow: {\n        color: theme.palette.background.contrast,\n    },\n}));\nexport function Callbacks() {\n    const [topDisplay, setTopDisplay] = React.useState('table');\n    const [openTabs, setOpenTabs] = React.useState([]);\n    const [clickedTabId, setClickedTabId] = React.useState('');\n    const [heights, setHeights] = React.useState({ top: '30%', bottom: '68%' });\n    const openTabRef = React.useRef();\n    useEffect(() => {\n        const oldTabs = localStorage.getItem('openTabs');\n        if (oldTabs !== undefined && oldTabs !== null) {\n            try {\n                const tabs = JSON.parse(oldTabs);\n                setOpenTabs(tabs);\n                const lastClickedTab = localStorage.getItem('clickedTab');\n                if (lastClickedTab !== undefined && lastClickedTab !== null) {\n                    setClickedTabId(lastClickedTab);\n                }\n            } catch (error) {\n                console.log('failed to parse oldTabs', error);\n            }\n        }\n        const oldHeights = localStorage.getItem('heights');\n        if (oldHeights !== undefined && oldHeights !== null) {\n            try {\n                const newHeights = JSON.parse(oldHeights);\n                setHeights(newHeights);\n            } catch (error) {\n                console.log('failed to parse oldHeights', error);\n            }\n        }\n    }, []);\n    useEffect( () => {\n        openTabRef.current = openTabs;\n    }, [openTabs])\n    const onOpenTab = React.useRef( (tabData) => {\n        let found = false;\n        openTabRef.current.forEach((tab) => {\n            if (tab.tabID === tabData.tabID) found = true;\n        });\n        //console.log(\"found is\", found, tabData.tabID, tabData.tabType, tabData.callbackID, openTabs);\n        if (!found) {\n            const tabs = [...openTabRef.current, { ...tabData }];\n            localStorage.setItem('openTabs', JSON.stringify(tabs));\n            setOpenTabs(tabs);\n        }\n        localStorage.setItem('clickedTab', tabData.tabID);\n        setClickedTabId(tabData.tabID);\n        \n    });\n    \n    const onEditTabDescription = React.useCallback( (tabInfo, description) => {\n        const tabs = openTabs.map((t) => {\n            if (t.tabID === tabInfo.tabID) {\n                return { ...t, customDescription: description };\n            } else {\n                return { ...t };\n            }\n        });\n        setOpenTabs(tabs);\n        localStorage.setItem('openTabs', JSON.stringify(tabs));\n    }, [openTabs]);\n    const onCloseTab = React.useCallback( ({ tabID, index }) => {\n        const tabSet = openTabs.filter((tab) => {\n            return tab.tabID !== tabID;\n        });\n        localStorage.setItem('openTabs', JSON.stringify(tabSet));\n        setOpenTabs(tabSet);\n    }, [openTabs]);\n\n    const onSubmitHeights = React.useCallback((newHeights) => {\n        setHeights(newHeights);\n        localStorage.setItem('heights', JSON.stringify(newHeights));\n    }, []);\n    return (\n        <div style={{ maxWidth: '100%', height: '100%',  display: 'flex', flexDirection: 'column'}}>\n            <React.Fragment>\n                <SpeedDialWrapper setTopDisplay={setTopDisplay} heights={heights} onSubmitHeights={onSubmitHeights} />\n                <div style={{ flexGrow: 1, flexBasis: heights.top, height: heights.top }}>\n                    <CallbacksTop topDisplay={topDisplay} onOpenTab={onOpenTab.current} heights={heights} />\n                </div>\n                <div style={{ flexGrow: 1, flexBasis: heights.bottom, height: heights.bottom }}>\n                    <CallbacksTabs\n                        onCloseTab={onCloseTab}\n                        onEditTabDescription={onEditTabDescription}\n                        tabHeight={heights.bottom}\n                        maxHeight={heights.bottom}\n                        key={'callbackstabs'}\n                        clickedTabId={clickedTabId}\n                        openTabs={openTabs}\n                    />\n                </div>\n            </React.Fragment>\n        </div>\n    );\n}\n\nfunction SpeedDialWrapperPreMemo({ setTopDisplay, onSubmitHeights, heights }) {\n    const [open, setOpen] = React.useState(false);\n    const classes = useStyles();\n    const [openHeightsDialog, setOpenHeightsDialog] = React.useState(false);\n    const submitHeights = (newHeights) => {\n        setOpen(false);\n        onSubmitHeights(newHeights);\n    };\n    const actions = React.useMemo(\n        () => [\n            {\n                icon: <TocIcon />,\n                name: 'Table layout',\n                onClick: () => {\n                    setTopDisplay('table');\n                },\n            },\n            {\n                icon: <AssessmentIcon />,\n                name: 'Graph layout',\n                onClick: () => {\n                    setTopDisplay('graph');\n                },\n            },\n            {\n                icon: <AspectRatioIcon />,\n                name: 'Adjust Top/Bottom Size',\n                onClick: () => {\n                    setOpenHeightsDialog(true);\n                    setOpen(false);\n                },\n            },\n        ],\n        [] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    return (\n        <React.Fragment>\n            {openHeightsDialog && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='sm'\n                    open={openHeightsDialog}\n                    onClose={() => {\n                        setOpenHeightsDialog(false);\n                        setOpen(false);\n                    }}\n                    innerDialog={\n                        <HeightsDialog\n                            onClose={() => {\n                                setOpenHeightsDialog(false);\n                                setOpen(false);\n                            }}\n                            heights={heights}\n                            onSubmit={submitHeights}\n                        />\n                    }\n                />\n            )}\n            <SpeedDial\n                ariaLabel='SpeedDial example'\n                className={classes.speedDial}\n                icon={<SpeedDialIcon />}\n                onClose={() => {\n                    setOpen(false);\n                }}\n                onOpen={() => {\n                    setOpen(true);\n                }}\n                FabProps={{ color: 'secondary' }}\n                open={open}\n                style={{ marginTop: '35px' }}\n                direction='down'>\n                {actions.map((action) => (\n                    <SpeedDialAction\n                        arrow\n                        key={action.name}\n                        TooltipClasses={{ tooltip: classes.tooltip, arrow: classes.arrow }}\n                        icon={action.icon}\n                        tooltipTitle={action.name}\n                        onClick={action.onClick}\n                    />\n                ))}\n            </SpeedDial>\n        </React.Fragment>\n    );\n}\nconst SpeedDialWrapper = React.memo(SpeedDialWrapperPreMemo);","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport {taskingDataFragment} from '../Callbacks/CallbacksTabsTasking'\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst fetchLimit = 20;\nconst responseSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, responses: {response_escape: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, responses: {response_escape: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst parameterSearch = gql`\n${taskingDataFragment}\nquery parametersQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst commentSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\n\nexport function SearchTabTasksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tasks\"} iconComponent={<AssignmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTasksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const searchFieldOptions = [\"Output\", \"Parameters\", \"Comment\"];\n    const [filterTaskStatus, setFilterTaskStatus] = React.useState(\"\");\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        \n    }\n    const handleFilterTaskStatusValueChange = (name, value, error) => {\n        setFilterTaskStatus(value);\n    }\n    const submitSearch = (event, querySearch, querySearchField, queryTaskStatus) => {\n            let adjustedSearchField = querySearchField ? querySearchField : searchField;\n            let adjustedSearch = querySearch ? querySearch : search;\n            let adjustedTaskStatus = queryTaskStatus ? queryTaskStatus : filterTaskStatus;\n            props.changeSearchParam(\"search\", adjustedSearch);\n            props.changeSearchParam(\"taskStatus\", adjustedTaskStatus);\n            switch(adjustedSearchField){\n            case \"Output\":\n                props.onOutputSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            case \"Parameters\":\n                props.onParameterSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Output\";\n            let adjustedTaskStatus = \"\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Output\");\n                props.onChangeSearchField(\"Output\");\n                props.changeSearchParam(\"searchField\", \"Output\");\n            }\n            if(queryParams.has(\"taskStatus\")){\n                setFilterTaskStatus(queryParams.get(\"taskStatus\"));\n                props.onChangeTaskStatus(queryParams.get(\"taskStatus\"));\n                adjustedTaskStatus = queryParams.get(\"taskStatus\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField, adjustedTaskStatus);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={3}>\n                <FormLabel component=\"legend\">Search Task's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Filter Task Status...\" value={filterTaskStatus}\n                        onChange={handleFilterTaskStatusValueChange} onEnter={submitSearch} name=\"Filter Task Status...\"/>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTasksPanel = (props) =>{\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const [taskStatus, setTaskStatus] = React.useState(\"\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        switch(field){\n            case \"Output\":\n                onOutputSearch({search, offset: 0, taskStatus});\n                break;\n            case \"Parameters\":\n                onParameterSearch({search, offset: 0, taskStatus});\n                break;\n            case \"Comment\":\n                onCommentSearch({search, offset: 0, taskStatus});\n                break;\n            default:\n                break;\n        }\n    }\n    const onChangeTaskStatus = (status) => {\n        setTaskStatus(status);\n    }\n    const handleCallbackSearchSuccess = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.task_aggregate.aggregate.count);\n        setTaskingData({task: data.task});\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getOutputSearch] = useLazyQuery(responseSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const [getParameterSearch] = useLazyQuery(parameterSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const onOutputSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        getOutputSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onParameterSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        getParameterSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onCommentSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        console.log(\"search\", search);\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        setSearch(search);\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: 0, taskStatus});\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: 0, taskStatus});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0, taskStatus});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTasksSearchPanel onChangeSearchField={onChangeSearchField} onOutputSearch={onOutputSearch} value={props.value} index={props.index} onChangeTaskStatus={onChangeTaskStatus}\n                onParameterSearch={onParameterSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                \n                {\n                    taskingData.task.length > 0 ? (\n                        taskingData.task.map( (task) => (\n                            <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} />\n                        ))\n                    ) : (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>)\n                }\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport {useTheme} from '@material-ui/core/styles';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\n\nconst useStyles =  makeStyles(theme => ({\n  root: {\n      [theme.breakpoints.up('sm')]: {\n          minWidth: '344px !important',\n      },\n  },\n  typography: {\n      fontWeight: 'bold',\n  },\n  actionRoot: {\n      padding: '8px 8px 8px 16px',\n  },\n  icons: {\n      marginLeft: 'auto',\n      float: \"right\"\n  },\n  expand: {\n      padding: '8px 8px',\n      transform: 'rotate(0deg)',\n      transition: theme.transitions.create('transform', {\n          duration: theme.transitions.duration.shortest,\n      }),\n  },\n  expandOpen: {\n      transform: 'rotate(180deg)',\n  },\n  collapse: {\n      padding: 16,\n  },\n  checkIcon: {\n      fontSize: 20,\n      color: '#b3b3b3',\n      paddingRight: 4,\n  },\n  button: {\n      padding: 0,\n      textTransform: 'none',\n  },\n}));\n\nexport const MythicSnackDownload = React.forwardRef((props, ref) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const { closeSnackbar } = useSnackbar();\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpandClick = () => {\n      setExpanded(!expanded);\n  };\n\n  const handleDismiss = () => {\n      closeSnackbar(props.id);\n  };\n\n  return (\n      <SnackbarContent ref={ref} className={classes.root}>\n          <Card style={{backgroundColor: theme.palette.success.main}} >\n              <CardActions classes={{ root: classes.actionRoot }}>\n                  <Typography variant=\"subtitle2\" className={classes.typography}>{props.title}</Typography>\n                  <div className={classes.icons}>\n                      <IconButton\n                          aria-label=\"Show more\"\n                          className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                          onClick={handleExpandClick}\n                      >\n                          <ExpandMoreIcon />\n                      </IconButton>\n                      <IconButton className={classes.expand} onClick={handleDismiss}>\n                          <CloseIcon />\n                      </IconButton>\n                  </div>\n              </CardActions>\n              <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                  <Paper className={classes.collapse}>\n                      <Typography gutterBottom>{props.innerText}</Typography>\n                      <Button size=\"small\" className={classes.button} download href={props.downloadLink}>\n                          <CheckCircleIcon className={classes.checkIcon} />\n                          Download now\n                      </Button>\n                  </Paper>\n              </Collapse>\n          </Card>\n      </SnackbarContent>\n  );\n});","import React, {useEffect} from 'react';\nimport {Button, Link, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\nimport {useTheme} from '@material-ui/core/styles';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Switch from '@material-ui/core/Switch';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport ArchiveIcon from '@material-ui/icons/Archive';\nimport { gql, useMutation } from '@apollo/client';\nimport { ResponseDisplayScreenshotModal } from '../Callbacks/ResponseDisplayScreenshotModal';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nconst downloadBulkQuery = gql`\nmutation downloadBulkMutation($files: [String!]!){\n    download_bulk(files: $files){\n        status\n        error\n        file_id\n    }\n}\n`;\nconst updateFileDeleted = gql`\nmutation updateFileMutation($file_id: Int!){\n    deleteFile(file_id: $file_id) {\n        status\n        error\n        file_ids\n    }\n}\n`;\nconst updateFileComment = gql`\nmutation updateCommentMutation($file_id: Int!, $comment: String!){\n    update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileMetaDownloadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({file_ids}) => {\n        const updated = files.map( (file) => {\n            if(file_ids.includes(file.id)){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >File</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaDownloadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        onEditComment={onEditComment}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaDownloadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.deleteFile);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <MythicStyledTooltip title=\"Toggle to download multiple files at once\">\n                            <Switch\n                                checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                                onChange={onSelectChanged}\n                                color=\"primary\"\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"select_multiple\"\n                                />\n                        </MythicStyledTooltip>\n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>{props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell style={{width: \"16rem\"}}>md5</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>sha1</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (\n                                                        null\n                                                    ) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaUploadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({file_ids}) => {\n        const updated = files.map( (file) => {\n            if(file_ids.includes(file.id)){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Source</TableCell>\n                        <TableCell >Destination</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaUploadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        onEditComment={onEditComment}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaUploadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.deleteFile);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <MythicStyledTooltip title=\"Toggle to download multiple files at once\">\n                            <Switch\n                                checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                                onChange={onSelectChanged}\n                                color=\"primary\"\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"select_multiple\"\n                                />\n                        </MythicStyledTooltip>\n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" download underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.filename_text}</Link>\n                </TableCell>\n                <TableCell  style={{wordBreak: \"break-all\"}}>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>\n                    {props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaScreenshotTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const imageRefs = files.map( f => f.agent_file_id);\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"400px\"}}>Thumbnail</TableCell>\n                        <TableCell >Filename</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op, index) => (\n                    <FileMetaScreenshotTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                        index={index}\n                        imageRefs={imageRefs}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\nfunction FileMetaScreenshotTableRow(props){\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [openScreenshot, setOpenScreenshot] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    \n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell >\n                    <img onClick={() => setOpenScreenshot(true)} src={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} style={{width: \"350px\", cursor: \"pointer\"}} />\n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n                        onClose={()=>{setOpenScreenshot(false);}} \n                        innerDialog={<ResponseDisplayScreenshotModal images={props.imageRefs} startIndex={props.index} onClose={()=>{setOpenScreenshot(false);}} />} />\n                        {props.chunks_received < props.total_chunks ? (<Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>) : (null)}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.filename_text}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>\n                    {props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}","import React, { useEffect } from 'react';\nimport {Button, IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog, MythicViewJSONAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport {DownloadHistoryDialog} from '../Callbacks/DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nconst updateFileComment = gql`\nmutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!){\n    update_filebrowserobj_by_pk(pk_columns: {id: $filebrowserobj_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileBrowserTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updates = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment}\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updates);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Host / Path</TableCell>\n                        <TableCell >Modify Time</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Permissions</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Downloads</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileBrowserTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileBrowserTableRow(props){\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filebrowserobj_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {filebrowserobj_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title=\"View Permissions Data\" leftColumn=\"Permission\" rightColumn=\"Value\" value={props.permissions} onClose={()=>{setViewPermissionsDialogOpen(false);}} />}\n                    />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileHistoryDialogOpen} \n                    onClose={()=>{setFileHistoryDialogOpen(false);}} \n                    innerDialog={<DownloadHistoryDialog title=\"Download History\" value={props.filemeta} onClose={()=>{setFileHistoryDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit File Browser Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", textDecoration: props.deleted ? \"strike-through\" : \"\"}}>{props.full_path_text}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.modify_time}</Typography>\n                </TableCell>\n                <TableCell><IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton><Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography></TableCell>\n                <TableCell>\n                    <Button color=\"primary\" variant=\"outlined\" onClick={() => setViewPermissionsDialogOpen(true)}><PlaylistAddCheckIcon /></Button>\n                </TableCell>\n                <TableCell>\n                    {props.filemeta.length > 0 ? (\n                        <MythicStyledTooltip title=\"View Download History and Download Files\">\n                            <Button color=\"primary\" variant=\"contained\" onClick={() => setFileHistoryDialogOpen(true)}><HistoryIcon /></Button>\n                        </MythicStyledTooltip>\n                    ): (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {FileMetaDownloadTable, FileMetaUploadTable, FileMetaScreenshotTable} from './FileMetaTable';\nimport {FileBrowserTable} from './FileBrowserTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst fileMetaFragment = gql`\nfragment filemetaData on filemeta{\n    agent_file_id\n    chunk_size\n    chunks_received\n    complete\n    deleted\n    filename_text\n    full_remote_path_text\n    host\n    id\n    is_download_from_agent\n    is_payload\n    is_screenshot\n    md5\n    operator {\n        id\n        username\n    }\n    comment\n    sha1\n    timestamp\n    total_chunks\n    task {\n        id\n        comment\n        command {\n            cmd\n            id\n        }\n    }\n}\n`;\nconst fileBrowserFragment = gql`\nfragment filebrowserData on filebrowserobj{\n    comment\n    deleted\n    full_path_text\n    host\n    id\n    is_file\n    modify_time\n    permissions\n    size\n    filemeta {\n        id\n        agent_file_id\n        chunks_received\n        complete\n        total_chunks\n        timestamp\n        task {\n            id\n            comment\n        }\n    }\n}\n`;\nconst fetchLimit = 20;\nconst filenameFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaUploadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaDownloadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {full_path_text: {_ilike: $filename}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, full_path_text: {_ilike: $filename}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst hashFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaUploadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaUploadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst filenameFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaScreenshotQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaScreenshotQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaScreenshotQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nexport function SearchTabFilesLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Files\"} iconComponent={<AttachmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabFilesSearchPanel = (props) => {\n    const theme = useTheme();\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const searchFieldOptions = [\"Filename\", \"Hash\", \"Comment\"];\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const searchLocationOptions = [\"Uploads\", \"Downloads\", \"FileBrowser\", \"Screenshots\"];\n    const [parsedSearch, setParsedSearch] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchLocationChange = (event) => {\n        setSearchLocation(event.target.value);\n        props.onChangeSearchLocation(event.target.value);\n        props.changeSearchParam(\"location\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n    }\n    const handleSearchHostValueChange = (name, value, error) => {\n        setSearchHost(value);\n    }\n    const submitSearch = (event, querySearch, querySearchHost, querySearchField, querySearchLocation) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        let adjustedSearchHost = querySearchHost ? querySearchHost : searchHost;\n        let adjustedSearchLocation = querySearchLocation ? querySearchLocation : searchLocation;\n        props.changeSearchParam(\"host\", adjustedSearchHost);\n        props.changeSearchParam(\"search\", adjustedSearch);\n        switch(adjustedSearchField){\n            case \"Filename\":\n                props.onFilenameSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            case \"Hash\":\n                props.onHashSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            default:\n                break;\n        }\n    }\n    const uploadFile = (file) => {\n        try {\n            let xhr = new XMLHttpRequest();\n            let fd = new FormData();\n            xhr.open(\"POST\", window.location.origin + \"/api/v1.4/files/manual\", true);\n            //xhr.withCredentials = true;\n            xhr.setRequestHeader(\"Authorization\", \"Bearer \" + localStorage.getItem(\"access_token\"));\n            //xhr.setRequestHeader(\"refresh_token\", localStorage.getItem(\"refresh_token\"));\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    try{\n                        let response = JSON.parse(xhr.responseText);\n                        if(response[\"status\"] === \"success\"){\n                            snackActions.success(\"Successfuly hosted file! Now searchable on the 'Uploads' search\");\n                        }else{\n                            snackActions.error(\"Failed to host file! \" + response[\"error\"]);\n                        }\n                    }catch(error){\n                        snackActions.error(\"Failed to process response from upload: \" + error);\n                        console.log(error);\n                    }\n                } else if (xhr.readyState === 4 && (xhr.status === 302 || xhr.status === 405)) {\n                    // either got redirected or try to post/put to a bad path\n                    console.log(\"httpGetAsync was 302 or 405 from url \");\n                    snackActions.error(\"Got HTTP 302 or 405 when trying to host file\");\n                } else if (xhr.readyState === 4) {\n                    console.log(\"httpGetAsync Error with data: \" + fd);\n                    snackActions.error(\"Mythic hit an error trying to hos the file: \" + xhr.status + \": \" + xhr.statusText);\n                }\n            };\n            fd.append(\"upload_file\", file);\n            xhr.send(fd);\n        } catch (error) {\n            snackActions.error(\"HTTP Browser error trying to upload file: \" + error.toString());\n            console.error(\"HTTP Browser error: \" + error.toString());\n        }\n    \n    }\n    const onFileChange = (evt) => {  \n        uploadFile(evt.target.files[0]);\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchHost = \"\";\n            let adjustedSearchField = \"Filename\";\n            let adjustedSearchLocation = \"Downloads\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Filename\");\n                props.onChangeSearchField(\"Filename\");\n                props.changeSearchParam(\"searchField\", \"Filename\");\n            }\n            if(queryParams.has(\"location\") && searchLocationOptions.includes(queryParams.get(\"location\"))){\n                setSearchLocation(queryParams.get(\"location\"));\n                adjustedSearchLocation = queryParams.get(\"location\");\n                props.onChangeSearchLocation(queryParams.get(\"location\"));\n            }\n            if(queryParams.has(\"host\")){\n                setSearchHost(queryParams.get(\"host\"));\n                adjustedSearchHost = queryParams.get(\"host\")\n            }\n            setParsedSearch(!parsedSearch);\n            submitSearch(null, adjustedSearch, adjustedSearchHost, adjustedSearchField, adjustedSearchLocation);\n        }\n    }, [props.value, props.index]);\n    return (\n        <Grid container spacing={1} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Host Name Search...\" value={searchHost}\n                    onChange={handleSearchHostValueChange} onEnter={submitSearch} name=\"Host Name Search...\" />\n            </Grid>\n            <Grid item xs={3}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search File's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n            <FormLabel component=\"legend\">Search Location</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchLocation}\n                    onChange={handleSearchLocationChange}\n                >\n                    {\n                        searchLocationOptions.map((opt, i) => (\n                            <MenuItem key={\"searchlocopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <Button variant=\"contained\" color=\"primary\" component=\"label\">Host File in Mythic <input onChange={onFileChange} type=\"file\" hidden /></Button>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport const SearchTabFilesPanel = (props) =>{\n    const [fileMetaData, setFileMetaData] = React.useState([]);\n    const [fileBrowserData, setFileBrowserData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        switch(field){\n            case \"Filename\":\n                onFilenameSearch({search, searchHost, offset: 0, adjustedSearchLocation: searchLocation});\n                break;\n            case \"Hash\":\n                onHashSearch({search, searchHost, offset: 0, adjustedSearchLocation: searchLocation});\n                break;\n            case \"Comments\":\n                onCommentSearch({search, searchHost, offset: 0, adjustedSearchLocation: searchLocation});\n                break;\n            default:\n                break;\n        }\n    }\n    const onChangeSearchLocation = (field) => {\n        setSearchLocation(field);\n        switch(searchField){\n            case \"Filename\":\n                onFilenameSearch({search, searchHost, offset: 0, adjustedSearchLocation: field});\n                break;\n            case \"Hash\":\n                onHashSearch({search, searchHost, offset: 0, adjustedSearchLocation: field});\n                break;\n            case \"Comments\":\n                onCommentSearch({search, searchHost, offset: 0, adjustedSearchLocation: field});\n                break;\n            default:\n                break;\n        }\n    }\n    const handleFileMetaSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.filemeta_aggregate.aggregate.count);\n        setFileBrowserData([]);\n        setFileMetaData(data.filemeta);\n    }\n    const handleFileBrowserSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.filebrowserobj_aggregate.aggregate.count);\n        setFileBrowserData(data.filebrowserobj);\n        setFileMetaData([]);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getfilenameFileMetaUploadSearch] = useLazyQuery(filenameFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileMetaDownloadSearch] = useLazyQuery(filenameFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileBrowserSearch] = useLazyQuery(filenameFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileMetaScreenshotSearch] = useLazyQuery(filenameFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaUploadSearch] = useLazyQuery(hashFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaDownloadSearch] = useLazyQuery(hashFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaScreenshotSearch] = useLazyQuery(hashFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaUploadSearch] = useLazyQuery(commentFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaDownloadSearch] = useLazyQuery(commentFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileBrowserSearch] = useLazyQuery(commentFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaScreenshotSearch] = useLazyQuery(commentFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onFilenameSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            getfilenameFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            getfilenameFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            getfilenameFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getfilenameFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onHashSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            snackActions.dismiss();\n            snackActions.warning(\"FileBrowser doesn't currently track file hashes\");\n            setTotalCount(0);\n            setFileBrowserData([]);\n            setFileMetaData([]);\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            gethashFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            gethashFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            gethashFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onCommentSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        setSearch(new_search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            getcommentFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            getcommentFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            getcommentFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getcommentFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, searchHost, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, searchHost, offset: (value - 1) * fetchLimit });\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, searchHost, offset: (value - 1) * fetchLimit });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    \n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabFilesSearchPanel onChangeSearchField={onChangeSearchField} onFilenameSearch={onFilenameSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onHashSearch={onHashSearch} onCommentSearch={onCommentSearch} onChangeSearchLocation={onChangeSearchLocation} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {fileMetaData.length > 0 ? (\n                    searchLocation === \"Uploads\" ? (<FileMetaUploadTable files={fileMetaData} />) : (searchLocation === \"Downloads\" ? (<FileMetaDownloadTable files={fileMetaData} />) : (<FileMetaScreenshotTable files={fileMetaData} />))\n                ) : (fileBrowserData.length > 0 ? (<FileBrowserTable files={fileBrowserData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                ))}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faCopy} from '@fortawesome/free-solid-svg-icons';\nimport {Button, Link} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nconst updateCredentialComment = gql`\nmutation updateCommentMutation($credential_id: Int!, $comment: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {comment: $comment}) {\n        comment\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialAccount = gql`\nmutation updateAccountMutation($credential_id: Int!, $account: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {account: $account}) {\n        account\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialRealm = gql`\nmutation updateAccountMutation($credential_id: Int!, $realm: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {realm: $realm}) {\n        realm\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialCredential = gql`\nmutation updateAccountMutation($credential_id: Int!, $credential: bytea!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {credential_raw: $credential}) {\n        credential_text\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialDeleted = gql`\nmutation updateAccountMutation($credential_id: Int!, $deleted: Boolean!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\n\nexport function CredentialTable(props){\n    const [credentials, setCredentials] = React.useState([]);\n    useEffect( () => {\n        setCredentials([...props.credentials]);\n    }, [props.credentials]);\n    const onEditComment = ({id, comment, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, comment, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditAccount = ({id, account, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, account, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditRealm = ({id, realm, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, realm, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditCredential = ({id, credential_text, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, credential_text, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditDeleted = ({id, deleted, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"4rem\"}}>Edit</TableCell>\n                        <TableCell >Account</TableCell>\n                        <TableCell >Realm</TableCell>\n                        <TableCell >Credential</TableCell>\n                        <TableCell style={{width: \"20rem\"}}>Comment</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell >Task / Operator</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Type</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {credentials.map( (op) => (\n                    <CredentialTableRow\n                        key={\"cred\" + op.id}\n                        onEditComment={onEditComment}\n                        onEditAccount={onEditAccount}\n                        onEditRealm={onEditRealm}\n                        onEditCredential={onEditCredential}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CredentialTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [editAccountDialogOpen, setEditAccountDialogOpen] = React.useState(false);\n    const [editRealmDialogOpen, setEditRealmDialogOpen] = React.useState(false);\n    const [editCredentialDialogOpen, setEditCredentialDialogOpen] = React.useState(false);\n    const dropdownAnchorRef = React.useRef(null);\n    const [openDropdownButton, setOpenDropdownButton] = React.useState(false);\n    const maxDisplayLength = 200;\n    const displayCred = props.credential_text.length > maxDisplayLength ? props.credential_text.slice(0, maxDisplayLength) + \"...\" : props.credential_text;\n    const [updateComment] = useMutation(updateCredentialComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_credential_by_pk);\n        }\n    });\n    const [updateAccount] = useMutation(updateCredentialAccount, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated account\");\n            props.onEditAccount(data.update_credential_by_pk);\n        }\n    });\n    const [updateRealm] = useMutation(updateCredentialRealm, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated realm\");\n            props.onEditRealm(data.update_credential_by_pk);\n        }\n    });\n    const [updateCredential] = useMutation(updateCredentialCredential, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated credential\");\n            props.onEditCredential(data.update_credential_by_pk);\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated deleted status\");\n            props.onEditDeleted(data.update_credential_by_pk);\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {credential_id: props.id, comment: comment}})\n    }\n    const onSubmitUpdatedAccount = (account) => {\n        updateAccount({variables: {credential_id: props.id, account: account}})\n    }\n    const onSubmitUpdatedRealm = (realm) => {\n        updateRealm({variables: {credential_id: props.id, realm: realm}})\n    }\n    const onSubmitUpdatedCredential = (credential) => {\n        updateCredential({variables: {credential_id: props.id, credential: credential}})\n    }\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {credential_id: props.id, deleted: !props.deleted}})\n    }\n    const onCopyToClipboard = (data) => {\n        let result = copyStringToClipboard(data);\n        if(result){\n          snackActions.success(\"Copied text!\");\n        }else{\n          snackActions.error(\"Failed to copy text\");\n        }\n    }\n    const options =  [\n        {\n            name: 'Edit Account', click: (evt) => {\n                evt.stopPropagation();\n                setEditAccountDialogOpen(true);\n            }\n        },\n        {\n            name: \"Edit Realm\", click: (evt) => {\n                setEditRealmDialogOpen(true);\n            }\n        },\n        {\n            name: \"Edit Credential\", click: (evt) => {\n                setEditCredentialDialogOpen(true);\n            }\n        },\n        {   \n            name: 'Edit Comment', click: (evt) => {\n                setEditCommentDialogOpen(true);\n            }\n        },\n    ];\n    const handleMenuItemClick = (event, index) => {\n        options[index].click(event);\n        setOpenDropdownButton(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setOpenDropdownButton(false);\n      };\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                {editCommentDialogOpen &&\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit Credential Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                }\n                {editAccountDialogOpen &&\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editAccountDialogOpen} \n                        onClose={()=>{setEditAccountDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit Credential Account\" onSubmit={onSubmitUpdatedAccount} value={props.account} onClose={()=>{setEditAccountDialogOpen(false);}} />}\n                    />\n                }\n                {editRealmDialogOpen &&\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editRealmDialogOpen} \n                        onClose={()=>{setEditRealmDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit Credential Realm\" onSubmit={onSubmitUpdatedRealm} value={props.realm} onClose={()=>{setEditRealmDialogOpen(false);}} />}\n                    />\n                }\n                {editCredentialDialogOpen &&\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCredentialDialogOpen} \n                        onClose={()=>{setEditCredentialDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit Credential Credential\" onSubmit={onSubmitUpdatedCredential} value={props.credential_text} onClose={()=>{setEditCredentialDialogOpen(false);}} />}\n                    />\n                }\n                \n                <TableCell>{props.deleted ? (\n                    <MythicStyledTooltip title=\"Restore Credential for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </MythicStyledTooltip>\n                ) : (\n                    <MythicStyledTooltip title=\"Delete Credential so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </MythicStyledTooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Button size=\"small\" variant=\"contained\" color=\"primary\" ref={dropdownAnchorRef}\n                        onClick={() => setOpenDropdownButton(true)} >{\"Edit\"}\n                    </Button>\n                    <Popper open={openDropdownButton} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n                    {({ TransitionProps, placement }) => (\n                        <Grow\n                        {...TransitionProps}\n                        style={{\n                            transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                        }}\n                        >\n                        <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                            <ClickAwayListener onClickAway={handleClose}>\n                            <MenuList id=\"split-button-menu\"  >\n                                {options.map((option, index) => (\n                                <MenuItem\n                                    key={option.name + index}\n                                    onClick={(event) => handleMenuItemClick(event, index)}\n                                >\n                                    {option.name}\n                                </MenuItem>\n                                ))}\n                            </MenuList>\n                            </ClickAwayListener>\n                        </Paper>\n                        </Grow>\n                    )}\n                    </Popper>\n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.account}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.realm}</Typography>\n                </TableCell>\n                <TableCell >\n                    {props.credential_text.length > 64 ? \n                    (\n                        <React.Fragment>\n                            <MythicStyledTooltip title={\"Copy to clipboard\"}>\n                                <IconButton onClick={() => onCopyToClipboard(props.credential_text)} size=\"small\">\n                                    <FontAwesomeIcon icon={faCopy} />\n                                </IconButton>\n                            </MythicStyledTooltip>\n                            <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{displayCred}</Typography>\n                        </React.Fragment>\n                    )\n                    :\n                    (\n                        <React.Fragment>\n                            <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{displayCred}</Typography>\n                        </React.Fragment>   \n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography>\n                    </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me?.user?.view_utc_time || false)}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.task_id !== null ? (\n                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task_id}>{props.task_id}</Link>\n                    ): (props.operator.username)}\n                </TableCell>\n                <TableCell>{props.type}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {CredentialTable} from './CredentialTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CredentialTableNewCredentialDialog} from './CredentialTableNewCredentialDialog';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst fetchLimit = 20;\nconst accountSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $account: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst realmSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $realm: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst credentialSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $credential: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst commentSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $comment: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      id\n    }\n  }\n`;\n\nexport function SearchTabCredentialsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Credentials\"} iconComponent={<VpnKeyIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCredentialsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const searchFieldOptions = [\"Account\", \"Realm\", \"Comment\", \"Credential\"];\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        \n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        props.changeSearchParam(\"search\", adjustedSearch);\n        switch(adjustedSearchField){\n            case \"Account\":\n                props.onAccountSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Realm\":\n                props.onRealmSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Credential\":\n                props.onCredentialSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.OnTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Account\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Account\");\n                props.onChangeSearchField(\"Account\");\n                props.changeSearchParam(\"searchField\", \"Account\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={5}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Credential's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                    onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                    innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                />\n                <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCredentialsPanel = (props) =>{\n    const [credentialaData, setCredentialData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        switch(field){\n            case \"Account\":\n                onAccountSearch({search, offset: 0});\n                break;\n            case \"Realm\":\n                onRealmSearch({search, offset: 0});\n                break;\n            case \"Credential\":\n                onCredentialSearch({search, offset: 0});\n                break;\n            case \"Comment\":\n                onCommentSearch({search, offset: 0});\n                break;\n            default:\n                break;\n        }\n    }\n    const handleCredentialSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.credential_aggregate.aggregate.count);\n        setCredentialData(data.credential);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getAccountSearch] = useLazyQuery(accountSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getRealmSearch] = useLazyQuery(realmSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCredentialSearch] = useLazyQuery(credentialSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onAccountSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getAccountSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            account: \"%\" + search + \"%\",\n        }})\n    }\n    const onRealmSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getRealmSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            realm: \"%\" + search + \"%\",\n        }})\n    }\n    const onCredentialSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCredentialSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            credential: \"%\" + search + \"%\",\n        }})\n    }\n    const onCommentSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            comment: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: 0});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: 0});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: 0});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabCredentialsSearchPanel onChangeSearchField={onChangeSearchField} onAccountSearch={onAccountSearch} value={props.value} index={props.index}\n                onRealmSearch={onRealmSearch} onCredentialSearch={onCredentialSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {credentialaData.length > 0 ? (\n                    <CredentialTable credentials={credentialaData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\n\nexport function KeylogsTable(props){\n    const [keylogs, setKeylogs] = React.useState([]);\n    useEffect( () => {\n        const condensed = props.keylogs.reduce( (prev, cur) => {\n            if(prev[cur.user] === undefined){\n                prev[cur.user] = {[cur.task.callback.host]: {[cur.window]: [{...cur}]}}\n            }else if(prev[cur.user][cur.task.callback.host] === \"undefined\"){\n                prev[cur.user][cur.task.callback.host] = {[cur.window]: [{...cur}]}\n            }else if(prev[cur.user][cur.task.callback.host][cur.window] === undefined){\n                prev[cur.user][cur.task.callback.host][cur.window] = [{...cur}];\n            }else{\n                prev[cur.user][cur.task.callback.host][cur.window].push({...cur});\n            }\n            return {...prev}\n        },{})\n        //now that we have it split into a dictionary, we need to split it back out into an array for easy processing\n        let newArrayData = [];\n        for(const [key, value] of Object.entries(condensed)){\n            // key should be a User, Host, or Window\n            let newSecondLevel = [];\n            //console.log(\"key\", key, \"value\", value);\n            for(const [key2, value2] of Object.entries(value)){\n                // key2 should be a Host, User, or Host\n                let newThirdLevel = []\n                //console.log(\"key2\", key2, \"value2\", value2);\n                for( const[key3, value3] of Object.entries(value2)){\n                    // key3 should be Window, Window, or User\n                    // value3 should always be an array of keylog entries so we can get the actual keystrokes\n                    //console.log(\"key3\", key3, \"value3\", value3);\n                    newThirdLevel.push({\"name\": key3, \"value\": value3.reverse()});\n                }\n                //console.log(\"newThirdLevel\", newThirdLevel);\n                newSecondLevel.push({\"name\": key2, \"value\": newThirdLevel.reverse()});\n            }\n            newArrayData.push({\"name\": key, \"value\": newSecondLevel.reverse()});\n        }\n        console.log(newArrayData);\n        setKeylogs([...newArrayData]);\n    }, [props.keylogs]);\n//k0[\"name\"]\n    return (\n        <Grid container spacing={0} direction=\"row\" columns={12}>\n            {keylogs.map( k0 => (\n                <React.Fragment key={k0[\"name\"]}>\n                    <Grid item xs={2} style={{borderBottom: \"2px solid grey\"}}>{k0[\"name\"]}</Grid>\n                    <Grid container item spacing={0} xs={10} style={{borderBottom: \"2px solid grey\"}}>\n                        {k0.value.map( (k1, k1i) => (\n                            <React.Fragment key={k0[\"name\"] + k1[\"name\"]}>\n                                <Grid item xs={2} style={{borderBottom: k1i + 1 !== k0.value.length ? \"2px solid grey\": \"\"}}>{k1[\"name\"]}</Grid>\n                                <Grid container item spacing={0} xs={10} style={{borderBottom: k1i + 1 !== k0.value.length ? \"2px solid grey\" : \"\"}}>\n                                    {k1.value.map( (k2, k2i) => (\n                                        <React.Fragment key={k0[\"name\"] + k1[\"name\"] + k2[\"name\"]}>\n                                            <Grid item xs={2} style={{borderBottom: k2i + 1 !== k1.value.length ? \"2px solid grey\" : \"\"}}> {k2[\"name\"]} </Grid>\n                                            <Grid container item spacing={0} xs={10} style={{borderBottom: k2i + 1 !== k1.value.length ? \"2px solid grey\": \"\"}}>\n                                                <Grid item xs={12}>\n                                                    {k2.value.map( (k3, k3i) => (\n                                                        <span key={k0[\"name\"] + k1[\"name\"] + k2[\"name\"] + k3i}>{k3.keystrokes_text}</span>\n                                                    ))}\n                                                </Grid>\n                                            </Grid>\n                                        </React.Fragment>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>\n                        ))}\n                    </Grid>\n                </React.Fragment>\n            ))}\n        </Grid>\n    )\n}\n\n/*\n    <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.task.callback.host}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.keystrokes_text}</Typography>\n                </TableCell>\n*/\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {KeylogsTable} from './KeylogsTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst keylogFragment = gql`\nfragment keylogData on keylog{\n    keystrokes_text\n    task {\n        id\n        callback {\n            host\n            id\n        }\n    }\n    user\n    window\n    timestamp\n    id\n}\n`;\nconst fetchLimit = 200;\nconst keylogSearch = gql`\n${keylogFragment}\nquery keylogQuery($operation_id: Int!, $keylog: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userUniqueSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: user, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: user, offset: $offset, order_by: {user: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programUniqueSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: window, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: window, offset: $offset, order_by: {window: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst hostSearch = gql`\n${keylogFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\n\nexport function SearchTabKeylogsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Keylogs\"} iconComponent={<KeyboardIcon />} {...props}/>\n    )\n}\n\nconst SearchTabKeylogsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const searchFieldOptions = [\"Keystroke\", \"User\", \"Program\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        \n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        props.changeSearchParam(\"search\", adjustedSearch);\n        switch(adjustedSearchField){\n            case \"Keystroke\":\n                props.onKeylogSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Program\":\n                props.onProgramSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Keystroke\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Keystroke\");\n                props.onChangeSearchField(\"Keystroke\");\n                props.changeSearchParam(\"searchField\", \"Keystroke\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Keylog's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabKeylogsPanel = (props) =>{\n    const [keylogData, setKeylogData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setKeylogData([]);\n        switch(field){\n            case \"Keystroke\":\n                onKeylogSearch({search, offset: 0});\n                break;\n            case \"User\":\n                onUserSearch({search, offset: 0});\n                break;\n            case \"Program\":\n                onProgramSearch({search, offset: 0});\n                break;\n            case \"Host\":\n                onHostSearch({search, offset: 0});\n                break;\n            default:\n                break;\n        }\n    }\n    const handleKeylogSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.keylog_aggregate.aggregate.count);\n        setKeylogData(data.keylog);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getKeylogSearch] = useLazyQuery(keylogSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getUserUniqueSearch] = useLazyQuery(userUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique User\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramSearch] = useLazyQuery(programSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramUniqueSearch] = useLazyQuery(programUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique Program\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onKeylogSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getKeylogSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            keylog: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getUserUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%_%\",\n            }})\n        }else{\n            getUserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onProgramSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getProgramUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%_%\",\n            }})\n        }else{\n            getProgramSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: 0});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabKeylogsSearchPanel onChangeSearchField={onChangeSearchField} onKeylogSearch={onKeylogSearch} value={props.value} index={props.index}\n                onUserSearch={onUserSearch} onProgramSearch={onProgramSearch} onHostSearch={onHostSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {keylogData.length > 0 ? (\n                    <KeylogsTable keylogs={keylogData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($token_id: Int!, $description: String) {\n  update_token_by_pk(pk_columns: {id: $token_id}, _set: {description: $description}) {\n    description\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    description\n    id\n  }\n}\n`;\n\nexport function TokenDescriptionDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    useQuery(getCommentQuery, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            setComment(data.token_by_pk.description)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        onCompleted: (data) => {\n          console.log('udpated');\n          props.onClose();\n        },\n        onError: (data) => {\n          console.error(data);\n          props.onClose();\n        }\n        \n    });\n    const onCommitSubmit = () => {\n        updateComment({variables: {token_id: props.token_id, description: comment}});\n        \n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Token Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport EditIcon from '@material-ui/icons/Edit';\nimport {TaskTokenDialog} from '../Callbacks/TaskTokenDialog';\nimport {TokenDescriptionDialog} from './TokenDescriptionDialog';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\n\nconst updateCredentialDeleted = gql`\nmutation updateCredentialDeletedMutation($token_id: Int!, $deleted: Boolean!){\n    update_token_by_pk(pk_columns: {id: $token_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n    }\n}\n`;\nconst updateCallbacksOfDeletedToken = gql`\nmutation updateCallbacksOfDeletedTokenMutation($token_id: Int!, $deleted: Boolean!){\n    update_callbacktoken(where: {token_id: {_eq: $token_id}}, _set: {deleted: $deleted}) {\n        affected_rows\n    }\n}\n`;\n\nexport function TokenTable(props){\n    const [tokens, setTokens] = React.useState([]);\n    useEffect( () => {\n        setTokens([...props.tokens]);\n    }, [props.credentials]);\n\n    const onEditDeleted = ({id, deleted}) => {\n        const updates = tokens.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted}\n            }else{\n                return {...cred}\n            }\n        });\n        setTokens(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Groups</TableCell>\n                        <TableCell >TokenId</TableCell>\n                        <TableCell >Logon Session</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callbacks With Handles</TableCell>\n                        <TableCell >Host</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {tokens.map( (op) => (\n                    <TokenTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction TokenTableRow(props){\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [viewTokenDialog, setViewTokenDialog] = React.useState(false);\n    const [editDescriptionDialog, setEditDescriptionDialog] = React.useState(false);\n    const [updateCallbackTokensDeleted] = useMutation(updateCallbacksOfDeletedToken, {\n        onCompleted: (data) => {\n            snackActions.success(\"Removed token from callback\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated deleted status\");\n            if(props.callbacktokens !== null && !props.deleted){\n                //token was deleted, make sure to delete associated callback tokens too\n                updateCallbackTokensDeleted({variables: {token_id: props.id, deleted: true}})\n            }\n            props.onEditDeleted(data.update_token_by_pk);\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {token_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                \n                <TableCell>{props.deleted ? (\n                    <MythicStyledTooltip title=\"Restore Token for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </MythicStyledTooltip>\n                ) : (\n                    <MythicStyledTooltip title=\"Delete Token so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </MythicStyledTooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.User}</Typography>\n                    \n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.Groups}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.TokenId}</Typography>\n                    <MythicStyledTooltip title=\"View Token Information\"><IconButton size=\"small\" color=\"primary\" onClick={()=>{setViewTokenDialog(true);}}><ConfirmationNumberIcon/></IconButton></MythicStyledTooltip>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewTokenDialog} \n                        onClose={()=>{setViewTokenDialog(false);}} \n                        innerDialog={<TaskTokenDialog token_id={props.id} onClose={()=>{setViewTokenDialog(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    {props.logonsession === null ? (\n                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>No Logon Session Data</Typography>\n                    ) : (\n                        <React.Fragment>\n                            {props.logonsession.LogonId} {props.logonsession.LogonType !== null ? (\" (\" + props.logonsession.LogonType + \")\") : (null)}\n                        </React.Fragment>\n                    )}\n                    </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                    <IconButton onClick={() => setEditDescriptionDialog(true)} size=\"small\"><EditIcon /></IconButton>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={editDescriptionDialog} \n                            onClose={()=>{setEditDescriptionDialog(false);}} \n                            innerDialog={<TokenDescriptionDialog token_id={props.id} onClose={()=>{setEditDescriptionDialog(false);}}/>}\n                        />\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>{props.callbacktokens?.map( (cbt) => (\n                        cbt.callback_id\n                    )) || null\n                }</TableCell>\n                <TableCell>{props.host}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {TokenTable} from './TokenTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst tokenFragment = gql`\nfragment tokenData on token{\n    id\n    User\n    Groups\n    TokenId\n    logonsession {\n        LogonType\n        UserName\n        LogonDomain\n        id\n        LogonId\n        authenticationpackages(where: {deleted: {_eq: false}}) {\n            Name\n            id\n        }\n    }\n    task {\n        id\n    }\n    host\n    deleted\n    description\n    callbacktokens(where: {deleted: {_eq: false}}) {\n        callback_id\n        id\n    }\n}\n`;\nconst fetchLimit = 20;\nconst userGroupSearch = gql`\n${tokenFragment}\nquery usergroupQuery($operation_id: Int!, $name: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst SIDSearch = gql`\n${tokenFragment}\nquery sidQuery($operation_id: Int!, $sid: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst logonTypeSearch = gql`\n${tokenFragment}\nquery logontypeQuery($operation_id: Int!, $logontype: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n  }\n`;\nconst hostSearch = gql`\n${tokenFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n}\n`;\nexport function SearchTabTokensLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tokens\"} iconComponent={<ConfirmationNumberIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTokensSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const searchFieldOptions = [\"User/Group\", \"SID\", \"LogonType\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        \n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        props.changeSearchParam(\"search\", adjustedSearch);\n        switch(adjustedSearchField){\n            case \"User/Group\":\n                props.onUserGroupSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"SID\":\n                props.onSIDSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"LogonType\":\n                props.onLogonTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User/Group\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User/Group\");\n                props.onChangeSearchField(\"User/Group\");\n                props.changeSearchParam(\"searchField\", \"User/Group\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Tokens by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTokensPanel = (props) =>{\n    const [tokenData, setTokenData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setTokenData([]);\n        switch(field){\n            case \"User/Group\":\n                onUserGroupSearch({search, offset: 0});\n                break;\n            case \"SID\":\n                onSIDSearch({search, offset: 0});\n                break;\n            case \"LogonType\":\n                onLogonTypeSearch({search, offset: 0});\n                break;\n            case \"Host\":\n                onHostSearch({search, offset: 0});\n                break;\n            default:\n                break;\n        }\n    }\n    const handleTokenSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.token_aggregate.aggregate.count);\n        setTokenData(data.token);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getUserGroupSearch] = useLazyQuery(userGroupSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getSIDSearch] = useLazyQuery(SIDSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getLogonTypeSearch] = useLazyQuery(logonTypeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onUserGroupSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserGroupSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            name: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onLogonTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getLogonTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            logontype: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onSIDSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getSIDSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            sid: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: 0});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: 0});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTokensSearchPanel onChangeSearchField={onChangeSearchField} onUserGroupSearch={onUserGroupSearch} value={props.value} index={props.index}\n                onLogonTypeSearch={onLogonTypeSearch} onHostSearch={onHostSearch} onSIDSearch={onSIDSearch} changeSearchParam={props.changeSearchParam} />\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {tokenData.length > 0 ? (\n                    <TokenTable tokens={tokenData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport {  useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport {toggleHideCallbackMutations} from '../Callbacks/CallbackMutations';\nimport { MythicStyledTooltip } from '../../MythicComponents/MythicStyledTooltip';\nimport {DetailedCallbackTable} from '../Callbacks/DetailedCallbackTable';\nimport InfoIcon from '@material-ui/icons/Info';\n\nexport function CallbackSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, active}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Hide</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >IP</TableCell>\n                        <TableCell >ID</TableCell>\n                        <TableCell>Checkin Times</TableCell>\n                        <TableCell>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [openMetaDialog, setOpenMetaDialog] = React.useState(false);\n    const [updateDeleted] = useMutation(toggleHideCallbackMutations, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated active status\");\n            props.onEditDeleted({id: props.id, active: !props.active});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id, active: !props.active}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.active ? \"Hide\" : \"Restore\" }/>\n                \n                <TableCell>{!props.active ? (\n                    <MythicStyledTooltip title=\"Restore Callback for Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </MythicStyledTooltip>\n                ) : (\n                    <MythicStyledTooltip title=\"Hide Callback so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </MythicStyledTooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.ip}\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Initial: {toLocalTime(props.init_callback, me.user.view_utc_time)}\n                    </Typography>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Latest: {toLocalTime(props.last_checkin, me.user.view_utc_time)}\n                    </Typography>\n                </TableCell>\n                <TableCell>\n                    <InfoIcon onClick={() => setOpenMetaDialog(true)} style={{color: theme.palette.info.main}}/>\n                    {openMetaDialog && \n                        <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openMetaDialog}\n                            onClose={()=>{setOpenMetaDialog(false);}} \n                            innerDialog={<DetailedCallbackTable onClose={()=>{setOpenMetaDialog(false);}} callback_id={props.id} />}\n                        />\n                    }\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {CallbackSearchTable} from './CallbackSearchTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n}\n`;\nconst fetchLimit = 50;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      ...callbackData\n    }\n}\n`;\nconst hostSearch = gql`\n${callbackFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst domainSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $domain: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst descriptionSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $description: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst ipSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $ip: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabCallbacksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Callbacks\"} iconComponent={<PhoneCallbackIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCallbacksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const searchFieldOptions = [\"User\", \"Domain\", \"Host\", \"Description\", \"IP\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        \n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        props.changeSearchParam(\"search\", adjustedSearch);\n        switch(adjustedSearchField){\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Domain\":\n                props.onDomainSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Description\":\n                props.onDescriptionSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"IP\":\n                props.onIPSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            console.log(queryParams.get(\"searchField\"));\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User\");\n                props.onChangeSearchField(\"User\");\n                props.changeSearchParam(\"searchField\", \"User\");\n            }\n            submitSearch(null, adjustedSearch,  adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Callbacks by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCallbacksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        switch(field){\n            case \"User\":\n                onUserSearch({search, offset: 0});\n                break;\n            case \"Domain\":\n                onDomainSearch({search, offset: 0});\n                break;\n            case \"Description\":\n                onDescriptionSearch({search, offset: 0});\n                break;\n            case \"Host\":\n                onHostSearch({search, offset: 0});\n                break;\n            case \"IP\":\n                onIPSearch({search, offset: 0});\n                break;\n            default:\n                break;\n        }\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.callback_aggregate.aggregate.count);\n        setCallbackData(data.callback);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getDomainSearch] = useLazyQuery(domainSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getDescriptionSearch] = useLazyQuery(descriptionSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getIPSearch] = useLazyQuery(ipSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            user: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDomainSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDomainSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            domain: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDescriptionSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDescriptionSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            description: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onIPSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getIPSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            ip: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: 0});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n                <SearchTabCallbacksSearchPanel onChangeSearchField={onChangeSearchField} onUserSearch={onUserSearch} onIPSearch={onIPSearch} value={props.value} index={props.index}\n                    onDomainSearch={onDomainSearch} onHostSearch={onHostSearch} onDescriptionSearch={onDescriptionSearch} changeSearchParam={props.changeSearchParam}/>\n                <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                    {callbackData.length > 0 ? (\n                        <CallbackSearchTable callbacks={callbackData} />) : (\n                        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                    )}\n                </div>\n                <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingTop: \"5px\", paddingBottom: \"5px\"}}>\n                    <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                            siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                        <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n                </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function ArtifactTable(props){\n    const [artifacts, setArtifacts] = React.useState([]);\n    useEffect( () => {\n        setArtifacts([...props.artifacts]);\n    }, [props.artifacts]);\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{}}>\n            <Table stickyHeader size=\"small\" style={{}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Type</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callback</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {artifacts.map( (op) => (\n                    <ArtifactTableRow\n                        key={\"cred\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction ArtifactTableRow(props){\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.artifact.name}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.task.callback_id}>\n                            {props.task.callback_id}\n                    </Link>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.host}</Typography>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.artifact_instance_text}</Typography>\n                </TableCell>\n              \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {ArtifactTable} from './ArtifactTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst artifactFragment = gql`\nfragment artifactData on taskartifact{\n    id\n    artifact_instance_text\n    host\n    id\n    timestamp\n    artifact {\n        name\n        description\n    }\n    task {\n        id\n        callback_id\n        command {\n            cmd\n        }\n    }\n}\n`;\nconst fetchLimit = 100;\nconst artifactSearch = gql`\n${artifactFragment}\nquery artifactQuery($operation_id: Int!, $artifact: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      ...artifactData\n    }\n}\n`;\nconst hostSearch = gql`\n${artifactFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst commandSearch = gql`\n${artifactFragment}\nquery commandQuery($operation_id: Int!, $command: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst typeSearch = gql`\n${artifactFragment}\nquery typeQuery($operation_id: Int!, $type: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst taskSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $task_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst callbackSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $callback_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\n\nexport function SearchTabArtifactsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Artifacts\"} iconComponent={<FingerprintIcon />} {...props}/>\n    )\n}\n\nconst SearchTabArtifactsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const searchFieldOptions = [\"Artifact\", \"Command\", \"Host\", \"Type\", \"Task\", \"Callback\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        \n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        props.changeSearchParam(\"search\", adjustedSearch);\n        switch(adjustedSearchField){\n            case \"Artifact\":\n                props.onArtifactSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Command\":\n                props.onCommandSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.onTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Task\":\n                props.onTaskSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Callback\":\n                props.onCallbackSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Artifact\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Artifact\");\n                props.onChangeSearchField(\"Artifact\");\n                props.changeSearchParam(\"searchField\", \"Artifact\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Artifacts by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabArtifactsPanel = (props) =>{\n    const [artifactData, setArtifactData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        switch(field){\n            case \"Artifact\":\n                onArtifactSearch({search, offset: 0});\n                break;\n            case \"Command\":\n                onCommandSearch({search, offset: 0});\n                break;\n            case \"Type\":\n                onTypeSearch({search, offset: 0});\n                break;\n            case \"Host\":\n                onHostSearch({search, offset: 0});\n                break;\n            case \"Task\":\n                onTaskSearch({search, offset: 0});\n                break;\n            case \"Callback\":\n                onCallbackSearch({search, offset: 0});\n                break;\n            default:\n                break;\n        }\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.taskartifact_aggregate.aggregate.count);\n        setArtifactData(data.taskartifact);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getArtifactSearch] = useLazyQuery(artifactSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommandSearch] = useLazyQuery(commandSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getTypeSearch] = useLazyQuery(typeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getTaskSearch] = useLazyQuery(taskSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCallbackSearch] = useLazyQuery(callbackSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onArtifactSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getArtifactSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            artifact: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onCommandSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommandSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            command: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            type: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTaskSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a task number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getTaskSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            task_id: parseInt(search),\n        }})\n    }\n    const onCallbackSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a callback number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCallbackSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            callback_id: search,\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: 0});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: 0});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: 0});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n                <SearchTabArtifactsSearchPanel onChangeSearchField={onChangeSearchField} onArtifactSearch={onArtifactSearch} onTaskSearch={onTaskSearch} value={props.value} index={props.index}\n                        onCommandSearch={onCommandSearch} onHostSearch={onHostSearch} onTypeSearch={onTypeSearch} onCallbackSearch={onCallbackSearch} changeSearchParam={props.changeSearchParam}/>\n         \n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {artifactData.length > 0 ? (\n                    <ArtifactTable artifacts={artifactData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingTop: \"5px\", paddingBottom: \"10px\"}}>\n                <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n                \n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst stopSocks = gql`\nmutation StopSocksMutation($callback_id: Int!){\n    stop_socks(callback_id: $callback_id){\n        status\n        error\n    }\n}\n`;\n\nexport function SocksSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, port: null}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Stop</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >ID</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(stopSocks, {\n        onCompleted: (data) => {\n            snackActions.success(\"Stopped Socks on that Port\");\n            props.onEditDeleted({id: props.id});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={\"Stop Socks\"}/>\n                \n                <TableCell>{props.port ? (\n                    <Tooltip title=\"Stop Socks Port on Mythic Server\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                ) : ( null )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, { useEffect } from 'react';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {SocksSearchTable} from './SocksSearchTable';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n    port\n}\n`;\nconst fetchLimit = 20;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabSocksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"SOCKS\"} iconComponent={<FontAwesomeIcon icon={faSocks} size=\"lg\" />} {...props}/>\n    )\n}\n\nexport const SearchTabSocksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const me = useReactiveVar(meState);\n    const [onSocksSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.callback_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Socks Running\");\n            }\n            setTotalCount(data.callback_aggregate.aggregate.count);\n            setCallbackData(data.callback);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for socks\");\n            console.log(data);\n        }\n    });\n    useEffect(() => {\n        if(props.value === props.index){\n            onSocksSearch({variables: {offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }\n    }, [props.value, props.index])\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            onSocksSearch({variables: { offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }else{\n            onSocksSearch({variables: { offset: (value - 1) * fetchLimit, operation_id: me.user.current_operation_id, fetchLimit}});        \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {callbackData.length > 0 ? (\n                    <SocksSearchTable callbacks={callbackData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {SearchTabTasksLabel, SearchTabTasksPanel} from './SearchTabTasks';\nimport {SearchTabFilesLabel, SearchTabFilesPanel} from './SearchTabFiles';\nimport {SearchTabCredentialsLabel, SearchTabCredentialsPanel} from './SearchTabCredentials';\nimport {SearchTabKeylogsLabel, SearchTabKeylogsPanel} from './SearchTabKeylog';\nimport {SearchTabTokensLabel, SearchTabTokensPanel} from './SearchTabTokens';\nimport {SearchTabCallbacksLabel, SearchTabCallbacksPanel} from './SearchTabCallbacks';\nimport {SearchTabArtifactsLabel, SearchTabArtifactsPanel} from './SearchTabArtifacts';\nimport {SearchTabSocksLabel, SearchTabSocksPanel} from './SearchTabSocks';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nexport function Search(props){\n  const classes = useStyles();\n  const tabTypes = [\"callbacks\", \"tasks\", \"files\", \"credentials\", \"keylogs\", \"artifacts\", \"tokens\", \"socks\"];\n  var params = new URLSearchParams(window.location.search);\n  var valueString = params.get(\"tab\");\n  var valueIndex = tabTypes.findIndex(t => t === valueString);\n  var value = valueIndex === -1 ? 0 : valueIndex;\n\n  const handleChange = (event, newValue) => {\n      params.set(\"tab\", tabTypes[newValue]);\n      var newRelativePathQuery = window.location.pathname + \"?\" + params.toString();\n      props.history.push(newRelativePathQuery);\n  };\n\nconst changeSearchParam = (name, value) => {\n  params.set(name, value);\n  var newRelativePathQuery = window.location.pathname + \"?\" + params.toString();\n  props.history.push(newRelativePathQuery);\n}\nreturn (\n  <div className={classes.root} style={{  height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n      <AppBar position=\"static\" color=\"default\">\n        <Tabs \n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n        >\n        {\n            tabTypes.map( (tab, index) => {\n              switch (tab){\n                case \"tasks\":\n                  return <SearchTabTasksLabel key={\"taskstab\"} />;\n                case \"files\":\n                  return <SearchTabFilesLabel key={\"filestab\"} />;\n                case \"credentials\":\n                  return <SearchTabCredentialsLabel key={\"credentialstab\"} />;\n                case \"keylogs\":\n                  return <SearchTabKeylogsLabel key={\"keylogstab\"} />;\n                case \"tokens\":\n                  return <SearchTabTokensLabel key={\"tokenstab\"} />;\n                case \"callbacks\":\n                  return <SearchTabCallbacksLabel key={\"callbackstab\"} />;\n                case \"artifacts\":\n                  return <SearchTabArtifactsLabel key={\"artifactstab\"} />;\n                case \"socks\":\n                  return <SearchTabSocksLabel key={\"sockstab\"} />;\n                default:\n                  return (null);\n              }\n            })\n        }\n        </Tabs>\n      </AppBar>\n      {\n        tabTypes.map( (tab, index) => {\n          switch(tab){\n              case \"tasks\":\n                return <SearchTabTasksPanel key={\"taskspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"callbacks\":\n                return <SearchTabCallbacksPanel key={\"callbackspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"files\":\n                return <SearchTabFilesPanel key={\"filespanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"credentials\":\n                return <SearchTabCredentialsPanel key={\"credentialspanel\"} index={index} value={value} changeSearchParam={changeSearchParam}/>\n              case \"keylogs\":\n                return <SearchTabKeylogsPanel key={\"keylogspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"tokens\":\n                return <SearchTabTokensPanel key={\"tokenspanel\"} index={index} value={value}  changeSearchParam={changeSearchParam} />\n              case \"artifacts\":\n                return <SearchTabArtifactsPanel key={\"artifactspanel\"} index={index} value={value}  changeSearchParam={changeSearchParam} />\n              case \"socks\":\n                return <SearchTabSocksPanel key={\"sockspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              default:\n                return (null);\n          }\n        })\n      }\n  </div>\n)\n} \n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { Link } from 'react-router-dom';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {snackActions} from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst SUB_Event_Logs = gql`\nsubscription MySubscription($operation_id: Int!) {\n  operationeventlog_aggregate(where: {deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}, operation_id: {_eq: $operation_id}}) {\n    aggregate{\n        count\n    }\n  }\n}\n `;\n \n const useStyles = makeStyles((theme) => ({\n    tooltip: {\n      backgroundColor: theme.palette.background.contrast,\n      color: theme.palette.text.contrast,\n      boxShadow: theme.shadows[1],\n      fontSize: 13\n    },\n    arrow: {\n      color: theme.palette.background.contrast,\n    }\n  }));\nexport function TopAppBarNotifications(props) {\n    const me = useReactiveVar(meState);\n    const classes = useStyles();\n  const { loading, error, data } = useSubscription(SUB_Event_Logs, {\n      variables: {operation_id: me?.user?.current_operation_id || 0},\n    onError: data => {\n        snackActions.error(\"Mythic encountered an error getting event log messages: \" + data.toString());\n        console.error(data);\n    }\n  });\n\n    return (    \n        <IconButton color=\"inherit\" component={Link} to='/new/EventFeed' style={{float: \"right\"}}>\n            <Tooltip title=\"Event Feed\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n            { \n                loading ? (\n                    <Badge color=\"secondary\" badgeContent={0}>\n                        <CircularProgress size={20} thickness={4} />\n                    </Badge>\n                ) : \n                \n                (\n                    error ? (\n                        <Badge color=\"secondary\" badgeContent={0}>\n                            <ErrorIcon />\n                        </Badge>\n                    ) : (\n                        <Badge badgeContent={data.operationeventlog_aggregate.aggregate.count} color=\"error\">\n                            <MailIcon />\n                        </Badge>\n                    )\n                )\n                \n            }\n            </Tooltip>\n        </IconButton>\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {snackActions} from './utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription EventFeedNotificationSubscription($fromNow: timestamp!, $operation_id: Int!) {\n  operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    operator {\n        username\n    }\n    message\n    level\n    resolved\n    source\n  }\n}\n `;\n\nexport function EventFeedNotifications(props) {\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n\n    const { loading, error, data } = useSubscription(subscribe_payloads, {\n        variables: {fromNow: fromNow.current, operation_id: me?.user?.current_operation_id || 0}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get event notifications\");\n        }\n    });\n\n    useEffect( () => {\n        //console.log(data, loading, error, fromNow.current);\n        if(!loading && !error && data && data.operationeventlog.length > 0){\n            if(data.operationeventlog[0].source === \"debug\"){\n                return;\n            }\n            if(data.operationeventlog[0].resolved){\n                return;\n            }\n            if(data.operationeventlog[0].operator ){\n                const message = data.operationeventlog[0].operator.username + \":\" + data.operationeventlog[0].message;\n                snackActions.toast(message, data.operationeventlog[0].level, { autoHideDuration: 2000});\n            }else if(!data.operationeventlog[0].operator){\n                snackActions.toast(data.operationeventlog[0].message, data.operationeventlog[0].level, {autoHideDuration: 3000});\n            }\n        }else if(error){\n            console.error(error);\n            snackActions.warning(\"Mythic encountered an error getting operational event stream\", {autoHideDuration: 2000});\n        }\n    }, [loading, data, error, me.user]);\n    return (    \n       null\n    );\n}\n\n","var _image;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMythicRedSmall(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"80px\",\n    height: \"66px\",\n    viewBox: \"0 0 80 66\",\n    enableBackground: \"new 0 0 80 66\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _image || (_image = /*#__PURE__*/React.createElement(\"image\", {\n    id: \"image0\",\n    width: 80,\n    height: 66,\n    x: 0,\n    y: 0,\n    href: \"data:image/png;base64,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\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMythicRedSmall);\nexport default __webpack_public_path__ + \"static/media/mythic_red_small.793b41cc.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Menu from '@material-ui/core/Menu';\nimport { Link } from 'react-router-dom';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState, menuOpen, FailedRefresh } from '../cache';\nimport Switch from '@material-ui/core/Switch';\nimport { TopAppBarNotifications } from './TopAppBarNotifications';\nimport { EventFeedNotifications } from './EventFeedNotifications';\nimport {Redirect} from 'react-router-dom';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport HelpIcon from '@material-ui/icons/Help';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport {ReactComponent as ReactLogo} from './mythic_red_small.svg';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport TableChartIcon from '@material-ui/icons/TableChart';\nimport PostAddIcon from '@material-ui/icons/PostAdd';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Typography } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport HeadsetIcon from '@material-ui/icons/Headset';\nimport CodeIcon from '@material-ui/icons/Code';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBiohazard, faFlagCheckered} from '@fortawesome/free-solid-svg-icons';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\nimport {faCamera} from '@fortawesome/free-solid-svg-icons';\nimport {mythicVersion, mythicUIVersion} from '../index';\nimport {MythicStyledTooltip} from '../components/MythicComponents/MythicStyledTooltip';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\n\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  appBar: {\n    width: \"100%\",\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    maxWidth: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  mythicElement: {},\n}));\n\nexport function TopAppBar(props) {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const settingsRef = React.useRef(null);\n  const documentationRef = React.useRef(null);\n  const [anchorEl, setAnchorEl] = React.useState(false);\n  const [documentationAnchorEl, setDocumentationAnchorEl] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const isOpen = useReactiveVar(menuOpen);\n  const [openGlobal, setOpenGlobal] = React.useState(false);\n  const [openCreate, setOpenCreate] = React.useState(false);\n  const [openOperations, setOpenOperations] = React.useState(false);\n  const [openData, setOpenData] = React.useState(false);\n  const handleDrawerOpen = () => {\n    menuOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    menuOpen(false);\n  };\n\n  const handleMenu = (event) => {\n    setAnchorEl(true);\n  };\n\n  const handleClose = (evt) => {\n    setAnchorEl(false);\n  };\n  const handleDocumentationMenu = (event) => {\n    setDocumentationAnchorEl(true);\n  };\n  const handleDocumentationClose = (evt) => {\n    setDocumentationAnchorEl(false);\n  };\n\n  const handleToggleGlobal = () => {\n    setOpenGlobal(!openGlobal);\n  }\n  const handleToggleCreate = () => {\n    setOpenCreate(!openCreate);\n  }\n  const handleToggleOperations = () => {\n    setOpenOperations(!openOperations);\n  }\n  const handleToggleData = () => {\n    setOpenData(!openData);\n  }\n  const handleLogout = () => {\n    menuOpen(false);\n    console.log(\"clicked logout, calling FailedRefresh\");\n    FailedRefresh();\n  }\n\n  return (\n    <React.Fragment >\n\n      {me?.user?.current_operation_id ? (<EventFeedNotifications />) : (null) }\n      <AppBar className={clsx(classes.appBar, {[classes.appBarShift]: isOpen,})}>\n        \n        { me?.loggedIn ? (\n        <Toolbar variant=\"dense\" >\n            <IconButton edge=\"start\" className={clsx(classes.menuButton, isOpen && classes.hide)} color=\"inherit\" aria-label=\"menu\" onClick={handleDrawerOpen}>\n                <MenuIcon />\n            </IconButton>\n            <div style={{width: \"100%\"}}>\n                <MythicStyledTooltip title=\"C2 Profiles and Payload Types\">\n                  <IconButton component={Link} to='/new/payloadtypes' color=\"inherit\">\n                    <HeadsetIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Payloads\">\n                    <IconButton component={Link} to='/new/payloads' color=\"inherit\">\n                      <FontAwesomeIcon icon={faBiohazard} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Search Operation\">\n                  <IconButton component={Link} to='/new/search' color=\"inherit\">\n                    <SearchIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Files\">\n                  <IconButton component={Link} to='/new/search?searchField=Filename&tab=files&location=Downloads' color=\"inherit\">\n                    <AttachmentIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Artifacts\">\n                  <IconButton component={Link} to='/new/search?searchField=Artifact&tab=artifacts' color=\"inherit\">\n                    <FingerprintIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"SOCKS\">\n                  <IconButton component={Link} to='/new/search?tab=socks' color=\"inherit\">\n                      <FontAwesomeIcon icon={faSocks} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Screenshots\" arrow >\n                  <IconButton component={Link} to='/new/search?searchField=Filename&tab=files&location=Screenshots' color=\"inherit\">\n                      <FontAwesomeIcon icon={faCamera} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Credentials\" arrow >\n                  <IconButton component={Link} to='/new/search?searchField=Account&tab=credentials' color=\"inherit\">\n                      <VpnKeyIcon className=\"mythicElement\" />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Active Callbacks\">\n                  <IconButton component={Link} to='/new/callbacks' color=\"inherit\">\n                    <PhoneCallbackIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Reporting\" >\n                  <IconButton component={Link} to='/new/reporting' color=\"inherit\">\n                      <FontAwesomeIcon icon={faFlagCheckered} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"MITRE ATT&CK\" >\n                  <IconButton component={Link} to='/new/mitre' color=\"inherit\">\n                    <TableChartIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <Button style={{display: \"inline-flex\", alignItems: \"center\", paddingRight: \"10px\", color: \"white\"}} component={Link} to=\"/new/operations\">\n                    <Typography >\n                        {me?.user?.current_operation || \"No Operation Set\"}\n                    </Typography>\n                </Button>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={settingsRef}\n                    anchorEl={()=>settingsRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={anchorEl}\n                    onClose={handleClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} to=\"/new/settings\" onClick={handleClose} name=\"settings\">User Management</MenuItem>\n                    <MenuItem component={Link} to=\"/new/login\" onClick={handleLogout}>Logout</MenuItem>\n                </Menu>\n                <div style={{display: \"inline-flex\", justifyContent: \"flex-end\", float: \"right\"}}>\n                <IconButton\n                    aria-label=\"account of current user\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleMenu}\n                    ref={settingsRef}\n                    color=\"inherit\"\n                    style={{float: \"right\"}}\n                >\n                  <MythicStyledTooltip title=\"Settings or Logout\">\n                    <AccountCircle />\n                  </MythicStyledTooltip>\n                </IconButton>\n                <IconButton\n                    aria-label=\"documentation links\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleDocumentationMenu}\n                    ref={documentationRef}\n                    color=\"inherit\"\n                    style={{float:\"right\"}}\n                >\n                  <MythicStyledTooltip title=\"Help Documentation\">\n                    <HelpIcon />  \n                  </MythicStyledTooltip>\n                </IconButton>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={documentationRef}\n                    anchorEl={()=>documentationRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={documentationAnchorEl}\n                    onClose={handleDocumentationClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/agents\" onClick={handleDocumentationClose}>Agent Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/wrappers\" onClick={handleDocumentationClose}>Wrapper Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/c2-profiles\" onClick={handleDocumentationClose}>C2 Profile Documentation</MenuItem>\n                    <MenuItem component={Link} to={{pathname: \"https://docs.mythic-c2.net\"}} target=\"_blank\" onClick={handleDocumentationClose}>Mythic Documentation</MenuItem>\n                </Menu>\n                <TopAppBarNotifications />\n                { me?.user?.username ? \n                  <Typography style={{display: \"flex\", alignItems: \"center\", paddingRight: \"10px\"}} >\n                    {me?.user?.username }\n                  </Typography> : (\n                  <Redirect to='/new/login'/>\n                )}\n                </div>\n            </div>\n        </Toolbar>\n          ) : null\n        } \n      </AppBar>\n      <Drawer\n            className={classes.drawer}\n            anchor=\"left\"\n            open={isOpen}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            onEscapeKeyDown={handleDrawerClose}\n          >\n        <div className={classes.drawerHeader} role=\"presentation\">\n          <ReactLogo style={{width: \"90%\"}}/>\n          v{mythicVersion}\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon className=\"mythicElement\"/> : <ChevronRightIcon className=\"mythicElement\"/>}\n          </IconButton>\n        </div>\n        <Divider />\n        <List\n        subheader={\n          <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n            Home\n          </ListSubheader>\n        }>\n            <ListItem button component={Link} to='/new' key={\"home\"} onClick={handleDrawerClose}>\n              <ListItemIcon ><HomeIcon className=\"mythicElement\" /></ListItemIcon>\n              <ListItemText primary={\"Home\"} />\n            </ListItem>\n        </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Global Configurations\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleGlobal}>\n                <ListItemIcon><LayersIcon /></ListItemIcon>\n                <ListItemText>Services</ListItemText>\n                {openGlobal ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openGlobal} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                  <ListItem button className={classes.nested} component={Link} to='/new/payloadtypes' key={\"payloadtypes\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><InboxIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"Payload Types\"} />\n                  </ListItem>\n                  <ListItem button className={classes.nested} component={Link} to='/new/c2profiles' key={\"c2profiles\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><WifiIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"C2 Profiles\"} />\n                  </ListItem>\n                </List>\n              </Collapse>\n              <ListItem button onClick={handleToggleCreate}>\n                <ListItemIcon><PostAddIcon /></ListItemIcon>\n                <ListItemText>Create</ListItemText>\n                {openCreate ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openCreate} unmountOnExit>\n                  <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createpayload' key={\"createpayload\"} onClick={handleDrawerClose} state={{from: 'TopAppBar'}}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Payload\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createwrapper' key={\"createwrapper\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Wrapped Payload\"} />\n                    </ListItem>\n                  </List>\n                </Collapse>\n              <ListItem button onClick={handleToggleOperations}>\n                <ListItemIcon><SupervisorAccountIcon /></ListItemIcon>\n                <ListItemText>Operations</ListItemText>\n                {openOperations ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openOperations} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/operations' key={\"modifyoperations\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><EditIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Modify Operations\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/browserscripts' key={\"browserscripts\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><CodeIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"BrowserScripts\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n            </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Operational Views\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleData}>\n                <ListItemIcon><BarChartIcon /></ListItemIcon>\n                <ListItemText>Operational Data</ListItemText>\n                {openData ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openData} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/payloads' key={\"payloads\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><FontAwesomeIcon icon={faBiohazard} size=\"lg\"/></ListItemIcon>\n                      <ListItemText primary={\"Payloads\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/search' key={\"search\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><SearchIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Search\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n                <ListItem button component={Link} to='/new/callbacks' key={\"callbacks\"} onClick={handleDrawerClose}>\n                  <ListItemIcon><PhoneCallbackIcon className=\"mythicElement\"/></ListItemIcon>\n                  <ListItemText primary={\"Active Callbacks\"} />\n                </ListItem>\n            </List>\n        <ListItem>\n        <Switch\n            checked={props.theme === 'dark'}\n            onChange={props.toggleTheme}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'primary checkbox' }}\n            name=\"darkMode\"\n          />\n        <div style={{display: \"inline-block\"}}> Enable Dark Mode </div>\n        </ListItem>\n        <ListItem>\n          UI Version: {mythicUIVersion}\n        </ListItem>\n      </Drawer>\n    </React.Fragment>\n  );\n}\n\n","import { useEffect, useState } from 'react';\nexport const useDarkMode = () => {\n    const [theme, setTheme] = useState('light');\n    const [mountedComponent, setMountedComponent] = useState(false)\n    const setMode = mode => {\n        window.localStorage.setItem('theme', mode)\n        setTheme(mode)\n    };\n\n    const themeToggler = () => {\n        theme === 'light' ? setMode('dark') : setMode('light')\n    };\n\n    useEffect(() => {\n        const localTheme = window.localStorage.getItem('theme');\n        localTheme ? setTheme(localTheme) : setMode('light')\n        setMountedComponent(true)\n    }, []);\n\n    return [theme, themeToggler, mountedComponent]\n};\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskArtifactsTable(props){\n   const [artifacts, setArtifacts] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.taskartifacts];\n    }, []);\n    condensed.sort((a,b) => (a.task_id > b.task_id) ? 1 : ((b.task_id > a.task_id) ? -1 : 0));\n    setArtifacts(condensed);\n   }, [props.tasks]);\n   if(artifacts.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Artifact Tasks\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task ID</TableCell>\n                        <TableCell>Artifact Type</TableCell>\n                        <TableCell>Host</TableCell>\n                        <TableCell>Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {artifacts.map( (artifact) => (\n                    <TableRow key={\"artifact\" + artifact.id}>\n                      <TableCell>{artifact.task_id}</TableCell>\n                      <TableCell>{artifact.artifact.name}</TableCell>\n                      <TableCell>{artifact.host}</TableCell>\n                      <TableCell>{artifact.artifact_instance_text}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskMITREATTACKTable(props){\n   const [attacks, setAttacks] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      \n      const newAdds = tsk.attacktasks.reduce( (old, attck) => {\n        if(prev.find(element => element.attack.t_num === attck.attack.t_num)){\n          return [...old];\n        }else{\n          return [...old, attck];\n        }\n      }, []);\n      return [...prev, ...newAdds];\n    }, []);\n    condensed.sort((a,b) => (a.attack.t_num > b.attack.t_num) ? 1 : ((b.attack.t_num > a.attack.t_num) ? -1 : 0));\n    setAttacks(condensed);\n    \n   }, [props.tasks]);\n   if(attacks.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                MITRE ATT&amp;CK Mappings\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Technique ID</TableCell>\n                        <TableCell>Technique</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {attacks.map( (attack) => (\n                    <TableRow key={'attack' + attack.attack.id}>\n                      <TableCell>{attack.attack.t_num}</TableCell>\n                      <TableCell>{attack.attack.name}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Link from '@material-ui/core/Link';\n\n\nexport function TaskFilesTable(props){\n   const [files, setFiles] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.filemeta];\n    }, []);\n    setFiles(condensed);\n    condensed.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n   }, [props.tasks]);\n   if(files.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Files / Screenshots\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Filename</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Remote Path</TableCell>\n                        <TableCell>Comment</TableCell>\n                        <TableCell>Hashes</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {files.map( (file) => (\n                    <TableRow key={\"file\" + file.id}>\n                      <TableCell>\n                        {!file.deleted && file.complete ? (\n                          <Link href={window.origin + \"/api/v1.4/files/download/\" + file.agent_file_id} style={{textDecoration: \"underline\", color: \"inherit\"}}>{file.filename_text}</Link>\n                        ) : ( \n                          !file.complete ? (\n                            file.filename_text +  \" (\" + file.chunks_received + \"/\" + file.total_chunks + \")\"\n                          ) : (file.filename_text)\n                         )}\n                        </TableCell>\n                      <TableCell>\n                        {file.is_screenshot ? (\"Screenshot\") : (\n                          file.is_payload ? (\"Payload\") : (\n                            file.is_download_from_agent ? (\"Download\") : (\n                              \"Upload\"\n                            )\n                          )\n                        )}\n                      </TableCell>\n                      <TableCell>{file.full_remote_path_text === \"\" ? (\"\") : (file.host + \":\" + file.full_remote_path_text) }</TableCell>\n                      <TableCell>{file.comment}</TableCell>\n                      <TableCell>MD5:<br/>{file.md5}<br/>SHA1:<br/>{file.sha1}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskCredentialsTable(props){\n   const [credentials, setCredentials] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.credentials];\n    }, []);\n    setCredentials(condensed);\n   }, [props.tasks]);\n   if(credentials.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Credentials\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Realm</TableCell>\n                        <TableCell>Account</TableCell>\n                        <TableCell>Credentials</TableCell>\n                        <TableCell>Comment</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {credentials.map( (cred) => (\n                    <TableRow key={\"cred\" + cred.id}>\n                      <TableCell>{cred.task_id}</TableCell>\n                      <TableCell>{cred.type}</TableCell>\n                      <TableCell>{cred.realm}</TableCell>\n                      <TableCell>{cred.account}</TableCell>\n                      <TableCell>{cred.credential_text}</TableCell>\n                      <TableCell>{cred.comment}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport {TaskArtifactsTable} from './TaskArtifactsTable';\nimport {TaskMITREATTACKTable} from './TaskMITREATTACKTable';\nimport {TaskFilesTable} from './TaskFilesTable';\nimport {TaskCredentialsTable} from './TaskCredentialsTable';\n\nconst MetadataQuery = gql`\nquery taskMetadataQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}) {\n      credentials {\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n        task_id\n      }\n      filemeta {\n        agent_file_id\n        complete\n        deleted\n        filename_text\n        full_remote_path_text\n        host\n        id\n        comment\n        total_chunks\n        chunks_received\n        is_download_from_agent\n        is_payload\n        is_screenshot\n        md5\n        sha1\n        task {\n            comment\n            id\n        }\n      }\n      taskartifacts {\n        artifact_instance_text\n        host\n        task_id\n        artifact{\n            id\n            name\n        }\n        id\n      }\n      tokens {\n        TokenId\n        id\n        host\n      }\n      attacktasks(distinct_on: attack_id) {\n        attack {\n          name\n          os\n          id\n          t_num\n          tactic\n        }\n        id\n      }\n      id\n    }\n  }`;\nexport function TaskMetadataTable(props){\n   const [tasks, setTasks] = React.useState([]);\n\n   const [getMetadata] = useLazyQuery(MetadataQuery, {\n        onCompleted: data => {\n            setTasks(data.task);\n        },\n        onError: data => {\n            console.log(\"error!\", data)\n        }\n    });\n    useEffect( () => {\n        getMetadata({variables: {task_range: props.taskIDs } });\n    }, [props.taskIDs, getMetadata]);\n  return (\n    <div style={{marginTop: \"10px\", marginRight: \"5px\"}}>\n        <TaskArtifactsTable tasks={tasks}/>\n        <TaskMITREATTACKTable tasks={tasks}/>\n        <TaskFilesTable tasks={tasks}/>\n        <TaskCredentialsTable tasks={tasks}/>\n    </div>\n  );\n}\n","import React, {useState, useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function IncludeMoreTasksDialog(props) {\n    const [taskSelected, setTaskSelected] = useState(0);\n    const [taskOptions, setTaskOptions] = useState([]);\n    const [beforeCount, setBeforeCount] = useState(10);\n    const [afterCount, setAfterCount] = useState(10);\n    const [searchTerm, setSearchTerm] = useState(\"all\");\n    const [operator, setOperator] = useState(\"\");\n    const searchOptions = [\n        {\"type\": \"all\", \"text\": \"All Callbacks\"},\n        {\"type\": \"callback\", \"text\": \"This Callack\"},\n        {\"type\": \"operator\", \"text\": \"All callbacks but limited by operator\"}\n    ];\n    const inputRef = useRef(null); \n    const onRequestSubmit = () => {\n        props.submitFetchTasks({\n            taskSelected,\n            beforeCount: parseInt(beforeCount),\n            afterCount: parseInt(afterCount),\n            search: searchTerm === \"operator\" ? operator : searchTerm\n        });\n        props.onClose();\n    }\n    const handleChange = (event) => {\n        setSearchTerm(event.target.value);\n      };\n    const handleTaskChange = (event) => {\n        setTaskSelected(event.target.value);\n    };\n    useEffect( () => {\n        setTaskOptions(props.taskOptions);\n        if(props.taskOptions.length > 0){\n            setTaskSelected(props.taskOptions[0]);\n        }\n    }, [props.tasks, props.taskOptions])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Add More Tasks to View</DialogTitle>\n        <DialogContent dividers={true}>\n        <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>View More Tasks Around Task:</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={taskSelected}\n                    onChange={handleTaskChange}\n                    input={<Input />}\n                  >\n                    {taskOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"selectiontask:\" + opt}>{opt}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            <MythicTextField type=\"number\" value={beforeCount} onChange={(name, value, error)=>setBeforeCount(value)} name={\"Number of tasks before\"} />\n            <MythicTextField type=\"number\" value={afterCount} onChange={(name, value, error)=>setAfterCount(value)} name={\"Number of tasks after\"} />\n            <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>Search Type</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={searchTerm}\n                    onChange={handleChange}\n                    input={<Input />}\n                  >\n                    {searchOptions.map( (opt) => (\n                        <MenuItem value={opt.type} key={\"selectiontype:\" + opt.type}>{opt.text}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            {searchTerm === 'operator' ? (\n                <MythicTextField multiline={false} onChange={(name, value, error)=>{setOperator(value)}} value={operator} name={\"Operator Username\"}/>\n            ) : (null)}\n            \n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Fetch Tasks</Button>          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport  {useParams} from \"react-router-dom\";\nimport {TaskMetadataTable} from './MetadataTable';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {Button, Grid} from '@material-ui/core';\nimport {IncludeMoreTasksDialog} from './IncludeMoreTasksDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {copyStringToClipboard} from '../../utilities/Clipboard';\nimport Switch from '@material-ui/core/Switch';\nimport {useTheme} from '@material-ui/core/styles';\nconst taskInfoFragment = gql`\nfragment TaskData on task {\n    comment\n    callback_id\n    commentOperator{\n        username\n    }\n    completed\n    id\n    operator{\n        username\n    }\n    display_params\n    original_params\n    command_name\n    status\n    timestamp\n    command {\n        cmd\n        id\n    }\n    callback {\n        id\n        host\n        user\n        integrity_level\n        domain\n    }\n    responses_aggregate{\n        aggregate{\n            count\n        }\n    }\n    parent_task_id\n    opsec_pre_blocked\n    opsec_pre_bypassed\n    opsec_post_blocked\n    opsec_post_bypassed\n    tasks {\n        id\n    }\n    token {\n        id\n    }\n}\n`;\nconst tasksQuery = gql`\n${taskInfoFragment}\nquery tasksQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacks($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, order_by: {id: desc}, limit: $beforeCount) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossACallbackQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossACallbacks($callback_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksByOperatorQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacksByOperator($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!, $operator: String!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nexport function SingleTaskView(props){\n    const me = useReactiveVar(meState);\n    const {taskId} = useParams();\n    const [taskIDs, setTaskIDs] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [tasks, setTasks] = React.useState([]);\n    const [removing, setRemoving] = React.useState(false);\n    const [openIncludeMoreTasksDialog, setOpenIncludeMoreTasksDialog] = React.useState(false);\n    const theme = useTheme();\n    const mergeData = (taskData) => {\n        let allNewParents = taskData.filter( (task) => task.parent_task_id === null);\n        let allData = [];\n        let recent_callback = -1;\n        if(allNewParents.length === 0){\n            allNewParents = [...taskData];\n        }\n        const allParents = tasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\" && cur.parent_task_id === null){\n                if(prev.find( (element) => element.id === cur.id)){\n                    return [...prev];\n                }\n                return [...prev, {...cur, checked: false}];\n            }\n            return [...prev];\n        }, [...allNewParents]);\n        \n        allParents.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n        allParents.forEach( (tsk) => {\n            if(tsk.callback.id !== recent_callback){\n                allData.push({\"type\": \"callback\", ...tsk.callback, checked: false});\n            }\n            recent_callback = tsk.callback.id;\n            allData.push({\"type\": \"task\", ...tsk, checked: false});\n        });\n        setTasks(allData);\n        const allTaskIds = taskData.reduce( (prev, cur) => {\n            const subIds = cur.tasks.filter( (cur) => !prev.includes(cur.id)).map( (cur) => cur.id);\n            if(prev.includes(cur.id)){\n                return [...prev, ...subIds];\n            }else{\n                return [...prev, cur.id, ...subIds];\n            }\n        }, [...taskIDs]);\n        setTaskIDs(allTaskIds);\n    }\n    const [getTasksAcrossAllCallbacks] = useLazyQuery(getTasksAcrossAllCallbacksQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossACallback,] = useLazyQuery(getTasksAcrossACallbackQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossAllCallbacksByOperator] = useLazyQuery(getTasksAcrossAllCallbacksByOperatorQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasks] = useLazyQuery(tasksQuery, {\n     onCompleted: completedData => {\n        mergeData(completedData.task);\n     }\n    });\n    const setTaskSearchInfo = (callback_id) => {\n        const opts = tasks.reduce( (prev, cur) => {\n            if(cur.type === 'task' && cur.callback.id === callback_id){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskOptions(opts);\n        \n        setOpenIncludeMoreTasksDialog(true);\n    }\n    const toggleTaskToRemove = (event) => {\n        const updated = tasks.map( (task) => {\n            if(task.type === \"task\" && (\"task\" + task.id) === event.target.name){\n                return {...task, checked: event.target.checked};\n            }\n            return {...task};\n        });\n        setTasks(updated);\n    }\n    const removeTasksButton = () => {\n        removing ? setRemoving(false) : setRemoving(true);\n        const remainingTasks = tasks.filter( (task) => !task.checked);\n        setTasks(remainingTasks);\n        const remainingTaskIDs = remainingTasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\"){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskIDs(remainingTaskIDs);\n    }\n    const collapse_range = (all_nums) =>{\n        // takes in an array of the expanded numbers and collapses it down\n        all_nums.sort( (a,b) => (a-b));\n        // pulled from https://stackoverflow.com/a/2270987\n        let ranges = [], rstart, rend;\n        for (let i = 0; i < all_nums.length; i++) {\n          rstart = all_nums[i];\n          rend = rstart;\n          while (all_nums[i + 1] - all_nums[i] === 1) {\n            rend = all_nums[i + 1]; // increment the index if the numbers sequential\n            i++;\n          }\n          ranges.push(rstart === rend ? rstart+'' : rstart + '-' + rend);\n        }\n        return ranges.join(\",\");\n    }\n    const expand_range = (range) =>{\n        let numbers = [], ranges = range.split(\",\");\n        for(let i = 0; i < ranges.length; i++){\n            if(ranges[i].includes(\"-\")){\n                let split = ranges[i].split(\"-\");\n                split = split.map( (r) => parseInt(r) );\n                numbers.push( ...[...Array(split[1]-split[0]+1).keys()].map(x => x+split[0]))\n            }else{\n                numbers.push(parseInt(ranges[i]));\n            }\n        }\n        numbers.sort( (a,b) => a - b);\n        return numbers;\n    }\n    const getShareableLink = () => {\n        let ids = [...taskIDs];\n        const range = collapse_range(ids);\n        copyStringToClipboard(window.origin + \"/new/tasks/by_range?tasks=\" + range);\n        snackActions.success(\"Copied link to clipboard!\");\n    }\n    const submitIncludeMoreTasks = ({taskSelected, beforeCount, afterCount, search}) => {\n        snackActions.info(\"Searching for tasks...\");\n        switch(search){\n            case \"all\":\n                getTasksAcrossAllCallbacks({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount}});\n                break;\n            case \"callback\":\n                getTasksAcrossACallback({variables: {}});\n                break;\n            default:\n                getTasksAcrossAllCallbacksByOperator({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount, operator: search}});\n                break;\n        }\n    }\n    useEffect( () => {\n        if(window.location.pathname.includes(\"/new/tasks/by_range\")){\n            let params = new URLSearchParams(window.location.search);\n            if(params.has(\"tasks\")){\n                console.log(params.get(\"tasks\"));\n                let ids = expand_range(params.get(\"tasks\"));\n                getTasks({variables: {task_range: ids}});\n            }else{\n                snackActions.warning(\"URL Query missing '?tasks=' with a range of tasks\")\n            }\n        }else{\n            getTasks({variables: {task_range: [parseInt(taskId)]}});\n        }      \n    }, [getTasks, taskId]);\n  return (\n    <div style={{marginTop: \"10px\", maxHeight: \"calc(94vh)\", width:\"100%\", marginBottom: \"10px\" }}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Task View\n            </Typography>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.success.main}} \n                onClick={getShareableLink}>Get Shareable link</Button>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.warning.main}} \n                onClick={removeTasksButton}>Remove Tasks From View</Button>\n            <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                onClick={(evt) => {evt.stopPropagation(); snackActions.warning(\"Not implemented yet\");}}>Add Tags To All</Button>\n            \n        </Paper>\n        {tasks.map( (task) => (\n            task.type === \"task\" ? (\n                    <Grid container alignItems=\"stretch\" key={\"taskdisplay:\" + task.id} style={{marginRight: \"5px\"}}>\n                        <Grid item style={{display: \"inline-flex\", width: removing ? \"96%\" : \"100%\"}}>\n                            <TaskDisplay  task={task} command_id={task.command === null ? 0 : task.command.id} />\n                        </Grid>\n                        <Grid item  style={{display: \"inline-flex\"}}>\n                        {removing ? (\n                            <Switch\n                                checked={task.checked}\n                                onChange={toggleTaskToRemove}\n                                name={\"task\" + task.id}\n                                inputProps={{ 'aria-label': 'checkbox', 'color': theme.palette.error.main }}\n                        />\n                        ) : (null)}\n                        </Grid>\n                    </Grid>\n                    \n            ) : (\n                <Paper key={\"taskdisplayforcallback:\" + task.id} elevation={5} style={{ marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        {task.domain === \"\" ? (null) : (task.domain + \"\\\\\")}{task.user}{task.integrity_level > 2 ? (\"*\") : (null)}@{task.host} ({task.id})\n                    </Typography>\n                    <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.info.main}} \n                        onClick={() => {setTaskSearchInfo(task.id)}}>Include More Tasks</Button>                  \n                </Paper>\n            ))\n            \n            )\n        }\n        <MythicDialog fullWidth={true} maxWidth=\"md\" open={openIncludeMoreTasksDialog} \n            onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} \n            innerDialog={<IncludeMoreTasksDialog submitFetchTasks={submitIncludeMoreTasks} taskOptions={taskOptions} onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} />}\n        />\n        <TaskMetadataTable taskIDs={taskIDs} />\n    </div>\n  );\n}\n//\n","import { createGlobalStyle} from \"styled-components\"\nexport const GlobalStyles = createGlobalStyle`\nbody {\n    margin: 0\n}\nhtml, body, #root {\n    height: 100%;\n}\n.MuiAccordionDetails-root{\n\n    padding-bottom: 0;\n    padding-top: 0;\n}\n.MuiAccordionSummary-content.Mui-expanded{\n    margin: 0px 0px 0px 0px !important;\n    min-height: unset;\n}\n.MuiAccordionSummary-root.Mui-expanded{\n    min-height: unset;\n}\n// placeholder/helper text for input boxes\n.MuiFormLabel-root {\n    background: transparent;\n}\n.MuiTableCell-head {\n\n    font-weight: bold;\n}\n.MuiSelect-select.MuiSelect-select{\n    padding-left: 10px\n}\n.ReactVirtualized__Table__row {\n    &:hover,\n    &--hovered {\n        background-color: ${(props) => props.theme.tableHover} !important;\n        color: ${(props) => props.theme.palette.text.primary} !important;\n        \n    }\n}\n.menuEntry {\n  cursor: pointer;\n}\n\ntspan {\n  font-size: 15px;\n  stroke: none;\n}\n\n.ReactVirtualized__Table__headerTruncatedText {\n\n  }\n.ReactVirtualized__Table__headerColumn {\n\n    padding: 0;\n  }\n.MuiTab-root {\n    max-width: unset;\n}\n.MuiSpeedDialAction-staticTooltipLabel {\n    white-space: nowrap;\n    max-width: none;\n}\n.MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label{\n    background-color: transparent;\n}\n.MuiTreeItem-root.Mui-selected:hover > .MuiTreeItem-content .MuiTreeItem-label{\n    background-color: transparent;\n}\n.MuiTreeItem-root:hover > .MuiTreeItem-content .MuiTreeItem-label {\n    background-color: transparent;\n}\n.MuiAppBar-root{\n    z-index: 1\n}\n.ace-monokai .ace_invalid {\n    color: #F8F8F0;\n    background-color: #52524d;\n}\n`\n","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\n\nconst generateReportMutation = gql`\nmutation generateReportMutation($outputFormat: String!, $includeMITREPerTask: Boolean!, $includeMITREOverall: Boolean!, $excludedUsers: String!, $excludedHosts: String!, $excludedIDs: String!, $includeOutput: Boolean!){\n    generateReport(outputFormat: $outputFormat, includeMITREPerTask: $includeMITREPerTask, includeMITREOverall: $includeMITREOverall, excludedUsers: $excludedUsers, excludedHosts: $excludedHosts, excludedIDs: $excludedIDs, includeOutput: $includeOutput){\n        status\n        error\n    }\n}\n`;\nconst generatedReportSubscription = gql`\nsubscription generatedReportEventSubscription($fromNow: timestamp!, $operation_id: Int!){\n    operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}, source: {_eq: \"generated_report\"}}, order_by: {id: desc}) {\n        operator {\n            username\n        }\n        message\n        level\n      }\n}\n`;\nexport function ReportingTable(props){\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n    const [selectedOutputFormat, setSelectedOutputFormat] = React.useState(\"pdf\");\n    const outputOptions = [\"pdf\", \"latex\", \"json\"];\n    const [includeMITREPerTask, setIncludeMITREPerTask] = React.useState(false);\n    const [includeMITREOverview, setIncludeMITREOverview] = React.useState(false);\n    const [includeOutput, setIncludeOutput] = React.useState(false);\n    const [excludedCallbackHost, setExcludedCallbackHost] = React.useState(\"\");\n    const [excludedCallbackUser, setExcludedCallbackUser] = React.useState(\"\");\n    const [excludedCallbackID, setExcludedCallbackID] = React.useState(\"\");\n    const [generateReport] = useMutation(generateReportMutation, {\n        onCompleted: (data) => {\n            if(data.generateReport.status === \"success\"){\n                snackActions.info(\"Generating report...\");\n                snackActions.info(\"Final reports are always available via the 'Uploads' tab within 'Search'\");\n            }else{\n                snackActions.error(data.generateReport.error);\n            }\n        },\n        onError: (data) => {\n            snackActions.error(data);\n        }\n    });\n    const { data } = useSubscription(generatedReportSubscription, {\n        variables: {fromNow: fromNow.current, operation_id: me?.user?.current_operation_id || 0}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get notifications for generated payloads\");\n        }\n    });\n    const setOutputFormat = (evt) => {\n        setSelectedOutputFormat(evt.target.value);\n        if(evt.target.value !== \"json\"){\n            setIncludeOutput(false);\n        }\n    }\n    const changeExcludedCallbackUser = (name, value, error) => {\n        setExcludedCallbackUser(value);\n    }\n    const changeExcludedCallbackHost = (name, value, error) => {\n        setExcludedCallbackHost(value);\n    }\n    const changeExcludedCallbackID = (name, value, error) => {\n        setExcludedCallbackID(value);\n    }\n    const onGenerateReport = () => {\n        generateReport({variables: {\n            outputFormat: selectedOutputFormat,\n            includeMITREOverall: includeMITREOverview,\n            includeMITREPerTask,\n            includeOutput,\n            excludedUsers: excludedCallbackUser,\n            excludedHosts: excludedCallbackHost,\n            excludedIDs: excludedCallbackID\n        }})\n    }\n    useEffect( () => {\n        if(data?.operationeventlog?.length > 0){\n            const dataUUID = data.operationeventlog[0].message.split(\":\").pop().trim();\n            snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Generated Report\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + dataUUID} />});\n        }\n    }, [data])\n    return (\n        <React.Fragment>\n\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"25rem\"}}>Report Option</TableCell>\n                        <TableCell >Selected Values</TableCell> \n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Output Format</TableCell>\n                        <TableCell>\n                            <Select\n                              autoFocus\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedOutputFormat}\n                              label=\"Select an Output Format\"\n                              onChange={setOutputFormat}\n                            >\n                            {\n                                outputOptions.map((opt, i) => (\n                                    <MenuItem key={\"outputformat\" + i} value={opt}>{opt}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Include MITRE ATT&CK Coverage Per Task</TableCell>\n                        <TableCell>\n                            <Switch\n                                checked={includeMITREPerTask}\n                                onChange={evt => setIncludeMITREPerTask(!includeMITREPerTask)}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"active\"\n                            />\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Include MITRE ATT&CK Coverage Overview</TableCell>\n                        <TableCell>\n                            <Switch\n                                checked={includeMITREOverview}\n                                onChange={evt => setIncludeMITREOverview(!includeMITREOverview)}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"active\"\n                            />\n                        </TableCell>\n                    </TableRow>\n                    {\n                        selectedOutputFormat === \"json\" && \n                        <TableRow hover>\n                            <TableCell>Include Command Output</TableCell>\n                            <TableCell>\n                                <Switch\n                                    checked={includeOutput}\n                                    onChange={evt => setIncludeOutput(!includeOutput)}\n                                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                                    name=\"active\"\n                                />\n                            </TableCell>\n                        </TableRow>\n                    }\n                    <TableRow hover>\n                        <TableCell>Exclude Callbacks With Matching Values</TableCell>\n                        <TableCell>\n                                <Table>\n                                    <TableBody>\n                                        <TableRow>\n                                            <TableCell style={{width: \"10rem\"}}>Exclude Users</TableCell>\n                                            <TableCell>\n                                                <MythicTextField onChange={changeExcludedCallbackUser} value={excludedCallbackUser} name={\"Excluded Usernames\"}/>\n                                            </TableCell>\n                                        </TableRow>\n                                        <TableRow>\n                                            <TableCell>Exclude Hosts</TableCell>\n                                            <TableCell>\n                                                <MythicTextField onChange={changeExcludedCallbackHost} value={excludedCallbackHost} name={\"Excluded Hostnames\"}/>\n                                            </TableCell>\n                                        </TableRow>\n                                        <TableRow>\n                                            <TableCell>Exclude IDs</TableCell>\n                                            <TableCell>\n                                                <MythicTextField onChange={changeExcludedCallbackID} value={excludedCallbackID} name={\"Excluded Callback IDs\"}/>\n                                            </TableCell>\n                                        </TableRow>\n                                    </TableBody>\n                                    \n                                </Table>\n                        </TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <Button variant=\"contained\" style={{marginTop: \"10px\", backgroundColor: theme.palette.success.main, color: \"white\"}} onClick={onGenerateReport}>Generate</Button>\n    </React.Fragment>\n    )\n}\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {ReportingTable} from './ReportingTable';\n\n\nexport function Reporting() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Mythic Report Generation\n      </Typography>\n    </Paper> \n    <ReportingTable />\n  </div>\n  );\n}\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Button, Link} from '@material-ui/core/';\n\nexport function MitreMapDisplayDialog({entry, showCountGrouping, onClose}){\n    const [commands, setCommands] = React.useState([]);\n    const [tasks, setTasks] = React.useState([]);\n    React.useEffect( () => {\n      switch(showCountGrouping){\n        case \"\":\n          break;\n        case \"command\":\n          const groupedCommands = entry.commands.reduce( (prev, cur) => {\n            if(cur.payloadtype.ptype in prev){\n              prev[cur.payloadtype.ptype].push(cur.cmd);\n            }else{\n              prev[cur.payloadtype.ptype] = [cur.cmd];\n            }\n            return {...prev};\n          }, {});\n          setCommands(Object.entries(groupedCommands));\n          break;\n        case \"task\":\n          const groupedTasks = entry.tasks.reduce( ( prev, cur) => {\n            if(cur.callback.payload.payloadtype.ptype in prev){\n              prev[cur.callback.payload.payloadtype.ptype].push({\n                id: cur.id,\n                command: cur.command_name + \" \" + cur.display_params,\n                comment: cur.comment,\n                callback_id: cur.callback.id\n              });\n            }else{\n              prev[cur.callback.payload.payloadtype.ptype] = [{\n                id: cur.id,\n                command: cur.command_name + \" \" + cur.display_params,\n                comment: cur.comment,\n                callback_id: cur.callback.id\n              }];\n            }\n            return {...prev};\n          }, {});\n          setTasks(Object.entries(groupedTasks));\n          break;\n      }\n    }, [entry, showCountGrouping]);\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">{entry.name} - <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"https://attack.mitre.org/techniques/\" + entry.t_num.replace(\".\", \"/\")} >{entry.t_num}</Link></DialogTitle>\n          <DialogContent dividers={true}>\n            {showCountGrouping === \"command\" ? \n            (\n              <DetailedCommandMappingTables commands={commands} />\n            ) : \n            (\n              <DetailedTaskMappingTables tasks={tasks} />\n            )}\n           \n          </DialogContent>\n          <DialogActions>\n            <Button onClick={onClose} variant=\"contained\" color=\"secondary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\nfunction DetailedCommandMappingTables({commands}){\n  const me = useReactiveVar(meState);\n    const theme = useTheme();\n    return (\n      <React.Fragment>\n        {commands.map( c => (\n          <div key={\"agent\" + c[0]}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                {c[0]}\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Command</TableCell>\n                  <TableCell style={{width: \"5rem\"}}>Documentation</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {c[1].map( entry => (\n                  <TableRow hover key={\"command\" + entry}>\n                      <TableCell>{entry}</TableCell>\n                      <TableCell>\n                      <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                              href={\"/docs/agents/\" + c[0] + \"/commands/\" + entry}>Docs</Button>\n                      </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        ))}\n      </React.Fragment>\n    )\n}\n\nfunction DetailedTaskMappingTables({tasks}){\n  const me = useReactiveVar(meState);\n    const theme = useTheme();\n    return (\n      <React.Fragment>\n        {tasks.map( c => (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                {c[0]}\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n            <TableHead>\n                <TableRow>\n                  <TableCell style={{width: \"5rem\"}}>Callback</TableCell>\n                  <TableCell style={{width: \"5rem\"}}>Task</TableCell>\n                  <TableCell>Command</TableCell>\n                  <TableCell>Comment</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {c[1].map( entry => (\n                  <TableRow hover>\n                      <TableCell><a href={\"/new/callbacks/\" + entry.callback_id} target=\"_blank\">{entry.callback_id}</a></TableCell>\n                      <TableCell><a href={\"/new/task/\" + entry.id} target=\"_blank\">{entry.id}</a></TableCell>\n                      <TableCell>{entry.command}</TableCell>\n                      <TableCell>{entry.comment}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </React.Fragment>\n        ))}\n      </React.Fragment>\n    )\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Box } from '@material-ui/core';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MitreMapDisplayDialog } from './MitreMapDisplayDialog';\n\nexport function MitreGridRow({row, showCountGrouping}){\n  const [buttonColor, setButtonColor] = React.useState({});\n  const [openDisplay, setOpenDisplay] = React.useState(false);\n  React.useEffect( () => {\n    switch(showCountGrouping){\n      case \"\":\n        setButtonColor({});\n        break;\n      case \"command\":\n        if(row.commands.length > 0){\n          setButtonColor({color: \"white\", backgroundColor: \"rgb(188, 58, 36)\"});\n        }else{\n          setButtonColor({});\n        }\n        break;\n      case \"task\":\n        if(row.tasks.length > 0){\n          setButtonColor({color: \"white\", backgroundColor: \"rgb(188, 58, 36)\"});\n        }else{\n          setButtonColor({});\n        }\n    }\n  }, [row.commands, row.tasks, showCountGrouping])\n  return (\n    <div style={{display: \"flex\", flexDirection: \"row\", alignItems: \"center\"}}>\n      {row?.t_num?.includes(\".\") ? \n      (\n        <Box width={\"50px\"} height={\"1px\"} style={{border: \"1px dashed grey\"}} />\n      ) :  ( null )}\n      <Button style={{\n          width: \"100%\",\n          justifyContent: \"flex-start\",\n          ...buttonColor\n        }} \n        variant=\"outlined\"\n        onClick={() => setOpenDisplay(true)}\n        >\n          {row.name}\n      </Button>\n      {openDisplay ? (\n          <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDisplay} \n              onClose={()=>{setOpenDisplay(false);}} \n              innerDialog={<MitreMapDisplayDialog entry={row} showCountGrouping={showCountGrouping} onClose={()=>{setOpenDisplay(false);}} />}\n          />\n        ) : (null) }\n    </div>\n    \n  )\n}\n\n","import React from 'react';\nimport {MitreGridRow} from './MitreGridRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport { Box } from '@material-ui/core';\n\nexport function MitreGridColumn({column, showCountGrouping}){\n  const theme = useTheme();\n  const [groupCounts, setGroupCounts] = React.useState(0);\n  const [techniqueCounts, setTechniqueCounts] = React.useState(0);\n  React.useEffect( () => {\n    switch(showCountGrouping){\n      case \"\":\n        setTechniqueCounts(column?.rows?.length || 0);\n        setGroupCounts(0);\n        break;\n      case \"command\": \n        setGroupCounts(column.commands);\n        const updatedTechniqueCountsForCommands = column.rows.reduce( (prev, cur) => {\n          if(cur.commands.length > 0){return prev + 1}\n          return prev;\n        }, 0);\n        setTechniqueCounts(updatedTechniqueCountsForCommands);\n        break;\n      case \"task\":\n        setGroupCounts(column.tasks);\n        const updatedTechniqueCounts = column.rows.reduce( (prev, cur) => {\n          if(cur.tasks.length > 0){return prev + 1}\n          return prev;\n        }, 0);\n        setTechniqueCounts(updatedTechniqueCounts);\n        break;\n    }\n  }, [column.commands, column.rows, column.tasks, showCountGrouping])\n  return (\n    <div style={{display: \"flex\", flexDirection: \"column\", paddingRight: \"15px\",}}>\n      <Box height={\"100px\"} width={\"100%\"} style={{backgroundColor: theme.tableHover}}>\n        <h2 style={{margin: 0, textAlign: \"center\"}}><b>{column.tactic}</b></h2>\n        <p style={{textAlign: \"center\", margin: 0}}>{techniqueCounts} techniques</p>\n        { showCountGrouping === \"\" ? (null) : (\n          <p style={{textAlign: \"center\", margin: 0}}>{groupCounts} {showCountGrouping}s</p>\n        )}\n      </Box>\n      \n      <div style={{display: \"flex\", flexDirection: \"column\"}}>\n        {column.rows.map( (r, index) => (\n          <MitreGridRow row={r} key={\"row\"+ index} showCountGrouping={showCountGrouping}/>\n        ))}\n      </div>\n      \n    </div>\n  )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {useQuery, gql } from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst getPayloadTypes = gql`\nquery getAllPayloadTypes{\n  payloadtype(where: {wrapper: {_eq: false}}, order_by: {ptype: asc}) {\n    ptype\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    width: \"97%\"\n  },\n}));\nexport function SelectPayloadTypeDialog(props) {\n    const classes = useStyles();\n    const [payloadtypeOptions, setPayloadtypeOptions] = React.useState([]);\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const handleSubmit = () => {\n        if(selectedPayloadType === \"\"){\n          props.onClose();\n          return;\n        }\n        props.onSubmit(selectedPayloadType);\n        props.onClose();\n    }\n    const handleChange = (event) => {\n      setSelectedPayloadType(event.target.value);\n    }\n    const { loading, error } = useQuery(getPayloadTypes, {\n        onCompleted: data => {\n            const options = data.payloadtype.map( p => p.ptype);\n            if(options.length > 0){\n              setSelectedPayloadType(options[0]);\n            }\n            setPayloadtypeOptions(options);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >Select a Payload Type to Filter On</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                  <Select\n                    labelId=\"demo-dialog-select-label-profile\"\n                    id=\"demo-dialog-select\"\n                    \n                    value={selectedPayloadType}\n                    onChange={handleChange}\n                    style={{minWidth: \"30%\"}}\n                  >\n                    <MenuItem value=\"\">\n                      None\n                    </MenuItem>\n                    {payloadtypeOptions.map( (opt) => (\n                        <MenuItem value={opt} key={opt}>{opt}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: muiTheme.palette.success.main}}>\n            Select\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport {MitreGridColumn} from './MitreGridColumn';\nimport { Backdrop } from '@material-ui/core';\nimport {CircularProgress} from '@material-ui/core';\nimport { MythicDisplayTextDialog} from '../../MythicComponents/MythicDisplayTextDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { SelectPayloadTypeDialog } from './SelectPayloadTypeDialog';\n\n\nexport function MitreGrid({entries, onGetCommands, onGetTasks, onGetCommandsFiltered, onGetTasksFiltered}){\n    const theme = useTheme();\n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [showCountGrouping, setShowCountGrouping] = React.useState(\"\");\n    const [backdropOpen, setBackdropOpen] = React.useState(false);\n    const [openLicense, setOpenLicense] = React.useState(false);\n    const [openFilterTasks, setOpenFilterTasks] = React.useState(false);\n    const [openFilterCommands, setOpenFilterCommands] = React.useState(false);\n    const tactics = [\n        \"Reconnaissance\", \"Resource Development\", \"Initial Access\", \"Execution\", \"Persistence\", \"Privilege Escalation\", \"Defense Evasion\",\n        \"Credential Access\", \"Discovery\", \"Lateral Movement\", \"Collection\", \"Command And Control\", \"Exfiltration\", \"Impact\"\n    ]\n    const dropDownOptions = [\n        {\n            name: \"Fetch All Commands Mapped to MITRE\",\n            click: () => {\n                setBackdropOpen(true);\n                setShowCountGrouping(\"command\");\n                setDropdownOpen(false);\n                onGetCommands();\n            }\n        },\n        {\n            name: \"Fetch All Issued Tasks Mapped to MITRE\",\n            click: () => {\n                setShowCountGrouping(\"task\");\n                setDropdownOpen(false);\n                onGetTasks();\n            }\n        },\n        {\n            name: \"Fetch Command Mappings by Payload Type\",\n            click: () => {\n                setDropdownOpen(false);\n                setOpenFilterCommands(true);\n            }\n        },\n        {\n            name: \"Fetch Task Mappings by Payload Type\",\n            click: () => {\n                setDropdownOpen(false);\n                setOpenFilterTasks(true);\n                \n            }\n        },\n        {\n            name: \"Export Highlighted to ATT&CK Navigator\",\n            click: () => {\n                setDropdownOpen(false);\n                exportAttackNavigator();\n            }\n        },\n        {\n            name: \"View MITRE License\",\n            click: () => {\n                setOpenLicense(true);\n                setDropdownOpen(false);\n            }\n        }\n    ]\n    const mitreLicense = `The MITRE Corporation (MITRE) hereby grants you a non-exclusive, royalty-free license to use ATT&CK® for research, development, and commercial purposes. Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.\n    \n© 2021 The MITRE Corporation. This work is reproduced and distributed with the permission of The MITRE Corporation.`\n    const handleMenuItemClick = (event, index) => {\n        dropDownOptions[index].click(event);\n    }\n    React.useEffect( () => {\n        setBackdropOpen(false);\n    }, [entries]);\n    const exportAttackNavigator = () => {\n        let baseNavigator = {\n            \"name\": \"layer\",\n            \"versions\": {\n                \"attack\": \"10\",\n                \"navigator\": \"4.5.5\",\n                \"layer\": \"4.3\"\n            },\n            \"domain\": \"enterprise-attack\",\n            \"description\": \"\",\n            \"filters\": {\n                \"platforms\": [\n                    \"Linux\",\n                    \"macOS\",\n                    \"Windows\",\n                    \"Azure AD\",\n                    \"Office 365\",\n                    \"SaaS\",\n                    \"IaaS\",\n                    \"Google Workspace\",\n                    \"PRE\",\n                    \"Network\",\n                    \"Containers\"\n                ]\n            },\n            \"sorting\": 0,\n            \"layout\": {\n                \"layout\": \"side\",\n                \"aggregateFunction\": \"average\",\n                \"showID\": false,\n                \"showName\": true,\n                \"showAggregateScores\": false,\n                \"countUnscored\": false\n            },\n            \"hideDisabled\": false,\n            \"techniques\": [\n               \n            ],\n            \"gradient\": {\n                \"colors\": [\n                    \"#ff6666ff\",\n                    \"#ffe766ff\",\n                    \"#8ec843ff\"\n                ],\n                \"minValue\": 0,\n                \"maxValue\": 100\n            },\n            \"legendItems\": [],\n            \"metadata\": [],\n            \"links\": [],\n            \"showTacticRowBackground\": false,\n            \"tacticRowBackground\": \"#dddddd\",\n            \"selectTechniquesAcrossTactics\": true,\n            \"selectSubtechniquesWithParent\": false\n        };\n        for(const key in entries){\n            for(let i = 0; i < entries[key].rows.length; i++){\n              switch(showCountGrouping){\n                  case \"\":\n                        break;\n                  case \"command\":\n                    if(entries[key].rows[i].commands.length > 0){\n                        baseNavigator.techniques.push(\n                            {\n                                \"techniqueID\": entries[key].rows[i].t_num,\n                                \"tactic\": key.replace(\" \", \"-\").toLowerCase(),\n                                \"color\": \"#bc3b24\",\n                                \"enabled\": true,\n                                \"comment\": \"\",\n                                \"metadata\": [],\n                                \"links\": [],\n                                \"showSubtechniques\": true\n                            }\n                        )\n                    }\n                    break;\n                  case \"task\":\n                    if(entries[key].rows[i].tasks.length > 0){\n                        baseNavigator.techniques.push(\n                            {\n                                \"techniqueID\": entries[key].rows[i].t_num,\n                                \"tactic\": key.replace(\" \", \"-\").toLowerCase(),\n                                \"color\": \"#bc3b24\",\n                                \"enabled\": true,\n                                \"comment\": \"\",\n                                \"metadata\": [],\n                                \"links\": [],\n                                \"showSubtechniques\": true\n                            }\n                        )\n                    }\n                    break;\n              }\n            }\n        }\n        const dataBlob = new Blob([JSON.stringify(baseNavigator, null, 2)], {type: 'application/octet-stream'});\n        const ele = document.getElementById(\"download_config\");\n        if(ele !== null){\n        ele.href = URL.createObjectURL(dataBlob);\n        ele.download = \"attack_navigator.json\";\n        ele.click();\n        }else{\n        const element = document.createElement(\"a\");\n        element.id = \"download_config\";\n        element.href = URL.createObjectURL(dataBlob);\n        element.download = \"attack_navigator.json\";\n        document.body.appendChild(element);\n        element.click();\n        }\n    }\n    const onSubmitGetTasksFiltered = (payload_type) => {\n        setBackdropOpen(true);\n        setShowCountGrouping(\"task\");\n        onGetTasksFiltered(payload_type);\n    }\n    const onSubmitGetCommandsFiltered = (payload_type) => {\n        setBackdropOpen(true);\n        setShowCountGrouping(\"command\");\n        onGetCommandsFiltered(payload_type);\n    }\n    return (\n        <div style={{display: \"flex\", flexDirection: \"column\", width: \"100%\", height: \"100%\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    {\"MITRE ATT&CK Mappings\"}\n                </Typography>\n                <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginRight: \"10px\", marginTop:\"10px\", float: \"right\"}} color=\"primary\">\n                    <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                        aria-expanded={dropdownOpen ? 'true' : undefined}\n                        aria-haspopup=\"menu\"\n                        onClick={() => setDropdownOpen(!dropdownOpen)}>\n                            Actions <ArrowDropDownIcon />\n                    </Button>\n                </ButtonGroup>\n                <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 10}}>\n                {({ TransitionProps, placement }) => (\n                    <Grow\n                    {...TransitionProps}\n                    style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                    }}\n                    >\n                    <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={() => setDropdownOpen(false)}>\n                        <MenuList id=\"split-button-menu\">\n                            {dropDownOptions.map((option, index) => (\n                            <MenuItem\n                                key={option.name}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                            >\n                                {option.name}\n                            </MenuItem>\n                            ))}\n                        </MenuList>\n                        </ClickAwayListener>\n                    </Paper>\n                    </Grow>\n                )}\n                </Popper>\n            </Paper>  \n            <div style={{display: \"flex\", flexGrow: 1, overflow: \"auto\"}}>\n                <Backdrop open={backdropOpen} style={{zIndex: 2, position: \"absolute\"}} invisible={false}>\n                    <CircularProgress color=\"inherit\" />\n                </Backdrop>\n                { openLicense &&\n                    <MythicDisplayTextDialog \n                        onClose={()=>{setOpenLicense(false);}} \n                        title={\"MITRE ATT&CK Usage License\"} \n                        maxWidth={\"md\"} \n                        fullWidth={true} \n                        value={mitreLicense} \n                        open={openLicense}\n                    />\n                }\n                {openFilterTasks &&\n                    <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openFilterTasks}\n                        onClose={()=>{setOpenFilterTasks(false);}} \n                        innerDialog={<SelectPayloadTypeDialog onClose={()=>{setOpenFilterTasks(false);}} onSubmit={onSubmitGetTasksFiltered} />}\n                    />\n                }\n                {openFilterCommands &&\n                    <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openFilterCommands}\n                        onClose={()=>{setOpenFilterCommands(false);}} \n                        innerDialog={<SelectPayloadTypeDialog onClose={()=>{setOpenFilterCommands(false);}} onSubmit={onSubmitGetCommandsFiltered} />}\n                    />\n                }\n                {tactics.map( t => (\n                    <MitreGridColumn key={t} column={entries[t]} showCountGrouping={showCountGrouping} />\n                ))}\n            </div>\n        </div>\n    )\n}\n\n","import React from 'react';\nimport { MitreGrid } from './MitreGrid';\nimport {useQuery, gql, useLazyQuery} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { Backdrop } from '@material-ui/core';\nimport {CircularProgress} from '@material-ui/core';\n\nconst Get_MITREATTACK = gql`\nquery GetMitreAttack {\n  attack(order_by: {t_num: asc}){\n    id\n    name\n    t_num\n    os\n    tactic\n  }\n}\n`;\nconst Get_TaskAttacks= gql`\nquery GetMitreTaskAttack($operation_id: Int!) {\n  attacktask(where: {task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n    attack_id\n    task {\n      id\n      command_name\n      comment\n      display_params\n      callback {\n        id\n        payload {\n          payloadtype {\n            ptype\n          }\n        }\n      }\n    }\n  }\n}\n`;\nconst Get_TaskAttacksFiltered = gql`\nquery GetMitreTaskAttack($operation_id: Int!, $payload_type: String!) {\n  attacktask(where: {task: {callback: {operation_id: {_eq: $operation_id}, payload: {payloadtype: {ptype: {_eq: $payload_type}}}}}}) {\n    attack_id\n    task {\n      id\n      command_name\n      comment\n      display_params\n      callback {\n        id\n        payload {\n          payloadtype {\n            ptype\n          }\n        }\n      }\n    }\n  }\n}\n`;\nconst Get_CommandAttacks= gql`\nquery GetMitreCommandAttack{\n  attackcommand {\n    attack_id\n    command {\n      cmd\n      payloadtype {\n        ptype\n      }\n    }\n  }\n}\n`;\nconst Get_CommandAttacksFiltered = gql`\nquery GetMitreCommandAttack($payload_type: String!){\n  attackcommand(where: {command: {payloadtype: {ptype: {_eq: $payload_type}}}}) {\n    attack_id\n    command {\n      cmd\n      payloadtype {\n        ptype\n      }\n    }\n  }\n}\n`;\n\nexport function MitreAttack(props){\n    const me = useReactiveVar(meState);\n    const [backdropOpen, setBackdropOpen] = React.useState(true);\n    const [mitreAttack, setMitreAttack] = React.useState({\n      \"Reconnaissance\": {rows: [], tactic: \"Reconnaissance\", commands: 0, tasks: 0},\n      \"Resource Development\": {rows: [], tactic: \"Resource Development\", commands: 0, tasks: 0},\n      \"Initial Access\": {rows: [], tactic: \"Initial Access\", commands: 0, tasks: 0},\n      \"Execution\": {rows: [], tactic: \"Execution\", commands: 0, tasks: 0},\n      \"Persistence\": {rows: [], tactic: \"Persistence\", commands: 0, tasks: 0},\n      \"Privilege Escalation\": {rows: [], tactic: \"Privilege Escalation\", commands: 0, tasks: 0},\n      \"Defense Evasion\": {rows: [], tactic: \"Defense Evasion\", commands: 0, tasks: 0},\n      \"Credential Access\": {rows: [], tactic: \"Credential Access\", commands: 0, tasks: 0},\n      \"Discovery\": {rows: [], tactic: \"Discovery\", commands: 0, tasks: 0},\n      \"Lateral Movement\": {rows: [], tactic: \"Lateral Movement\", commands: 0, tasks: 0},\n      \"Collection\": {rows: [], tactic: \"Collection\", commands: 0, tasks: 0},\n      \"Command And Control\": {rows: [], tactic: \"Command And Control\", commands: 0, tasks: 0},\n      \"Exfiltration\": {rows: [], tactic: \"Exfiltration\", commands: 0, tasks: 0},\n      \"Impact\": {rows: [], tactic: \"Impact\", commands: 0, tasks: 0},\n    });\n    \n    const [getCommands] = useLazyQuery(Get_CommandAttacks,{\n      onError: data => {\n        console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        let attackCommands = [...data.attackcommand];\n        let updatingMitre = {...mitreAttack};\n        for(const key in updatingMitre){\n          let column_total = 0;\n          for(let i = 0; i < updatingMitre[key].rows.length; i++){\n            // updatingMitre[key].rows[i] is a specific cell in the attack matrix\n            // now check if there's a data.attackcommand entry with attack_id == updatingMitre[key].rows[i].id\n            updatingMitre[key].rows[i].commands = [];\n            attackCommands = attackCommands.filter( (attackcommand) => {\n              //console.log(attackcommand, updatingMitre[key].rows[i]);\n              if(attackcommand.attack_id === updatingMitre[key].rows[i].id){\n                updatingMitre[key].rows[i].commands.push({...attackcommand.command});\n                // we've already added this entry from data.attackcommand, so not bother processing it for the next row/column\n                return false;\n              }\n              return true;\n            });\n            column_total += updatingMitre[key].rows[i].commands.length;\n          }\n          updatingMitre[key].commands = column_total;\n        }\n        setMitreAttack(updatingMitre);\n      }\n    });\n    const [getCommandsFiltered] = useLazyQuery(Get_CommandAttacksFiltered,{\n      onError: data => {\n        console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        let attackCommands = [...data.attackcommand];\n        let updatingMitre = {...mitreAttack};\n        for(const key in updatingMitre){\n          let column_total = 0;\n          for(let i = 0; i < updatingMitre[key].rows.length; i++){\n            // updatingMitre[key].rows[i] is a specific cell in the attack matrix\n            // now check if there's a data.attackcommand entry with attack_id == updatingMitre[key].rows[i].id\n            updatingMitre[key].rows[i].commands = [];\n            attackCommands = attackCommands.filter( (attackcommand) => {\n              //console.log(attackcommand, updatingMitre[key].rows[i]);\n              if(attackcommand.attack_id === updatingMitre[key].rows[i].id){\n                updatingMitre[key].rows[i].commands.push({...attackcommand.command});\n                // we've already added this entry from data.attackcommand, so not bother processing it for the next row/column\n                return false;\n              }\n              return true;\n            });\n            column_total += updatingMitre[key].rows[i].commands.length;\n          }\n          updatingMitre[key].commands = column_total;\n        }\n        setMitreAttack(updatingMitre);\n      }\n    });\n    const [getTasks] = useLazyQuery(Get_TaskAttacks,{\n      onError: data => {\n        console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n\n        let attackTasks = [...data.attacktask];\n        let updatingMitre = {...mitreAttack};\n        for(const key in updatingMitre){\n          let column_total = 0;\n          for(let i = 0; i < updatingMitre[key].rows.length; i++){\n            // updatingMitre[key].rows[i] is a specific cell in the attack matrix\n            // now check if there's a data.attackcommand entry with attack_id == updatingMitre[key].rows[i].id\n            updatingMitre[key].rows[i].tasks = [];\n            attackTasks = attackTasks.filter( (attacktask) => {\n              //console.log(attackcommand, updatingMitre[key].rows[i]);\n              if(attacktask.attack_id === updatingMitre[key].rows[i].id){\n                updatingMitre[key].rows[i].tasks.push({...attacktask.task});\n                // we've already added this entry from data.attackcommand, so not bother processing it for the next row/column\n                return false;\n              }\n              return true;\n            });\n            column_total += updatingMitre[key].rows[i].tasks.length;\n          }\n          updatingMitre[key].tasks = column_total;\n        }\n        setMitreAttack(updatingMitre);\n      }\n    });\n    const [getTasksFiltered] = useLazyQuery(Get_TaskAttacksFiltered,{\n      onError: data => {\n        console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n\n        let attackTasks = [...data.attacktask];\n        let updatingMitre = {...mitreAttack};\n        for(const key in updatingMitre){\n          let column_total = 0;\n          for(let i = 0; i < updatingMitre[key].rows.length; i++){\n            // updatingMitre[key].rows[i] is a specific cell in the attack matrix\n            // now check if there's a data.attackcommand entry with attack_id == updatingMitre[key].rows[i].id\n            updatingMitre[key].rows[i].tasks = [];\n            attackTasks = attackTasks.filter( (attacktask) => {\n              //console.log(attackcommand, updatingMitre[key].rows[i]);\n              if(attacktask.attack_id === updatingMitre[key].rows[i].id){\n                updatingMitre[key].rows[i].tasks.push({...attacktask.task});\n                // we've already added this entry from data.attackcommand, so not bother processing it for the next row/column\n                return false;\n              }\n              return true;\n            });\n            column_total += updatingMitre[key].rows[i].tasks.length;\n          }\n          updatingMitre[key].tasks = column_total;\n        }\n        setMitreAttack(updatingMitre);\n      }\n    });\n    useQuery(Get_MITREATTACK, {\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        const mitre = data.attack.reduce( (prev, cur) => {\n          const entry = {...cur, os: JSON.parse(cur[\"os\"]), tactic: JSON.parse(cur[\"tactic\"]), commands: [], tasks: []};\n          let p = {...prev};\n          for(let i = 0; i < entry.tactic.length; i++){\n            if(p[entry.tactic[i]]){\n              // the tactic exists already, so we can just add this as a row\n              p[entry.tactic[i]].rows.push(entry);\n            }else{\n              p[entry.tactic[i]] = {rows: [entry], tactic: entry.tactic[i], commands: 0, tasks: 0};\n            }\n          }\n          return {...p};\n        }, {});\n        setMitreAttack(mitre);\n        setBackdropOpen(false);\n      },\n      onError: (error) => {\n        snackActions.error(\"Failed to fetch MITRE data: \" + error.toString());\n      }\n    });\n    const onGetTasks = () => {\n      getTasks({variables: {operation_id: me?.user?.current_operation_id || 0}});\n    }\n    const onGetTasksFiltered = (payload_type) => {\n      getTasksFiltered({variables: {operation_id: me?.user?.current_operation_id || 0, payload_type: payload_type}});\n    }\n    const onGetCommandsFiltered = (payload_type) => {\n      getCommandsFiltered({variables: {payload_type: payload_type}});\n    }\n    return (\n      <React.Fragment>\n        <Backdrop open={backdropOpen} style={{zIndex: 2, position: \"absolute\"}} invisible={false}>\n            <CircularProgress color=\"inherit\" disableShrink />\n        </Backdrop>\n        <MitreGrid entries={mitreAttack} \n          onGetCommands={getCommands} \n          onGetTasks={onGetTasks} \n          onGetTasksFiltered={onGetTasksFiltered}\n          onGetCommandsFiltered={onGetCommandsFiltered}\n          />\n      </React.Fragment>\n        \n    );\n} \n","import { LoginForm } from './pages/Login/LoginForm';\nimport { Settings } from './pages/Settings/Settings';\nimport { PayloadTypesC2Profiles } from './pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles';\nimport { CreatePayload } from './pages/CreatePayload/CreatePayload';\nimport { CreatePayloadWrapper } from './pages/CreateWrapper/CreatePayload';\nimport { EventFeed } from './pages/EventFeed/EventFeed';\nimport { Operations } from './pages/Operations/Operations';\nimport { BrowserScripts } from './pages/BrowserScripts/BrowserScripts';\nimport { Payloads } from './pages/Payloads/Payloads';\nimport { ExpandedCallback } from './pages/ExpandedCallback/ExpandedCallback';\nimport { Home } from './pages/Home/Home';\nimport { LoggedInRoute } from './utilities/LoggedInRoute';\nimport { Callbacks } from './pages/Callbacks/Callbacks';\nimport { Search } from './pages/Search/Search';\nimport React from 'react';\nimport { TopAppBar } from './TopAppBar';\nimport { useReactiveVar } from '@apollo/client';\nimport { useDarkMode } from './utilities/useDarkMode';\nimport { SnackbarProvider } from 'notistack';\nimport { SingleTaskView } from './pages/SingleTaskView/SingleTaskView';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { GlobalStyles } from '../themes/GlobalStyles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { SnackbarUtilsConfigurator } from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport { Reporting } from './pages/Reporting/Reporting';\nimport { MitreAttack } from './pages/MITRE_ATTACK/MitreAttack';\n//background-color: #282c34;\nimport { Route, Switch } from 'react-router-dom';\n\nexport function App(props) {\n    const me = useReactiveVar(meState);\n    const [themeMode, themeToggler] = useDarkMode();\n    const theme = React.useMemo(\n        () =>\n            createMuiTheme({\n                palette: {\n                    primary: {\n                        main: '#7f93c0',\n                    },\n                    secondary: {\n                        main: '#a791c3',\n                    },\n                    error: {\n                        main: '#f44336',\n                    },\n                    warning: {\n                        main: '#ff9800',\n                    },\n                    info: {\n                        main: '#2196f3',\n                    },\n                    disabled: {\n                        main: 'rgba(0, 0, 0, 0.38)',\n                    },\n                    type: themeMode,\n                    background: {\n                        default: themeMode === 'dark' ? 'rgb(37, 41, 51)' : '#ffffff',\n                        paper: themeMode === 'dark' ? 'rgb(50, 60, 69)' : '#ffffff',\n                        contrast: themeMode === 'dark' ? '#ffffff' : 'rgb(37, 41, 51)',\n                    },\n                    text: {\n                        primary: themeMode === 'dark' ? '#fff' : '#000',\n                        secondary: themeMode === 'dark' ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.54)',\n                        contrast: themeMode === 'dark' ? '#000' : '#fff',\n                    },\n                    textBackgroundColor: themeMode === 'dark' ? '#74828b' : '#d9dbdc',\n                    textBackgroundColorMythic: themeMode === 'dark' ? '#436b9f' : '#aadcf5',\n                    textBackgroundColorSuccess: themeMode === 'dark' ? '#09a21a' : '#70e373',\n                    textBackgroundColorError: themeMode === 'dark' ? '#9f1616' : '#f19da3',\n                    graphGroup: themeMode === 'dark' ? '#394c5d' : '#d3d7e8',\n                },\n                folderColor: '#f1d592',\n                tableHeader: '#484848',\n                tableBorder: themeMode === 'dark' ? 'rgba(81,81,81,1)' : 'rgba(224,224,224,1)',\n                tableHover: themeMode === 'dark' ? 'rgba(85,88,93)' : 'rgba(245, 245, 245)',\n                pageHeader: {\n                    main: '#827E80',\n                },\n                pageHeaderText: {\n                    main: 'white',\n                },\n            }),\n        [themeMode]\n    );\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyles theme={theme} />\n            <CssBaseline />\n            <SnackbarProvider\n                maxSnack={5}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}>\n                <SnackbarUtilsConfigurator />\n                <div style={{ maxHeight: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>\n                    <div style={{ minHeight: '54px', flexGrow: 0 }}>\n                        {me.loggedIn && me.user !== undefined && me.user !== null ? (\n                            <TopAppBar theme={themeMode} toggleTheme={themeToggler} />\n                        ) : null}\n                    </div>\n                    <div style={{ margin: '0px 16px 0px 16px', flexGrow: 1, display: 'flex', flexDirection: 'column', height: \"calc(100% - 54px)\", maxHeight: \"calc(100% - 54px)\", }}>\n                        <Switch>\n                            <LoggedInRoute exact path='/new' component={Home} />\n                            <Route exact path='/new/login' component={LoginForm} />\n                            <LoggedInRoute exact path='/new/settings' component={Settings} />\n                            <LoggedInRoute exact path='/new/payloadtypes' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/eventfeed' component={EventFeed} />\n                            <LoggedInRoute exact path='/new/createpayload' component={CreatePayload} />\n                            <LoggedInRoute exact path='/new/createwrapper' component={CreatePayloadWrapper} />\n                            <LoggedInRoute exact path='/new/payloads' component={Payloads} />\n                            <LoggedInRoute exact path='/new/c2profiles' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/services/' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/callbacks' component={Callbacks} />\n                            <LoggedInRoute path='/new/search' component={Search} />\n                            <LoggedInRoute exact path='/new/browserscripts' component={BrowserScripts} />\n                            <LoggedInRoute exact path='/new/task/:taskId' component={SingleTaskView} />\n                            <LoggedInRoute exact path='/new/tasks/by_range' component={SingleTaskView} />\n                            <LoggedInRoute exact path='/new/operations' component={Operations} />\n                            <LoggedInRoute exact path='/new/callbacks/:callbackId' component={ExpandedCallback} />\n                            <LoggedInRoute exact path='/new/reporting' component={Reporting} />\n                            <LoggedInRoute exact path='/new/mitre' component={MitreAttack} />\n                        </Switch>\n                    </div>\n                </div>\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n}\n","//import './wdyr';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport { ApolloProvider, ApolloClient, InMemoryCache, from, split, HttpLink } from '@apollo/client';\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport { successfulRefresh, FailedRefresh } from './cache';\nimport { onError } from \"@apollo/client/link/error\";\nimport { RetryLink } from \"@apollo/client/link/retry\";\nimport { SubscriptionClient } from 'subscriptions-transport-ws'\nimport { getMainDefinition } from '@apollo/client/utilities'\nimport { setContext } from '@apollo/client/link/context';\nimport {snackActions} from './components/utilities/Snackbar';\nimport MessageTypes from 'subscriptions-transport-ws/dist/message-types';\nimport jwt_decode from 'jwt-decode';\nimport {meState} from './cache';\n\nexport const mythicVersion = \"2.3.7\";\nexport const mythicUIVersion = \"0.0.22\";\n\nlet fetchingNewToken = false;\n\nconst cache = new InMemoryCache({\n    typePolicies: {\n        Query: {\n            fields: {\n                operationeventlog: {\n                    \n                },\n                callback: {\n                  \n                }\n            }\n        }\n    }\n});\n\nconst retryLink = new RetryLink({\n  delay: {\n    initial: 20,\n    max: 300,\n    jitter: true\n  },\n  attempts: {\n    max: 2,\n    retryIf: (error, _operation) => !!error\n  }\n});\nconst httpLink = new HttpLink({\n    uri: window.location.origin + \"/graphql/\",\n    options: {\n        reconnect: true,   \n        connectionParams: {\n          headers: {\n            Authorization: () => `Bearer ${localStorage.getItem('access_token')}`\n          }\n       }     \n    }\n});\nexport const isJWTValid = () => {\n  let access_token = localStorage.getItem(\"access_token\");\n  //console.log(\"in isJWTValid\", \"access_token\", access_token);\n  if(access_token){\n    const decoded_token = jwt_decode(access_token);\n    if(Date.now() > decoded_token.exp * 1000){\n      //console.log(\"exp is expired: \", decoded_token.exp * 1000, Date.now())\n      return false;\n    }else{\n      return true;\n    }\n  }else{\n    return false;\n  }\n}\nconst authLink = setContext( async (_, {headers}) => {\n  // get the authentication token from local storage if it exists\n  // return the headers to the context so httpLink can read them\n  while(fetchingNewToken){\n    // we need to wait until we're no longer fetching a token\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  }\n    let access_token = localStorage.getItem('access_token');\n    if(access_token){\n      const decoded_token = jwt_decode(access_token);\n      //console.log(decoded_token);\n      // JWT lifetime is 4 hours. If there's 2hrs or less left of the JWT, update it\n      let diff = (decoded_token.exp * 1000) - Date.now();\n      let twoHours = 7200000; // 2 hours in miliseconds, this is half the JWT lifetime\n      // we want to make sure we try to get a new access_token while the current one is still active or it'll fail\n      if(diff < twoHours || !isJWTValid()){\n        console.log(\"token is at its half life or less, try to get a new token\");\n        const updated = await GetNewToken();\n        //console.log(\"updated?\", updated);\n        if(updated){\n          return{\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            }\n          }\n        }else{\n          console.log(\"update failed!\");\n          FailedRefresh();\n        }\n      }else{\n        //console.log(\"No update needed, access_token still valid\");\n      }\n    }else{\n      console.log(\"no access token\");\n      FailedRefresh();\n    }\n    //console.log(\"should be called after updating if needed\");\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      }\n    }\n});\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  console.log(\"errors?\");\n  try{\n    if (graphQLErrors) {\n      console.log(\"[graphQLError]\", graphQLErrors);\n      for (let err of graphQLErrors) {\n        switch (err.extensions.code) {\n          case 'forbidden':\n              snackActions.error(err.message);\n              break;\n          case 'access-denied':\n            //fallsthrough\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in graphql\");\n            // modify the operation context with a new token\n            /*\n            return promiseToObservable(\n              GetNewToken())\n              .flatMap(() => {\n              // retry the request, returning the new observable\n              operation.setContext({\n                headers: {\n                 Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n                },\n              });\n              // retry the request, returning the new observable\n              console.log(\"forwarding operation in promise thingy\", localStorage.getItem(\"access_token\"))\n              return forward(operation);\n              });\n              */\n             console.log(\"would have asked for new token, but auth link will handle it\");\n          case 'validation-failed':\n            console.log(err);\n            return;\n          default:\n              console.log(err);\n              snackActions.error(err.message);\n        }\n      }\n    }\n    if (networkError) {\n      console.log(\"[Network error]\", networkError);\n      \n      if(networkError.extensions === undefined){\n        snackActions.error(\"Failed to connect to Mythic, please refresh\");\n        FailedRefresh();\n        restartWebsockets();\n        window.location = \"/new/login\";\n        return;\n      }\n      switch (networkError.extensions.code) {\n          case 'access-denied':\n            snackActions.warning(\"Access Denied\");\n            break;\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in network\");\n              FailedRefresh();\n              restartWebsockets();\n              window.location = \"/new/login\";\n              break;\n          default:\n              console.log(networkError);\n        }\n        \n    }\n  }catch(error){\n    snackActions.error(\"Failed to connect to Mythic, please refresh\");\n    console.log(error);\n    restartWebsockets();\n    window.location = \"/new/login\";\n    return;\n  }\n});\n\nconst GetNewToken = async () =>{\n  fetchingNewToken = true;\n  const requestOptions = {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\"refresh_token\": localStorage.getItem(\"refresh_token\"),\n        \"access_token\": localStorage.getItem(\"access_Token\")})\n  };\n  const response = await fetch('/refresh', requestOptions);\n  const json = response.json().then(data => {\n          console.log(data)\n          if(\"access_token\" in data){\n              successfulRefresh(data);\n              console.log(\"successfully got new access_token\");\n              fetchingNewToken = false;\n              return true;\n          }else{\n              console.log(\"calling FailedRefresh from GetNewToken call\");\n              FailedRefresh();\n              fetchingNewToken = false;\n              return false;\n          }\n      }).catch(error => {\n          console.log(\"Error trying to get json response in GetNewToken\", error);\n          console.log(response);\n          FailedRefresh();\n          fetchingNewToken = false;\n          return false;\n      });\n  return json;\n}\nconst websocketAddress =() =>{\n    return window.location.protocol === \"https:\" ? \"wss://\" + window.location.host + \"/graphql/\" : \"ws://\" + window.location.host + \"/graphql/\";\n}\nconst websocketClient = new SubscriptionClient(websocketAddress(), {\n  reconnect: true,\n  reconnectionAttempts: 10,\n  connectionParams: () => {\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`\n      }\n    }\n  }\n})\nconst wsLink = new WebSocketLink(websocketClient);\n/*\nconst websocketLink = new WebSocketLink({\n     uri: websocketAddress(),\n     options: {\n       reconnect: true,\n       lazy: true,\n       connectionParams: async () => ({\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       })\n     }\n    });\n  */\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query)\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    )\n  },\n  wsLink,\n  httpLink\n)\nexport const apolloClient = new ApolloClient({\n   link: from([authLink, errorLink, retryLink, authLink.concat(splitLink)]),\n    cache\n  });\nexport function restartWebsockets () {\n    // Copy current operations\n    const operations = Object.assign({}, websocketClient.operations)\n  \n    // Close connection\n    websocketClient.close(true)\n  \n    // Open a new one\n    websocketClient.connect()\n  \n    // Push all current operations to the new connection\n    Object.keys(operations).forEach(id => {\n      websocketClient.sendMessage(\n        id,\n        MessageTypes.GQL_START,\n        operations[id].options\n      )\n    })\n  }\n  // if the user refreshes the page, we lose all react tracking, so try to reload from localstorage first\nif(localStorage.getItem(\"access_token\") !== null){\n  if(isJWTValid(localStorage.getItem(\"access_token\"))){\n      if(localStorage.getItem(\"user\") !== null){\n          meState({\n              loggedIn: true,\n              access_token: localStorage.getItem(\"access_token\"),\n              refresh_token: localStorage.getItem(\"refresh_token\"),\n              user: JSON.parse(localStorage.getItem(\"user\"))\n          })\n      }\n  }else{\n      //leave meState as a blank value to force new login\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"refresh_token\");\n      localStorage.removeItem(\"user\");\n  }\n}\nReactDOM.render(\n  <React.StrictMode>\n        <ApolloProvider client={apolloClient}>\n            <Router>\n                <App key=\"App\"/>\n            </Router>\n        </ApolloProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}